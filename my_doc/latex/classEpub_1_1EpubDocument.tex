\hypertarget{classEpub_1_1EpubDocument}{\section{Epub\+:\+:Epub\+Document Class Reference}
\label{classEpub_1_1EpubDocument}\index{Epub\+::\+Epub\+Document@{Epub\+::\+Epub\+Document}}
}


{\ttfamily \#include $<$epubdocument.\+h$>$}

Inheritance diagram for Epub\+:\+:Epub\+Document\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classEpub_1_1EpubDocument}
\end{center}
\end{figure}
\subsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{classEpub_1_1EpubDocument_a8727955892e8fa3c5eaef8d9d3ae7c8f}{Multimedia} \{ \hyperlink{classEpub_1_1EpubDocument_a8727955892e8fa3c5eaef8d9d3ae7c8fa75a15290b8e57ccaad8ff2dee9593636}{Movie\+Resource} = 4, 
\hyperlink{classEpub_1_1EpubDocument_a8727955892e8fa3c5eaef8d9d3ae7c8fa858f54dd2eb2907bbf1be8fbe0d1c054}{Audio\+Resource} = 5
 \}
\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classEpub_1_1EpubDocument_ab359edd4365ca02ec3039245910987dd}{Epub\+Document} (const Q\+String \&file\+Name)
\item 
bool \hyperlink{classEpub_1_1EpubDocument_ad47e936fccea93a28d1ebb0cf3b36624}{is\+Valid} ()
\item 
\hyperlink{classEpub_1_1EpubDocument_aa2390e6317e4ba6e049bbec5aade68e2}{$\sim$\+Epub\+Document} ()
\item 
struct epub $\ast$ \hyperlink{classEpub_1_1EpubDocument_a37cb6d97564a7764b22e44523889267e}{get\+Epub} ()
\item 
void \hyperlink{classEpub_1_1EpubDocument_a6e36681fb7d345bf885150d884513fdf}{set\+Current\+Sub\+Document} (const Q\+String \&doc)
\item 
int \hyperlink{classEpub_1_1EpubDocument_ae8f068a3e013d7736293a195986d71cb}{max\+Content\+Height} () const 
\item 
int \hyperlink{classEpub_1_1EpubDocument_a214f084adb359a132c522ffec0d61aeb}{max\+Content\+Width} () const 
\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual Q\+Variant \hyperlink{classEpub_1_1EpubDocument_a5977d43df31dc940280f6fc80eb6bc75}{load\+Resource} (int type, const Q\+Url \&name)
\end{DoxyCompactItemize}
\subsection*{Friends}
\begin{DoxyCompactItemize}
\item 
class \hyperlink{classEpub_1_1EpubDocument_aa98b6fcd5fef1695696973c9f993323d}{Converter}
\end{DoxyCompactItemize}


\subsection{Detailed Description}


Definition at line 22 of file epubdocument.\+h.



\subsection{Member Enumeration Documentation}
\hypertarget{classEpub_1_1EpubDocument_a8727955892e8fa3c5eaef8d9d3ae7c8f}{\index{Epub\+::\+Epub\+Document@{Epub\+::\+Epub\+Document}!Multimedia@{Multimedia}}
\index{Multimedia@{Multimedia}!Epub\+::\+Epub\+Document@{Epub\+::\+Epub\+Document}}
\subsubsection[{Multimedia}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf Epub\+::\+Epub\+Document\+::\+Multimedia}}}\label{classEpub_1_1EpubDocument_a8727955892e8fa3c5eaef8d9d3ae7c8f}
\begin{Desc}
\item[Enumerator]\par
\begin{description}
\index{Movie\+Resource@{Movie\+Resource}!Epub\+::\+Epub\+Document@{Epub\+::\+Epub\+Document}}\index{Epub\+::\+Epub\+Document@{Epub\+::\+Epub\+Document}!Movie\+Resource@{Movie\+Resource}}\item[{\em 
\hypertarget{classEpub_1_1EpubDocument_a8727955892e8fa3c5eaef8d9d3ae7c8fa75a15290b8e57ccaad8ff2dee9593636}{Movie\+Resource}\label{classEpub_1_1EpubDocument_a8727955892e8fa3c5eaef8d9d3ae7c8fa75a15290b8e57ccaad8ff2dee9593636}
}]\index{Audio\+Resource@{Audio\+Resource}!Epub\+::\+Epub\+Document@{Epub\+::\+Epub\+Document}}\index{Epub\+::\+Epub\+Document@{Epub\+::\+Epub\+Document}!Audio\+Resource@{Audio\+Resource}}\item[{\em 
\hypertarget{classEpub_1_1EpubDocument_a8727955892e8fa3c5eaef8d9d3ae7c8fa858f54dd2eb2907bbf1be8fbe0d1c054}{Audio\+Resource}\label{classEpub_1_1EpubDocument_a8727955892e8fa3c5eaef8d9d3ae7c8fa858f54dd2eb2907bbf1be8fbe0d1c054}
}]\end{description}
\end{Desc}


Definition at line 32 of file epubdocument.\+h.


\begin{DoxyCode}
32 \{ \hyperlink{classEpub_1_1EpubDocument_a8727955892e8fa3c5eaef8d9d3ae7c8fa75a15290b8e57ccaad8ff2dee9593636}{MovieResource} = 4, \hyperlink{classEpub_1_1EpubDocument_a8727955892e8fa3c5eaef8d9d3ae7c8fa858f54dd2eb2907bbf1be8fbe0d1c054}{AudioResource} = 5 \};
\end{DoxyCode}


\subsection{Constructor \& Destructor Documentation}
\hypertarget{classEpub_1_1EpubDocument_ab359edd4365ca02ec3039245910987dd}{\index{Epub\+::\+Epub\+Document@{Epub\+::\+Epub\+Document}!Epub\+Document@{Epub\+Document}}
\index{Epub\+Document@{Epub\+Document}!Epub\+::\+Epub\+Document@{Epub\+::\+Epub\+Document}}
\subsubsection[{Epub\+Document}]{\setlength{\rightskip}{0pt plus 5cm}Epub\+Document\+::\+Epub\+Document (
\begin{DoxyParamCaption}
\item[{const Q\+String \&}]{file\+Name}
\end{DoxyParamCaption}
)}}\label{classEpub_1_1EpubDocument_ab359edd4365ca02ec3039245910987dd}


Definition at line 32 of file epubdocument.\+cpp.


\begin{DoxyCode}
32                                                   : QTextDocument(),
33     padding(20)
34 \{
35   mEpub = epub\_open(qPrintable(fileName), 3);
36 
37   setPageSize(QSizeF(600, 800));
38 \}
\end{DoxyCode}
\hypertarget{classEpub_1_1EpubDocument_aa2390e6317e4ba6e049bbec5aade68e2}{\index{Epub\+::\+Epub\+Document@{Epub\+::\+Epub\+Document}!````~Epub\+Document@{$\sim$\+Epub\+Document}}
\index{````~Epub\+Document@{$\sim$\+Epub\+Document}!Epub\+::\+Epub\+Document@{Epub\+::\+Epub\+Document}}
\subsubsection[{$\sim$\+Epub\+Document}]{\setlength{\rightskip}{0pt plus 5cm}Epub\+Document\+::$\sim$\+Epub\+Document (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classEpub_1_1EpubDocument_aa2390e6317e4ba6e049bbec5aade68e2}


Definition at line 45 of file epubdocument.\+cpp.


\begin{DoxyCode}
45                             \{
46 
47   \textcolor{keywordflow}{if} (mEpub)
48     epub\_close(mEpub);
49 
50   epub\_cleanup();
51 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\hypertarget{classEpub_1_1EpubDocument_a37cb6d97564a7764b22e44523889267e}{\index{Epub\+::\+Epub\+Document@{Epub\+::\+Epub\+Document}!get\+Epub@{get\+Epub}}
\index{get\+Epub@{get\+Epub}!Epub\+::\+Epub\+Document@{Epub\+::\+Epub\+Document}}
\subsubsection[{get\+Epub}]{\setlength{\rightskip}{0pt plus 5cm}struct epub $\ast$ Epub\+Document\+::get\+Epub (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classEpub_1_1EpubDocument_a37cb6d97564a7764b22e44523889267e}


Definition at line 53 of file epubdocument.\+cpp.


\begin{DoxyCode}
54 \{
55   \textcolor{keywordflow}{return} mEpub;
56 \}
\end{DoxyCode}
\hypertarget{classEpub_1_1EpubDocument_ad47e936fccea93a28d1ebb0cf3b36624}{\index{Epub\+::\+Epub\+Document@{Epub\+::\+Epub\+Document}!is\+Valid@{is\+Valid}}
\index{is\+Valid@{is\+Valid}!Epub\+::\+Epub\+Document@{Epub\+::\+Epub\+Document}}
\subsubsection[{is\+Valid}]{\setlength{\rightskip}{0pt plus 5cm}bool Epub\+Document\+::is\+Valid (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classEpub_1_1EpubDocument_ad47e936fccea93a28d1ebb0cf3b36624}


Definition at line 40 of file epubdocument.\+cpp.


\begin{DoxyCode}
41 \{
42   \textcolor{keywordflow}{return} (mEpub?\textcolor{keyword}{true}:\textcolor{keyword}{false});
43 \}
\end{DoxyCode}
\hypertarget{classEpub_1_1EpubDocument_a5977d43df31dc940280f6fc80eb6bc75}{\index{Epub\+::\+Epub\+Document@{Epub\+::\+Epub\+Document}!load\+Resource@{load\+Resource}}
\index{load\+Resource@{load\+Resource}!Epub\+::\+Epub\+Document@{Epub\+::\+Epub\+Document}}
\subsubsection[{load\+Resource}]{\setlength{\rightskip}{0pt plus 5cm}Q\+Variant Epub\+Document\+::load\+Resource (
\begin{DoxyParamCaption}
\item[{int}]{type, }
\item[{const Q\+Url \&}]{name}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}}\label{classEpub_1_1EpubDocument_a5977d43df31dc940280f6fc80eb6bc75}


Definition at line 79 of file epubdocument.\+cpp.


\begin{DoxyCode}
80 \{
81   \textcolor{keywordtype}{int} \hyperlink{synctex__parser_8c_aa23c661441688350614bd6a350d2b6ff}{size};
82   \textcolor{keywordtype}{char} *data;
83 
84   \textcolor{comment}{// Get the data from the epub file}
85   size = epub\_get\_data(mEpub, resourceUrl(mCurrentSubDocument, name.toString()).toUtf8(), &data);
86 
87   QVariant resource;
88 
89   \textcolor{keywordflow}{if} (data) \{
90     \textcolor{keywordflow}{switch}(type) \{
91     \textcolor{keywordflow}{case} QTextDocument::ImageResource:\{
92       QImage img = QImage::fromData((\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *)data, size);
93       \textcolor{keyword}{const} \textcolor{keywordtype}{int} maxHeight = \hyperlink{classEpub_1_1EpubDocument_ae8f068a3e013d7736293a195986d71cb}{maxContentHeight}();
94       \textcolor{keyword}{const} \textcolor{keywordtype}{int} maxWidth = \hyperlink{classEpub_1_1EpubDocument_a214f084adb359a132c522ffec0d61aeb}{maxContentWidth}();
95       \textcolor{keywordflow}{if}(img.height() > maxHeight)
96         img = img.scaledToHeight(maxHeight);
97       \textcolor{keywordflow}{if}(img.width() > maxWidth)
98         img = img.scaledToWidth(maxWidth);
99       resource.setValue(img);
100       \textcolor{keywordflow}{break};
101     \}
102     \textcolor{keywordflow}{case} QTextDocument::StyleSheetResource: \{
103       QString css = QString::fromUtf8(data);
104       checkCSS(css);
105       resource.setValue(css);
106       \textcolor{keywordflow}{break};
107     \}
108     \textcolor{keywordflow}{case} \hyperlink{classEpub_1_1EpubDocument_a8727955892e8fa3c5eaef8d9d3ae7c8fa75a15290b8e57ccaad8ff2dee9593636}{EpubDocument::MovieResource}: \{
109       QTemporaryFile *tmp = \textcolor{keyword}{new} QTemporaryFile(QString(\textcolor{stringliteral}{"%1/okrXXXXXX"}).arg(QDir::tempPath()),\textcolor{keyword}{this});
110       \textcolor{keywordflow}{if}(!tmp->open()) kWarning() << \textcolor{stringliteral}{"EPUB : error creating temporary video file"};
111       \textcolor{keywordflow}{if}(tmp->write(data,size) == -1) kWarning() << \textcolor{stringliteral}{"EPUB : error writing data"} << tmp->errorString();
112       tmp->flush();
113       resource.setValue(tmp->fileName());
114       \textcolor{keywordflow}{break};
115     \}
116     \textcolor{keywordflow}{case} \hyperlink{classEpub_1_1EpubDocument_a8727955892e8fa3c5eaef8d9d3ae7c8fa858f54dd2eb2907bbf1be8fbe0d1c054}{EpubDocument::AudioResource}: \{
117       QByteArray ba(data,size);
118       resource.setValue(ba);
119       \textcolor{keywordflow}{break};
120     \}
121     \textcolor{keywordflow}{default}:
122       resource.setValue(QString::fromUtf8(data));
123       \textcolor{keywordflow}{break};
124     \}
125 
126     free(data);
127   \}
128 
129   \textcolor{comment}{// add to cache}
130   addResource(type, name, resource); 
131 
132   \textcolor{keywordflow}{return} resource;
133 \}
\end{DoxyCode}
\hypertarget{classEpub_1_1EpubDocument_ae8f068a3e013d7736293a195986d71cb}{\index{Epub\+::\+Epub\+Document@{Epub\+::\+Epub\+Document}!max\+Content\+Height@{max\+Content\+Height}}
\index{max\+Content\+Height@{max\+Content\+Height}!Epub\+::\+Epub\+Document@{Epub\+::\+Epub\+Document}}
\subsubsection[{max\+Content\+Height}]{\setlength{\rightskip}{0pt plus 5cm}int Epub\+Document\+::max\+Content\+Height (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const}}\label{classEpub_1_1EpubDocument_ae8f068a3e013d7736293a195986d71cb}


Definition at line 63 of file epubdocument.\+cpp.


\begin{DoxyCode}
64 \{
65   \textcolor{keywordflow}{return} \hyperlink{classpageSize}{pageSize}().\hyperlink{classSimplePageSize_a8df6b43628bff9c8b53f26cc478640c5}{height}() - (2 * padding);
66 \}
\end{DoxyCode}
\hypertarget{classEpub_1_1EpubDocument_a214f084adb359a132c522ffec0d61aeb}{\index{Epub\+::\+Epub\+Document@{Epub\+::\+Epub\+Document}!max\+Content\+Width@{max\+Content\+Width}}
\index{max\+Content\+Width@{max\+Content\+Width}!Epub\+::\+Epub\+Document@{Epub\+::\+Epub\+Document}}
\subsubsection[{max\+Content\+Width}]{\setlength{\rightskip}{0pt plus 5cm}int Epub\+Document\+::max\+Content\+Width (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const}}\label{classEpub_1_1EpubDocument_a214f084adb359a132c522ffec0d61aeb}


Definition at line 68 of file epubdocument.\+cpp.


\begin{DoxyCode}
69 \{
70   \textcolor{keywordflow}{return} \hyperlink{classpageSize}{pageSize}().\hyperlink{classSimplePageSize_a5866f4c04635b09ec065a1fc45f9d1df}{width}() - (2 * padding);
71 \}
\end{DoxyCode}
\hypertarget{classEpub_1_1EpubDocument_a6e36681fb7d345bf885150d884513fdf}{\index{Epub\+::\+Epub\+Document@{Epub\+::\+Epub\+Document}!set\+Current\+Sub\+Document@{set\+Current\+Sub\+Document}}
\index{set\+Current\+Sub\+Document@{set\+Current\+Sub\+Document}!Epub\+::\+Epub\+Document@{Epub\+::\+Epub\+Document}}
\subsubsection[{set\+Current\+Sub\+Document}]{\setlength{\rightskip}{0pt plus 5cm}void Epub\+Document\+::set\+Current\+Sub\+Document (
\begin{DoxyParamCaption}
\item[{const Q\+String \&}]{doc}
\end{DoxyParamCaption}
)}}\label{classEpub_1_1EpubDocument_a6e36681fb7d345bf885150d884513fdf}


Definition at line 58 of file epubdocument.\+cpp.


\begin{DoxyCode}
59 \{
60   mCurrentSubDocument = KUrl::fromPath(\textcolor{stringliteral}{"/"} + doc);
61 \}
\end{DoxyCode}


\subsection{Friends And Related Function Documentation}
\hypertarget{classEpub_1_1EpubDocument_aa98b6fcd5fef1695696973c9f993323d}{\index{Epub\+::\+Epub\+Document@{Epub\+::\+Epub\+Document}!Converter@{Converter}}
\index{Converter@{Converter}!Epub\+::\+Epub\+Document@{Epub\+::\+Epub\+Document}}
\subsubsection[{Converter}]{\setlength{\rightskip}{0pt plus 5cm}friend class {\bf Converter}\hspace{0.3cm}{\ttfamily [friend]}}}\label{classEpub_1_1EpubDocument_aa98b6fcd5fef1695696973c9f993323d}


Definition at line 45 of file epubdocument.\+h.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
generators/epub/\hyperlink{epubdocument_8h}{epubdocument.\+h}\item 
generators/epub/\hyperlink{epubdocument_8cpp}{epubdocument.\+cpp}\end{DoxyCompactItemize}
