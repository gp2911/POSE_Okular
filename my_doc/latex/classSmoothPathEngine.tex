\hypertarget{classSmoothPathEngine}{\section{Smooth\+Path\+Engine Class Reference}
\label{classSmoothPathEngine}\index{Smooth\+Path\+Engine@{Smooth\+Path\+Engine}}
}


\hyperlink{classSmoothPathEngine}{Smooth\+Path\+Engine}.  




{\ttfamily \#include $<$annotationtools.\+h$>$}

Inheritance diagram for Smooth\+Path\+Engine\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classSmoothPathEngine}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classSmoothPathEngine_a3d7f3b56a3f29fc0d2e144eb10f27635}{Smooth\+Path\+Engine} (const Q\+Dom\+Element \&engine\+Element)
\item 
Q\+Rect \hyperlink{classSmoothPathEngine_a7234a32a90d2784e2459cf838a37f172}{event} (\hyperlink{classAnnotatorEngine_a00fb22eb4cb6eafb056f9066031db133}{Event\+Type} type, \hyperlink{classAnnotatorEngine_ac2e3b75e12bacbb6974d15dd53954567}{Button} button, double n\+X, double n\+Y, double x\+Scale, double y\+Scale, const \hyperlink{classOkular_1_1Page}{Okular\+::\+Page} $\ast$)
\item 
void \hyperlink{classSmoothPathEngine_a08b94551c709ae56600afd692da10717}{paint} (Q\+Painter $\ast$painter, double x\+Scale, double y\+Scale, const Q\+Rect \&)
\item 
\hyperlink{classQList}{Q\+List}$<$ \hyperlink{classOkular_1_1Annotation}{Okular\+::\+Annotation} $\ast$ $>$ \hyperlink{classSmoothPathEngine_aa1dd0f64bab0f5d94aba93557a6ba328}{end} ()
\item 
\hyperlink{classSmoothPath}{Smooth\+Path} \hyperlink{classSmoothPathEngine_aa029e01d4c38d701466498fc7c222133}{end\+Smooth\+Path} ()
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
\hyperlink{classSmoothPathEngine}{Smooth\+Path\+Engine}. 

Definition at line 84 of file annotationtools.\+h.



\subsection{Constructor \& Destructor Documentation}
\hypertarget{classSmoothPathEngine_a3d7f3b56a3f29fc0d2e144eb10f27635}{\index{Smooth\+Path\+Engine@{Smooth\+Path\+Engine}!Smooth\+Path\+Engine@{Smooth\+Path\+Engine}}
\index{Smooth\+Path\+Engine@{Smooth\+Path\+Engine}!Smooth\+Path\+Engine@{Smooth\+Path\+Engine}}
\subsubsection[{Smooth\+Path\+Engine}]{\setlength{\rightskip}{0pt plus 5cm}Smooth\+Path\+Engine\+::\+Smooth\+Path\+Engine (
\begin{DoxyParamCaption}
\item[{const Q\+Dom\+Element \&}]{engine\+Element}
\end{DoxyParamCaption}
)}}\label{classSmoothPathEngine_a3d7f3b56a3f29fc0d2e144eb10f27635}
\hyperlink{classSmoothPathEngine}{Smooth\+Path\+Engine} 

Definition at line 91 of file annotationtools.\+cpp.


\begin{DoxyCode}
92     : \hyperlink{classAnnotatorEngine_a42302fe858494d3e3ad90b8607c543ef}{AnnotatorEngine}( engineElement )
93 \{
94     \textcolor{comment}{// parse engine specific attributes}
95 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\hypertarget{classSmoothPathEngine_aa1dd0f64bab0f5d94aba93557a6ba328}{\index{Smooth\+Path\+Engine@{Smooth\+Path\+Engine}!end@{end}}
\index{end@{end}!Smooth\+Path\+Engine@{Smooth\+Path\+Engine}}
\subsubsection[{end}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Q\+List}$<$ {\bf Okular\+::\+Annotation} $\ast$ $>$ Smooth\+Path\+Engine\+::end (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classSmoothPathEngine_aa1dd0f64bab0f5d94aba93557a6ba328}


Implements \hyperlink{classAnnotatorEngine_a50455740303878b891195132df27a2ab}{Annotator\+Engine}.



Definition at line 179 of file annotationtools.\+cpp.


\begin{DoxyCode}
180 \{
181     \hyperlink{classAnnotatorEngine_a0df119b4d87a1e3ea8ed60a96d7ff444}{m\_creationCompleted} = \textcolor{keyword}{false};
182 
183     \textcolor{comment}{// find out annotation's description node}
184     \textcolor{keywordflow}{if} ( \hyperlink{classAnnotatorEngine_ac95af6291cc2f0c601e1bbf8a5e6a0bd}{m\_annotElement}.isNull() )
185                 \textcolor{keywordflow}{return} \hyperlink{classQList}{QList< Okular::Annotation* >}();
186 
187     \textcolor{comment}{// find out annotation's type}
188     \hyperlink{classOkular_1_1Annotation}{Okular::Annotation} * ann = 0;
189     QString typeString = \hyperlink{classAnnotatorEngine_ac95af6291cc2f0c601e1bbf8a5e6a0bd}{m\_annotElement}.attribute( \textcolor{stringliteral}{"type"} );
190 
191     \textcolor{comment}{// create InkAnnotation from path}
192     \textcolor{keywordflow}{if} ( typeString == \textcolor{stringliteral}{"Ink"} )
193     \{
194         \hyperlink{classOkular_1_1InkAnnotation}{Okular::InkAnnotation} * ia = \textcolor{keyword}{new} 
      \hyperlink{classOkular_1_1InkAnnotation}{Okular::InkAnnotation}();
195         ann = ia;
196         \textcolor{keywordflow}{if} ( \hyperlink{classAnnotatorEngine_ac95af6291cc2f0c601e1bbf8a5e6a0bd}{m\_annotElement}.hasAttribute( \textcolor{stringliteral}{"width"} ) )
197             ann->\hyperlink{classOkular_1_1Annotation_ae1f845ddbd6d524b2b388c6c9ef26423}{style}().\hyperlink{classOkular_1_1Annotation_1_1Style_af0643b15b59d282c196f0c6114493d9e}{setWidth}( \hyperlink{classAnnotatorEngine_ac95af6291cc2f0c601e1bbf8a5e6a0bd}{m\_annotElement}.attribute( \textcolor{stringliteral}{"width"} ).toDouble(
      ) );
198         \textcolor{comment}{// fill points}
199         \hyperlink{classQList}{QList< QLinkedList<Okular::NormalizedPoint>} > list = ia
      ->\hyperlink{classOkular_1_1InkAnnotation_a70af1124d2ed92e1e64779423278d707}{inkPaths}();
200         list.append( points );
201         ia->\hyperlink{classOkular_1_1InkAnnotation_a8d347e99fa554b3024035c51421aeeea}{setInkPaths}( list );
202         \textcolor{comment}{// set boundaries}
203         ia->\hyperlink{classOkular_1_1Annotation_a6977075c78f130b71ddbbda924480f38}{setBoundingRectangle}( totalRect );
204     \}
205 
206     \textcolor{comment}{// safety check}
207     \textcolor{keywordflow}{if} ( !ann )
208         \textcolor{keywordflow}{return} \hyperlink{classQList}{QList< Okular::Annotation* >}();
209 
210     \textcolor{comment}{// set common attributes}
211     ann->\hyperlink{classOkular_1_1Annotation_ae1f845ddbd6d524b2b388c6c9ef26423}{style}().\hyperlink{classOkular_1_1Annotation_1_1Style_a1c916cd50a0a4114188136d47943ef00}{setColor}( \hyperlink{classAnnotatorEngine_ac95af6291cc2f0c601e1bbf8a5e6a0bd}{m\_annotElement}.hasAttribute( \textcolor{stringliteral}{"color"} ) ?
212         \hyperlink{classAnnotatorEngine_ac95af6291cc2f0c601e1bbf8a5e6a0bd}{m\_annotElement}.attribute( \textcolor{stringliteral}{"color"} ) : \hyperlink{classAnnotatorEngine_a8911b0455be7eedfb2c102ce19acdce2}{m\_engineColor} );
213     \textcolor{keywordflow}{if} ( \hyperlink{classAnnotatorEngine_ac95af6291cc2f0c601e1bbf8a5e6a0bd}{m\_annotElement}.hasAttribute( \textcolor{stringliteral}{"opacity"} ) )
214         ann->\hyperlink{classOkular_1_1Annotation_ae1f845ddbd6d524b2b388c6c9ef26423}{style}().\hyperlink{classOkular_1_1Annotation_1_1Style_a5bf0bdd3bf954271ed4ba831316a7ee7}{setOpacity}( \hyperlink{classAnnotatorEngine_ac95af6291cc2f0c601e1bbf8a5e6a0bd}{m\_annotElement}.attribute( \textcolor{stringliteral}{"opacity"}, \textcolor{stringliteral}{"1.0"} ).
      toDouble() );
215 
216     \textcolor{comment}{// return annotation}
217     \textcolor{keywordflow}{return} \hyperlink{classQList}{QList< Okular::Annotation* >}() << ann;
218 \}
\end{DoxyCode}
\hypertarget{classSmoothPathEngine_aa029e01d4c38d701466498fc7c222133}{\index{Smooth\+Path\+Engine@{Smooth\+Path\+Engine}!end\+Smooth\+Path@{end\+Smooth\+Path}}
\index{end\+Smooth\+Path@{end\+Smooth\+Path}!Smooth\+Path\+Engine@{Smooth\+Path\+Engine}}
\subsubsection[{end\+Smooth\+Path}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Smooth\+Path} Smooth\+Path\+Engine\+::end\+Smooth\+Path (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classSmoothPathEngine_aa029e01d4c38d701466498fc7c222133}


Definition at line 220 of file annotationtools.\+cpp.


\begin{DoxyCode}
221 \{
222     \hyperlink{classAnnotatorEngine_a0df119b4d87a1e3ea8ed60a96d7ff444}{m\_creationCompleted} = \textcolor{keyword}{false};
223 
224     \textcolor{keywordtype}{double} width = 1;
225     \textcolor{keywordflow}{if} ( \hyperlink{classAnnotatorEngine_ac95af6291cc2f0c601e1bbf8a5e6a0bd}{m\_annotElement}.hasAttribute( \textcolor{stringliteral}{"width"} ) )
226         width = \hyperlink{classAnnotatorEngine_ac95af6291cc2f0c601e1bbf8a5e6a0bd}{m\_annotElement}.attribute( \textcolor{stringliteral}{"width"} ).toDouble();
227 
228     QColor color( \hyperlink{classAnnotatorEngine_ac95af6291cc2f0c601e1bbf8a5e6a0bd}{m\_annotElement}.hasAttribute( \textcolor{stringliteral}{"color"} ) ?
229         \hyperlink{classAnnotatorEngine_ac95af6291cc2f0c601e1bbf8a5e6a0bd}{m\_annotElement}.attribute( \textcolor{stringliteral}{"color"} ) : \hyperlink{classAnnotatorEngine_a8911b0455be7eedfb2c102ce19acdce2}{m\_engineColor} );
230 
231     \textcolor{keywordflow}{return} \hyperlink{classSmoothPath}{SmoothPath}( points, QPen(color, width) );
232 \}
\end{DoxyCode}
\hypertarget{classSmoothPathEngine_a7234a32a90d2784e2459cf838a37f172}{\index{Smooth\+Path\+Engine@{Smooth\+Path\+Engine}!event@{event}}
\index{event@{event}!Smooth\+Path\+Engine@{Smooth\+Path\+Engine}}
\subsubsection[{event}]{\setlength{\rightskip}{0pt plus 5cm}Q\+Rect Smooth\+Path\+Engine\+::event (
\begin{DoxyParamCaption}
\item[{{\bf Event\+Type}}]{type, }
\item[{{\bf Button}}]{button, }
\item[{double}]{n\+X, }
\item[{double}]{n\+Y, }
\item[{double}]{x\+Scale, }
\item[{double}]{y\+Scale, }
\item[{const {\bf Okular\+::\+Page} $\ast$}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classSmoothPathEngine_a7234a32a90d2784e2459cf838a37f172}


Implements \hyperlink{classAnnotatorEngine_acca989fc60f9a6c20ed2518fafa8774e}{Annotator\+Engine}.



Definition at line 97 of file annotationtools.\+cpp.


\begin{DoxyCode}
98 \{
99     \textcolor{comment}{// only proceed if pressing left button}
100     \textcolor{keywordflow}{if} ( button != \hyperlink{classAnnotatorEngine_ac2e3b75e12bacbb6974d15dd53954567a2719e853d63982d67e9d8aae3620178c}{Left} )
101         \textcolor{keywordflow}{return} QRect();
102 
103     \textcolor{comment}{// start operation}
104     \textcolor{keywordflow}{if} ( type == \hyperlink{classAnnotatorEngine_a00fb22eb4cb6eafb056f9066031db133a7f6f77a85d31dc6afd375db9a53d5069}{Press} && points.isEmpty() )
105     \{
106         lastPoint.\hyperlink{classOkular_1_1NormalizedPoint_a857f49b9bc7712430d167472ef9dbd94}{x} = nX;
107         lastPoint.\hyperlink{classOkular_1_1NormalizedPoint_ac2276daabda627d5f82bb1532c293047}{y} = nY;
108         totalRect.\hyperlink{classOkular_1_1NormalizedRect_a76336fe9d733f2b559cf8df3ef48f9e7}{left} = totalRect.\hyperlink{classOkular_1_1NormalizedRect_a12bbdbb865e6282c9a325b61638553f4}{right} = lastPoint.\hyperlink{classOkular_1_1NormalizedPoint_a857f49b9bc7712430d167472ef9dbd94}{x};
109         totalRect.\hyperlink{classOkular_1_1NormalizedRect_acfb70f6417c993508d50090b512cb954}{top} = totalRect.\hyperlink{classOkular_1_1NormalizedRect_a06fddfff238371f6f584360c0678741a}{bottom} = lastPoint.\hyperlink{classOkular_1_1NormalizedPoint_ac2276daabda627d5f82bb1532c293047}{y};
110         points.append( lastPoint );
111     \}
112     \textcolor{comment}{// add a point to the path}
113     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( type == \hyperlink{classAnnotatorEngine_a00fb22eb4cb6eafb056f9066031db133a4efcf099c4a82b1eab7de0fb124563a8}{Move} && points.count() > 0 )
114     \{
115         \textcolor{comment}{//double dist = hypot( nX - points.last().x, nY - points.last().y );}
116         \textcolor{comment}{//if ( dist > 0.0001 )}
117         \textcolor{comment}{//\{}
118             \textcolor{comment}{// append mouse position (as normalized point) to the list}
119             \hyperlink{classOkular_1_1NormalizedPoint}{Okular::NormalizedPoint} nextPoint = 
      \hyperlink{classOkular_1_1NormalizedPoint}{Okular::NormalizedPoint}( nX, nY );
120             points.append( nextPoint );
121             \textcolor{comment}{// update total rect}
122             \textcolor{keywordtype}{double} dX = 2.0 / (double)xScale;
123             \textcolor{keywordtype}{double} dY = 2.0 / (double)yScale;
124             totalRect.\hyperlink{classOkular_1_1NormalizedRect_a76336fe9d733f2b559cf8df3ef48f9e7}{left} = qMin( totalRect.\hyperlink{classOkular_1_1NormalizedRect_a76336fe9d733f2b559cf8df3ef48f9e7}{left}, nX - dX );
125             totalRect.\hyperlink{classOkular_1_1NormalizedRect_acfb70f6417c993508d50090b512cb954}{top} = qMin( totalRect.\hyperlink{classOkular_1_1NormalizedRect_acfb70f6417c993508d50090b512cb954}{top}, nY - dY );
126             totalRect.\hyperlink{classOkular_1_1NormalizedRect_a12bbdbb865e6282c9a325b61638553f4}{right} = qMax( nX + dX, totalRect.\hyperlink{classOkular_1_1NormalizedRect_a12bbdbb865e6282c9a325b61638553f4}{right} );
127             totalRect.\hyperlink{classOkular_1_1NormalizedRect_a06fddfff238371f6f584360c0678741a}{bottom} = qMax( nY + dY, totalRect.\hyperlink{classOkular_1_1NormalizedRect_a06fddfff238371f6f584360c0678741a}{bottom} );
128             \textcolor{comment}{// paint the difference to previous full rect}
129             \hyperlink{classOkular_1_1NormalizedRect}{Okular::NormalizedRect} incrementalRect;
130             incrementalRect.\hyperlink{classOkular_1_1NormalizedRect_a76336fe9d733f2b559cf8df3ef48f9e7}{left} = qMin( nextPoint.\hyperlink{classOkular_1_1NormalizedPoint_a857f49b9bc7712430d167472ef9dbd94}{x}, lastPoint.\hyperlink{classOkular_1_1NormalizedPoint_a857f49b9bc7712430d167472ef9dbd94}{x} ) - dX;
131             incrementalRect.\hyperlink{classOkular_1_1NormalizedRect_a12bbdbb865e6282c9a325b61638553f4}{right} = qMax( nextPoint.\hyperlink{classOkular_1_1NormalizedPoint_a857f49b9bc7712430d167472ef9dbd94}{x}, lastPoint.\hyperlink{classOkular_1_1NormalizedPoint_a857f49b9bc7712430d167472ef9dbd94}{x} ) + dX;
132             incrementalRect.\hyperlink{classOkular_1_1NormalizedRect_acfb70f6417c993508d50090b512cb954}{top} = qMin( nextPoint.\hyperlink{classOkular_1_1NormalizedPoint_ac2276daabda627d5f82bb1532c293047}{y}, lastPoint.\hyperlink{classOkular_1_1NormalizedPoint_ac2276daabda627d5f82bb1532c293047}{y} ) - dY;
133             incrementalRect.\hyperlink{classOkular_1_1NormalizedRect_a06fddfff238371f6f584360c0678741a}{bottom} = qMax( nextPoint.\hyperlink{classOkular_1_1NormalizedPoint_ac2276daabda627d5f82bb1532c293047}{y}, lastPoint.\hyperlink{classOkular_1_1NormalizedPoint_ac2276daabda627d5f82bb1532c293047}{y} ) + dY;
134             lastPoint = nextPoint;
135             \textcolor{keywordflow}{return} incrementalRect.\hyperlink{classOkular_1_1NormalizedRect_a006897c5fcff2c3a97b4141f1a967513}{geometry}( (\textcolor{keywordtype}{int})xScale, (\textcolor{keywordtype}{int})yScale );
136         \textcolor{comment}{//\}}
137     \}
138     \textcolor{comment}{// terminate process}
139     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( type == \hyperlink{classAnnotatorEngine_a00fb22eb4cb6eafb056f9066031db133ac80dbad38d0461d9e546aa694c2abc1c}{Release} && points.count() > 0 )
140     \{
141         \textcolor{keywordflow}{if} ( points.count() < 2 )
142             points.clear();
143         \textcolor{keywordflow}{else}
144             \hyperlink{classAnnotatorEngine_a0df119b4d87a1e3ea8ed60a96d7ff444}{m\_creationCompleted} = \textcolor{keyword}{true};
145         \textcolor{keywordflow}{return} totalRect.\hyperlink{classOkular_1_1NormalizedRect_a006897c5fcff2c3a97b4141f1a967513}{geometry}( (\textcolor{keywordtype}{int})xScale, (\textcolor{keywordtype}{int})yScale );
146     \}
147     \textcolor{keywordflow}{return} QRect();
148 \}
\end{DoxyCode}
\hypertarget{classSmoothPathEngine_a08b94551c709ae56600afd692da10717}{\index{Smooth\+Path\+Engine@{Smooth\+Path\+Engine}!paint@{paint}}
\index{paint@{paint}!Smooth\+Path\+Engine@{Smooth\+Path\+Engine}}
\subsubsection[{paint}]{\setlength{\rightskip}{0pt plus 5cm}void Smooth\+Path\+Engine\+::paint (
\begin{DoxyParamCaption}
\item[{Q\+Painter $\ast$}]{painter, }
\item[{double}]{x\+Scale, }
\item[{double}]{y\+Scale, }
\item[{const Q\+Rect \&}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classSmoothPathEngine_a08b94551c709ae56600afd692da10717}


Implements \hyperlink{classAnnotatorEngine_a71b2e9fcbcca36caadefa79adb99c93f}{Annotator\+Engine}.



Definition at line 150 of file annotationtools.\+cpp.


\begin{DoxyCode}
151 \{
152     \textcolor{comment}{// use engine's color for painting}
153     \textcolor{keyword}{const} \hyperlink{classSmoothPath}{SmoothPath} path( points, QPen(\hyperlink{classAnnotatorEngine_a8911b0455be7eedfb2c102ce19acdce2}{m\_engineColor}, 1) );
154 
155     \textcolor{comment}{// draw the path}
156     path.paint( painter, xScale, yScale );
157 \}
\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
ui/\hyperlink{annotationtools_8h}{annotationtools.\+h}\item 
ui/\hyperlink{annotationtools_8cpp}{annotationtools.\+cpp}\end{DoxyCompactItemize}
