\hypertarget{classdvifile}{\section{dvifile Class Reference}
\label{classdvifile}\index{dvifile@{dvifile}}
}


{\ttfamily \#include $<$dvi\+File.\+h$>$}

Inheritance diagram for dvifile\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classdvifile}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classdvifile_ad7b4b8fb4c636ea63a5f2c2365c88d2d}{dvifile} (const \hyperlink{classdvifile}{dvifile} $\ast$old, \hyperlink{classfontPool}{font\+Pool} $\ast$fp)
\item 
\hyperlink{classdvifile_a6c57855429ebd8e59219bad752dcbc60}{dvifile} (const Q\+String \&fname, class \hyperlink{classfontPool}{font\+Pool} $\ast$pool)
\item 
\hyperlink{classdvifile_a3953f1496853ec1043baabe822520ac9}{$\sim$dvifile} ()
\item 
bool \hyperlink{classdvifile_a35300cbcea8a976384273a40b11d704f}{save\+As} (const Q\+String \&\hyperlink{classdvifile_a1c0fe420231e71f256b5db367b7e1178}{filename})
\item 
quint8 $\ast$ \hyperlink{classdvifile_a81f1d32c52377a7b1802072eb40998b7}{dvi\+\_\+\+Data} ()
\item 
double \hyperlink{classdvifile_a59a8b5b2c7b0ae199f4183b6062e6fb0}{get\+Cm\+Per\+D\+V\+Iunit} () const 
\item 
quint32 \hyperlink{classdvifile_a204469b9f242c319ae4918094bd8b062}{get\+Magnification} () const 
\item 
void \hyperlink{classdvifile_a24846cd27de19ba6ddf4a2564c97d8f8}{set\+New\+Data} (const Q\+Vector$<$ quint8 $>$ \&new\+Data)
\item 
void \hyperlink{classdvifile_a11b688d683499aedc28b8cc3537f1ac2}{renumber} ()
\item 
Q\+String \hyperlink{classdvifile_a30569faa8c5a473984363e6a04b2ae62}{convert\+P\+D\+Fto\+P\+S} (const Q\+String \&P\+D\+F\+Filename, Q\+String $\ast$converrorms=0)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classfontPool}{font\+Pool} $\ast$ \hyperlink{classdvifile_a4864f0edcaad892f4684ab2379f061b9}{font\+\_\+pool}
\item 
Q\+String \hyperlink{classdvifile_a1c0fe420231e71f256b5db367b7e1178}{filename}
\item 
Q\+String \hyperlink{classdvifile_a65f21e8c100dbbf49f160f563d9fda30}{generator\+String}
\item 
quint16 \hyperlink{classdvifile_a71577dbd82a462b855abc96be3b369c5}{total\+\_\+pages}
\item 
Q\+Vector$<$ quint32 $>$ \hyperlink{classdvifile_aeafc97277647ad5077a774be71b3253a}{page\+\_\+offset}
\item 
qint64 \hyperlink{classdvifile_ac136b96471bfd7873dbcb0425240dd0e}{size\+\_\+of\+\_\+file}
\item 
Q\+String \hyperlink{classdvifile_a57d83b062272da49940bb34863d0b595}{error\+Msg}
\item 
quint16 \hyperlink{classdvifile_abd8bd3fc29f66ce9220efbd0246d7fc0}{number\+Of\+External\+P\+S\+Files}
\item 
quint16 \hyperlink{classdvifile_a341ffd0f617655a308d5d86fbb085400}{number\+Of\+External\+N\+O\+N\+P\+S\+Files}
\item 
quint32 \hyperlink{classdvifile_abfe219fd52cec4629815f9f9220401fb}{beginning\+\_\+of\+\_\+postamble}
\item 
bool \hyperlink{classdvifile_a3121bb4c368ca1d30949cffb1df44d81}{source\+Special\+Marker}
\item 
Q\+Hash$<$ int, \hyperlink{classTeXFontDefinition}{Te\+X\+Font\+Definition} $\ast$ $>$ \hyperlink{classdvifile_a05cb283609e6d1627940d14e8fc85b62}{tn\+\_\+table}
\item 
quint8 \hyperlink{classdvifile_a9f1a21857ce4a3eeb9490ea63b1bfdcb}{error\+Counter}
\item 
\hyperlink{classpageSize}{page\+Size} $\ast$ \hyperlink{classdvifile_a9fdbeee20bb39fcafe317925767b24ef}{suggested\+Page\+Size}
\end{DoxyCompactItemize}


\subsection{Detailed Description}


Definition at line 26 of file dvi\+File.\+h.



\subsection{Constructor \& Destructor Documentation}
\hypertarget{classdvifile_ad7b4b8fb4c636ea63a5f2c2365c88d2d}{\index{dvifile@{dvifile}!dvifile@{dvifile}}
\index{dvifile@{dvifile}!dvifile@{dvifile}}
\subsubsection[{dvifile}]{\setlength{\rightskip}{0pt plus 5cm}dvifile\+::dvifile (
\begin{DoxyParamCaption}
\item[{const {\bf dvifile} $\ast$}]{old, }
\item[{{\bf font\+Pool} $\ast$}]{fp}
\end{DoxyParamCaption}
)}}\label{classdvifile_ad7b4b8fb4c636ea63a5f2c2365c88d2d}
Makes a deep copy of the old D\+V\+I file. 

Definition at line 70 of file dvi\+File.\+cpp.


\begin{DoxyCode}
71 \{
72   \hyperlink{classdvifile_a57d83b062272da49940bb34863d0b595}{errorMsg}.clear();
73   \hyperlink{classdvifile_a9f1a21857ce4a3eeb9490ea63b1bfdcb}{errorCounter} = 0;
74   \hyperlink{classdvifile_aeafc97277647ad5077a774be71b3253a}{page\_offset}.clear();
75   \hyperlink{classdvifile_a9fdbeee20bb39fcafe317925767b24ef}{suggestedPageSize} = 0;
76   \hyperlink{classdvifile_abd8bd3fc29f66ce9220efbd0246d7fc0}{numberOfExternalPSFiles} = 0;
77   \hyperlink{classdvifile_a341ffd0f617655a308d5d86fbb085400}{numberOfExternalNONPSFiles} = 0;
78   \hyperlink{classdvifile_a3121bb4c368ca1d30949cffb1df44d81}{sourceSpecialMarker} = old->\hyperlink{classdvifile_a3121bb4c368ca1d30949cffb1df44d81}{sourceSpecialMarker};
79   have\_complainedAboutMissingPDF2PS = \textcolor{keyword}{false};
80 
81   dviData = old->dviData;
82 
83   \hyperlink{classdvifile_a1c0fe420231e71f256b5db367b7e1178}{filename} = old->\hyperlink{classdvifile_a1c0fe420231e71f256b5db367b7e1178}{filename};
84   \hyperlink{classdvifile_ac136b96471bfd7873dbcb0425240dd0e}{size\_of\_file} = old->\hyperlink{classdvifile_ac136b96471bfd7873dbcb0425240dd0e}{size\_of\_file};
85   \hyperlink{classbigEndianByteReader_ace2790221530572c87c58f1f77924beb}{end\_pointer} = \hyperlink{classdvifile_a81f1d32c52377a7b1802072eb40998b7}{dvi\_Data}()+\hyperlink{classdvifile_ac136b96471bfd7873dbcb0425240dd0e}{size\_of\_file};
86   \textcolor{keywordflow}{if} (\hyperlink{classdvifile_a81f1d32c52377a7b1802072eb40998b7}{dvi\_Data}() == 0) \{
87     kError(kvs::dvi) << \textcolor{stringliteral}{"Not enough memory to copy the DVI-file."} << endl;
88     \textcolor{keywordflow}{return};
89   \}
90 
91   \hyperlink{classdvifile_a4864f0edcaad892f4684ab2379f061b9}{font\_pool} = fp;
92   \hyperlink{classdvifile_a1c0fe420231e71f256b5db367b7e1178}{filename} = old->\hyperlink{classdvifile_a1c0fe420231e71f256b5db367b7e1178}{filename};
93   \hyperlink{classdvifile_a65f21e8c100dbbf49f160f563d9fda30}{generatorString} = old->\hyperlink{classdvifile_a65f21e8c100dbbf49f160f563d9fda30}{generatorString};
94   \hyperlink{classdvifile_a71577dbd82a462b855abc96be3b369c5}{total\_pages} = old->\hyperlink{classdvifile_a71577dbd82a462b855abc96be3b369c5}{total\_pages};
95 
96 
97   \hyperlink{classdvifile_a05cb283609e6d1627940d14e8fc85b62}{tn\_table}.clear();
98   process\_preamble();
99   find\_postamble();
100   read\_postamble();
101   prepare\_pages();
102 \}
\end{DoxyCode}
\hypertarget{classdvifile_a6c57855429ebd8e59219bad752dcbc60}{\index{dvifile@{dvifile}!dvifile@{dvifile}}
\index{dvifile@{dvifile}!dvifile@{dvifile}}
\subsubsection[{dvifile}]{\setlength{\rightskip}{0pt plus 5cm}dvifile\+::dvifile (
\begin{DoxyParamCaption}
\item[{const Q\+String \&}]{fname, }
\item[{class {\bf font\+Pool} $\ast$}]{pool}
\end{DoxyParamCaption}
)}}\label{classdvifile_a6c57855429ebd8e59219bad752dcbc60}


Definition at line 269 of file dvi\+File.\+cpp.


\begin{DoxyCode}
270 \{
271 \textcolor{preprocessor}{#ifdef DEBUG\_DVIFILE}
272   kDebug(kvs::dvi) << \textcolor{stringliteral}{"init\_dvi\_file: "} << fname;
273 \textcolor{preprocessor}{#endif}
274 
275   \hyperlink{classdvifile_a57d83b062272da49940bb34863d0b595}{errorMsg}.clear();
276   \hyperlink{classdvifile_a9f1a21857ce4a3eeb9490ea63b1bfdcb}{errorCounter} = 0;
277   \hyperlink{classdvifile_aeafc97277647ad5077a774be71b3253a}{page\_offset}.clear();
278   \hyperlink{classdvifile_a9fdbeee20bb39fcafe317925767b24ef}{suggestedPageSize} = 0;
279   \hyperlink{classdvifile_abd8bd3fc29f66ce9220efbd0246d7fc0}{numberOfExternalPSFiles} = 0;
280   \hyperlink{classdvifile_a341ffd0f617655a308d5d86fbb085400}{numberOfExternalNONPSFiles} = 0;
281   \hyperlink{classdvifile_a4864f0edcaad892f4684ab2379f061b9}{font\_pool}    = pool;
282   \hyperlink{classdvifile_a3121bb4c368ca1d30949cffb1df44d81}{sourceSpecialMarker} = \textcolor{keyword}{true};
283   have\_complainedAboutMissingPDF2PS = \textcolor{keyword}{false};
284 
285   QFile file(fname);
286   \hyperlink{classdvifile_a1c0fe420231e71f256b5db367b7e1178}{filename} = file.fileName();
287   file.open( QIODevice::ReadOnly );
288   \hyperlink{classdvifile_ac136b96471bfd7873dbcb0425240dd0e}{size\_of\_file} = file.size();
289   dviData.resize(\hyperlink{classdvifile_ac136b96471bfd7873dbcb0425240dd0e}{size\_of\_file});
290   \textcolor{comment}{// Sets the end pointer for the bigEndianByteReader so that the}
291   \textcolor{comment}{// whole memory buffer is readable}
292   \hyperlink{classbigEndianByteReader_ace2790221530572c87c58f1f77924beb}{end\_pointer} = \hyperlink{classdvifile_a81f1d32c52377a7b1802072eb40998b7}{dvi\_Data}()+\hyperlink{classdvifile_ac136b96471bfd7873dbcb0425240dd0e}{size\_of\_file};
293   \textcolor{keywordflow}{if} (\hyperlink{classdvifile_a81f1d32c52377a7b1802072eb40998b7}{dvi\_Data}() == 0) \{
294     kError(kvs::dvi) << \textcolor{stringliteral}{"Not enough memory to load the DVI-file."};
295     \textcolor{keywordflow}{return};
296   \}
297   file.read((\textcolor{keywordtype}{char} *)\hyperlink{classdvifile_a81f1d32c52377a7b1802072eb40998b7}{dvi\_Data}(), \hyperlink{classdvifile_ac136b96471bfd7873dbcb0425240dd0e}{size\_of\_file});
298   file.close();
299   \textcolor{keywordflow}{if} (file.error() != QFile::NoError) \{
300     kError(kvs::dvi) << \textcolor{stringliteral}{"Could not load the DVI-file."};
301     \textcolor{keywordflow}{return};
302   \}
303 
304   \hyperlink{classdvifile_a05cb283609e6d1627940d14e8fc85b62}{tn\_table}.clear();
305 
306   \hyperlink{classdvifile_a71577dbd82a462b855abc96be3b369c5}{total\_pages} = 0;
307   process\_preamble();
308   find\_postamble();
309   read\_postamble();
310   prepare\_pages();
311 
312   \textcolor{keywordflow}{return};
313 \}
\end{DoxyCode}
\hypertarget{classdvifile_a3953f1496853ec1043baabe822520ac9}{\index{dvifile@{dvifile}!````~dvifile@{$\sim$dvifile}}
\index{````~dvifile@{$\sim$dvifile}!dvifile@{dvifile}}
\subsubsection[{$\sim$dvifile}]{\setlength{\rightskip}{0pt plus 5cm}dvifile\+::$\sim$dvifile (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classdvifile_a3953f1496853ec1043baabe822520ac9}


Definition at line 316 of file dvi\+File.\+cpp.


\begin{DoxyCode}
317 \{
318 \textcolor{preprocessor}{#ifdef DEBUG\_DVIFILE}
319   kDebug(kvs::dvi) << \textcolor{stringliteral}{"destroy dvi-file"};
320 \textcolor{preprocessor}{#endif}
321 
322   \textcolor{comment}{// Delete converted PDF files}
323   QMapIterator<QString, QString> i(convertedFiles);
324   \textcolor{keywordflow}{while} (i.hasNext()) \{
325     i.next();
326     QFile::remove(i.value());
327   \}
328 
329   \textcolor{keywordflow}{if} (\hyperlink{classdvifile_a9fdbeee20bb39fcafe317925767b24ef}{suggestedPageSize} != 0)
330     \textcolor{keyword}{delete} \hyperlink{classdvifile_a9fdbeee20bb39fcafe317925767b24ef}{suggestedPageSize};
331   \textcolor{keywordflow}{if} (\hyperlink{classdvifile_a4864f0edcaad892f4684ab2379f061b9}{font\_pool} != 0)
332     \hyperlink{classdvifile_a4864f0edcaad892f4684ab2379f061b9}{font\_pool}->\hyperlink{classfontPool_a96eda62e201cf0d15fbd122213d5e83a}{mark\_fonts\_as\_unused}();
333 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\hypertarget{classdvifile_a30569faa8c5a473984363e6a04b2ae62}{\index{dvifile@{dvifile}!convert\+P\+D\+Fto\+P\+S@{convert\+P\+D\+Fto\+P\+S}}
\index{convert\+P\+D\+Fto\+P\+S@{convert\+P\+D\+Fto\+P\+S}!dvifile@{dvifile}}
\subsubsection[{convert\+P\+D\+Fto\+P\+S}]{\setlength{\rightskip}{0pt plus 5cm}Q\+String dvifile\+::convert\+P\+D\+Fto\+P\+S (
\begin{DoxyParamCaption}
\item[{const Q\+String \&}]{P\+D\+F\+Filename, }
\item[{Q\+String $\ast$}]{converrorms = {\ttfamily 0}}
\end{DoxyParamCaption}
)}}\label{classdvifile_a30569faa8c5a473984363e6a04b2ae62}
P\+D\+F to P\+S file conversion

This utility method takes the name of a P\+D\+F-\/file, and attempts to convert it to a P\+S file. The dvifile internally keeps a list of converted files, to do two thigs\+:


\begin{DoxyItemize}
\item convert files only once.
\item delete all converted files on destruction
\end{DoxyItemize}

\begin{DoxyWarning}{Warning}
The internal buffer can lead to difficulties if filenames of P\+D\+F-\/files are not unique\+: if the content of a P\+D\+F file is changed and this method is called a second time with the same file name, the method will then N\+O\+T convert the file, but simply return the name from the buffer
\end{DoxyWarning}
\begin{DoxyReturn}{Returns}
The name of the P\+S file, or Q\+String() on failure. 
\end{DoxyReturn}


Definition at line 363 of file dvi\+File.\+cpp.


\begin{DoxyCode}
364 \{
365   \textcolor{comment}{// Check if the PDFFile is known}
366   \hyperlink{classQMap}{QMap<QString, QString>::Iterator} it =  convertedFiles.find(PDFFilename);
367   \textcolor{keywordflow}{if} (it != convertedFiles.end()) \{
368     \textcolor{comment}{// PDF-File is known. Good.}
369     \textcolor{keywordflow}{return} it.value();
370   \}
371 
372   \textcolor{comment}{// Get the name of a temporary file.}
373   \textcolor{comment}{// Must open the QTemporaryFile to access the name.}
374   QTemporaryFile tmpfile;
375   tmpfile.open();
376   \textcolor{keyword}{const} QString convertedFileName = tmpfile.fileName();
377   tmpfile.close();
378 
379   \textcolor{comment}{// Use pdf2ps to do the conversion}
380   QProcess pdf2ps;
381   pdf2ps.setReadChannelMode(QProcess::MergedChannels);
382   pdf2ps.start(\textcolor{stringliteral}{"pdf2ps"},
383                QStringList() << PDFFilename << convertedFileName,
384                QIODevice::ReadOnly|QIODevice::Text);
385 
386   \textcolor{keywordflow}{if} (!pdf2ps.waitForStarted()) \{
387     \textcolor{comment}{// Indicates that conversion failed, won't try again.}
388     convertedFiles[PDFFilename].clear();
389     \textcolor{keywordflow}{if} (converrorms != 0 && !have\_complainedAboutMissingPDF2PS) \{
390       *converrorms = i18n(\textcolor{stringliteral}{"<qt><p>The external program <strong>pdf2ps</strong> could not be started. As a
       result, "}
391                           \textcolor{stringliteral}{"the PDF-file %1 could not be converted to PostScript. Some graphic elements in
       your "}
392                           \textcolor{stringliteral}{"document will therefore not be displayed.</p>"}
393                           \textcolor{stringliteral}{"<p><b>Possible reason:</b> The program <strong>pdf2ps</strong> may not be
       installed "}
394                           \textcolor{stringliteral}{"on your system, or cannot be found in the current search path.</p>"}
395                           \textcolor{stringliteral}{"<p><b>What you can do:</b> The program <strong>pdf2ps</strong> is normally "}
396                           \textcolor{stringliteral}{"contained in distributions of the ghostscript PostScript interpreter system. If 
      "}
397                           \textcolor{stringliteral}{"ghostscript is not installed on your system, you could install it now. "}
398                           \textcolor{stringliteral}{"If you are sure that ghostscript is installed, try to use
       <strong>pdf2ps</strong> "}
399                           \textcolor{stringliteral}{"from the command line to check if it really works.</p><p><b>PATH:</b>
       %2</p></qt>"}, PDFFilename, getenv(\textcolor{stringliteral}{"PATH"}));
400       have\_complainedAboutMissingPDF2PS = \textcolor{keyword}{true};
401     \}
402     \textcolor{keywordflow}{return} QString();
403   \}
404 
405   \textcolor{comment}{// We wait here while the external program runs concurrently.}
406   pdf2ps.waitForFinished(-1);
407 
408   \textcolor{keywordflow}{if} (!QFile::exists(convertedFileName) || pdf2ps.exitCode() != 0) \{
409     \textcolor{comment}{// Indicates that conversion failed, won't try again.}
410     convertedFiles[PDFFilename].clear();
411     \textcolor{keywordflow}{if} (converrorms != 0) \{
412       \textcolor{keyword}{const} QString output = pdf2ps.readAll();
413 
414       *converrorms = i18n(\textcolor{stringliteral}{"<qt><p>The PDF-file %1 could not be converted to PostScript. Some graphic
       elements in your "}
415                           \textcolor{stringliteral}{"document will therefore not be displayed.</p>"}
416                           \textcolor{stringliteral}{"<p><b>Possible reason:</b> The file %1 might be broken, or might not be a
       PDF-file at all. "}
417                           \textcolor{stringliteral}{"This is the output of the <strong>pdf2ps</strong> program that Okular used:</p>"}
418                           \textcolor{stringliteral}{"<p><strong>%2</strong></p></qt>"}, PDFFilename, output);
419     \}
420     \textcolor{keywordflow}{return} QString();
421   \}
422   \textcolor{comment}{// Save name of converted file to buffer, so PDF file won't be}
423   \textcolor{comment}{// converted again, and files can be deleted when *this is}
424   \textcolor{comment}{// deconstructed.}
425   convertedFiles[PDFFilename] = convertedFileName;
426 
427   tmpfile.setAutoRemove(\textcolor{keyword}{false});
428   \textcolor{keywordflow}{return} convertedFileName;
429 \}
\end{DoxyCode}
\hypertarget{classdvifile_a81f1d32c52377a7b1802072eb40998b7}{\index{dvifile@{dvifile}!dvi\+\_\+\+Data@{dvi\+\_\+\+Data}}
\index{dvi\+\_\+\+Data@{dvi\+\_\+\+Data}!dvifile@{dvifile}}
\subsubsection[{dvi\+\_\+\+Data}]{\setlength{\rightskip}{0pt plus 5cm}quint8$\ast$ dvifile\+::dvi\+\_\+\+Data (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}}\label{classdvifile_a81f1d32c52377a7b1802072eb40998b7}


Definition at line 46 of file dvi\+File.\+h.


\begin{DoxyCode}
46 \{\textcolor{keywordflow}{return} dviData.data();\}
\end{DoxyCode}
\hypertarget{classdvifile_a59a8b5b2c7b0ae199f4183b6062e6fb0}{\index{dvifile@{dvifile}!get\+Cm\+Per\+D\+V\+Iunit@{get\+Cm\+Per\+D\+V\+Iunit}}
\index{get\+Cm\+Per\+D\+V\+Iunit@{get\+Cm\+Per\+D\+V\+Iunit}!dvifile@{dvifile}}
\subsubsection[{get\+Cm\+Per\+D\+V\+Iunit}]{\setlength{\rightskip}{0pt plus 5cm}double dvifile\+::get\+Cm\+Per\+D\+V\+Iunit (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}}\label{classdvifile_a59a8b5b2c7b0ae199f4183b6062e6fb0}
Returns the number of centimeters per D\+V\+I unit in this D\+V\+I file. 

Definition at line 75 of file dvi\+File.\+h.


\begin{DoxyCode}
75 \{\textcolor{keywordflow}{return} cmPerDVIunit;\}
\end{DoxyCode}
\hypertarget{classdvifile_a204469b9f242c319ae4918094bd8b062}{\index{dvifile@{dvifile}!get\+Magnification@{get\+Magnification}}
\index{get\+Magnification@{get\+Magnification}!dvifile@{dvifile}}
\subsubsection[{get\+Magnification}]{\setlength{\rightskip}{0pt plus 5cm}quint32 dvifile\+::get\+Magnification (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}}\label{classdvifile_a204469b9f242c319ae4918094bd8b062}
Returns the magnification of the D\+V\+I file, as described in the D\+V\+I Standard. 

Definition at line 79 of file dvi\+File.\+h.


\begin{DoxyCode}
79 \{\textcolor{keywordflow}{return} \_magnification;\}
\end{DoxyCode}
\hypertarget{classdvifile_a11b688d683499aedc28b8cc3537f1ac2}{\index{dvifile@{dvifile}!renumber@{renumber}}
\index{renumber@{renumber}!dvifile@{dvifile}}
\subsubsection[{renumber}]{\setlength{\rightskip}{0pt plus 5cm}void dvifile\+::renumber (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classdvifile_a11b688d683499aedc28b8cc3537f1ac2}
Page numbers that appear in a D\+V\+I document need not be ordered. Worse, page numbers need not be unique. This method renumbers the pages. 

Definition at line 336 of file dvi\+File.\+cpp.


\begin{DoxyCode}
337 \{
338   dviData.detach();
339 
340   \textcolor{comment}{// Write the page number to the file, taking good care of byte}
341   \textcolor{comment}{// orderings.}
342   \textcolor{keywordtype}{bool} bigEndian = (QSysInfo::ByteOrder == QSysInfo::BigEndian);
343 
344   \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i=1; i<=\hyperlink{classdvifile_a71577dbd82a462b855abc96be3b369c5}{total\_pages}; i++) \{
345     quint8 *ptr = dviData.data() + \hyperlink{classdvifile_aeafc97277647ad5077a774be71b3253a}{page\_offset}[i-1]+1;
346     quint8 *\hyperlink{dvi_2util_8cpp_acc54804c2bc92eef873c373c37b69ff7}{num} = (quint8 *)&i;
347     \textcolor{keywordflow}{for}(quint8 j=0; j<4; j++)
348       \textcolor{keywordflow}{if} (bigEndian) \{
349         *(ptr++) = num[0];
350         *(ptr++) = num[1];
351         *(ptr++) = num[2];
352         *(ptr++) = num[3];
353       \} \textcolor{keywordflow}{else} \{
354         *(ptr++) = num[3];
355         *(ptr++) = num[2];
356         *(ptr++) = num[1];
357         *(ptr++) = num[0];
358       \}
359   \}
360 \}
\end{DoxyCode}
\hypertarget{classdvifile_a35300cbcea8a976384273a40b11d704f}{\index{dvifile@{dvifile}!save\+As@{save\+As}}
\index{save\+As@{save\+As}!dvifile@{dvifile}}
\subsubsection[{save\+As}]{\setlength{\rightskip}{0pt plus 5cm}bool dvifile\+::save\+As (
\begin{DoxyParamCaption}
\item[{const Q\+String \&}]{filename}
\end{DoxyParamCaption}
)}}\label{classdvifile_a35300cbcea8a976384273a40b11d704f}
Saves the D\+V\+I file. Returns true on success. 

Definition at line 432 of file dvi\+File.\+cpp.


\begin{DoxyCode}
433 \{
434   \textcolor{keywordflow}{if} (\hyperlink{classdvifile_a81f1d32c52377a7b1802072eb40998b7}{dvi\_Data}() == 0)
435     \textcolor{keywordflow}{return} \textcolor{keyword}{false};
436 
437   QFile out(\hyperlink{classdvifile_a1c0fe420231e71f256b5db367b7e1178}{filename});
438   \textcolor{keywordflow}{if} (out.open( QIODevice::WriteOnly ) == \textcolor{keyword}{false})
439     \textcolor{keywordflow}{return} \textcolor{keyword}{false};
440   \textcolor{keywordflow}{if} (out.write ( (\textcolor{keywordtype}{char} *)(\hyperlink{classdvifile_a81f1d32c52377a7b1802072eb40998b7}{dvi\_Data}()), \hyperlink{classdvifile_ac136b96471bfd7873dbcb0425240dd0e}{size\_of\_file} ) == -1)
441     \textcolor{keywordflow}{return} \textcolor{keyword}{false};
442   out.close();
443   \textcolor{keywordflow}{return} \textcolor{keyword}{true};
444 \}
\end{DoxyCode}
\hypertarget{classdvifile_a24846cd27de19ba6ddf4a2564c97d8f8}{\index{dvifile@{dvifile}!set\+New\+Data@{set\+New\+Data}}
\index{set\+New\+Data@{set\+New\+Data}!dvifile@{dvifile}}
\subsubsection[{set\+New\+Data}]{\setlength{\rightskip}{0pt plus 5cm}void dvifile\+::set\+New\+Data (
\begin{DoxyParamCaption}
\item[{const Q\+Vector$<$ quint8 $>$ \&}]{new\+Data}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}}\label{classdvifile_a24846cd27de19ba6ddf4a2564c97d8f8}
Sets new D\+V\+I data; all old data is erased. E\+X\+P\+E\+R\+I\+M\+E\+N\+T\+A\+L, use with care. 

Definition at line 92 of file dvi\+File.\+h.


\begin{DoxyCode}
92 \{dviData = newData;\}
\end{DoxyCode}


\subsection{Member Data Documentation}
\hypertarget{classdvifile_abfe219fd52cec4629815f9f9220401fb}{\index{dvifile@{dvifile}!beginning\+\_\+of\+\_\+postamble@{beginning\+\_\+of\+\_\+postamble}}
\index{beginning\+\_\+of\+\_\+postamble@{beginning\+\_\+of\+\_\+postamble}!dvifile@{dvifile}}
\subsubsection[{beginning\+\_\+of\+\_\+postamble}]{\setlength{\rightskip}{0pt plus 5cm}quint32 dvifile\+::beginning\+\_\+of\+\_\+postamble}}\label{classdvifile_abfe219fd52cec4629815f9f9220401fb}


Definition at line 61 of file dvi\+File.\+h.

\hypertarget{classdvifile_a9f1a21857ce4a3eeb9490ea63b1bfdcb}{\index{dvifile@{dvifile}!error\+Counter@{error\+Counter}}
\index{error\+Counter@{error\+Counter}!dvifile@{dvifile}}
\subsubsection[{error\+Counter}]{\setlength{\rightskip}{0pt plus 5cm}quint8 dvifile\+::error\+Counter}}\label{classdvifile_a9f1a21857ce4a3eeb9490ea63b1bfdcb}
This member is set to zero on construction and can be used by other software to count error messages that were printed when the D\+V\+I-\/file was processed. Suggested application\+: limit the number of error messages to, say, 25. 

Definition at line 85 of file dvi\+File.\+h.

\hypertarget{classdvifile_a57d83b062272da49940bb34863d0b595}{\index{dvifile@{dvifile}!error\+Msg@{error\+Msg}}
\index{error\+Msg@{error\+Msg}!dvifile@{dvifile}}
\subsubsection[{error\+Msg}]{\setlength{\rightskip}{0pt plus 5cm}Q\+String dvifile\+::error\+Msg}}\label{classdvifile_a57d83b062272da49940bb34863d0b595}


Definition at line 49 of file dvi\+File.\+h.

\hypertarget{classdvifile_a1c0fe420231e71f256b5db367b7e1178}{\index{dvifile@{dvifile}!filename@{filename}}
\index{filename@{filename}!dvifile@{dvifile}}
\subsubsection[{filename}]{\setlength{\rightskip}{0pt plus 5cm}Q\+String dvifile\+::filename}}\label{classdvifile_a1c0fe420231e71f256b5db367b7e1178}


Definition at line 36 of file dvi\+File.\+h.

\hypertarget{classdvifile_a4864f0edcaad892f4684ab2379f061b9}{\index{dvifile@{dvifile}!font\+\_\+pool@{font\+\_\+pool}}
\index{font\+\_\+pool@{font\+\_\+pool}!dvifile@{dvifile}}
\subsubsection[{font\+\_\+pool}]{\setlength{\rightskip}{0pt plus 5cm}{\bf font\+Pool}$\ast$ dvifile\+::font\+\_\+pool}}\label{classdvifile_a4864f0edcaad892f4684ab2379f061b9}


Definition at line 35 of file dvi\+File.\+h.

\hypertarget{classdvifile_a65f21e8c100dbbf49f160f563d9fda30}{\index{dvifile@{dvifile}!generator\+String@{generator\+String}}
\index{generator\+String@{generator\+String}!dvifile@{dvifile}}
\subsubsection[{generator\+String}]{\setlength{\rightskip}{0pt plus 5cm}Q\+String dvifile\+::generator\+String}}\label{classdvifile_a65f21e8c100dbbf49f160f563d9fda30}


Definition at line 37 of file dvi\+File.\+h.

\hypertarget{classdvifile_a341ffd0f617655a308d5d86fbb085400}{\index{dvifile@{dvifile}!number\+Of\+External\+N\+O\+N\+P\+S\+Files@{number\+Of\+External\+N\+O\+N\+P\+S\+Files}}
\index{number\+Of\+External\+N\+O\+N\+P\+S\+Files@{number\+Of\+External\+N\+O\+N\+P\+S\+Files}!dvifile@{dvifile}}
\subsubsection[{number\+Of\+External\+N\+O\+N\+P\+S\+Files}]{\setlength{\rightskip}{0pt plus 5cm}quint16 dvifile\+::number\+Of\+External\+N\+O\+N\+P\+S\+Files}}\label{classdvifile_a341ffd0f617655a308d5d86fbb085400}
This field is set to zero when the D\+V\+I file is constructed, and will be modified during the prescan phase (at this time the prescan code still resides in the \hyperlink{classdviRenderer}{dvi\+Renderer} class) 

Definition at line 59 of file dvi\+File.\+h.

\hypertarget{classdvifile_abd8bd3fc29f66ce9220efbd0246d7fc0}{\index{dvifile@{dvifile}!number\+Of\+External\+P\+S\+Files@{number\+Of\+External\+P\+S\+Files}}
\index{number\+Of\+External\+P\+S\+Files@{number\+Of\+External\+P\+S\+Files}!dvifile@{dvifile}}
\subsubsection[{number\+Of\+External\+P\+S\+Files}]{\setlength{\rightskip}{0pt plus 5cm}quint16 dvifile\+::number\+Of\+External\+P\+S\+Files}}\label{classdvifile_abd8bd3fc29f66ce9220efbd0246d7fc0}
This field is set to zero when the D\+V\+I file is constructed, and will be modified during the prescan phase (at this time the prescan code still resides in the \hyperlink{classdviRenderer}{dvi\+Renderer} class) 

Definition at line 54 of file dvi\+File.\+h.

\hypertarget{classdvifile_aeafc97277647ad5077a774be71b3253a}{\index{dvifile@{dvifile}!page\+\_\+offset@{page\+\_\+offset}}
\index{page\+\_\+offset@{page\+\_\+offset}!dvifile@{dvifile}}
\subsubsection[{page\+\_\+offset}]{\setlength{\rightskip}{0pt plus 5cm}Q\+Vector$<$quint32$>$ dvifile\+::page\+\_\+offset}}\label{classdvifile_aeafc97277647ad5077a774be71b3253a}


Definition at line 39 of file dvi\+File.\+h.

\hypertarget{classdvifile_ac136b96471bfd7873dbcb0425240dd0e}{\index{dvifile@{dvifile}!size\+\_\+of\+\_\+file@{size\+\_\+of\+\_\+file}}
\index{size\+\_\+of\+\_\+file@{size\+\_\+of\+\_\+file}!dvifile@{dvifile}}
\subsubsection[{size\+\_\+of\+\_\+file}]{\setlength{\rightskip}{0pt plus 5cm}qint64 dvifile\+::size\+\_\+of\+\_\+file}}\label{classdvifile_ac136b96471bfd7873dbcb0425240dd0e}


Definition at line 48 of file dvi\+File.\+h.

\hypertarget{classdvifile_a3121bb4c368ca1d30949cffb1df44d81}{\index{dvifile@{dvifile}!source\+Special\+Marker@{source\+Special\+Marker}}
\index{source\+Special\+Marker@{source\+Special\+Marker}!dvifile@{dvifile}}
\subsubsection[{source\+Special\+Marker}]{\setlength{\rightskip}{0pt plus 5cm}bool dvifile\+::source\+Special\+Marker}}\label{classdvifile_a3121bb4c368ca1d30949cffb1df44d81}
This flag is set to \char`\"{}true\char`\"{} during the construction of the dvifile, and is never changed afterwards by the dvifile class. It is used in kdvi in conjuction with source-\/specials\+: the first time a page with source specials is rendered, K\+D\+V\+I shows an info dialog, and the flag is set to false. That way K\+D\+V\+I ensures that the user is only informed once. 

Definition at line 69 of file dvi\+File.\+h.

\hypertarget{classdvifile_a9fdbeee20bb39fcafe317925767b24ef}{\index{dvifile@{dvifile}!suggested\+Page\+Size@{suggested\+Page\+Size}}
\index{suggested\+Page\+Size@{suggested\+Page\+Size}!dvifile@{dvifile}}
\subsubsection[{suggested\+Page\+Size}]{\setlength{\rightskip}{0pt plus 5cm}{\bf page\+Size}$\ast$ dvifile\+::suggested\+Page\+Size}}\label{classdvifile_a9fdbeee20bb39fcafe317925767b24ef}
Papersize information read from the dvi-\/\+File 

Definition at line 88 of file dvi\+File.\+h.

\hypertarget{classdvifile_a05cb283609e6d1627940d14e8fc85b62}{\index{dvifile@{dvifile}!tn\+\_\+table@{tn\+\_\+table}}
\index{tn\+\_\+table@{tn\+\_\+table}!dvifile@{dvifile}}
\subsubsection[{tn\+\_\+table}]{\setlength{\rightskip}{0pt plus 5cm}Q\+Hash$<$int,{\bf Te\+X\+Font\+Definition}$\ast$$>$ dvifile\+::tn\+\_\+table}}\label{classdvifile_a05cb283609e6d1627940d14e8fc85b62}


Definition at line 71 of file dvi\+File.\+h.

\hypertarget{classdvifile_a71577dbd82a462b855abc96be3b369c5}{\index{dvifile@{dvifile}!total\+\_\+pages@{total\+\_\+pages}}
\index{total\+\_\+pages@{total\+\_\+pages}!dvifile@{dvifile}}
\subsubsection[{total\+\_\+pages}]{\setlength{\rightskip}{0pt plus 5cm}quint16 dvifile\+::total\+\_\+pages}}\label{classdvifile_a71577dbd82a462b855abc96be3b369c5}


Definition at line 38 of file dvi\+File.\+h.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
generators/dvi/\hyperlink{dviFile_8h}{dvi\+File.\+h}\item 
generators/dvi/\hyperlink{dviFile_8cpp}{dvi\+File.\+cpp}\end{DoxyCompactItemize}
