\hypertarget{classMiniBarLogic}{\section{Mini\+Bar\+Logic Class Reference}
\label{classMiniBarLogic}\index{Mini\+Bar\+Logic@{Mini\+Bar\+Logic}}
}


The object that observes the document and feeds the minibars.  




{\ttfamily \#include $<$minibar.\+h$>$}

Inheritance diagram for Mini\+Bar\+Logic\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classMiniBarLogic}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classMiniBarLogic_a7bf174325973dd89b5cc28fca9ea9d56}{Mini\+Bar\+Logic} (Q\+Object $\ast$parent, \hyperlink{classOkular_1_1Document}{Okular\+::\+Document} $\ast$m\+\_\+document)
\item 
\hyperlink{classMiniBarLogic_a5ec33db020492835c0b7015c01cabc8d}{$\sim$\+Mini\+Bar\+Logic} ()
\item 
void \hyperlink{classMiniBarLogic_a87a87879be36670674541361566b0ed7}{add\+Mini\+Bar} (\hyperlink{classMiniBar}{Mini\+Bar} $\ast$mini\+Bar)
\item 
void \hyperlink{classMiniBarLogic_a770182cc59d80b7e8cabfc8d153c7a79}{remove\+Mini\+Bar} (\hyperlink{classMiniBar}{Mini\+Bar} $\ast$mini\+Bar)
\item 
\hyperlink{classOkular_1_1Document}{Okular\+::\+Document} $\ast$ \hyperlink{classMiniBarLogic_a6ff154c4a6afc3b7b72d33c408879282}{document} () const 
\item 
int \hyperlink{classMiniBarLogic_a24524db1abd64a39da93c33a49d914b5}{current\+Page} () const 
\item 
void \hyperlink{classMiniBarLogic_ad1fa9b146237729baed32cc4bda6098c}{notify\+Setup} (const Q\+Vector$<$ \hyperlink{classOkular_1_1Page}{Okular\+::\+Page} $\ast$ $>$ \&pages, int setup\+Flags)
\item 
void \hyperlink{classMiniBarLogic_afa52e19b681f520b45efc4293af4accd}{notify\+Current\+Page\+Changed} (int previous, int current)
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
The object that observes the document and feeds the minibars. 

Definition at line 84 of file minibar.\+h.



\subsection{Constructor \& Destructor Documentation}
\hypertarget{classMiniBarLogic_a7bf174325973dd89b5cc28fca9ea9d56}{\index{Mini\+Bar\+Logic@{Mini\+Bar\+Logic}!Mini\+Bar\+Logic@{Mini\+Bar\+Logic}}
\index{Mini\+Bar\+Logic@{Mini\+Bar\+Logic}!Mini\+Bar\+Logic@{Mini\+Bar\+Logic}}
\subsubsection[{Mini\+Bar\+Logic}]{\setlength{\rightskip}{0pt plus 5cm}Mini\+Bar\+Logic\+::\+Mini\+Bar\+Logic (
\begin{DoxyParamCaption}
\item[{Q\+Object $\ast$}]{parent, }
\item[{{\bf Okular\+::\+Document} $\ast$}]{m\+\_\+document}
\end{DoxyParamCaption}
)}}\label{classMiniBarLogic_a7bf174325973dd89b5cc28fca9ea9d56}


Definition at line 43 of file minibar.\+cpp.


\begin{DoxyCode}
44  : QObject(parent)
45  , m\_document( \hyperlink{classMiniBarLogic_a6ff154c4a6afc3b7b72d33c408879282}{document} )
46 \{
47 \}   
\end{DoxyCode}
\hypertarget{classMiniBarLogic_a5ec33db020492835c0b7015c01cabc8d}{\index{Mini\+Bar\+Logic@{Mini\+Bar\+Logic}!````~Mini\+Bar\+Logic@{$\sim$\+Mini\+Bar\+Logic}}
\index{````~Mini\+Bar\+Logic@{$\sim$\+Mini\+Bar\+Logic}!Mini\+Bar\+Logic@{Mini\+Bar\+Logic}}
\subsubsection[{$\sim$\+Mini\+Bar\+Logic}]{\setlength{\rightskip}{0pt plus 5cm}Mini\+Bar\+Logic\+::$\sim$\+Mini\+Bar\+Logic (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classMiniBarLogic_a5ec33db020492835c0b7015c01cabc8d}


Definition at line 49 of file minibar.\+cpp.


\begin{DoxyCode}
50 \{
51     m\_document->\hyperlink{classOkular_1_1Document_a2d704dea2ab28c846e58443ac38841f2}{removeObserver}( \textcolor{keyword}{this} );
52 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\hypertarget{classMiniBarLogic_a87a87879be36670674541361566b0ed7}{\index{Mini\+Bar\+Logic@{Mini\+Bar\+Logic}!add\+Mini\+Bar@{add\+Mini\+Bar}}
\index{add\+Mini\+Bar@{add\+Mini\+Bar}!Mini\+Bar\+Logic@{Mini\+Bar\+Logic}}
\subsubsection[{add\+Mini\+Bar}]{\setlength{\rightskip}{0pt plus 5cm}void Mini\+Bar\+Logic\+::add\+Mini\+Bar (
\begin{DoxyParamCaption}
\item[{{\bf Mini\+Bar} $\ast$}]{mini\+Bar}
\end{DoxyParamCaption}
)}}\label{classMiniBarLogic_a87a87879be36670674541361566b0ed7}


Definition at line 54 of file minibar.\+cpp.


\begin{DoxyCode}
55 \{
56     m\_miniBars.insert( miniBar );
57 \}
\end{DoxyCode}
\hypertarget{classMiniBarLogic_a24524db1abd64a39da93c33a49d914b5}{\index{Mini\+Bar\+Logic@{Mini\+Bar\+Logic}!current\+Page@{current\+Page}}
\index{current\+Page@{current\+Page}!Mini\+Bar\+Logic@{Mini\+Bar\+Logic}}
\subsubsection[{current\+Page}]{\setlength{\rightskip}{0pt plus 5cm}int Mini\+Bar\+Logic\+::current\+Page (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const}}\label{classMiniBarLogic_a24524db1abd64a39da93c33a49d914b5}


Definition at line 69 of file minibar.\+cpp.


\begin{DoxyCode}
70 \{
71     \textcolor{keywordflow}{return} m\_document->\hyperlink{classOkular_1_1Document_a42ec374d73794bf56d7e7b11f1f56319}{currentPage}();
72 \}
\end{DoxyCode}
\hypertarget{classMiniBarLogic_a6ff154c4a6afc3b7b72d33c408879282}{\index{Mini\+Bar\+Logic@{Mini\+Bar\+Logic}!document@{document}}
\index{document@{document}!Mini\+Bar\+Logic@{Mini\+Bar\+Logic}}
\subsubsection[{document}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Okular\+::\+Document} $\ast$ Mini\+Bar\+Logic\+::document (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const}}\label{classMiniBarLogic_a6ff154c4a6afc3b7b72d33c408879282}


Definition at line 64 of file minibar.\+cpp.


\begin{DoxyCode}
65 \{
66     \textcolor{keywordflow}{return} m\_document;
67 \}
\end{DoxyCode}
\hypertarget{classMiniBarLogic_afa52e19b681f520b45efc4293af4accd}{\index{Mini\+Bar\+Logic@{Mini\+Bar\+Logic}!notify\+Current\+Page\+Changed@{notify\+Current\+Page\+Changed}}
\index{notify\+Current\+Page\+Changed@{notify\+Current\+Page\+Changed}!Mini\+Bar\+Logic@{Mini\+Bar\+Logic}}
\subsubsection[{notify\+Current\+Page\+Changed}]{\setlength{\rightskip}{0pt plus 5cm}void Mini\+Bar\+Logic\+::notify\+Current\+Page\+Changed (
\begin{DoxyParamCaption}
\item[{int}]{previous, }
\item[{int}]{current}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classMiniBarLogic_afa52e19b681f520b45efc4293af4accd}
This method is called after the current page of the document has been entered.


\begin{DoxyParams}{Parameters}
{\em previous} & The number of the previous page (is {\ttfamily -\/1} for the initial page change). \\
\hline
{\em current} & The number of the current page.\\
\hline
\end{DoxyParams}
\begin{DoxySince}{Since}
0.\+16 (K\+D\+E 4.\+10) 
\end{DoxySince}


Reimplemented from \hyperlink{classOkular_1_1DocumentObserver_ae449ca3f3f8aa7dffab61a6b723a1fd8}{Okular\+::\+Document\+Observer}.



Definition at line 126 of file minibar.\+cpp.


\begin{DoxyCode}
127 \{
128     Q\_UNUSED( previousPage )
129 
130     \textcolor{comment}{// get current page number}
131     const \textcolor{keywordtype}{int} pages = m\_document->pages();
132 
133     \textcolor{comment}{// if the document is opened and page is changed}
134     if ( pages > 0 )
135     \{
136         \textcolor{keyword}{const} QString pageNumber = QString::number( \hyperlink{classMiniBarLogic_a24524db1abd64a39da93c33a49d914b5}{currentPage} + 1 );
137         \textcolor{keyword}{const} QString pageLabel = m\_document->\hyperlink{classOkular_1_1Document_a1c95c2f192d739c217d00971da48f69d}{page}( \hyperlink{classMiniBarLogic_a24524db1abd64a39da93c33a49d914b5}{currentPage} )->
      \hyperlink{classOkular_1_1Page_ae5cf0e5d2270c6add98bc4d9604e0e65}{label}();
138 
139         \textcolor{keywordflow}{foreach} ( \hyperlink{classMiniBar}{MiniBar} *miniBar, m\_miniBars )
140         \{
141             \textcolor{comment}{// update prev/next button state}
142             miniBar->m\_prevButton->setEnabled( \hyperlink{classMiniBarLogic_a24524db1abd64a39da93c33a49d914b5}{currentPage} > 0 );
143             miniBar->m\_nextButton->setEnabled( \hyperlink{classMiniBarLogic_a24524db1abd64a39da93c33a49d914b5}{currentPage} < ( pages - 1 ) );
144             \textcolor{comment}{// update text on widgets}
145             miniBar->m\_pageNumberEdit->\hyperlink{classPagesEdit_a1f4573d431b7fda9d8b690db903217d7}{setText}( pageNumber );
146             miniBar->m\_pageNumberLabel->setText( pageNumber );
147             miniBar->m\_pageLabelEdit->\hyperlink{classPageLabelEdit_ad2157902bf48e9c2db62045ec9e13f05}{setText}( pageLabel );
148         \}
149     \}
150 \}
\end{DoxyCode}
\hypertarget{classMiniBarLogic_ad1fa9b146237729baed32cc4bda6098c}{\index{Mini\+Bar\+Logic@{Mini\+Bar\+Logic}!notify\+Setup@{notify\+Setup}}
\index{notify\+Setup@{notify\+Setup}!Mini\+Bar\+Logic@{Mini\+Bar\+Logic}}
\subsubsection[{notify\+Setup}]{\setlength{\rightskip}{0pt plus 5cm}void Mini\+Bar\+Logic\+::notify\+Setup (
\begin{DoxyParamCaption}
\item[{const Q\+Vector$<$ {\bf Okular\+::\+Page} $\ast$ $>$ \&}]{pages, }
\item[{int}]{setup\+Flags}
\end{DoxyParamCaption}
)}}\label{classMiniBarLogic_ad1fa9b146237729baed32cc4bda6098c}


Definition at line 74 of file minibar.\+cpp.


\begin{DoxyCode}
75 \{
76     \textcolor{comment}{// only process data when document changes}
77     \textcolor{keywordflow}{if} ( !( setupFlags & \hyperlink{classOkular_1_1DocumentObserver_aba00584af99894f95a9650e91f109d40ae599564392c01b22e96eff7602c4dd03}{Okular::DocumentObserver::DocumentChanged}
       ) )
78         \textcolor{keywordflow}{return};
79 
80     \textcolor{comment}{// if document is closed or has no pages, hide widget}
81     \textcolor{keyword}{const} \textcolor{keywordtype}{int} pages = pageVector.count();
82     \textcolor{keywordflow}{if} ( pages < 1 )
83     \{
84         \textcolor{keywordflow}{foreach} ( \hyperlink{classMiniBar}{MiniBar} *miniBar, m\_miniBars )
85         \{
86             miniBar->setEnabled( \textcolor{keyword}{false} );
87         \}
88         \textcolor{keywordflow}{return};
89     \}
90     
91     \textcolor{keywordtype}{bool} labelsDiffer = \textcolor{keyword}{false};
92     \textcolor{keywordflow}{foreach}(\textcolor{keyword}{const} \hyperlink{classOkular_1_1Page}{Okular::Page} * page, pageVector)
93     \{
94         \textcolor{keywordflow}{if} (!page->\hyperlink{classOkular_1_1Page_ae5cf0e5d2270c6add98bc4d9604e0e65}{label}().isEmpty())
95         \{
96             \textcolor{keywordflow}{if} (page->\hyperlink{classOkular_1_1Page_ae5cf0e5d2270c6add98bc4d9604e0e65}{label}().toInt() != (page->\hyperlink{classOkular_1_1Page_a6eee5f157a130b47d81ddd63e501664b}{number}() + 1))
97             \{
98                 labelsDiffer = \textcolor{keyword}{true};
99             \}
100         \}
101     \}
102     
103     \textcolor{keyword}{const} QString pagesString = QString::number( pages );
104 
105     \textcolor{keywordflow}{foreach} ( \hyperlink{classMiniBar}{MiniBar} *miniBar, m\_miniBars )
106     \{
107         \textcolor{comment}{// resize width of widgets}
108         miniBar->resizeForPage( pages );
109             
110         \textcolor{comment}{// update child widgets}
111         miniBar->m\_pageLabelEdit->\hyperlink{classPageLabelEdit_a98491407e83f10e7a2b7bec9051d36c1}{setPageLabels}( pageVector );
112         miniBar->m\_pageNumberEdit->\hyperlink{classPageNumberEdit_a844debe272a0cc761736185203c19b59}{setPagesNumber}( pages );
113         miniBar->m\_pagesButton->setText( pagesString );
114         miniBar->m\_prevButton->setEnabled( \textcolor{keyword}{false} );
115         miniBar->m\_nextButton->setEnabled( \textcolor{keyword}{false} );
116         miniBar->m\_pageLabelEdit->setVisible( labelsDiffer );
117         miniBar->m\_pageNumberLabel->setVisible( labelsDiffer );
118         miniBar->m\_pageNumberEdit->setVisible( !labelsDiffer );
119 
120         miniBar->resize( miniBar->minimumSizeHint() );
121 
122         miniBar->setEnabled( \textcolor{keyword}{true} );
123     \}
124 \}
\end{DoxyCode}
\hypertarget{classMiniBarLogic_a770182cc59d80b7e8cabfc8d153c7a79}{\index{Mini\+Bar\+Logic@{Mini\+Bar\+Logic}!remove\+Mini\+Bar@{remove\+Mini\+Bar}}
\index{remove\+Mini\+Bar@{remove\+Mini\+Bar}!Mini\+Bar\+Logic@{Mini\+Bar\+Logic}}
\subsubsection[{remove\+Mini\+Bar}]{\setlength{\rightskip}{0pt plus 5cm}void Mini\+Bar\+Logic\+::remove\+Mini\+Bar (
\begin{DoxyParamCaption}
\item[{{\bf Mini\+Bar} $\ast$}]{mini\+Bar}
\end{DoxyParamCaption}
)}}\label{classMiniBarLogic_a770182cc59d80b7e8cabfc8d153c7a79}


Definition at line 59 of file minibar.\+cpp.


\begin{DoxyCode}
60 \{
61     m\_miniBars.remove( miniBar );
62 \}
\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
ui/\hyperlink{minibar_8h}{minibar.\+h}\item 
ui/\hyperlink{minibar_8cpp}{minibar.\+cpp}\end{DoxyCompactItemize}
