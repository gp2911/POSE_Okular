\hypertarget{classCHMGenerator}{\section{C\+H\+M\+Generator Class Reference}
\label{classCHMGenerator}\index{C\+H\+M\+Generator@{C\+H\+M\+Generator}}
}


{\ttfamily \#include $<$generator\+\_\+chm.\+h$>$}

Inheritance diagram for C\+H\+M\+Generator\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{classCHMGenerator}
\end{center}
\end{figure}
\subsection*{Public Slots}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classCHMGenerator_a238973cd7c98434b97af498d121f16a5}{slot\+Completed} ()
\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classCHMGenerator_a62bbb2287ce107cb02af60fca55e2a66}{C\+H\+M\+Generator} (Q\+Object $\ast$parent, const Q\+Variant\+List \&args)
\item 
\hyperlink{classCHMGenerator_aa6b744aa2e72a05309f6790eb1056ec0}{$\sim$\+C\+H\+M\+Generator} ()
\item 
bool \hyperlink{classCHMGenerator_adabe55488d27e4fe901db82abab46ae1}{load\+Document} (const Q\+String \&file\+Name, Q\+Vector$<$ \hyperlink{classOkular_1_1Page}{Okular\+::\+Page} $\ast$ $>$ \&pages\+Vector)
\item 
const \hyperlink{classOkular_1_1DocumentInfo}{Okular\+::\+Document\+Info} $\ast$ \hyperlink{classCHMGenerator_a892ef3f3685cb701ed0c07681313dc8c}{generate\+Document\+Info} ()
\item 
const \hyperlink{classOkular_1_1DocumentSynopsis}{Okular\+::\+Document\+Synopsis} $\ast$ \hyperlink{classCHMGenerator_a6e844b636798a41d3e47f13f18477676}{generate\+Document\+Synopsis} ()
\item 
bool \hyperlink{classCHMGenerator_a4ef1e1dd09459db0669484ee746226ad}{can\+Generate\+Pixmap} () const 
\item 
void \hyperlink{classCHMGenerator_ad4d1606c48e0348950d9fc6ab92e34bc}{generate\+Pixmap} (\hyperlink{classOkular_1_1PixmapRequest}{Okular\+::\+Pixmap\+Request} $\ast$request)
\item 
Q\+Variant \hyperlink{classCHMGenerator_a00c6f5fd227de74f1f70a1538216b4b7}{meta\+Data} (const Q\+String \&key, const Q\+Variant \&option) const 
\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
bool \hyperlink{classCHMGenerator_a8675493780e9540540acb4ca2bdf13e1}{do\+Close\+Document} ()
\item 
\hyperlink{classOkular_1_1TextPage}{Okular\+::\+Text\+Page} $\ast$ \hyperlink{classCHMGenerator_a4573bf1fd7c852641fee327d5d13de48}{text\+Page} (\hyperlink{classOkular_1_1Page}{Okular\+::\+Page} $\ast$page)
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}


Definition at line 31 of file generator\+\_\+chm.\+h.



\subsection{Constructor \& Destructor Documentation}
\hypertarget{classCHMGenerator_a62bbb2287ce107cb02af60fca55e2a66}{\index{C\+H\+M\+Generator@{C\+H\+M\+Generator}!C\+H\+M\+Generator@{C\+H\+M\+Generator}}
\index{C\+H\+M\+Generator@{C\+H\+M\+Generator}!C\+H\+M\+Generator@{C\+H\+M\+Generator}}
\subsubsection[{C\+H\+M\+Generator}]{\setlength{\rightskip}{0pt plus 5cm}C\+H\+M\+Generator\+::\+C\+H\+M\+Generator (
\begin{DoxyParamCaption}
\item[{Q\+Object $\ast$}]{parent, }
\item[{const Q\+Variant\+List \&}]{args}
\end{DoxyParamCaption}
)}}\label{classCHMGenerator_a62bbb2287ce107cb02af60fca55e2a66}


Definition at line 67 of file generator\+\_\+chm.\+cpp.


\begin{DoxyCode}
68     : \hyperlink{classOkular_1_1Generator}{Okular::Generator}( parent, args )
69 \{
70     \hyperlink{classOkular_1_1Generator_abcebcc5f69e98b6227496198a5c69d2c}{setFeature}( \hyperlink{classOkular_1_1Generator_a8517096896273a5ba5b970be09313c77a1bf7de5d98ec0333e392ce7f004d6578}{TextExtraction} );
71 
72     m\_syncGen=0;
73     m\_file=0;
74     m\_docInfo=0;
75     m\_pixmapRequestZoom=1;
76     m\_request = 0;
77 \}
\end{DoxyCode}
\hypertarget{classCHMGenerator_aa6b744aa2e72a05309f6790eb1056ec0}{\index{C\+H\+M\+Generator@{C\+H\+M\+Generator}!````~C\+H\+M\+Generator@{$\sim$\+C\+H\+M\+Generator}}
\index{````~C\+H\+M\+Generator@{$\sim$\+C\+H\+M\+Generator}!C\+H\+M\+Generator@{C\+H\+M\+Generator}}
\subsubsection[{$\sim$\+C\+H\+M\+Generator}]{\setlength{\rightskip}{0pt plus 5cm}C\+H\+M\+Generator\+::$\sim$\+C\+H\+M\+Generator (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classCHMGenerator_aa6b744aa2e72a05309f6790eb1056ec0}


Definition at line 79 of file generator\+\_\+chm.\+cpp.


\begin{DoxyCode}
80 \{
81     \textcolor{keyword}{delete} m\_syncGen;
82 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\hypertarget{classCHMGenerator_a4ef1e1dd09459db0669484ee746226ad}{\index{C\+H\+M\+Generator@{C\+H\+M\+Generator}!can\+Generate\+Pixmap@{can\+Generate\+Pixmap}}
\index{can\+Generate\+Pixmap@{can\+Generate\+Pixmap}!C\+H\+M\+Generator@{C\+H\+M\+Generator}}
\subsubsection[{can\+Generate\+Pixmap}]{\setlength{\rightskip}{0pt plus 5cm}bool C\+H\+M\+Generator\+::can\+Generate\+Pixmap (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classCHMGenerator_a4ef1e1dd09459db0669484ee746226ad}
This method returns whether the generator is ready to handle a new pixmap request. 

Reimplemented from \hyperlink{classOkular_1_1Generator_abbf00927221e2d2b2b71101f2b7f5732}{Okular\+::\+Generator}.



Definition at line 254 of file generator\+\_\+chm.\+cpp.


\begin{DoxyCode}
255 \{
256     \textcolor{keywordtype}{bool} isLocked = \textcolor{keyword}{true};
257     \textcolor{keywordflow}{if} ( \hyperlink{classOkular_1_1Generator_a83d702cccbce2288c3258d97f1f15e19}{userMutex}()->tryLock() ) \{
258         \hyperlink{classOkular_1_1Generator_a83d702cccbce2288c3258d97f1f15e19}{userMutex}()->unlock();
259         isLocked = \textcolor{keyword}{false};
260     \}
261 
262     \textcolor{keywordflow}{return} !isLocked;
263 \}
\end{DoxyCode}
\hypertarget{classCHMGenerator_a8675493780e9540540acb4ca2bdf13e1}{\index{C\+H\+M\+Generator@{C\+H\+M\+Generator}!do\+Close\+Document@{do\+Close\+Document}}
\index{do\+Close\+Document@{do\+Close\+Document}!C\+H\+M\+Generator@{C\+H\+M\+Generator}}
\subsubsection[{do\+Close\+Document}]{\setlength{\rightskip}{0pt plus 5cm}bool C\+H\+M\+Generator\+::do\+Close\+Document (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}}\label{classCHMGenerator_a8675493780e9540540acb4ca2bdf13e1}
This method is called when the document is closed and not used any longer.

\begin{DoxyReturn}{Returns}
true on success, false otherwise. 
\end{DoxyReturn}


Implements \hyperlink{classOkular_1_1Generator_ad3f1dcb98f3bd87c87ad0e91ecf4a6d7}{Okular\+::\+Generator}.



Definition at line 163 of file generator\+\_\+chm.\+cpp.


\begin{DoxyCode}
164 \{
165     \textcolor{comment}{// delete the document information of the old document}
166     \textcolor{keyword}{delete} m\_docInfo;
167     m\_docInfo=0;
168     \textcolor{keyword}{delete} m\_file;
169     m\_file=0;
170     m\_textpageAddedList.clear();
171     m\_rectsGenerated.clear();
172     m\_urlPage.clear();
173     m\_pageUrl.clear();
174     m\_docSyn.clear();
175     \textcolor{keywordflow}{if} (m\_syncGen)
176     \{
177         m\_syncGen->closeUrl();
178     \}
179 
180     \textcolor{keywordflow}{return} \textcolor{keyword}{true};
181 \}
\end{DoxyCode}
\hypertarget{classCHMGenerator_a892ef3f3685cb701ed0c07681313dc8c}{\index{C\+H\+M\+Generator@{C\+H\+M\+Generator}!generate\+Document\+Info@{generate\+Document\+Info}}
\index{generate\+Document\+Info@{generate\+Document\+Info}!C\+H\+M\+Generator@{C\+H\+M\+Generator}}
\subsubsection[{generate\+Document\+Info}]{\setlength{\rightskip}{0pt plus 5cm}const {\bf Okular\+::\+Document\+Info} $\ast$ C\+H\+M\+Generator\+::generate\+Document\+Info (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classCHMGenerator_a892ef3f3685cb701ed0c07681313dc8c}
Returns the general information object of the document or 0 if no information are available. 

Reimplemented from \hyperlink{classOkular_1_1Generator_a9993dd0a2415499e23d8394e7a447e98}{Okular\+::\+Generator}.



Definition at line 237 of file generator\+\_\+chm.\+cpp.


\begin{DoxyCode}
238 \{
239     \textcolor{keywordflow}{if} (!m\_docInfo)
240     \{
241         m\_docInfo=\textcolor{keyword}{new} \hyperlink{classOkular_1_1DocumentInfo}{Okular::DocumentInfo}();
242 
243         m\_docInfo->\hyperlink{classOkular_1_1DocumentInfo_a8bd5403394ab192f1103cbf2a8e48d9b}{set}( \hyperlink{classOkular_1_1DocumentInfo_a3a6e5f7fb246e29bcb2e830b6f770791a786464e8e8c3e6ba1cd74e408487785b}{Okular::DocumentInfo::MimeType}, \textcolor{stringliteral}{"application/x-chm
      "} );
244         m\_docInfo->\hyperlink{classOkular_1_1DocumentInfo_a8bd5403394ab192f1103cbf2a8e48d9b}{set}( \hyperlink{classOkular_1_1DocumentInfo_a3a6e5f7fb246e29bcb2e830b6f770791ae400626d63f14b61c55bd22aca9481e0}{Okular::DocumentInfo::Title}, m\_file->
      \hyperlink{classLCHMFile_ad44b1237596a2844ce743162d0ed7add}{title}() );
245     \}
246     \textcolor{keywordflow}{return} m\_docInfo;
247 \}
\end{DoxyCode}
\hypertarget{classCHMGenerator_a6e844b636798a41d3e47f13f18477676}{\index{C\+H\+M\+Generator@{C\+H\+M\+Generator}!generate\+Document\+Synopsis@{generate\+Document\+Synopsis}}
\index{generate\+Document\+Synopsis@{generate\+Document\+Synopsis}!C\+H\+M\+Generator@{C\+H\+M\+Generator}}
\subsubsection[{generate\+Document\+Synopsis}]{\setlength{\rightskip}{0pt plus 5cm}const {\bf Okular\+::\+Document\+Synopsis} $\ast$ C\+H\+M\+Generator\+::generate\+Document\+Synopsis (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classCHMGenerator_a6e844b636798a41d3e47f13f18477676}
Returns the 'table of content' object of the document or 0 if no table of content is available. 

Reimplemented from \hyperlink{classOkular_1_1Generator_a1f8b31c19d7a5101cadf3fe3186ab0f1}{Okular\+::\+Generator}.



Definition at line 249 of file generator\+\_\+chm.\+cpp.


\begin{DoxyCode}
250 \{
251     \textcolor{keywordflow}{return} &m\_docSyn;
252 \}
\end{DoxyCode}
\hypertarget{classCHMGenerator_ad4d1606c48e0348950d9fc6ab92e34bc}{\index{C\+H\+M\+Generator@{C\+H\+M\+Generator}!generate\+Pixmap@{generate\+Pixmap}}
\index{generate\+Pixmap@{generate\+Pixmap}!C\+H\+M\+Generator@{C\+H\+M\+Generator}}
\subsubsection[{generate\+Pixmap}]{\setlength{\rightskip}{0pt plus 5cm}void C\+H\+M\+Generator\+::generate\+Pixmap (
\begin{DoxyParamCaption}
\item[{{\bf Okular\+::\+Pixmap\+Request} $\ast$}]{request}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classCHMGenerator_ad4d1606c48e0348950d9fc6ab92e34bc}
This method can be called to trigger the generation of a new pixmap as described by {\ttfamily request}. We create the text page for every page that is visible to the user, so he can use the text extraction tools without a delay.

Reimplemented from \hyperlink{classOkular_1_1Generator_a198cdcd9c27b179562c935342fd457b6}{Okular\+::\+Generator}.



Definition at line 265 of file generator\+\_\+chm.\+cpp.


\begin{DoxyCode}
266 \{
267     \textcolor{keywordtype}{int} requestWidth = request->\hyperlink{classOkular_1_1PixmapRequest_a3e82f09b91a52efed7435eeb9903e5fc}{width}();
268     \textcolor{keywordtype}{int} requestHeight = request->\hyperlink{classOkular_1_1PixmapRequest_a782392a2efc6303994c7e0158c76ee06}{height}();
269     \textcolor{keywordflow}{if} (requestWidth<300)
270     \{
271         m\_pixmapRequestZoom=900/requestWidth;
272         requestWidth*=m\_pixmapRequestZoom;
273         requestHeight*=m\_pixmapRequestZoom;
274     \}
275 
276     \hyperlink{classOkular_1_1Generator_a83d702cccbce2288c3258d97f1f15e19}{userMutex}()->lock();
277     QString url= m\_pageUrl[request->\hyperlink{classOkular_1_1PixmapRequest_a50f959175182137dbb9e2dbd6ddd71aa}{pageNumber}()];
278     \textcolor{keywordtype}{int} zoom = qRound( qMax( static\_cast<double>(requestWidth)/static\_cast<double>(request->
      \hyperlink{classOkular_1_1PixmapRequest_a83b5e81f2e908e70f3c19a0a3c07fab3}{page}()->\hyperlink{classOkular_1_1Page_a57114e88281da2a51b1bb0d5d4996d53}{width}())
279         , static\_cast<double>(requestHeight)/\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(request->\hyperlink{classOkular_1_1PixmapRequest_a83b5e81f2e908e70f3c19a0a3c07fab3}{page}()->
      \hyperlink{classOkular_1_1Page_a67246a32b3e625946eb5c685b8372a4f}{height}())
280         ) ) * 100;
281 
282     KUrl pAddress= QString(\textcolor{stringliteral}{"ms-its:"} + m\_fileName + \textcolor{stringliteral}{"::"} + url);
283     m\_chmUrl = url;
284     m\_syncGen->setZoomFactor(zoom);
285     m\_syncGen->view()->resize(requestWidth,requestHeight);
286     m\_request=request;
287     \textcolor{comment}{// will emit openURL without problems}
288     m\_syncGen->openUrl ( pAddress );
289 \}
\end{DoxyCode}
\hypertarget{classCHMGenerator_adabe55488d27e4fe901db82abab46ae1}{\index{C\+H\+M\+Generator@{C\+H\+M\+Generator}!load\+Document@{load\+Document}}
\index{load\+Document@{load\+Document}!C\+H\+M\+Generator@{C\+H\+M\+Generator}}
\subsubsection[{load\+Document}]{\setlength{\rightskip}{0pt plus 5cm}bool C\+H\+M\+Generator\+::load\+Document (
\begin{DoxyParamCaption}
\item[{const Q\+String \&}]{file\+Name, }
\item[{Q\+Vector$<$ {\bf Okular\+::\+Page} $\ast$ $>$ \&}]{pages\+Vector}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classCHMGenerator_adabe55488d27e4fe901db82abab46ae1}
Loads the document with the given {\ttfamily file\+Name} and fills the {\ttfamily pages\+Vector} with the parsed pages.

\begin{DoxyReturn}{Returns}
true on success, false otherwise. 
\end{DoxyReturn}


Implements \hyperlink{classOkular_1_1Generator_a388b47328a5297d53cdbdc6fcf074ee3}{Okular\+::\+Generator}.



Definition at line 84 of file generator\+\_\+chm.\+cpp.


\begin{DoxyCode}
85 \{
86     m\_file = \textcolor{keyword}{new} \hyperlink{classLCHMFile}{LCHMFile}();
87     \textcolor{keywordflow}{if} (!m\_file->\hyperlink{classLCHMFile_a99187b66c1ad404bd77382b93c5c4a79}{loadFile}(fileName))
88     \{
89         \textcolor{keyword}{delete} m\_file;
90         m\_file = 0;
91         \textcolor{keywordflow}{return} \textcolor{keyword}{false};
92     \}
93     m\_fileName=fileName;
94     QVector< LCHMParsedEntry > topics;
95     m\_file->\hyperlink{classLCHMFile_a28d69103c40a289a41ef8f56e5f63eca}{parseTableOfContents}(&topics);
96     
97     \textcolor{comment}{// fill m\_docSyn}
98     \hyperlink{classQMap}{QMap<int, QDomElement>} lastIndentElement;
99     \textcolor{keywordflow}{foreach}(\textcolor{keyword}{const} \hyperlink{structLCHMParsedEntry}{LCHMParsedEntry} &e, topics)
100     \{
101         QDomElement item = m\_docSyn.createElement(e.\hyperlink{structLCHMParsedEntry_a90196da32bb2ed757f516caf583a6437}{name});
102         \textcolor{keywordflow}{if} (!e.\hyperlink{structLCHMParsedEntry_aa871a08e7fca4ae8e23983ff299bd24f}{urls}.isEmpty())
103         \{
104             QString url = e.\hyperlink{structLCHMParsedEntry_aa871a08e7fca4ae8e23983ff299bd24f}{urls}.first();
105             \textcolor{keywordflow}{if} (url.contains(QChar::fromLatin1(\textcolor{charliteral}{'%'})))
106                 url = QString::fromUtf8(QByteArray::fromPercentEncoding(url.toUtf8()));
107             item.setAttribute(\textcolor{stringliteral}{"ViewportName"}, url);
108         \}
109         item.setAttribute(\textcolor{stringliteral}{"Icon"}, e.\hyperlink{structLCHMParsedEntry_aefeb9372238ddebc327350e1696ec901}{imageid});
110         \textcolor{keywordflow}{if} (e.\hyperlink{structLCHMParsedEntry_a33a145dba3dd4761f26b361dcf49017b}{indent} == 0) m\_docSyn.appendChild(item);
111         \textcolor{keywordflow}{else} lastIndentElement[e.\hyperlink{structLCHMParsedEntry_a33a145dba3dd4761f26b361dcf49017b}{indent} - 1].appendChild(item);
112         lastIndentElement[e.\hyperlink{structLCHMParsedEntry_a33a145dba3dd4761f26b361dcf49017b}{indent}] = item;
113     \}
114     
115     \textcolor{comment}{// fill m\_urlPage and m\_pageUrl}
116     \textcolor{keywordtype}{int} pageNum = 0;
117     QStringList pageList;
118     m\_file->\hyperlink{classLCHMFile_af0dbccaf688f99e8c4519917159e8817}{enumerateFiles}(&pageList);
119     \textcolor{keyword}{const} QString home = m\_file->\hyperlink{classLCHMFile_a6d33c304ba1c1e1ba2cbec2c90a5b975}{homeUrl}();
120     \textcolor{keywordflow}{if} (home != QLatin1String(\textcolor{stringliteral}{"/"}))
121         pageList.prepend(home);
122     \textcolor{keywordflow}{foreach} (\textcolor{keyword}{const} QString &url, pageList)
123     \{
124         \textcolor{keyword}{const} QString urlLower = url.toLower();
125         \textcolor{keywordflow}{if} (!urlLower.endsWith(QLatin1String(\textcolor{stringliteral}{".html"})) && !urlLower.endsWith(QLatin1String(\textcolor{stringliteral}{".htm"})))
126             \textcolor{keywordflow}{continue};
127 
128         \textcolor{keywordtype}{int} pos = url.indexOf (\textcolor{charliteral}{'#'});
129         QString tmpUrl = pos == -1 ? url : url.left(pos);
130 
131         \textcolor{comment}{// url already there, abort insertion}
132         \textcolor{keywordflow}{if} (m\_urlPage.contains(tmpUrl)) \textcolor{keywordflow}{continue};
133 
134         \textcolor{comment}{// insert the url into the maps, but insert always the variant without the #ref part}
135         m\_urlPage.insert(tmpUrl, pageNum);
136         m\_pageUrl.append(tmpUrl);
137         pageNum++;
138     \}
139 
140     pagesVector.resize(m\_pageUrl.count());
141     m\_textpageAddedList.fill(\textcolor{keyword}{false}, pagesVector.count());
142     m\_rectsGenerated.fill(\textcolor{keyword}{false}, pagesVector.count());
143 
144     \textcolor{keywordflow}{if} (!m\_syncGen)
145     \{
146         m\_syncGen = \textcolor{keyword}{new} KHTMLPart();
147     \}
148     disconnect( m\_syncGen, 0, \textcolor{keyword}{this}, 0 );
149 
150     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < m\_pageUrl.count(); ++i)
151     \{
152         preparePageForSyncOperation(100, m\_pageUrl.at(i));
153         pagesVector[ i ] = \textcolor{keyword}{new} \hyperlink{classOkular_1_1Page}{Okular::Page} (i, m\_syncGen->view()->contentsWidth(),
154             m\_syncGen->view()->contentsHeight(), \hyperlink{namespaceOkular_a8556d00465f61ef533c6b027669e7da6aa4df8fc3dd09e30520c264c8d23d89c2}{Okular::Rotation0} );
155     \}
156 
157     connect( m\_syncGen, SIGNAL(completed()), \textcolor{keyword}{this}, SLOT(\hyperlink{classCHMGenerator_a238973cd7c98434b97af498d121f16a5}{slotCompleted}()) );
158     connect( m\_syncGen, SIGNAL(canceled(QString)), \textcolor{keyword}{this}, SLOT(\hyperlink{classCHMGenerator_a238973cd7c98434b97af498d121f16a5}{slotCompleted}()) );
159 
160     \textcolor{keywordflow}{return} \textcolor{keyword}{true};
161 \}
\end{DoxyCode}
\hypertarget{classCHMGenerator_a00c6f5fd227de74f1f70a1538216b4b7}{\index{C\+H\+M\+Generator@{C\+H\+M\+Generator}!meta\+Data@{meta\+Data}}
\index{meta\+Data@{meta\+Data}!C\+H\+M\+Generator@{C\+H\+M\+Generator}}
\subsubsection[{meta\+Data}]{\setlength{\rightskip}{0pt plus 5cm}Q\+Variant C\+H\+M\+Generator\+::meta\+Data (
\begin{DoxyParamCaption}
\item[{const Q\+String \&}]{key, }
\item[{const Q\+Variant \&}]{option}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classCHMGenerator_a00c6f5fd227de74f1f70a1538216b4b7}
This method returns the meta data of the given {\ttfamily key} with the given {\ttfamily option} of the document. 

Reimplemented from \hyperlink{classOkular_1_1Generator_a74f6b91e31ead5b572ffb9fb6b06c188}{Okular\+::\+Generator}.



Definition at line 445 of file generator\+\_\+chm.\+cpp.


\begin{DoxyCode}
446 \{
447     \textcolor{keywordflow}{if} ( key == \textcolor{stringliteral}{"NamedViewport"} && !option.toString().isEmpty() )
448     \{
449         \textcolor{keyword}{const} \textcolor{keywordtype}{int} pos = option.toString().indexOf(\textcolor{charliteral}{'#'});
450         QString tmpUrl = pos == -1 ? option.toString() : option.toString().left(pos);
451         \hyperlink{classOkular_1_1DocumentViewport}{Okular::DocumentViewport} viewport;
452         \hyperlink{classQMap}{QMap<QString,int>::const\_iterator} it = m\_urlPage.find(tmpUrl);
453         \textcolor{keywordflow}{if} (it != m\_urlPage.end())
454         \{
455             viewport.\hyperlink{classOkular_1_1DocumentViewport_a122674d4a493e79b1aa5fd5c00e81c93}{pageNumber} = it.value();
456             \textcolor{keywordflow}{return} viewport.\hyperlink{classOkular_1_1DocumentViewport_a77e42e0c9502b91085cd25f845ecafa0}{toString}();
457         \}
458         
459     \}
460     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( key == \textcolor{stringliteral}{"DocumentTitle"} )
461     \{
462         \textcolor{keywordflow}{return} m\_file->\hyperlink{classLCHMFile_ad44b1237596a2844ce743162d0ed7add}{title}();
463     \}
464     \textcolor{keywordflow}{return} QVariant();
465 \}
\end{DoxyCode}
\hypertarget{classCHMGenerator_a238973cd7c98434b97af498d121f16a5}{\index{C\+H\+M\+Generator@{C\+H\+M\+Generator}!slot\+Completed@{slot\+Completed}}
\index{slot\+Completed@{slot\+Completed}!C\+H\+M\+Generator@{C\+H\+M\+Generator}}
\subsubsection[{slot\+Completed}]{\setlength{\rightskip}{0pt plus 5cm}void C\+H\+M\+Generator\+::slot\+Completed (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [slot]}}}\label{classCHMGenerator_a238973cd7c98434b97af498d121f16a5}


Definition at line 199 of file generator\+\_\+chm.\+cpp.


\begin{DoxyCode}
200 \{
201     \textcolor{keywordflow}{if} ( !m\_request )
202         \textcolor{keywordflow}{return};
203 
204     QImage \hyperlink{classOkular_1_1Generator_a6712c8d3c2759c3a1fcacbd503d3286e}{image}( m\_request->\hyperlink{classOkular_1_1PixmapRequest_a3e82f09b91a52efed7435eeb9903e5fc}{width}(), m\_request->\hyperlink{classOkular_1_1PixmapRequest_a782392a2efc6303994c7e0158c76ee06}{height}(), QImage::Format\_ARGB32 );
205     \hyperlink{classOkular_1_1Generator_a6712c8d3c2759c3a1fcacbd503d3286e}{image}.fill( qRgb( 255, 255, 255 ) );
206 
207     QPainter p( &\hyperlink{classOkular_1_1Generator_a6712c8d3c2759c3a1fcacbd503d3286e}{image} );
208     QRect r( 0, 0, m\_request->\hyperlink{classOkular_1_1PixmapRequest_a3e82f09b91a52efed7435eeb9903e5fc}{width}(), m\_request->\hyperlink{classOkular_1_1PixmapRequest_a782392a2efc6303994c7e0158c76ee06}{height}() );
209 
210     \textcolor{keywordtype}{bool} moreToPaint;
211     m\_syncGen->paint( &p, r, 0, &moreToPaint );
212 
213     p.end();
214 
215     \textcolor{keywordflow}{if} ( m\_pixmapRequestZoom > 1 )
216         m\_pixmapRequestZoom = 1;
217 
218     \textcolor{keywordflow}{if} ( !m\_textpageAddedList.at( m\_request->\hyperlink{classOkular_1_1PixmapRequest_a50f959175182137dbb9e2dbd6ddd71aa}{pageNumber}() ) ) \{
219         additionalRequestData();
220         m\_textpageAddedList[ m\_request->\hyperlink{classOkular_1_1PixmapRequest_a50f959175182137dbb9e2dbd6ddd71aa}{pageNumber}() ] = \textcolor{keyword}{true};
221     \}
222 
223     m\_syncGen->closeUrl();
224     m\_chmUrl = QString();
225 
226     \hyperlink{classOkular_1_1Generator_a83d702cccbce2288c3258d97f1f15e19}{userMutex}()->unlock();
227 
228     \hyperlink{classOkular_1_1PixmapRequest}{Okular::PixmapRequest} *req = m\_request;
229     m\_request = 0;
230 
231     \textcolor{keywordflow}{if} ( !req->\hyperlink{classOkular_1_1PixmapRequest_a83b5e81f2e908e70f3c19a0a3c07fab3}{page}()->\hyperlink{classOkular_1_1Page_a19690d5696075b6e93a5a6ea578ca09e}{isBoundingBoxKnown}() )
232         \hyperlink{classOkular_1_1Generator_acc2aae181c392cb58e42eaa8d35213ef}{updatePageBoundingBox}( req->\hyperlink{classOkular_1_1PixmapRequest_a83b5e81f2e908e70f3c19a0a3c07fab3}{page}()->\hyperlink{classOkular_1_1Page_a6eee5f157a130b47d81ddd63e501664b}{number}(), 
      \hyperlink{classOkular_1_1Utils_af1d97967ffcdda70bbc4ddb293da5020}{Okular::Utils::imageBoundingBox}( &\hyperlink{classOkular_1_1Generator_a6712c8d3c2759c3a1fcacbd503d3286e}{image} ) );
233     req->\hyperlink{classOkular_1_1PixmapRequest_a83b5e81f2e908e70f3c19a0a3c07fab3}{page}()->\hyperlink{classOkular_1_1Page_ae7e45a6647904b01ebe84930b73f1d79}{setPixmap}( req->\hyperlink{classOkular_1_1PixmapRequest_af7abb325ca484ded40c556cf0ad5b793}{observer}(), \textcolor{keyword}{new} QPixmap( QPixmap::fromImage( 
      \hyperlink{classOkular_1_1Generator_a6712c8d3c2759c3a1fcacbd503d3286e}{image} ) ) );
234     \hyperlink{classOkular_1_1Generator_abed0ea73d02be9c4a0afcd920882faf5}{signalPixmapRequestDone}( req );
235 \}
\end{DoxyCode}
\hypertarget{classCHMGenerator_a4573bf1fd7c852641fee327d5d13de48}{\index{C\+H\+M\+Generator@{C\+H\+M\+Generator}!text\+Page@{text\+Page}}
\index{text\+Page@{text\+Page}!C\+H\+M\+Generator@{C\+H\+M\+Generator}}
\subsubsection[{text\+Page}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Okular\+::\+Text\+Page} $\ast$ C\+H\+M\+Generator\+::text\+Page (
\begin{DoxyParamCaption}
\item[{{\bf Okular\+::\+Page} $\ast$}]{page}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}}\label{classCHMGenerator_a4573bf1fd7c852641fee327d5d13de48}
Returns the text page for the given {\ttfamily page}.

\begin{DoxyWarning}{Warning}
this method may be executed in its own separated thread if the \hyperlink{classOkular_1_1Generator_a8517096896273a5ba5b970be09313c77a0764a910b194896e72da084c3c51a2d0}{Threaded} is enabled! 
\end{DoxyWarning}


Reimplemented from \hyperlink{classOkular_1_1Generator_af7915b97ab4b9347fb76babdda212cef}{Okular\+::\+Generator}.



Definition at line 432 of file generator\+\_\+chm.\+cpp.


\begin{DoxyCode}
433 \{
434     \hyperlink{classOkular_1_1Generator_a83d702cccbce2288c3258d97f1f15e19}{userMutex}()->lock();
435     \textcolor{keyword}{const} \textcolor{keywordtype}{int} zoom = 100;
436     m\_syncGen->view()->resize(page->\hyperlink{classOkular_1_1Page_a57114e88281da2a51b1bb0d5d4996d53}{width}(), page->\hyperlink{classOkular_1_1Page_a67246a32b3e625946eb5c685b8372a4f}{height}());
437     
438     preparePageForSyncOperation(zoom, m\_pageUrl[page->\hyperlink{classOkular_1_1Page_a6eee5f157a130b47d81ddd63e501664b}{number}()]);
439     \hyperlink{classOkular_1_1TextPage}{Okular::TextPage} *tp=\textcolor{keyword}{new} \hyperlink{classOkular_1_1TextPage}{Okular::TextPage}();
440     recursiveExploreNodes( m\_syncGen->htmlDocument(), tp);
441     \hyperlink{classOkular_1_1Generator_a83d702cccbce2288c3258d97f1f15e19}{userMutex}()->unlock();
442     \textcolor{keywordflow}{return} tp;
443 \}
\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
generators/chm/\hyperlink{generator__chm_8h}{generator\+\_\+chm.\+h}\item 
generators/chm/\hyperlink{generator__chm_8cpp}{generator\+\_\+chm.\+cpp}\end{DoxyCompactItemize}
