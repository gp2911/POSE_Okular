\hypertarget{classdviRenderer}{\section{dvi\+Renderer Class Reference}
\label{classdviRenderer}\index{dvi\+Renderer@{dvi\+Renderer}}
}


{\ttfamily \#include $<$dvi\+Renderer.\+h$>$}

Inheritance diagram for dvi\+Renderer\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classdviRenderer}
\end{center}
\end{figure}
\subsection*{Public Slots}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classdviRenderer_a784bc755f1db810e472768128250f917}{export\+P\+S} (const Q\+String \&fname=Q\+String(), const Q\+String\+List \&options=Q\+String\+List(), Q\+Printer $\ast$printer=0, Q\+Printer\+::\+Orientation orientation=Q\+Printer\+::\+Portrait)
\item 
void \hyperlink{classdviRenderer_a433978b1cba35770ed154a0fa3c5ff67}{export\+P\+D\+F} ()
\item 
void \hyperlink{classdviRenderer_aa8da8dcd8e7c35b18004266d3c7b1a4f}{handle\+S\+R\+C\+Link} (const Q\+String \&link\+Text, const Q\+Point \&point, Document\+Widget $\ast$widget)
\item 
void \hyperlink{classdviRenderer_a66c8cc74efb2b2e0c7f6de0c41d1a8a7}{embed\+Post\+Script} ()
\item 
virtual void \hyperlink{classdviRenderer_ac7bf7c2ee0d8e11b9cc465d50953b1c8}{draw\+Page} (\hyperlink{dviPageInfo_8h_abbc025c6680e9098abf69893b8d6de1b}{Rendered\+Document\+Page\+Pixmap} $\ast$page)
\item 
virtual void \hyperlink{classdviRenderer_a8e14acc0c7dffed62d4af08c8bf9226c}{get\+Text} (\hyperlink{dviPageInfo_8h_abbc025c6680e9098abf69893b8d6de1b}{Rendered\+Document\+Page\+Pixmap} $\ast$page)
\item 
\hyperlink{classSimplePageSize}{Simple\+Page\+Size} \hyperlink{classdviRenderer_a8d5430b14cdc4bdf6579402004f31317}{size\+Of\+Page} (const \hyperlink{classPageNumber}{Page\+Number} \&page)
\item 
Q\+Vector$<$ \hyperlink{classPreBookmark}{Pre\+Bookmark} $>$ \hyperlink{classdviRenderer_aa59a29b870ae9a4ec30bfefdde940ca1}{get\+Prebookmarks} () const 
\item 
const Q\+Vector\\*
$<$ \hyperlink{classDVI__SourceFileAnchor}{D\+V\+I\+\_\+\+Source\+File\+Anchor} $>$ \& \hyperlink{classdviRenderer_a0f0daa0b75c84c46bbdb3298979797d9}{source\+Anchors} ()
\end{DoxyCompactItemize}
\subsection*{Signals}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classdviRenderer_ac3e658a3f6b99c724413fc1f5663f976}{error} (const Q\+String \&message, int duration)
\item 
void \hyperlink{classdviRenderer_a07b2460ad76478aa074720e2fd4876bd}{warning} (const Q\+String \&message, int duration)
\item 
void \hyperlink{classdviRenderer_a28699d83c94c30eb2ab1d8b6de07b46a}{notice} (const Q\+String \&message, int duration)
\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classdviRenderer_a2954a0104eea3e51bbc9a9c1bada9c49}{dvi\+Renderer} (bool use\+Font\+Hinting)
\item 
virtual \hyperlink{classdviRenderer_ad72e47cc49a85bf48e9a613a02464d3a}{$\sim$dvi\+Renderer} ()
\item 
virtual bool \hyperlink{classdviRenderer_a1e7b4808351b40f86051926f006506d9}{set\+File} (const Q\+String \&fname, const K\+Url \&base)
\item 
virtual bool \hyperlink{classdviRenderer_a19678af601aef8476d304bf33cd40fcb}{supports\+Text\+Search} () const 
\item 
bool \hyperlink{classdviRenderer_a5e971ffab212a0c901e5b40d6466becc}{show\+P\+S} ()
\item 
int \hyperlink{classdviRenderer_a6f13d6edb5d735cf6cd9f0b3bcc5ef06}{curr\+\_\+page} ()
\item 
virtual bool \hyperlink{classdviRenderer_ac97838eefe7ae970c4cd462829267261}{is\+Valid\+File} (const Q\+String \&file\+Name) const 
\item 
virtual \hyperlink{classAnchor}{Anchor} \hyperlink{classdviRenderer_ac86c232ea62e24495bea6ea67a2c01b8}{parse\+Reference} (const Q\+String \&reference)
\item 
\hyperlink{classAnchor}{Anchor} \hyperlink{classdviRenderer_a0f11aa712420cb39bf0909822a4e98bf}{find\+Anchor} (const Q\+String \&)
\item 
virtual \hyperlink{classPageNumber}{Page\+Number} \hyperlink{classdviRenderer_a694e70b7bf8453cab6f6922b4e9d66b7}{total\+Pages} () const 
\item 
void \hyperlink{classdviRenderer_af30d1266141994da13096f793e4fc25b}{set\+Parent\+Widget} (Q\+Widget $\ast$parent)
\item 
void \hyperlink{classdviRenderer_a2fd78732f8a754a69680ba49a7c33dd0}{set\+Event\+Loop} (Q\+Event\+Loop $\ast$el)
\item 
void \hyperlink{classdviRenderer_a86f30945088aa924a9a79ea58d2c0b65}{read\+\_\+postamble} ()
\item 
void \hyperlink{classdviRenderer_a590afd35c11e92d20fe0d8d98a84e2d2}{draw\+\_\+part} (double current\+\_\+dimconv, bool is\+\_\+vfmacro)
\item 
void \hyperlink{classdviRenderer_a7a37517f903bc0446faadfbc4acff6e9}{set\+\_\+vf\+\_\+char} (unsigned int cmd, unsigned int ch)
\item 
void \hyperlink{classdviRenderer_aee61c986d42cdc1f0ac1ff168a4e1663}{set\+\_\+char} (unsigned int cmd, unsigned int ch)
\item 
void \hyperlink{classdviRenderer_a96fba91804fe14b87b554192fb772cb3}{set\+\_\+empty\+\_\+char} (unsigned int cmd, unsigned int ch)
\item 
void \hyperlink{classdviRenderer_af39ff19024aab0a2da12815c14851f19}{set\+\_\+no\+\_\+char} (unsigned int cmd, unsigned int ch)
\item 
void \hyperlink{classdviRenderer_a4aef6b7d6eb3866681590f172afad781}{application\+Do\+Special} (char $\ast$cp)
\item 
void \hyperlink{classdviRenderer_a32c6c3b2d90c0c3b75977d6de1e8bc59}{special} (long nbytes)
\item 
void \hyperlink{classdviRenderer_ae8aea1960b6629e2559e4d73da894faf}{print\+Error\+Msg\+For\+Specials} (const Q\+String \&msg)
\item 
void \hyperlink{classdviRenderer_ad233897e0a40650628ba6fc8bd3d87b0}{color\+\_\+special} (const Q\+String \&msg)
\item 
void \hyperlink{classdviRenderer_a2dfcf48566f5cb649c8110d3c79dc945}{html\+\_\+href\+\_\+special} (const Q\+String \&msg)
\item 
void \hyperlink{classdviRenderer_a3967eeda01307c73467bfc47465cde6c}{html\+\_\+anchor\+\_\+end} ()
\item 
void \hyperlink{classdviRenderer_a88550ffd9961878d36b244b21edb7647}{draw\+\_\+page} ()
\item 
void \hyperlink{classdviRenderer_a91b346176bd12e95a8c962afb425b8e1}{export\+\_\+finished} (const \hyperlink{classDVIExport}{D\+V\+I\+Export} $\ast$)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classdvifile}{dvifile} $\ast$ \hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dvi\+File}
\end{DoxyCompactItemize}
\subsection*{Friends}
\begin{DoxyCompactItemize}
\item 
class \hyperlink{classdviRenderer_a741d5e51c874df4d150f2c4b35491790}{D\+V\+I\+Export\+To\+P\+S}
\item 
class \hyperlink{classdviRenderer_af00868f58c699150d1a8c3a8f4ac592c}{D\+V\+I\+Export}
\end{DoxyCompactItemize}


\subsection{Detailed Description}


Definition at line 90 of file dvi\+Renderer.\+h.



\subsection{Constructor \& Destructor Documentation}
\hypertarget{classdviRenderer_a2954a0104eea3e51bbc9a9c1bada9c49}{\index{dvi\+Renderer@{dvi\+Renderer}!dvi\+Renderer@{dvi\+Renderer}}
\index{dvi\+Renderer@{dvi\+Renderer}!dvi\+Renderer@{dvi\+Renderer}}
\subsubsection[{dvi\+Renderer}]{\setlength{\rightskip}{0pt plus 5cm}dvi\+Renderer\+::dvi\+Renderer (
\begin{DoxyParamCaption}
\item[{bool}]{use\+Font\+Hinting}
\end{DoxyParamCaption}
)}}\label{classdviRenderer_a2954a0104eea3e51bbc9a9c1bada9c49}


Definition at line 49 of file dvi\+Renderer.\+cpp.


\begin{DoxyCode}
50   : \hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}(0),
51     font\_pool(useFontHinting),
52     resolutionInDPI(0),
53     embedPS\_progress(0),
54     embedPS\_numOfProgressedFiles(0),
55     shrinkfactor(3),
56     source\_href(0),
57     HTML\_href(0),
58     editorCommand(\textcolor{stringliteral}{""}),
59     PostScriptOutPutString(0),
60     PS\_interface(\textcolor{keyword}{new} \hyperlink{classghostscript__interface}{ghostscript\_interface}),
61     \_postscript(\textcolor{keyword}{true}),
62     line\_boundary\_encountered(\textcolor{keyword}{false}),
63     word\_boundary\_encountered(\textcolor{keyword}{false}),
64     current\_page(0),
65     penWidth\_in\_mInch(0),
66     number\_of\_elements\_in\_path(0),
67     currentlyDrawnPage(0),
68     m\_eventLoop(0),
69     foreGroundPainter(0)
70 \{
71 \textcolor{preprocessor}{#ifdef DEBUG\_DVIRENDERER}
72   \textcolor{comment}{//kDebug(kvs::dvi) << "dviRenderer( parent=" << par << " )";}
73 \textcolor{preprocessor}{#endif}
74 
75   connect( &font\_pool, SIGNAL( \hyperlink{classdviRenderer_ac3e658a3f6b99c724413fc1f5663f976}{error}(QString,\textcolor{keywordtype}{int}) ), \textcolor{keyword}{this}, SIGNAL( \hyperlink{classdviRenderer_ac3e658a3f6b99c724413fc1f5663f976}{error}(QString,\textcolor{keywordtype}{int}) ) );
76   connect( &font\_pool, SIGNAL( \hyperlink{classdviRenderer_a07b2460ad76478aa074720e2fd4876bd}{warning}(QString,\textcolor{keywordtype}{int}) ), \textcolor{keyword}{this}, SIGNAL( 
      \hyperlink{classdviRenderer_a07b2460ad76478aa074720e2fd4876bd}{warning}(QString,\textcolor{keywordtype}{int}) ) );
77   connect( PS\_interface, SIGNAL( \hyperlink{classdviRenderer_ac3e658a3f6b99c724413fc1f5663f976}{error}(QString,\textcolor{keywordtype}{int}) ), \textcolor{keyword}{this}, SIGNAL( \hyperlink{classdviRenderer_ac3e658a3f6b99c724413fc1f5663f976}{error}(QString,\textcolor{keywordtype}{int}) ) );
78 \}
\end{DoxyCode}
\hypertarget{classdviRenderer_ad72e47cc49a85bf48e9a613a02464d3a}{\index{dvi\+Renderer@{dvi\+Renderer}!````~dvi\+Renderer@{$\sim$dvi\+Renderer}}
\index{````~dvi\+Renderer@{$\sim$dvi\+Renderer}!dvi\+Renderer@{dvi\+Renderer}}
\subsubsection[{$\sim$dvi\+Renderer}]{\setlength{\rightskip}{0pt plus 5cm}dvi\+Renderer\+::$\sim$dvi\+Renderer (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classdviRenderer_ad72e47cc49a85bf48e9a613a02464d3a}


Definition at line 81 of file dvi\+Renderer.\+cpp.


\begin{DoxyCode}
82 \{
83 \textcolor{preprocessor}{#ifdef DEBUG\_DVIRENDERER}
84   kDebug(kvs::dvi) << \textcolor{stringliteral}{"~dviRenderer"};
85 \textcolor{preprocessor}{#endif}
86 
87   QMutexLocker locker(&mutex);
88 
89   \textcolor{keyword}{delete} PS\_interface;
90   \textcolor{keyword}{delete} \hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile};
91 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\hypertarget{classdviRenderer_a4aef6b7d6eb3866681590f172afad781}{\index{dvi\+Renderer@{dvi\+Renderer}!application\+Do\+Special@{application\+Do\+Special}}
\index{application\+Do\+Special@{application\+Do\+Special}!dvi\+Renderer@{dvi\+Renderer}}
\subsubsection[{application\+Do\+Special}]{\setlength{\rightskip}{0pt plus 5cm}void dvi\+Renderer\+::application\+Do\+Special (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{cp}
\end{DoxyParamCaption}
)}}\label{classdviRenderer_a4aef6b7d6eb3866681590f172afad781}


Definition at line 505 of file special.\+cpp.


\begin{DoxyCode}
506 \{
507   QString special\_command(cp);
508 
509   \textcolor{comment}{// First come specials which is only interpreted during rendering,}
510   \textcolor{comment}{// and NOT during the prescan phase}
511 
512   \textcolor{comment}{// font color specials}
513   \textcolor{keywordflow}{if} (strncasecmp(cp, \textcolor{stringliteral}{"color"}, 5) == 0) \{
514     \hyperlink{classdviRenderer_ad233897e0a40650628ba6fc8bd3d87b0}{color\_special}(special\_command.mid(5));
515     \textcolor{keywordflow}{return};
516   \}
517 
518   \textcolor{comment}{// HTML reference}
519   \textcolor{keywordflow}{if} (strncasecmp(cp, \textcolor{stringliteral}{"html:<A href="}, 13) == 0) \{
520     \hyperlink{classdviRenderer_a2dfcf48566f5cb649c8110d3c79dc945}{html\_href\_special}(special\_command.mid(14));
521     \textcolor{keywordflow}{return};
522   \}
523 
524   \textcolor{comment}{// HTML anchor end}
525   \textcolor{keywordflow}{if} (strncasecmp(cp, \textcolor{stringliteral}{"html:</A>"}, 9) == 0) \{
526     \hyperlink{classdviRenderer_a3967eeda01307c73467bfc47465cde6c}{html\_anchor\_end}();
527     \textcolor{keywordflow}{return};
528   \}
529 
530   \textcolor{comment}{// TPIC specials}
531   \textcolor{keywordflow}{if} (strncasecmp(cp, \textcolor{stringliteral}{"pn"}, 2) == 0) \{
532     TPIC\_setPen\_special(special\_command.mid(2));
533     \textcolor{keywordflow}{return};
534   \}
535   \textcolor{keywordflow}{if} (strncasecmp(cp, \textcolor{stringliteral}{"pa "}, 3) == 0) \{
536     TPIC\_addPath\_special(special\_command.mid(3));
537     \textcolor{keywordflow}{return};
538   \}
539   \textcolor{keywordflow}{if} (strncasecmp(cp, \textcolor{stringliteral}{"fp"}, 2) == 0) \{
540     TPIC\_flushPath\_special();
541     \textcolor{keywordflow}{return};
542   \}
543 
544   \textcolor{comment}{// Encapsulated Postscript File}
545   \textcolor{keywordflow}{if} (strncasecmp(cp, \textcolor{stringliteral}{"PSfile="}, 7) == 0) \{
546     epsf\_special(special\_command.mid(7));
547     \textcolor{keywordflow}{return};
548   \}
549 
550   \textcolor{comment}{// source special}
551   \textcolor{keywordflow}{if} (strncasecmp(cp, \textcolor{stringliteral}{"src:"}, 4) == 0) \{
552     source\_special(special\_command.mid(4));
553     \textcolor{keywordflow}{return};
554   \}
555 
556   \textcolor{comment}{// Unfortunately, in some TeX distribution the hyperref package uses}
557   \textcolor{comment}{// the dvips driver by default, rather than the hypertex driver. As}
558   \textcolor{comment}{// a result, the DVI files produced are full of PostScript that}
559   \textcolor{comment}{// specifies links and anchors, and KDVI would call the ghostscript}
560   \textcolor{comment}{// interpreter for every page which makes it really slow. This is a}
561   \textcolor{comment}{// major nuisance, so that we try to filter and interpret the}
562   \textcolor{comment}{// hypertex generated PostScript here.}
563   \textcolor{keywordflow}{if} (special\_command.startsWith(\textcolor{stringliteral}{"ps:SDict begin"})) \{
564 
565     \textcolor{comment}{// Hyperref: start of hyperref rectangle. At this stage it is not}
566     \textcolor{comment}{// yet clear if the rectangle will conain a hyperlink, an anchor,}
567     \textcolor{comment}{// or another type of object. We suspect that this rectangle will}
568     \textcolor{comment}{// define a hyperlink, allocate a QString and set HTML\_href to}
569     \textcolor{comment}{// point to this string. The string contains the name of the}
570     \textcolor{comment}{// destination which ---due to the nature of the PostScript}
571     \textcolor{comment}{// language--- will be defined only after characters are drawn and}
572     \textcolor{comment}{// the hyperref rectangle has been closed. We use "glopglyph" as a}
573     \textcolor{comment}{// temporary name. Since the pointer HTML\_href is not NULL, the}
574     \textcolor{comment}{// chracter drawing routines will now underline all characters in}
575     \textcolor{comment}{// blue to point out that they correspond to a hyperlink. Also, as}
576     \textcolor{comment}{// soon as characters are drawn, the drawing routines will}
577     \textcolor{comment}{// allocate a Hyperlink and add it to the top of the vector}
578     \textcolor{comment}{// currentlyDrawnPage->hyperLinkList.}
579     \textcolor{keywordflow}{if} (special\_command == \textcolor{stringliteral}{"ps:SDict begin H.S end"}) \{
580       \textcolor{comment}{// At this stage, the vector 'hyperLinkList' should not contain}
581       \textcolor{comment}{// links with unspecified destinations (i.e. destination set to}
582       \textcolor{comment}{// 'glopglyph'). As a protection against bad DVI files, we make}
583       \textcolor{comment}{// sure to remove all link rectangles which point to}
584       \textcolor{comment}{// 'glopglyph'.}
585       \textcolor{keywordflow}{while} (!currentlyDrawnPage->hyperLinkList.isEmpty())
586         \textcolor{keywordflow}{if} (currentlyDrawnPage->hyperLinkList.last().linkText == \textcolor{stringliteral}{"glopglyph"})
587           currentlyDrawnPage->hyperLinkList.pop\_back();
588         \textcolor{keywordflow}{else}
589           \textcolor{keywordflow}{break};
590 
591       HTML\_href = \textcolor{keyword}{new} QString(\textcolor{stringliteral}{"glopglyph"});
592       \textcolor{keywordflow}{return};
593     \}
594 
595     \textcolor{comment}{// Hyperref: end of hyperref rectangle of unknown type or hyperref}
596     \textcolor{comment}{// link rectangle. In these cases we set HTML\_href to NULL, which}
597     \textcolor{comment}{// causes the character drawing routines to stop drawing}
598     \textcolor{comment}{// characters underlined in blue. Note that the name of the}
599     \textcolor{comment}{// destination is still set to "glopglyph". In a well-formed DVI}
600     \textcolor{comment}{// file, this special command is immediately followed by another}
601     \textcolor{comment}{// special, where the destination is specified. This special is}
602     \textcolor{comment}{// treated below.}
603     \textcolor{keywordflow}{if} ((special\_command == \textcolor{stringliteral}{"ps:SDict begin H.R end"}) || special\_command.endsWith(\textcolor{stringliteral}{"H.L end"})) \{
604       \textcolor{keywordflow}{if} (HTML\_href != NULL) \{
605         \textcolor{keyword}{delete} HTML\_href;
606         HTML\_href = NULL;
607       \}
608       \textcolor{keywordflow}{return}; \textcolor{comment}{// end of hyperref rectangle}
609     \}
610 
611     \textcolor{comment}{// Hyperref: end of anchor rectangle. If this special is}
612     \textcolor{comment}{// encountered, the rectangle, which was started with "ps:SDict}
613     \textcolor{comment}{// begin H.S end" does not contain a link, but an anchor for a}
614     \textcolor{comment}{// link. Anchors, however, have already been dealt with in the}
615     \textcolor{comment}{// prescan phase and will not be considered here. Thus, we set}
616     \textcolor{comment}{// HTML\_href to NULL so that character drawing routines will no}
617     \textcolor{comment}{// longer underline hyperlinks in blue, and remove the link from}
618     \textcolor{comment}{// the hyperLinkList. NOTE: in a well-formed DVI file, the "H.A"}
619     \textcolor{comment}{// special comes directly after the "H.S" special. A}
620     \textcolor{comment}{// hyperlink-anchor rectangle therefore never contains characters,}
621     \textcolor{comment}{// so no character will by accidentally underlined in blue.}
622     \textcolor{keywordflow}{if} (special\_command.endsWith(\textcolor{stringliteral}{"H.A end"})) \{
623       \textcolor{keywordflow}{if} (HTML\_href != NULL) \{
624         \textcolor{keyword}{delete} HTML\_href;
625         HTML\_href = NULL;
626       \}
627       \textcolor{keywordflow}{while} (!currentlyDrawnPage->hyperLinkList.isEmpty())
628         \textcolor{keywordflow}{if} (currentlyDrawnPage->hyperLinkList.last().linkText == \textcolor{stringliteral}{"glopglyph"})
629           currentlyDrawnPage->hyperLinkList.pop\_back();
630         \textcolor{keywordflow}{else}
631           \textcolor{keywordflow}{break};
632       \textcolor{keywordflow}{return}; \textcolor{comment}{// end of hyperref anchor}
633     \}
634 
635     \textcolor{comment}{// Hyperref: specification of a hyperref link rectangle's}
636     \textcolor{comment}{// destination. As mentioned above, the destination of a hyperlink}
637     \textcolor{comment}{// is specified only AFTER the rectangle has been specified. We}
638     \textcolor{comment}{// will therefore go through the list of rectangles stored in}
639     \textcolor{comment}{// currentlyDrawnPage->hyperLinkList, find those whose destination}
640     \textcolor{comment}{// is open and fill in the value found here. NOTE: the character}
641     \textcolor{comment}{// drawing routines sometimes split a single hyperlink rectangle}
642     \textcolor{comment}{// into several rectangles (e.g. if the font changes, or when a}
643     \textcolor{comment}{// line break is encountered)}
644     \textcolor{keywordflow}{if} (special\_command.startsWith(\textcolor{stringliteral}{"ps:SDict begin ["}) && special\_command.endsWith(\textcolor{stringliteral}{" pdfmark end"})) \{
645       \textcolor{keywordflow}{if} (!currentlyDrawnPage->hyperLinkList.isEmpty()) \{
646         QString targetName = special\_command.section(\textcolor{charliteral}{'('}, 1, 1).section(\textcolor{charliteral}{')'}, 0, 0);
647         QVector<Hyperlink>::iterator it;
648         \textcolor{keywordflow}{for}( it = currentlyDrawnPage->hyperLinkList.begin(); it != currentlyDrawnPage->hyperLinkList.end();
       ++it )
649           \textcolor{keywordflow}{if} (it->linkText == \textcolor{stringliteral}{"glopglyph"})
650             it->linkText = targetName;
651       \}
652       \textcolor{keywordflow}{return}; \textcolor{comment}{// hyperref definition of link/anchor/bookmark/etc}
653     \}
654   \}
655 
656   \textcolor{comment}{// Detect text rotation specials that are included by the graphicx}
657   \textcolor{comment}{// package. If one of these specials is found, the state of the}
658   \textcolor{comment}{// painter is saved, and the coordinate system is rotated}
659   \textcolor{comment}{// accordingly}
660   \textcolor{keywordflow}{if} (special\_command.startsWith(\textcolor{stringliteral}{"ps: gsave currentpoint currentpoint translate "}) &&
661       special\_command.endsWith(\textcolor{stringliteral}{" neg rotate neg exch neg exch translate"}) ) \{
662     \textcolor{keywordtype}{bool} ok;
663     \textcolor{keywordtype}{double} angle = special\_command.section(\textcolor{charliteral}{' '}, 5, 5).toDouble(&ok);
664     \textcolor{keywordflow}{if} (ok == \textcolor{keyword}{true}) \{
665       \textcolor{keywordtype}{int} x = ((int) ((currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a530699c241126f99b81cee11c2c1c4e4}{dvi\_h}) / (shrinkfactor * 65536)));
666       \textcolor{keywordtype}{int} y = currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a0e7316fa88b0240baa7ce526650131a9}{pxl\_v};
667 
668       foreGroundPainter->save();
669       \textcolor{comment}{// Rotate about the current point}
670       foreGroundPainter->translate(x,y);
671       foreGroundPainter->rotate(-angle);
672       foreGroundPainter->translate(-x,-y);
673     \} \textcolor{keywordflow}{else}
674       \hyperlink{classdviRenderer_ae8aea1960b6629e2559e4d73da894faf}{printErrorMsgForSpecials}( i18n(\textcolor{stringliteral}{"Error in DVIfile '%1', page %2. Could not
       interpret angle in text rotation special."} , 
675                                 \hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->\hyperlink{classdvifile_a1c0fe420231e71f256b5db367b7e1178}{filename}, current\_page));
676   \}
677 
678   \textcolor{comment}{// The graphicx package marks the end of rotated text with this}
679   \textcolor{comment}{// special. The state of the painter is restored.}
680   \textcolor{keywordflow}{if} (special\_command == \textcolor{stringliteral}{"ps: currentpoint grestore moveto"}) \{
681     foreGroundPainter->restore();
682   \}
683 
684   \textcolor{comment}{// The following special commands are not used here; they are of}
685   \textcolor{comment}{// interest only during the prescan phase. We recognize them here}
686   \textcolor{comment}{// anyway, to make sure that KDVI doesn't complain about}
687   \textcolor{comment}{// unrecognized special commands.}
688   \textcolor{keywordflow}{if} ((cp[0] == \textcolor{charliteral}{'!'}) ||
689       (cp[0] == \textcolor{charliteral}{'"'}) ||
690       (strncasecmp(cp, \textcolor{stringliteral}{"html:<A name="}, 13) == 0) ||
691       (strncasecmp(cp, \textcolor{stringliteral}{"ps:"}, 3) == 0) ||
692       (strncasecmp(cp, \textcolor{stringliteral}{"papersize"}, 9) == 0) ||
693       (strncasecmp(cp, \textcolor{stringliteral}{"header"}, 6) == 0) ||
694       (strncasecmp(cp, \textcolor{stringliteral}{"background"}, 10) == 0) )
695     \textcolor{keywordflow}{return};
696 
697   \hyperlink{classdviRenderer_ae8aea1960b6629e2559e4d73da894faf}{printErrorMsgForSpecials}(i18n(\textcolor{stringliteral}{"The special command '%1' is not implemented."}, 
      special\_command));
698   \textcolor{keywordflow}{return};
699 \}
\end{DoxyCode}
\hypertarget{classdviRenderer_ad233897e0a40650628ba6fc8bd3d87b0}{\index{dvi\+Renderer@{dvi\+Renderer}!color\+\_\+special@{color\+\_\+special}}
\index{color\+\_\+special@{color\+\_\+special}!dvi\+Renderer@{dvi\+Renderer}}
\subsubsection[{color\+\_\+special}]{\setlength{\rightskip}{0pt plus 5cm}void dvi\+Renderer\+::color\+\_\+special (
\begin{DoxyParamCaption}
\item[{const Q\+String \&}]{msg}
\end{DoxyParamCaption}
)}}\label{classdviRenderer_ad233897e0a40650628ba6fc8bd3d87b0}


Definition at line 208 of file special.\+cpp.


\begin{DoxyCode}
209 \{
210   QString \textcolor{keyword}{const} cp = \_cp.trimmed();
211 
212   QString command = cp.section(\textcolor{charliteral}{' '}, 0, 0);
213 
214   \textcolor{keywordflow}{if} (command == \textcolor{stringliteral}{"pop"}) \{
215     \textcolor{comment}{// Take color off the stack}
216     \textcolor{keywordflow}{if} (colorStack.isEmpty())
217       \hyperlink{classdviRenderer_ae8aea1960b6629e2559e4d73da894faf}{printErrorMsgForSpecials}( i18n(\textcolor{stringliteral}{"Error in DVIfile '%1', page %2. Color pop
       command issued when the color stack is empty."} , 
218                                 \hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->\hyperlink{classdvifile_a1c0fe420231e71f256b5db367b7e1178}{filename}, current\_page));
219     \textcolor{keywordflow}{else}
220       colorStack.pop();
221     \textcolor{keywordflow}{return};
222   \}
223 
224   \textcolor{keywordflow}{if} (command == \textcolor{stringliteral}{"push"}) \{
225     \textcolor{comment}{// Get color specification}
226     \textcolor{keyword}{const} QColor col = parseColorSpecification(cp.section(\textcolor{charliteral}{' '}, 1));
227     \textcolor{comment}{// Set color}
228     \textcolor{keywordflow}{if} (col.isValid())
229       colorStack.push(col);
230     \textcolor{keywordflow}{else}
231       colorStack.push(Qt::black);
232     \textcolor{keywordflow}{return};
233   \}
234 
235   \textcolor{comment}{// Get color specification and set the color for the rest of this}
236   \textcolor{comment}{// page}
237   QColor col = parseColorSpecification(cp);
238   \textcolor{comment}{// Set color}
239   \textcolor{keywordflow}{if} (col.isValid())
240     globalColor = col;
241   \textcolor{keywordflow}{else}
242     globalColor = Qt::black;
243   \textcolor{keywordflow}{return};
244 \}
\end{DoxyCode}
\hypertarget{classdviRenderer_a6f13d6edb5d735cf6cd9f0b3bcc5ef06}{\index{dvi\+Renderer@{dvi\+Renderer}!curr\+\_\+page@{curr\+\_\+page}}
\index{curr\+\_\+page@{curr\+\_\+page}!dvi\+Renderer@{dvi\+Renderer}}
\subsubsection[{curr\+\_\+page}]{\setlength{\rightskip}{0pt plus 5cm}int dvi\+Renderer\+::curr\+\_\+page (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}}\label{classdviRenderer_a6f13d6edb5d735cf6cd9f0b3bcc5ef06}


Definition at line 111 of file dvi\+Renderer.\+h.


\begin{DoxyCode}
111 \{ \textcolor{keywordflow}{return} current\_page+1; \}
\end{DoxyCode}
\hypertarget{classdviRenderer_a88550ffd9961878d36b244b21edb7647}{\index{dvi\+Renderer@{dvi\+Renderer}!draw\+\_\+page@{draw\+\_\+page}}
\index{draw\+\_\+page@{draw\+\_\+page}!dvi\+Renderer@{dvi\+Renderer}}
\subsubsection[{draw\+\_\+page}]{\setlength{\rightskip}{0pt plus 5cm}void dvi\+Renderer\+::draw\+\_\+page (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classdviRenderer_a88550ffd9961878d36b244b21edb7647}


Definition at line 622 of file dvi\+Renderer\+\_\+draw.\+cpp.


\begin{DoxyCode}
623 \{
624   \textcolor{comment}{// Reset a couple of variables}
625   HTML\_href         = 0;
626   source\_href       = 0;
627   penWidth\_in\_mInch = 0.0;
628 
629   \textcolor{comment}{// Calling resize() here rather than clear() means that the memory}
630   \textcolor{comment}{// taken up by the vector is not freed. This is faster than}
631   \textcolor{comment}{// constantly allocating/freeing memory.}
632   currentlyDrawnPage->textBoxList.resize(0);
633 
634   \hyperlink{dviPageInfo_8h_ac16fb3ec8d590bf2412bda0e176a2e65}{RenderedDviPagePixmap}* currentDVIPage = \textcolor{keyword}{dynamic\_cast<}
      \hyperlink{dviPageInfo_8h_ac16fb3ec8d590bf2412bda0e176a2e65}{RenderedDviPagePixmap}*\textcolor{keyword}{>}(currentlyDrawnPage);
635   \textcolor{keywordflow}{if} (currentDVIPage)
636   \{
637     currentDVIPage->sourceHyperLinkList.resize(0);
638   \}
639 
640 \textcolor{preprocessor}{#ifdef PERFORMANCE\_MEASUREMENT}
641   \textcolor{comment}{// If this is the first time a page is drawn, take the time that is}
642   \textcolor{comment}{// elapsed till the kdvi\_multipage was constructed, and print}
643   \textcolor{comment}{// it. Set the flag so that is message will not be printed again.}
644   \textcolor{keywordflow}{if} (performanceFlag == 0) \{
645     kDebug(kvs::dvi) << \textcolor{stringliteral}{"Time elapsed till the first page is drawn: "} << performanceTimer.restart() << \textcolor{stringliteral}{"ms"}
      ;
646     performanceFlag = 1;
647   \}
648 \textcolor{preprocessor}{#endif}
649 
650 
651 \textcolor{preprocessor}{#ifdef DEBUG\_RENDER}
652   kDebug(kvs::dvi) <<\textcolor{stringliteral}{"draw\_page"};
653 \textcolor{preprocessor}{#endif}
654 
655 \textcolor{preprocessor}{#if 0}
656   \textcolor{keywordflow}{if} (!accessibilityBackground)
657   \{
658 \textcolor{preprocessor}{#endif}
659     foreGroundPainter->fillRect( foreGroundPainter->viewport(), PS\_interface->
      \hyperlink{classghostscript__interface_aa43188e3c387cb97e584a364bc7b3b6a}{getBackgroundColor}(current\_page) );
660 \textcolor{preprocessor}{#if 0}
661   \}
662   \textcolor{keywordflow}{else}
663   \{
664     \textcolor{comment}{// In accessiblity mode use the custom background color}
665     foreGroundPainter->fillRect( foreGroundPainter->viewport(), accessibilityBackgroundColor );
666   \}
667 \textcolor{preprocessor}{#endif}
668 
669   \textcolor{comment}{// Render the PostScript background, if there is one.}
670   \textcolor{keywordflow}{if} (\_postscript)
671   \{
672 \textcolor{preprocessor}{#if 0}
673     \textcolor{comment}{// In accessiblity mode use the custom background color}
674     \textcolor{keywordflow}{if} (accessibilityBackground)
675     \{
676       \textcolor{comment}{// Flag permanent is set to false because otherwise we would not be able to restore}
677       \textcolor{comment}{// the original background color.}
678       PS\_interface->\hyperlink{classghostscript__interface_a567c1800359854b7a1b7cf24fcaea80f}{setBackgroundColor}(current\_page, accessibilityBackgroundColor, \textcolor{keyword}{false})
      ;
679     \}
680     \textcolor{keywordflow}{else}
681 \textcolor{preprocessor}{#endif}
682       PS\_interface->\hyperlink{classghostscript__interface_a4d9303488fdbbcb7519b68d6146c5a77}{restoreBackgroundColor}(current\_page);
683 
684     PS\_interface->\hyperlink{classghostscript__interface_ae271c8afd873b5d6a77a67eddc12540a}{graphics}(current\_page, resolutionInDPI, \hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->
      \hyperlink{classdvifile_a204469b9f242c319ae4918094bd8b062}{getMagnification}(), foreGroundPainter);
685   \}
686 
687   \textcolor{comment}{// Now really write the text}
688   \textcolor{keywordflow}{if} (\hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->\hyperlink{classdvifile_aeafc97277647ad5077a774be71b3253a}{page\_offset}.isEmpty() == \textcolor{keyword}{true})
689     \textcolor{keywordflow}{return};
690   \textcolor{keywordflow}{if} (current\_page < dviFile->total\_pages) \{
691     \hyperlink{classbigEndianByteReader_aa8919f6fe116fd3230337675fd23abac}{command\_pointer} = \hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->\hyperlink{classdvifile_a81f1d32c52377a7b1802072eb40998b7}{dvi\_Data}() + 
      \hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->\hyperlink{classdvifile_aeafc97277647ad5077a774be71b3253a}{page\_offset}[int(current\_page)];
692     \hyperlink{classbigEndianByteReader_ace2790221530572c87c58f1f77924beb}{end\_pointer}     = \hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->\hyperlink{classdvifile_a81f1d32c52377a7b1802072eb40998b7}{dvi\_Data}() + \hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->
      \hyperlink{classdvifile_aeafc97277647ad5077a774be71b3253a}{page\_offset}[int(current\_page+1)];
693   \} \textcolor{keywordflow}{else}
694     \hyperlink{classbigEndianByteReader_aa8919f6fe116fd3230337675fd23abac}{command\_pointer} = \hyperlink{classbigEndianByteReader_ace2790221530572c87c58f1f77924beb}{end\_pointer} = 0;
695 
696   memset((\textcolor{keywordtype}{char} *) &currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}, 0, \textcolor{keyword}{sizeof}(currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}));
697   currinf.\hyperlink{structdrawinf_ac68bb33a017c34bf63f8dce71ad3ef17}{fonttable}      = &(\hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->\hyperlink{classdvifile_a05cb283609e6d1627940d14e8fc85b62}{tn\_table});
698   currinf.\hyperlink{structdrawinf_a9fef874e701c25d0d781612bd3f615a5}{\_virtual}       = 0;
699 
700   \textcolor{keywordtype}{double} fontPixelPerDVIunit = \hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->\hyperlink{classdvifile_a59a8b5b2c7b0ae199f4183b6062e6fb0}{getCmPerDVIunit}() * 1200.0/2.54;
701 
702   \hyperlink{classdviRenderer_a590afd35c11e92d20fe0d8d98a84e2d2}{draw\_part}(65536.0*fontPixelPerDVIunit, \textcolor{keyword}{false});
703   \textcolor{keywordflow}{if} (HTML\_href != 0) \{
704     \textcolor{keyword}{delete} HTML\_href;
705     HTML\_href = 0;
706   \}
707   \textcolor{keywordflow}{if} (source\_href != 0) \{
708     \textcolor{keyword}{delete} source\_href;
709     source\_href = 0;
710   \}
711 \}
\end{DoxyCode}
\hypertarget{classdviRenderer_a590afd35c11e92d20fe0d8d98a84e2d2}{\index{dvi\+Renderer@{dvi\+Renderer}!draw\+\_\+part@{draw\+\_\+part}}
\index{draw\+\_\+part@{draw\+\_\+part}!dvi\+Renderer@{dvi\+Renderer}}
\subsubsection[{draw\+\_\+part}]{\setlength{\rightskip}{0pt plus 5cm}void dvi\+Renderer\+::draw\+\_\+part (
\begin{DoxyParamCaption}
\item[{double}]{current\+\_\+dimconv, }
\item[{bool}]{is\+\_\+vfmacro}
\end{DoxyParamCaption}
)}}\label{classdviRenderer_a590afd35c11e92d20fe0d8d98a84e2d2}


Definition at line 266 of file dvi\+Renderer\+\_\+draw.\+cpp.


\begin{DoxyCode}
267 \{
268 \textcolor{preprocessor}{#ifdef DEBUG\_RENDER}
269   kDebug(kvs::dvi) << \textcolor{stringliteral}{"draw\_part"};
270 \textcolor{preprocessor}{#endif}
271 
272   qint32 RRtmp=0, WWtmp=0, XXtmp=0, YYtmp=0, ZZtmp=0;
273   quint8 ch;
274 
275   currinf.\hyperlink{structdrawinf_a4a6ec248b5b071099ddf9b5e4f0255e2}{fontp}        = NULL;
276   currinf.\hyperlink{structdrawinf_a365a1c9700846921b83cc69e0f2780c6}{set\_char\_p}   = &\hyperlink{classdviRenderer_af39ff19024aab0a2da12815c14851f19}{dviRenderer::set\_no\_char};
277 
278   \textcolor{keywordtype}{int} last\_space\_index = 0;
279   \textcolor{keywordtype}{bool} space\_encountered = \textcolor{keyword}{false};
280   \textcolor{keywordtype}{bool} after\_space = \textcolor{keyword}{false};
281   \textcolor{keywordflow}{for} (;;) \{
282     space\_encountered = \textcolor{keyword}{false};
283     ch = \hyperlink{classbigEndianByteReader_ac5e3b96e3e09b30dbe57175763077c1f}{readUINT8}();
284     \textcolor{keywordflow}{if} (ch <= (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}) (\hyperlink{dvi_8h_a2e9858de002bc52282d87bab4df56996}{SETCHAR0} + 127)) \{
285       (this->*currinf.\hyperlink{structdrawinf_a365a1c9700846921b83cc69e0f2780c6}{set\_char\_p})(ch, ch);
286     \} \textcolor{keywordflow}{else}
287       \textcolor{keywordflow}{if} (\hyperlink{dvi_8h_a031c4e9b81ae5d39f2ce2f718e3c1ba4}{FNTNUM0} <= ch && ch <= (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}) (\hyperlink{dvi_8h_a031c4e9b81ae5d39f2ce2f718e3c1ba4}{FNTNUM0} + 63)) \{
288         currinf.\hyperlink{structdrawinf_a4a6ec248b5b071099ddf9b5e4f0255e2}{fontp} = currinf.\hyperlink{structdrawinf_ac68bb33a017c34bf63f8dce71ad3ef17}{fonttable}->value(ch - \hyperlink{dvi_8h_a031c4e9b81ae5d39f2ce2f718e3c1ba4}{FNTNUM0});
289         \textcolor{keywordflow}{if} (currinf.\hyperlink{structdrawinf_a4a6ec248b5b071099ddf9b5e4f0255e2}{fontp} == NULL) \{
290           errorMsg = i18n(\textcolor{stringliteral}{"The DVI code referred to font #%1, which was not previously defined."}, ch - 
      \hyperlink{dvi_8h_a031c4e9b81ae5d39f2ce2f718e3c1ba4}{FNTNUM0});
291           \textcolor{keywordflow}{return};
292         \}
293         currinf.\hyperlink{structdrawinf_a365a1c9700846921b83cc69e0f2780c6}{set\_char\_p} = currinf.\hyperlink{structdrawinf_a4a6ec248b5b071099ddf9b5e4f0255e2}{fontp}->\hyperlink{classTeXFontDefinition_a2901636eeb7920b42396cdbdd3f93774}{set\_char\_p};
294       \} \textcolor{keywordflow}{else} \{
295         qint32 a, b;
296 
297         \textcolor{keywordflow}{switch} (ch) \{
298         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_a9d9c3db0b2995020b0d23f67d09dfc88}{SET1}:
299         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_ac2ccc1b9d8eb59ffdd81c958dcedf4b3}{PUT1}:
300           (this->*currinf.\hyperlink{structdrawinf_a365a1c9700846921b83cc69e0f2780c6}{set\_char\_p})(ch, \hyperlink{classbigEndianByteReader_ac5e3b96e3e09b30dbe57175763077c1f}{readUINT8}());
301           \textcolor{keywordflow}{break};
302 
303         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_a4b40fccd7690612d6023471f6a8fe409}{SETRULE}:
304           \textcolor{keywordflow}{if} (is\_vfmacro == \textcolor{keyword}{false}) \{
305             word\_boundary\_encountered = \textcolor{keyword}{true};
306             line\_boundary\_encountered = \textcolor{keyword}{true};
307           \}
308           \textcolor{comment}{/* Be careful, dvicopy outputs rules with height =}
309 \textcolor{comment}{             0x80000000. We don't want any SIGFPE here. */}
310           a = \hyperlink{classbigEndianByteReader_a39c3b90a7617e40cef20796fbc680df8}{readUINT32}();
311           b = \hyperlink{classbigEndianByteReader_a39c3b90a7617e40cef20796fbc680df8}{readUINT32}();
312           b = ((long) (b *  current\_dimconv));
313           \textcolor{keywordflow}{if} (a > 0 && b > 0) \{
314             \textcolor{keywordtype}{int} h = ((int) \hyperlink{xdvi_8h_a20c604ddc8550203707ee1ef509ba365}{ROUNDUP}(((\textcolor{keywordtype}{long}) (a *  current\_dimconv)), shrinkfactor * 65536));
315             \textcolor{keywordtype}{int} w =  ((int) \hyperlink{xdvi_8h_a20c604ddc8550203707ee1ef509ba365}{ROUNDUP}(b, shrinkfactor * 65536));
316 
317             \textcolor{keywordflow}{if} (colorStack.isEmpty())
318               foreGroundPainter->fillRect( ((\textcolor{keywordtype}{int}) ((currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a530699c241126f99b81cee11c2c1c4e4}{dvi\_h}) / (shrinkfactor * 65536)))
      ,
319                                          currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a0e7316fa88b0240baa7ce526650131a9}{pxl\_v} - h + 1, w?w:1, h?h:1, globalColor );
320             \textcolor{keywordflow}{else}
321               foreGroundPainter->fillRect( ((\textcolor{keywordtype}{int}) ((currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a530699c241126f99b81cee11c2c1c4e4}{dvi\_h}) / (shrinkfactor * 65536)))
      ,
322                                         currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a0e7316fa88b0240baa7ce526650131a9}{pxl\_v} - h + 1, w?w:1, h?h:1, colorStack.top()
       );
323           \}
324           currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a530699c241126f99b81cee11c2c1c4e4}{dvi\_h} += b;
325           \textcolor{keywordflow}{break};
326 
327         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_a88170eaff2ef781cd64fadda8b19ee87}{PUTRULE}:
328           \textcolor{keywordflow}{if} (is\_vfmacro == \textcolor{keyword}{false}) \{
329             word\_boundary\_encountered = \textcolor{keyword}{true};
330             line\_boundary\_encountered = \textcolor{keyword}{true};
331           \}
332           a = \hyperlink{classbigEndianByteReader_a39c3b90a7617e40cef20796fbc680df8}{readUINT32}();
333           b = \hyperlink{classbigEndianByteReader_a39c3b90a7617e40cef20796fbc680df8}{readUINT32}();
334           a = ((long) (a *  current\_dimconv));
335           b = ((long) (b *  current\_dimconv));
336           \textcolor{keywordflow}{if} (a > 0 && b > 0) \{
337             \textcolor{keywordtype}{int} h = ((int) \hyperlink{xdvi_8h_a20c604ddc8550203707ee1ef509ba365}{ROUNDUP}(a, shrinkfactor * 65536));
338             \textcolor{keywordtype}{int} w = ((int) \hyperlink{xdvi_8h_a20c604ddc8550203707ee1ef509ba365}{ROUNDUP}(b, shrinkfactor * 65536));
339             \textcolor{keywordflow}{if} (colorStack.isEmpty())
340               foreGroundPainter->fillRect( ((\textcolor{keywordtype}{int}) ((currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a530699c241126f99b81cee11c2c1c4e4}{dvi\_h}) / (shrinkfactor * 65536)))
      ,
341                                          currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a0e7316fa88b0240baa7ce526650131a9}{pxl\_v} - h + 1, w?w:1, h?h:1, globalColor );
342             \textcolor{keywordflow}{else}
343               foreGroundPainter->fillRect( ((\textcolor{keywordtype}{int}) ((currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a530699c241126f99b81cee11c2c1c4e4}{dvi\_h}) / (shrinkfactor * 65536)))
      ,
344                                         currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a0e7316fa88b0240baa7ce526650131a9}{pxl\_v} - h + 1, w?w:1, h?h:1, colorStack.top()
       );
345           \}
346           \textcolor{keywordflow}{break};
347 
348         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_a700f88377bf36711b711f69b06c52f5d}{NOP}:
349           \textcolor{keywordflow}{break};
350 
351         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_a857adfef718262ca4a28b3648c56de5c}{BOP}:
352           \textcolor{keywordflow}{if} (is\_vfmacro == \textcolor{keyword}{false}) \{
353             word\_boundary\_encountered = \textcolor{keyword}{true};
354             line\_boundary\_encountered = \textcolor{keyword}{true};
355           \}
356           \hyperlink{classbigEndianByteReader_aa8919f6fe116fd3230337675fd23abac}{command\_pointer} += 11 * 4;
357           currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a530699c241126f99b81cee11c2c1c4e4}{dvi\_h} = 1200 << 16; \textcolor{comment}{// Reminder: DVI-coordinates start at (1",1") from top
       of page}
358           currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a9497085c5712ee20cc25eaa37ea902b6}{dvi\_v} = 1200;
359           currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a0e7316fa88b0240baa7ce526650131a9}{pxl\_v} = int(currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a9497085c5712ee20cc25eaa37ea902b6}{dvi\_v}/shrinkfactor);
360           currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a41ba8896ec8b4ea0765b13c36fd9d18e}{w} = currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a487a6e23e33001a732d8ed5c6f245f1d}{x} = currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a383e2dc0b450b26619b86c9025c6ecae}{y} = currinf.
      \hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a563f47ad708ba389b24d1d89a63a7ec4}{z} = 0;
361           \textcolor{keywordflow}{break};
362 
363         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_a734579b908509b57151ac02b946056d1}{EOP}:
364           \textcolor{comment}{// Check if we are just at the end of a virtual font macro.}
365           \textcolor{keywordflow}{if} (is\_vfmacro == \textcolor{keyword}{false}) \{
366             \textcolor{comment}{// This is really the end of a page, and not just the end}
367             \textcolor{comment}{// of a macro. Mark the end of the current word.}
368             word\_boundary\_encountered = \textcolor{keyword}{true};
369             line\_boundary\_encountered = \textcolor{keyword}{true};
370             \textcolor{comment}{// Sanity check for the dvi-file: The DVI-standard asserts}
371             \textcolor{comment}{// that at the end of a page, the stack should always be}
372             \textcolor{comment}{// empty.}
373             \textcolor{keywordflow}{if} (!stack.isEmpty()) \{
374               kDebug(kvs::dvi) << \textcolor{stringliteral}{"DRAW: The stack was not empty when the EOP command was encountered."};
375               errorMsg = i18n(\textcolor{stringliteral}{"The stack was not empty when the EOP command was encountered."});
376               \textcolor{keywordflow}{return};
377             \}
378           \}
379           \textcolor{keywordflow}{return};
380 
381         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_a431b92b32ec924789b2be268651a3fdd}{PUSH}:
382           stack.push(currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data});
383           \textcolor{keywordflow}{break};
384 
385         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_a0b06d6d6f5a540a62659a417de0ad69d}{POP}:
386           \textcolor{keywordflow}{if} (stack.isEmpty()) \{
387             errorMsg = i18n(\textcolor{stringliteral}{"The stack was empty when a POP command was encountered."});
388             \textcolor{keywordflow}{return};
389           \} \textcolor{keywordflow}{else}
390             currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data} = stack.pop();
391           word\_boundary\_encountered = \textcolor{keyword}{true};
392           line\_boundary\_encountered = \textcolor{keyword}{true};
393           \textcolor{keywordflow}{break};
394 
395         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_a7a6ad184c608528336f95e318c2a2ff7}{RIGHT1}:
396         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_a56979190753366cf262c9f2d00880241}{RIGHT2}:
397         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_aa5f1f20567ff62615b490697b3f1a2d4}{RIGHT3}:
398         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_a2781807160ddae83e3a01fb7cfbb880d}{RIGHT4}:
399           RRtmp = \hyperlink{classbigEndianByteReader_ad85cb1f2cce7f4de7abc632b5e95223b}{readINT}(ch - \hyperlink{dvi_8h_a7a6ad184c608528336f95e318c2a2ff7}{RIGHT1} + 1);
400 
401           \textcolor{comment}{// A horizontal motion in the range 4 * font space [f] < h <}
402           \textcolor{comment}{// font space [f] will be treated as a kern that is not}
403           \textcolor{comment}{// indicated in the printouts that DVItype produces between}
404           \textcolor{comment}{// brackets. We allow a larger space in the negative}
405           \textcolor{comment}{// direction than in the positive one, because TEX makes}
406           \textcolor{comment}{// comparatively large backspaces when it positions}
407           \textcolor{comment}{// accents. (comments stolen from the source of dvitype)}
408           \textcolor{keywordflow}{if} ((is\_vfmacro == \textcolor{keyword}{false}) &&
409               (currinf.\hyperlink{structdrawinf_a4a6ec248b5b071099ddf9b5e4f0255e2}{fontp} != 0) &&
410               ((RRtmp >= currinf.\hyperlink{structdrawinf_a4a6ec248b5b071099ddf9b5e4f0255e2}{fontp}->\hyperlink{classTeXFontDefinition_a8514a1b74d448c5e9e9dafc8737938e9}{scaled\_size\_in\_DVI\_units}/6) || (RRtmp 
      <= -4*(currinf.\hyperlink{structdrawinf_a4a6ec248b5b071099ddf9b5e4f0255e2}{fontp}->\hyperlink{classTeXFontDefinition_a8514a1b74d448c5e9e9dafc8737938e9}{scaled\_size\_in\_DVI\_units}/6))) &&
411               (currentlyDrawnPage->textBoxList.size() > 0)) \{
412             \textcolor{comment}{//currentlyDrawnPage->textBoxList[currentlyDrawnPage->textBoxList.size()-1].text += ' ';}
413             space\_encountered = \textcolor{keyword}{true};
414           \}
415           currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a530699c241126f99b81cee11c2c1c4e4}{dvi\_h} += ((long) (RRtmp *  current\_dimconv));
416           \textcolor{keywordflow}{break};
417 
418         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_ab81b2eb602e38a0261e345affe285d6d}{W1}:
419         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_abc37ebbafc333229f88a779e89adf602}{W2}:
420         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_a36f09154c1e0bdd55d6436ef88e43761}{W3}:
421         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_ac33715410b8c1e955a94c40d220b9fa9}{W4}:
422           WWtmp = \hyperlink{classbigEndianByteReader_ad85cb1f2cce7f4de7abc632b5e95223b}{readINT}(ch - \hyperlink{dvi_8h_a5d94134ae98ebb688dc6b0f6d6131b42}{W0});
423           currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a41ba8896ec8b4ea0765b13c36fd9d18e}{w} = ((long) (WWtmp *  current\_dimconv));
424         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_a5d94134ae98ebb688dc6b0f6d6131b42}{W0}:
425           \textcolor{keywordflow}{if} ((is\_vfmacro == \textcolor{keyword}{false}) &&
426               (currinf.\hyperlink{structdrawinf_a4a6ec248b5b071099ddf9b5e4f0255e2}{fontp} != 0) &&
427               ((WWtmp >= currinf.\hyperlink{structdrawinf_a4a6ec248b5b071099ddf9b5e4f0255e2}{fontp}->\hyperlink{classTeXFontDefinition_a8514a1b74d448c5e9e9dafc8737938e9}{scaled\_size\_in\_DVI\_units}/6) || (WWtmp 
      <= -4*(currinf.\hyperlink{structdrawinf_a4a6ec248b5b071099ddf9b5e4f0255e2}{fontp}->\hyperlink{classTeXFontDefinition_a8514a1b74d448c5e9e9dafc8737938e9}{scaled\_size\_in\_DVI\_units}/6))) &&
428               (currentlyDrawnPage->textBoxList.size() > 0) ) \{
429             \textcolor{comment}{//currentlyDrawnPage->textBoxList[currentlyDrawnPage->textBoxList.size()-1].text += ' ';}
430             space\_encountered = \textcolor{keyword}{true};
431           \}
432           currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a530699c241126f99b81cee11c2c1c4e4}{dvi\_h} += currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a41ba8896ec8b4ea0765b13c36fd9d18e}{w};
433           \textcolor{keywordflow}{break};
434 
435         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_a1964818ccd90a6173ea48cecb652feeb}{X1}:
436         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_a79ae03a0214cb30e57b9e8835f2a0019}{X2}:
437         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_adb6fd3d004959525c6a684b82ef50860}{X3}:
438         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_a0f79fa7387c308a89a30682d905aa40a}{X4}:
439           XXtmp = \hyperlink{classbigEndianByteReader_ad85cb1f2cce7f4de7abc632b5e95223b}{readINT}(ch - \hyperlink{dvi_8h_a8476f4a8de2c191433342c9ce896986a}{X0});
440           currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a487a6e23e33001a732d8ed5c6f245f1d}{x} = ((long) (XXtmp *  current\_dimconv));
441         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_a8476f4a8de2c191433342c9ce896986a}{X0}:
442           \textcolor{keywordflow}{if} ((is\_vfmacro == \textcolor{keyword}{false})  &&
443               (currinf.\hyperlink{structdrawinf_a4a6ec248b5b071099ddf9b5e4f0255e2}{fontp} != 0) &&
444               ((XXtmp >= currinf.\hyperlink{structdrawinf_a4a6ec248b5b071099ddf9b5e4f0255e2}{fontp}->\hyperlink{classTeXFontDefinition_a8514a1b74d448c5e9e9dafc8737938e9}{scaled\_size\_in\_DVI\_units}/6) || (XXtmp 
      <= -4*(currinf.\hyperlink{structdrawinf_a4a6ec248b5b071099ddf9b5e4f0255e2}{fontp}->\hyperlink{classTeXFontDefinition_a8514a1b74d448c5e9e9dafc8737938e9}{scaled\_size\_in\_DVI\_units}/6))) &&
445               (currentlyDrawnPage->textBoxList.size() > 0)) \{
446             \textcolor{comment}{//currentlyDrawnPage->textBoxList[currentlyDrawnPage->textBoxList.size()-1].text += ' ';}
447             space\_encountered = \textcolor{keyword}{true};
448           \}
449           currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a530699c241126f99b81cee11c2c1c4e4}{dvi\_h} += currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a487a6e23e33001a732d8ed5c6f245f1d}{x};
450           \textcolor{keywordflow}{break};
451 
452         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_ac3e42a3105743a7cf304f127557cada1}{DOWN1}:
453         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_ab0c102b2b7a73672ed538075f6af42db}{DOWN2}:
454         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_a49d9d799c7b97517e59c5475a59e0024}{DOWN3}:
455         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_a123df89f73f36968321df890744cf87a}{DOWN4}:
456           \{
457             qint32 DDtmp = \hyperlink{classbigEndianByteReader_ad85cb1f2cce7f4de7abc632b5e95223b}{readINT}(ch - \hyperlink{dvi_8h_ac3e42a3105743a7cf304f127557cada1}{DOWN1} + 1);
458             \textcolor{keywordflow}{if} ((is\_vfmacro == \textcolor{keyword}{false}) &&
459                 (currinf.\hyperlink{structdrawinf_a4a6ec248b5b071099ddf9b5e4f0255e2}{fontp} != 0) &&
460                 (abs(DDtmp) >= 5*(currinf.\hyperlink{structdrawinf_a4a6ec248b5b071099ddf9b5e4f0255e2}{fontp}->\hyperlink{classTeXFontDefinition_a8514a1b74d448c5e9e9dafc8737938e9}{scaled\_size\_in\_DVI\_units}/6)) 
      &&
461                 (currentlyDrawnPage->textBoxList.size() > 0)) \{
462               word\_boundary\_encountered = \textcolor{keyword}{true};
463               line\_boundary\_encountered = \textcolor{keyword}{true};
464               space\_encountered = \textcolor{keyword}{true};
465               \textcolor{keywordflow}{if} (abs(DDtmp) >= 10*(currinf.\hyperlink{structdrawinf_a4a6ec248b5b071099ddf9b5e4f0255e2}{fontp}->\hyperlink{classTeXFontDefinition_a8514a1b74d448c5e9e9dafc8737938e9}{scaled\_size\_in\_DVI\_units}/6)
      )
466                 currentlyDrawnPage->textBoxList[currentlyDrawnPage->textBoxList.size()-1].text += \textcolor{charliteral}{'\(\backslash\)n'};
467             \}
468             currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a9497085c5712ee20cc25eaa37ea902b6}{dvi\_v} += ((long) (DDtmp *  current\_dimconv))/65536;
469             currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a0e7316fa88b0240baa7ce526650131a9}{pxl\_v}  = int(currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a9497085c5712ee20cc25eaa37ea902b6}{dvi\_v}/shrinkfactor);
470           \}
471           \textcolor{keywordflow}{break};
472 
473         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_a294189cdea31dda8faf609b9b3e2000a}{Y1}:
474         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_a3128cc29e366777d66d8b049451ca8a0}{Y2}:
475         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_a676acf01638364a90adf5d09d2a215bf}{Y3}:
476         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_a5a8e903c2373c4d65724c79cdea8b3d9}{Y4}:
477           YYtmp = \hyperlink{classbigEndianByteReader_ad85cb1f2cce7f4de7abc632b5e95223b}{readINT}(ch - \hyperlink{dvi_8h_a0b0dcdd1ffa302474e907d3d7ad9dbfe}{Y0});
478           currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a383e2dc0b450b26619b86c9025c6ecae}{y}    = ((long) (YYtmp *  current\_dimconv));
479         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_a0b0dcdd1ffa302474e907d3d7ad9dbfe}{Y0}:
480           \textcolor{keywordflow}{if} ((is\_vfmacro == \textcolor{keyword}{false}) &&
481               (currinf.\hyperlink{structdrawinf_a4a6ec248b5b071099ddf9b5e4f0255e2}{fontp} != 0) &&
482               (abs(YYtmp) >= 5*(currinf.\hyperlink{structdrawinf_a4a6ec248b5b071099ddf9b5e4f0255e2}{fontp}->\hyperlink{classTeXFontDefinition_a8514a1b74d448c5e9e9dafc8737938e9}{scaled\_size\_in\_DVI\_units}/6)) &&
483               (currentlyDrawnPage->textBoxList.size() > 0)) \{
484             word\_boundary\_encountered = \textcolor{keyword}{true};
485             line\_boundary\_encountered = \textcolor{keyword}{true};
486             space\_encountered = \textcolor{keyword}{true};
487             \textcolor{keywordflow}{if} (abs(YYtmp) >= 10*(currinf.\hyperlink{structdrawinf_a4a6ec248b5b071099ddf9b5e4f0255e2}{fontp}->\hyperlink{classTeXFontDefinition_a8514a1b74d448c5e9e9dafc8737938e9}{scaled\_size\_in\_DVI\_units}/6))
488               currentlyDrawnPage->textBoxList[currentlyDrawnPage->textBoxList.size()-1].text += \textcolor{charliteral}{'\(\backslash\)n'};
489           \}
490           currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a9497085c5712ee20cc25eaa37ea902b6}{dvi\_v} += currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a383e2dc0b450b26619b86c9025c6ecae}{y}/65536;
491           currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a0e7316fa88b0240baa7ce526650131a9}{pxl\_v} = int(currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a9497085c5712ee20cc25eaa37ea902b6}{dvi\_v}/shrinkfactor);
492           \textcolor{keywordflow}{break};
493 
494         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_a497883135e16147a29670e304793bef4}{Z1}:
495         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_a3550f7bd3eb3a1d5d589bcd8482a1e28}{Z2}:
496         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_a4d1e80d51fbd0faa8283d1fffdd8869b}{Z3}:
497         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_ae981b991a807ba0f1f0dd307d5a1cd64}{Z4}:
498           ZZtmp = \hyperlink{classbigEndianByteReader_ad85cb1f2cce7f4de7abc632b5e95223b}{readINT}(ch - \hyperlink{dvi_8h_a49a0a00a612635d79a06bbe9fc15c094}{Z0});
499           currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a563f47ad708ba389b24d1d89a63a7ec4}{z}    = ((long) (ZZtmp *  current\_dimconv));
500         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_a49a0a00a612635d79a06bbe9fc15c094}{Z0}:
501           \textcolor{keywordflow}{if} ((is\_vfmacro == \textcolor{keyword}{false}) &&
502               (currinf.\hyperlink{structdrawinf_a4a6ec248b5b071099ddf9b5e4f0255e2}{fontp} != 0) &&
503               (abs(ZZtmp) >= 5*(currinf.\hyperlink{structdrawinf_a4a6ec248b5b071099ddf9b5e4f0255e2}{fontp}->\hyperlink{classTeXFontDefinition_a8514a1b74d448c5e9e9dafc8737938e9}{scaled\_size\_in\_DVI\_units}/6)) &&
504               (currentlyDrawnPage->textBoxList.size() > 0)) \{
505             word\_boundary\_encountered = \textcolor{keyword}{true};
506             line\_boundary\_encountered = \textcolor{keyword}{true};
507             space\_encountered = \textcolor{keyword}{true};
508             \textcolor{keywordflow}{if} (abs(ZZtmp) >= 10*(currinf.\hyperlink{structdrawinf_a4a6ec248b5b071099ddf9b5e4f0255e2}{fontp}->\hyperlink{classTeXFontDefinition_a8514a1b74d448c5e9e9dafc8737938e9}{scaled\_size\_in\_DVI\_units}/6))
509               currentlyDrawnPage->textBoxList[currentlyDrawnPage->textBoxList.size()-1].text += \textcolor{charliteral}{'\(\backslash\)n'};
510           \}
511           currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a9497085c5712ee20cc25eaa37ea902b6}{dvi\_v} += currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a563f47ad708ba389b24d1d89a63a7ec4}{z}/65536;
512           currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a0e7316fa88b0240baa7ce526650131a9}{pxl\_v}  = int(currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a9497085c5712ee20cc25eaa37ea902b6}{dvi\_v}/shrinkfactor);
513           \textcolor{keywordflow}{break};
514 
515         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_a4b68a92a86154a4a5af9e2ba9f75e792}{FNT1}:
516         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_a317a6206e694711b0ede71df89961f33}{FNT2}:
517         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_a65326f197c33c49377b068c1b620b341}{FNT3}:
518           currinf.\hyperlink{structdrawinf_a4a6ec248b5b071099ddf9b5e4f0255e2}{fontp} = currinf.\hyperlink{structdrawinf_ac68bb33a017c34bf63f8dce71ad3ef17}{fonttable}->value(\hyperlink{classbigEndianByteReader_ace27c2b08d57237a09d84af65891d4b4}{readUINT}(ch - 
      \hyperlink{dvi_8h_a4b68a92a86154a4a5af9e2ba9f75e792}{FNT1} + 1));
519           \textcolor{keywordflow}{if} (currinf.\hyperlink{structdrawinf_a4a6ec248b5b071099ddf9b5e4f0255e2}{fontp} == NULL) \{
520             errorMsg = i18n(\textcolor{stringliteral}{"The DVI code referred to a font which was not previously defined."});
521             \textcolor{keywordflow}{return};
522           \}
523           currinf.\hyperlink{structdrawinf_a365a1c9700846921b83cc69e0f2780c6}{set\_char\_p} = currinf.\hyperlink{structdrawinf_a4a6ec248b5b071099ddf9b5e4f0255e2}{fontp}->\hyperlink{classTeXFontDefinition_a2901636eeb7920b42396cdbdd3f93774}{set\_char\_p};
524           \textcolor{keywordflow}{break};
525 
526         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_a72176744f5c0713e544439b1b8f427b0}{FNT4}:
527           currinf.\hyperlink{structdrawinf_a4a6ec248b5b071099ddf9b5e4f0255e2}{fontp} = currinf.\hyperlink{structdrawinf_ac68bb33a017c34bf63f8dce71ad3ef17}{fonttable}->value(\hyperlink{classbigEndianByteReader_ad85cb1f2cce7f4de7abc632b5e95223b}{readINT}(ch - 
      \hyperlink{dvi_8h_a4b68a92a86154a4a5af9e2ba9f75e792}{FNT1} + 1));
528           \textcolor{keywordflow}{if} (currinf.\hyperlink{structdrawinf_a4a6ec248b5b071099ddf9b5e4f0255e2}{fontp} == NULL) \{
529             errorMsg = i18n(\textcolor{stringliteral}{"The DVI code referred to a font which was not previously defined."});
530             \textcolor{keywordflow}{return};
531           \}
532           currinf.\hyperlink{structdrawinf_a365a1c9700846921b83cc69e0f2780c6}{set\_char\_p} = currinf.\hyperlink{structdrawinf_a4a6ec248b5b071099ddf9b5e4f0255e2}{fontp}->\hyperlink{classTeXFontDefinition_a2901636eeb7920b42396cdbdd3f93774}{set\_char\_p};
533           \textcolor{keywordflow}{break};
534 
535         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_ab8469f8a69c054486334de3d2a4cdc7d}{XXX1}:
536         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_a9e3821afc0122fbf594e9cf83d97e283}{XXX2}:
537         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_a9da2fe42b299787235e9afd33729d793}{XXX3}:
538         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_af11538363848cffa2ced0980009f1c0a}{XXX4}:
539           \textcolor{keywordflow}{if} (is\_vfmacro == \textcolor{keyword}{false}) \{
540             word\_boundary\_encountered = \textcolor{keyword}{true};
541             line\_boundary\_encountered = \textcolor{keyword}{true};
542             space\_encountered = \textcolor{keyword}{true};
543           \}
544           a = \hyperlink{classbigEndianByteReader_ace27c2b08d57237a09d84af65891d4b4}{readUINT}(ch - \hyperlink{dvi_8h_ab8469f8a69c054486334de3d2a4cdc7d}{XXX1} + 1);
545           \textcolor{keywordflow}{if} (a > 0) \{
546             \textcolor{keywordtype}{char}        *cmd        = \textcolor{keyword}{new} \textcolor{keywordtype}{char}[a+1];
547             strncpy(cmd, (\textcolor{keywordtype}{char} *)\hyperlink{classbigEndianByteReader_aa8919f6fe116fd3230337675fd23abac}{command\_pointer}, a);
548             \hyperlink{classbigEndianByteReader_aa8919f6fe116fd3230337675fd23abac}{command\_pointer} += a;
549             cmd[a] = \textcolor{charliteral}{'\(\backslash\)0'};
550             \hyperlink{classdviRenderer_a4aef6b7d6eb3866681590f172afad781}{applicationDoSpecial}(cmd);
551             \textcolor{keyword}{delete} [] cmd;
552           \}
553           \textcolor{keywordflow}{break};
554 
555         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_ab3993570231f10b002a1a4262529e688}{FNTDEF1}:
556         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_a14b42d5de64bd1c00cf54270e4f23645}{FNTDEF2}:
557         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_a5648dfc6bc0cb339a3a863713d8f0e9e}{FNTDEF3}:
558         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_af42cc47550b5aaca055cb5c415ad2770}{FNTDEF4}:
559           \hyperlink{classbigEndianByteReader_aa8919f6fe116fd3230337675fd23abac}{command\_pointer} += 12 + ch - \hyperlink{dvi_8h_ab3993570231f10b002a1a4262529e688}{FNTDEF1} + 1;
560           \{
561             quint8 tempa = \hyperlink{classbigEndianByteReader_ac5e3b96e3e09b30dbe57175763077c1f}{readUINT8}();
562             quint8 tempb = \hyperlink{classbigEndianByteReader_ac5e3b96e3e09b30dbe57175763077c1f}{readUINT8}();
563             \hyperlink{classbigEndianByteReader_aa8919f6fe116fd3230337675fd23abac}{command\_pointer} += tempa + tempb;
564           \}
565           \textcolor{keywordflow}{break};
566 
567         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_a349316092037fdd0773335fab4e15ee8}{PRE}:
568         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_aaa567395088118b7a0aec48af9278fa1}{POST}:
569         \textcolor{keywordflow}{case} \hyperlink{dvi_8h_a4ce712aeb5113b53c5b73fd98887fae5}{POSTPOST}:
570           errorMsg = i18n(\textcolor{stringliteral}{"An illegal command was encountered."});
571           \textcolor{keywordflow}{return};
572           \textcolor{keywordflow}{break};
573 
574         \textcolor{keywordflow}{default}:
575           errorMsg = i18n(\textcolor{stringliteral}{"The unknown op-code %1 was encountered."}, ch);
576           \textcolor{keywordflow}{return};
577         \} \textcolor{comment}{/* end switch*/}
578       \} \textcolor{comment}{/* end else (ch not a SETCHAR or FNTNUM) */}
579 
580 \textcolor{preprocessor}{#ifdef DEBUG\_RENDER}
581     \textcolor{keywordflow}{if} (currentlyDrawnPage->textBoxList.size() > 0)
582       kDebug(kvs::dvi) << \textcolor{stringliteral}{"Element:"}
583                        << currentlyDrawnPage->textBoxList.last().box
584                        << currentlyDrawnPage->textBoxList.last().text
585                        << \textcolor{stringliteral}{" ? s:"} << space\_encountered
586                        << \textcolor{stringliteral}{" / nl:"} << line\_boundary\_encountered
587                        << \textcolor{stringliteral}{" / w:"} << word\_boundary\_encountered
588                        << \textcolor{stringliteral}{", "} << last\_space\_index << \textcolor{stringliteral}{"/"}
589                        << currentlyDrawnPage->textBoxList.size();
590 \textcolor{preprocessor}{#endif}
591 
592     \textcolor{comment}{/* heuristic to properly detect newlines; a space is needed */}
593     \textcolor{keywordflow}{if} (after\_space &&
594         line\_boundary\_encountered && word\_boundary\_encountered) \{
595       \textcolor{keywordflow}{if} (currentlyDrawnPage->textBoxList.last().text.endsWith(\textcolor{charliteral}{'\(\backslash\)n'}))
596          currentlyDrawnPage->textBoxList.last().text.chop(1);
597       currentlyDrawnPage->textBoxList.last().text += \textcolor{stringliteral}{" \(\backslash\)n"};
598       after\_space = \textcolor{keyword}{false};
599     \}
600 
601     \textcolor{comment}{/* a "space" has been found and there is some (new) character}
602 \textcolor{comment}{       in the array */}
603     \textcolor{keywordflow}{if} (space\_encountered &&
604         (currentlyDrawnPage->textBoxList.size() > last\_space\_index)) \{
605       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} lidx = last\_space\_index+1; lidx<currentlyDrawnPage->textBoxList.size(); ++lidx) \{
606         \textcolor{comment}{// merge two adjacent boxes which are part of the same word}
607         currentlyDrawnPage->textBoxList[lidx-1].box.setRight(currentlyDrawnPage->textBoxList[lidx].box.x())
      ;
608       \}
609 \textcolor{preprocessor}{#ifdef DEBUG\_RENDER}
610       QString lastword(currentlyDrawnPage->textBoxList[last\_space\_index].text);
611       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} lidx = last\_space\_index+1; lidx<currentlyDrawnPage->textBoxList.size(); ++lidx)
612         lastword += currentlyDrawnPage->textBoxList[lidx].text;
613       kDebug(kvs::dvi) << \textcolor{stringliteral}{"space encountered: '"} << lastword << \textcolor{stringliteral}{"'"};
614 \textcolor{preprocessor}{#endif}
615       last\_space\_index = currentlyDrawnPage->textBoxList.size();
616       after\_space = \textcolor{keyword}{true};
617     \}
618   \} \textcolor{comment}{/* end for */}
619 \}
\end{DoxyCode}
\hypertarget{classdviRenderer_ac7bf7c2ee0d8e11b9cc465d50953b1c8}{\index{dvi\+Renderer@{dvi\+Renderer}!draw\+Page@{draw\+Page}}
\index{draw\+Page@{draw\+Page}!dvi\+Renderer@{dvi\+Renderer}}
\subsubsection[{draw\+Page}]{\setlength{\rightskip}{0pt plus 5cm}void dvi\+Renderer\+::draw\+Page (
\begin{DoxyParamCaption}
\item[{{\bf Rendered\+Document\+Page\+Pixmap} $\ast$}]{page}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}, {\ttfamily [slot]}}}\label{classdviRenderer_ac7bf7c2ee0d8e11b9cc465d50953b1c8}


Definition at line 108 of file dvi\+Renderer.\+cpp.


\begin{DoxyCode}
109 \{
110 \textcolor{preprocessor}{#ifdef DEBUG\_DVIRENDERER}
111   \textcolor{comment}{//kDebug(kvs::dvi) << "dviRenderer::drawPage(documentPage *) called, page number " << page->pageNumber;}
112 \textcolor{preprocessor}{#endif}
113 
114   \textcolor{comment}{// Paranoid safety checks}
115   \textcolor{keywordflow}{if} (page == 0) \{
116     kError(kvs::dvi) << \textcolor{stringliteral}{"dviRenderer::drawPage(documentPage *) called with argument == 0"} << endl;
117     \textcolor{keywordflow}{return};
118   \}
119   \textcolor{comment}{// Paranoid safety checks}
120   \textcolor{keywordflow}{if} (page->pageNumber == 0) \{
121     kError(kvs::dvi) << \textcolor{stringliteral}{"dviRenderer::drawPage(documentPage *) called for a documentPage with page number 0
      "} << endl;
122     \textcolor{keywordflow}{return};
123   \}
124 
125   QMutexLocker locker(&mutex);
126 
127 
128   \textcolor{keywordflow}{if} ( \hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile} == 0 ) \{
129     kError(kvs::dvi) << \textcolor{stringliteral}{"dviRenderer::drawPage(documentPage *) called, but no dviFile class allocated."} << 
      endl;
130     page->clear();
131     \textcolor{keywordflow}{return};
132   \}
133   \textcolor{keywordflow}{if} (page->pageNumber > \hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->\hyperlink{classdvifile_a71577dbd82a462b855abc96be3b369c5}{total\_pages}) \{
134     kError(kvs::dvi) << \textcolor{stringliteral}{"dviRenderer::drawPage(documentPage *) called for a documentPage with page number "}
       << page->pageNumber
135                   << \textcolor{stringliteral}{" but the current dviFile has only "} << \hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->
      \hyperlink{classdvifile_a71577dbd82a462b855abc96be3b369c5}{total\_pages} << \textcolor{stringliteral}{" pages."} << endl;
136     \textcolor{keywordflow}{return};
137   \}
138   \textcolor{keywordflow}{if} ( \hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->\hyperlink{classdvifile_a81f1d32c52377a7b1802072eb40998b7}{dvi\_Data}() == 0 ) \{
139     kError(kvs::dvi) << \textcolor{stringliteral}{"dviRenderer::drawPage(documentPage *) called, but no dviFile is loaded yet."} << 
      endl;
140     page->clear();
141     \textcolor{keywordflow}{return};
142   \}
143 
144   \textcolor{keywordtype}{double} resolution = page->resolution;
145 
146   \textcolor{keywordflow}{if} (resolution != resolutionInDPI)
147     setResolution(resolution);
148  
149   currentlyDrawnPage     = page;
150   shrinkfactor           = 1200/resolutionInDPI;
151   current\_page           = page->pageNumber-1;
152 
153 
154   \textcolor{comment}{// Reset colors}
155   colorStack.clear();
156   globalColor = Qt::black;
157 
158   \textcolor{keywordtype}{int} pageWidth = page->width;
159   \textcolor{keywordtype}{int} pageHeight = page->height;
160  
161   QImage img(pageWidth, pageHeight, QImage::Format\_RGB32);
162   foreGroundPainter = \textcolor{keyword}{new} QPainter(&img);
163   \textcolor{keywordflow}{if} (foreGroundPainter != 0) \{
164     errorMsg.clear();
165     \hyperlink{classdviRenderer_a88550ffd9961878d36b244b21edb7647}{draw\_page}();
166     \textcolor{keyword}{delete} foreGroundPainter;
167     foreGroundPainter = 0;
168   \}
169   \textcolor{keywordflow}{else}
170   \{
171     kDebug(kvs::dvi) << \textcolor{stringliteral}{"painter creation failed."};
172   \} 
173   page->img = img;
174 \textcolor{comment}{//page->setImage(img);}
175  
176   \textcolor{comment}{// Postprocess hyperlinks}
177   \textcolor{comment}{// Without that, based on the way TeX draws certain characters like german "Umlaute",}
178   \textcolor{comment}{// some hyperlinks would be broken into two overlapping parts, in the middle of a word.}
179   QVector<Hyperlink>::iterator i = page->hyperLinkList.begin();
180   QVector<Hyperlink>::iterator j;
181   \textcolor{keywordflow}{while} (i != page->hyperLinkList.end())
182   \{
183     \textcolor{comment}{// Iterator j always points to the element after i.}
184     j = i;
185     j++;
186 
187     \textcolor{keywordflow}{if} (j == page->hyperLinkList.end())
188       \textcolor{keywordflow}{break};
189 
190     \hyperlink{classHyperlink}{Hyperlink}& hi = *i;
191     \hyperlink{classHyperlink}{Hyperlink}& hj = *j;
192 
193     \textcolor{keywordtype}{bool} merged = \textcolor{keyword}{false};
194 
195     \textcolor{comment}{// Merge all hyperlinks that point to the same target, and have the same baseline.}
196     \textcolor{keywordflow}{while} (hi.\hyperlink{classHyperlink_a9aa732893dfb8f1c253132dca07cb052}{linkText} == hj.\hyperlink{classHyperlink_a9aa732893dfb8f1c253132dca07cb052}{linkText} && hi.\hyperlink{classHyperlink_aec2a7167f48623f38d3c628e0ebb298f}{baseline} == hj.
      \hyperlink{classHyperlink_aec2a7167f48623f38d3c628e0ebb298f}{baseline})
197     \{
198       merged = \textcolor{keyword}{true};
199       hi.\hyperlink{classHyperlink_ad7a3e8de8ad043dd8bbfb65eb963c72d}{box} = hi.\hyperlink{classHyperlink_ad7a3e8de8ad043dd8bbfb65eb963c72d}{box}.unite(hj.\hyperlink{classHyperlink_ad7a3e8de8ad043dd8bbfb65eb963c72d}{box});
200 
201       j++;
202       \textcolor{keywordflow}{if} (j == page->hyperLinkList.end())
203         \textcolor{keywordflow}{break};
204 
205       hj = *j;
206     \}
207 
208     \textcolor{keywordflow}{if} (merged)
209     \{
210       i = page->hyperLinkList.erase(++i, j);
211     \}
212     \textcolor{keywordflow}{else}
213     \{
214       i++;
215     \}
216   \}
217 
218   \textcolor{keywordflow}{if} (errorMsg.isEmpty() != \textcolor{keyword}{true}) \{
219     emit \hyperlink{classdviRenderer_ac3e658a3f6b99c724413fc1f5663f976}{error}(i18n(\textcolor{stringliteral}{"File corruption. %1"}, errorMsg), -1);
220     errorMsg.clear();
221     currentlyDrawnPage = 0;
222     \textcolor{keywordflow}{return};
223   \}
224 \textcolor{preprocessor}{#if 0}
225 
226   \textcolor{comment}{// Tell the user (once) if the DVI file contains source specials}
227   \textcolor{comment}{// ... we don't want our great feature to go unnoticed.}
228   \hyperlink{dviPageInfo_8h_ac16fb3ec8d590bf2412bda0e176a2e65}{RenderedDviPagePixmap}* currentDVIPage = \textcolor{keyword}{dynamic\_cast<}
      \hyperlink{dviPageInfo_8h_ac16fb3ec8d590bf2412bda0e176a2e65}{RenderedDviPagePixmap}*\textcolor{keyword}{>}(currentlyDrawnPage);
229   \textcolor{keywordflow}{if} (currentDVIPage)
230   \{
231     \textcolor{keywordflow}{if} ((\hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->\hyperlink{classdvifile_a3121bb4c368ca1d30949cffb1df44d81}{sourceSpecialMarker} == \textcolor{keyword}{true}) && (currentDVIPage->
      sourceHyperLinkList.size() > 0)) \{
232       \hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->\hyperlink{classdvifile_a3121bb4c368ca1d30949cffb1df44d81}{sourceSpecialMarker} = \textcolor{keyword}{false};
233       \textcolor{comment}{// Show the dialog as soon as event processing is finished, and}
234       \textcolor{comment}{// the program is idle}
235       \textcolor{comment}{//FIXME}
236       \textcolor{comment}{//QTimer::singleShot( 0, this, SLOT(showThatSourceInformationIsPresent()) );}
237     \}
238   \}
239 \textcolor{preprocessor}{#endif}
240   currentlyDrawnPage = 0;
241 \}
\end{DoxyCode}
\hypertarget{classdviRenderer_a66c8cc74efb2b2e0c7f6de0c41d1a8a7}{\index{dvi\+Renderer@{dvi\+Renderer}!embed\+Post\+Script@{embed\+Post\+Script}}
\index{embed\+Post\+Script@{embed\+Post\+Script}!dvi\+Renderer@{dvi\+Renderer}}
\subsubsection[{embed\+Post\+Script}]{\setlength{\rightskip}{0pt plus 5cm}void dvi\+Renderer\+::embed\+Post\+Script (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [slot]}}}\label{classdviRenderer_a66c8cc74efb2b2e0c7f6de0c41d1a8a7}


Definition at line 311 of file dvi\+Renderer.\+cpp.


\begin{DoxyCode}
312 \{
313 \textcolor{preprocessor}{#ifdef DEBUG\_DVIRENDERER}
314   kDebug(kvs::dvi) << \textcolor{stringliteral}{"dviRenderer::embedPostScript()"};
315 \textcolor{preprocessor}{#endif}
316 
317   \textcolor{keywordflow}{if} (!\hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile})
318     \textcolor{keywordflow}{return};
319 
320 \textcolor{comment}{/*  embedPS\_progress = new KProgressDialog(parentWidget,}
321 \textcolor{comment}{                                         i18n("Embedding PostScript Files"), QString(), true); */}
322   \textcolor{keywordflow}{if} (!embedPS\_progress)
323     \textcolor{keywordflow}{return};
324   embedPS\_progress->setAllowCancel(\textcolor{keyword}{false});
325   embedPS\_progress->showCancelButton(\textcolor{keyword}{false});
326   embedPS\_progress->setMinimumDuration(400);
327   embedPS\_progress->progressBar()->setMaximum(\hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->
      \hyperlink{classdvifile_abd8bd3fc29f66ce9220efbd0246d7fc0}{numberOfExternalPSFiles});
328   embedPS\_progress->progressBar()->setValue(0);
329   embedPS\_numOfProgressedFiles = 0;
330 
331   quint16 currPageSav = current\_page;
332   errorMsg.clear();
333   \textcolor{keywordflow}{for}(current\_page=0; current\_page < \hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->\hyperlink{classdvifile_a71577dbd82a462b855abc96be3b369c5}{total\_pages}; current\_page++) \{
334     \textcolor{keywordflow}{if} (current\_page < dviFile->total\_pages) \{
335       \hyperlink{classbigEndianByteReader_aa8919f6fe116fd3230337675fd23abac}{command\_pointer} = \hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->\hyperlink{classdvifile_a81f1d32c52377a7b1802072eb40998b7}{dvi\_Data}() + 
      \hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->\hyperlink{classdvifile_aeafc97277647ad5077a774be71b3253a}{page\_offset}[int(current\_page)];
336       \hyperlink{classbigEndianByteReader_ace2790221530572c87c58f1f77924beb}{end\_pointer}     = \hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->\hyperlink{classdvifile_a81f1d32c52377a7b1802072eb40998b7}{dvi\_Data}() + \hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->
      \hyperlink{classdvifile_aeafc97277647ad5077a774be71b3253a}{page\_offset}[int(current\_page+1)];
337     \} \textcolor{keywordflow}{else}
338       \hyperlink{classbigEndianByteReader_aa8919f6fe116fd3230337675fd23abac}{command\_pointer} = \hyperlink{classbigEndianByteReader_ace2790221530572c87c58f1f77924beb}{end\_pointer} = 0;
339 
340     memset((\textcolor{keywordtype}{char} *) &currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}, 0, \textcolor{keyword}{sizeof}(currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}));
341     currinf.\hyperlink{structdrawinf_ac68bb33a017c34bf63f8dce71ad3ef17}{fonttable} = &(\hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->\hyperlink{classdvifile_a05cb283609e6d1627940d14e8fc85b62}{tn\_table});
342     currinf.\hyperlink{structdrawinf_a9fef874e701c25d0d781612bd3f615a5}{\_virtual}  = NULL;
343     prescan(&dviRenderer::prescan\_embedPS);
344   \}
345 
346   \textcolor{keyword}{delete} embedPS\_progress;
347   embedPS\_progress = 0;
348 
349   \textcolor{keywordflow}{if} (!errorMsg.isEmpty()) \{
350     emit \hyperlink{classdviRenderer_a07b2460ad76478aa074720e2fd4876bd}{warning}(i18n(\textcolor{stringliteral}{"Not all PostScript files could be embedded into your document. %1"}, errorMsg)
      , -1);
351     errorMsg.clear();
352   \} \textcolor{keywordflow}{else} \{
353     emit \hyperlink{classdviRenderer_a28699d83c94c30eb2ab1d8b6de07b46a}{notice}(i18n(\textcolor{stringliteral}{"All external PostScript files were embedded into your document."}), -1);
354   \}
355 
356 
357   \textcolor{comment}{// Prescan phase starts here}
358 \textcolor{preprocessor}{#ifdef PERFORMANCE\_MEASUREMENT}
359   \textcolor{comment}{//kDebug(kvs::dvi) << "Time elapsed till prescan phase starts " << performanceTimer.elapsed() << "ms";}
360   \textcolor{comment}{//QTime preScanTimer;}
361   \textcolor{comment}{//preScanTimer.start();}
362 \textcolor{preprocessor}{#endif}
363   \hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->\hyperlink{classdvifile_abd8bd3fc29f66ce9220efbd0246d7fc0}{numberOfExternalPSFiles} = 0;
364   prebookmarks.clear();
365   \textcolor{keywordflow}{for}(current\_page=0; current\_page < \hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->\hyperlink{classdvifile_a71577dbd82a462b855abc96be3b369c5}{total\_pages}; current\_page++) \{
366     PostScriptOutPutString = \textcolor{keyword}{new} QString();
367 
368     \textcolor{keywordflow}{if} (current\_page < dviFile->total\_pages) \{
369       \hyperlink{classbigEndianByteReader_aa8919f6fe116fd3230337675fd23abac}{command\_pointer} = \hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->\hyperlink{classdvifile_a81f1d32c52377a7b1802072eb40998b7}{dvi\_Data}() + 
      \hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->\hyperlink{classdvifile_aeafc97277647ad5077a774be71b3253a}{page\_offset}[int(current\_page)];
370       \hyperlink{classbigEndianByteReader_ace2790221530572c87c58f1f77924beb}{end\_pointer}     = \hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->\hyperlink{classdvifile_a81f1d32c52377a7b1802072eb40998b7}{dvi\_Data}() + \hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->
      \hyperlink{classdvifile_aeafc97277647ad5077a774be71b3253a}{page\_offset}[int(current\_page+1)];
371     \} \textcolor{keywordflow}{else}
372       \hyperlink{classbigEndianByteReader_aa8919f6fe116fd3230337675fd23abac}{command\_pointer} = \hyperlink{classbigEndianByteReader_ace2790221530572c87c58f1f77924beb}{end\_pointer} = 0;
373 
374     memset((\textcolor{keywordtype}{char} *) &currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}, 0, \textcolor{keyword}{sizeof}(currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}));
375     currinf.\hyperlink{structdrawinf_ac68bb33a017c34bf63f8dce71ad3ef17}{fonttable} = &(\hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->\hyperlink{classdvifile_a05cb283609e6d1627940d14e8fc85b62}{tn\_table});
376     currinf.\hyperlink{structdrawinf_a9fef874e701c25d0d781612bd3f615a5}{\_virtual}  = NULL;
377 
378     prescan(&dviRenderer::prescan\_parseSpecials);
379 
380     \textcolor{keywordflow}{if} (!PostScriptOutPutString->isEmpty())
381       PS\_interface->\hyperlink{classghostscript__interface_a5ae4823881dcb0f283d2ec705df38313}{setPostScript}(current\_page, *PostScriptOutPutString);
382     \textcolor{keyword}{delete} PostScriptOutPutString;
383   \}
384   PostScriptOutPutString = NULL;
385 
386 
387 \textcolor{preprocessor}{#ifdef PERFORMANCE\_MEASUREMENT}
388   \textcolor{comment}{//kDebug(kvs::dvi) << "Time required for prescan phase: " << preScanTimer.restart() << "ms";}
389 \textcolor{preprocessor}{#endif}
390   current\_page = currPageSav;
391   \_isModified = \textcolor{keyword}{true};
392 \}
\end{DoxyCode}
\hypertarget{classdviRenderer_ac3e658a3f6b99c724413fc1f5663f976}{\index{dvi\+Renderer@{dvi\+Renderer}!error@{error}}
\index{error@{error}!dvi\+Renderer@{dvi\+Renderer}}
\subsubsection[{error}]{\setlength{\rightskip}{0pt plus 5cm}void dvi\+Renderer\+::error (
\begin{DoxyParamCaption}
\item[{const Q\+String \&}]{message, }
\item[{int}]{duration}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [signal]}}}\label{classdviRenderer_ac3e658a3f6b99c724413fc1f5663f976}
The following three signals are modeleed on the corresponding signals of the Document class. \hypertarget{classdviRenderer_a91b346176bd12e95a8c962afb425b8e1}{\index{dvi\+Renderer@{dvi\+Renderer}!export\+\_\+finished@{export\+\_\+finished}}
\index{export\+\_\+finished@{export\+\_\+finished}!dvi\+Renderer@{dvi\+Renderer}}
\subsubsection[{export\+\_\+finished}]{\setlength{\rightskip}{0pt plus 5cm}void dvi\+Renderer\+::export\+\_\+finished (
\begin{DoxyParamCaption}
\item[{const {\bf D\+V\+I\+Export} $\ast$}]{key}
\end{DoxyParamCaption}
)}}\label{classdviRenderer_a91b346176bd12e95a8c962afb425b8e1}


Definition at line 740 of file dvi\+Renderer.\+cpp.


\begin{DoxyCode}
741 \{
742   \textcolor{keyword}{typedef} \hyperlink{classQMap}{QMap<const DVIExport*, KSharedPtr<DVIExport>} > 
      ExportMap;
743   ExportMap::iterator it = all\_exports\_.find(key);
744   \textcolor{keywordflow}{if} (it != all\_exports\_.end())
745     all\_exports\_.remove(key);
746 \}
\end{DoxyCode}
\hypertarget{classdviRenderer_a433978b1cba35770ed154a0fa3c5ff67}{\index{dvi\+Renderer@{dvi\+Renderer}!export\+P\+D\+F@{export\+P\+D\+F}}
\index{export\+P\+D\+F@{export\+P\+D\+F}!dvi\+Renderer@{dvi\+Renderer}}
\subsubsection[{export\+P\+D\+F}]{\setlength{\rightskip}{0pt plus 5cm}void dvi\+Renderer\+::export\+P\+D\+F (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [slot]}}}\label{classdviRenderer_a433978b1cba35770ed154a0fa3c5ff67}


Definition at line 716 of file dvi\+Renderer.\+cpp.


\begin{DoxyCode}
717 \{
718 \textcolor{comment}{/*}
719 \textcolor{comment}{  KSharedPtr<DVIExport> exporter(new DVIExportToPDF(*this, parentWidget));}
720 \textcolor{comment}{  if (exporter->started())}
721 \textcolor{comment}{    all\_exports\_[exporter.data()] = exporter;}
722 \textcolor{comment}{*/}
723 \}
\end{DoxyCode}
\hypertarget{classdviRenderer_a784bc755f1db810e472768128250f917}{\index{dvi\+Renderer@{dvi\+Renderer}!export\+P\+S@{export\+P\+S}}
\index{export\+P\+S@{export\+P\+S}!dvi\+Renderer@{dvi\+Renderer}}
\subsubsection[{export\+P\+S}]{\setlength{\rightskip}{0pt plus 5cm}void dvi\+Renderer\+::export\+P\+S (
\begin{DoxyParamCaption}
\item[{const Q\+String \&}]{fname = {\ttfamily QString()}, }
\item[{const Q\+String\+List \&}]{options = {\ttfamily QStringList()}, }
\item[{Q\+Printer $\ast$}]{printer = {\ttfamily 0}, }
\item[{Q\+Printer\+::\+Orientation}]{orientation = {\ttfamily QPrinter\+:\+:Portrait}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [slot]}}}\label{classdviRenderer_a784bc755f1db810e472768128250f917}


Definition at line 726 of file dvi\+Renderer.\+cpp.


\begin{DoxyCode}
727 \{
728   KSharedPtr<DVIExport> exporter(\textcolor{keyword}{new} \hyperlink{classdviRenderer_a741d5e51c874df4d150f2c4b35491790}{DVIExportToPS}(*\textcolor{keyword}{this}, parentWidget, fname, options, 
      printer, font\_pool.\hyperlink{classfontPool_a4e382694df3497e5a3455cba7ac65ad5}{getUseFontHints}(), orientation));
729   \textcolor{keywordflow}{if} (exporter->started())
730     all\_exports\_[exporter.data()] = exporter;
731 \}
\end{DoxyCode}
\hypertarget{classdviRenderer_a0f11aa712420cb39bf0909822a4e98bf}{\index{dvi\+Renderer@{dvi\+Renderer}!find\+Anchor@{find\+Anchor}}
\index{find\+Anchor@{find\+Anchor}!dvi\+Renderer@{dvi\+Renderer}}
\subsubsection[{find\+Anchor}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Anchor} dvi\+Renderer\+::find\+Anchor (
\begin{DoxyParamCaption}
\item[{const Q\+String \&}]{locallink}
\end{DoxyParamCaption}
)}}\label{classdviRenderer_a0f11aa712420cb39bf0909822a4e98bf}


Definition at line 34 of file dvi\+Renderer\+\_\+dr.\+cpp.


\begin{DoxyCode}
35 \{
36   \hyperlink{classQMap}{QMap<QString,Anchor>::Iterator} it = anchorList.find(locallink);
37   \textcolor{keywordflow}{if} (it != anchorList.end())
38     \textcolor{keywordflow}{return} *it;
39   \textcolor{keywordflow}{else}
40     \textcolor{keywordflow}{return} \hyperlink{classAnchor}{Anchor}();
41 \}
\end{DoxyCode}
\hypertarget{classdviRenderer_aa59a29b870ae9a4ec30bfefdde940ca1}{\index{dvi\+Renderer@{dvi\+Renderer}!get\+Prebookmarks@{get\+Prebookmarks}}
\index{get\+Prebookmarks@{get\+Prebookmarks}!dvi\+Renderer@{dvi\+Renderer}}
\subsubsection[{get\+Prebookmarks}]{\setlength{\rightskip}{0pt plus 5cm}Q\+Vector$<${\bf Pre\+Bookmark}$>$ dvi\+Renderer\+::get\+Prebookmarks (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [slot]}}}\label{classdviRenderer_aa59a29b870ae9a4ec30bfefdde940ca1}


Definition at line 172 of file dvi\+Renderer.\+h.


\begin{DoxyCode}
172 \{ \textcolor{keywordflow}{return} prebookmarks; \}
\end{DoxyCode}
\hypertarget{classdviRenderer_a8e14acc0c7dffed62d4af08c8bf9226c}{\index{dvi\+Renderer@{dvi\+Renderer}!get\+Text@{get\+Text}}
\index{get\+Text@{get\+Text}!dvi\+Renderer@{dvi\+Renderer}}
\subsubsection[{get\+Text}]{\setlength{\rightskip}{0pt plus 5cm}void dvi\+Renderer\+::get\+Text (
\begin{DoxyParamCaption}
\item[{{\bf Rendered\+Document\+Page\+Pixmap} $\ast$}]{page}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}, {\ttfamily [slot]}}}\label{classdviRenderer_a8e14acc0c7dffed62d4af08c8bf9226c}


Definition at line 244 of file dvi\+Renderer.\+cpp.


\begin{DoxyCode}
245 \{
246   \textcolor{keywordtype}{bool} postscriptBackup = \_postscript;
247   \textcolor{comment}{// Disable postscript-specials temporarely to speed up text extraction.}
248   \_postscript = \textcolor{keyword}{false};
249 
250   \hyperlink{classdviRenderer_ac7bf7c2ee0d8e11b9cc465d50953b1c8}{drawPage}(page);
251 
252   \_postscript = postscriptBackup;
253 \}
\end{DoxyCode}
\hypertarget{classdviRenderer_aa8da8dcd8e7c35b18004266d3c7b1a4f}{\index{dvi\+Renderer@{dvi\+Renderer}!handle\+S\+R\+C\+Link@{handle\+S\+R\+C\+Link}}
\index{handle\+S\+R\+C\+Link@{handle\+S\+R\+C\+Link}!dvi\+Renderer@{dvi\+Renderer}}
\subsubsection[{handle\+S\+R\+C\+Link}]{\setlength{\rightskip}{0pt plus 5cm}void dvi\+Renderer\+::handle\+S\+R\+C\+Link (
\begin{DoxyParamCaption}
\item[{const Q\+String \&}]{link\+Text, }
\item[{const Q\+Point \&}]{point, }
\item[{Document\+Widget $\ast$}]{widget}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [slot]}}}\label{classdviRenderer_aa8da8dcd8e7c35b18004266d3c7b1a4f}


Definition at line 671 of file dvi\+Renderer.\+cpp.


\begin{DoxyCode}
672 \{
673   Q\_UNUSED( linkText );
674   Q\_UNUSED( point );
675   Q\_UNUSED( win );
676 \textcolor{preprocessor}{#if 0}
677   KSharedPtr<DVISourceEditor> editor(\textcolor{keyword}{new} DVISourceEditor(*\textcolor{keyword}{this}, parentWidget, linkText, point, win));
678   \textcolor{keywordflow}{if} (editor->started())
679     editor\_ = editor;
680 \textcolor{preprocessor}{#endif}
681 \}
\end{DoxyCode}
\hypertarget{classdviRenderer_a3967eeda01307c73467bfc47465cde6c}{\index{dvi\+Renderer@{dvi\+Renderer}!html\+\_\+anchor\+\_\+end@{html\+\_\+anchor\+\_\+end}}
\index{html\+\_\+anchor\+\_\+end@{html\+\_\+anchor\+\_\+end}!dvi\+Renderer@{dvi\+Renderer}}
\subsubsection[{html\+\_\+anchor\+\_\+end}]{\setlength{\rightskip}{0pt plus 5cm}void dvi\+Renderer\+::html\+\_\+anchor\+\_\+end (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classdviRenderer_a3967eeda01307c73467bfc47465cde6c}


Definition at line 259 of file special.\+cpp.


\begin{DoxyCode}
260 \{
261 \textcolor{preprocessor}{#ifdef DEBUG\_SPECIAL}
262   kDebug(kvs::dvi) << \textcolor{stringliteral}{"HTML-special, anchor-end"};
263 \textcolor{preprocessor}{#endif}
264 
265   \textcolor{keywordflow}{if} (HTML\_href != NULL) \{
266     \textcolor{keyword}{delete} HTML\_href;
267     HTML\_href = NULL;
268   \}
269 \}
\end{DoxyCode}
\hypertarget{classdviRenderer_a2dfcf48566f5cb649c8110d3c79dc945}{\index{dvi\+Renderer@{dvi\+Renderer}!html\+\_\+href\+\_\+special@{html\+\_\+href\+\_\+special}}
\index{html\+\_\+href\+\_\+special@{html\+\_\+href\+\_\+special}!dvi\+Renderer@{dvi\+Renderer}}
\subsubsection[{html\+\_\+href\+\_\+special}]{\setlength{\rightskip}{0pt plus 5cm}void dvi\+Renderer\+::html\+\_\+href\+\_\+special (
\begin{DoxyParamCaption}
\item[{const Q\+String \&}]{msg}
\end{DoxyParamCaption}
)}}\label{classdviRenderer_a2dfcf48566f5cb649c8110d3c79dc945}


Definition at line 247 of file special.\+cpp.


\begin{DoxyCode}
248 \{
249   QString cp = \_cp;
250   cp.truncate(cp.indexOf(\textcolor{charliteral}{'"'}));
251 
252 \textcolor{preprocessor}{#ifdef DEBUG\_SPECIAL}
253   kDebug(kvs::dvi) << \textcolor{stringliteral}{"HTML-special, href "} << cp.toLatin1();
254 \textcolor{preprocessor}{#endif}
255   HTML\_href = \textcolor{keyword}{new} QString(cp);
256 \}
\end{DoxyCode}
\hypertarget{classdviRenderer_ac97838eefe7ae970c4cd462829267261}{\index{dvi\+Renderer@{dvi\+Renderer}!is\+Valid\+File@{is\+Valid\+File}}
\index{is\+Valid\+File@{is\+Valid\+File}!dvi\+Renderer@{dvi\+Renderer}}
\subsubsection[{is\+Valid\+File}]{\setlength{\rightskip}{0pt plus 5cm}bool dvi\+Renderer\+::is\+Valid\+File (
\begin{DoxyParamCaption}
\item[{const Q\+String \&}]{file\+Name}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classdviRenderer_ac97838eefe7ae970c4cd462829267261}


Definition at line 395 of file dvi\+Renderer.\+cpp.


\begin{DoxyCode}
396 \{
397   QFile f(filename);
398   \textcolor{keywordflow}{if} (!f.open(QIODevice::ReadOnly))
399     \textcolor{keywordflow}{return} \textcolor{keyword}{false};
400 
401   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} test[4];
402   \textcolor{keywordflow}{if} ( f.read( (\textcolor{keywordtype}{char} *)test,2)<2 || test[0] != 247 || test[1] != 2 )
403     \textcolor{keywordflow}{return} \textcolor{keyword}{false};
404 
405   \textcolor{keywordtype}{int} n = f.size();
406   \textcolor{keywordflow}{if} ( n < 134 )        \textcolor{comment}{// Too short for a dvi file}
407     \textcolor{keywordflow}{return} \textcolor{keyword}{false};
408   f.seek( n-4 );
409 
410   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} trailer[4] = \{ 0xdf,0xdf,0xdf,0xdf \};
411 
412   \textcolor{keywordflow}{if} ( f.read( (\textcolor{keywordtype}{char} *)test, 4 )<4 || strncmp( (\textcolor{keywordtype}{char} *)test, (\textcolor{keywordtype}{char} *) trailer, 4 ) )
413     \textcolor{keywordflow}{return} \textcolor{keyword}{false};
414   \textcolor{comment}{// We suppose now that the dvi file is complete and OK}
415   \textcolor{keywordflow}{return} \textcolor{keyword}{true};
416 \}
\end{DoxyCode}
\hypertarget{classdviRenderer_a28699d83c94c30eb2ab1d8b6de07b46a}{\index{dvi\+Renderer@{dvi\+Renderer}!notice@{notice}}
\index{notice@{notice}!dvi\+Renderer@{dvi\+Renderer}}
\subsubsection[{notice}]{\setlength{\rightskip}{0pt plus 5cm}void dvi\+Renderer\+::notice (
\begin{DoxyParamCaption}
\item[{const Q\+String \&}]{message, }
\item[{int}]{duration}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [signal]}}}\label{classdviRenderer_a28699d83c94c30eb2ab1d8b6de07b46a}
\hypertarget{classdviRenderer_ac86c232ea62e24495bea6ea67a2c01b8}{\index{dvi\+Renderer@{dvi\+Renderer}!parse\+Reference@{parse\+Reference}}
\index{parse\+Reference@{parse\+Reference}!dvi\+Renderer@{dvi\+Renderer}}
\subsubsection[{parse\+Reference}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Anchor} dvi\+Renderer\+::parse\+Reference (
\begin{DoxyParamCaption}
\item[{const Q\+String \&}]{reference}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classdviRenderer_ac86c232ea62e24495bea6ea67a2c01b8}
This method will try to parse the reference part of the D\+V\+I file's U\+R\+L, (either a number, which is supposed to be a page number, or src\+:$<$line$>$$<$filename$>$) and see if a corresponding section of the D\+V\+I file can be found. If so, it returns an anchor to that section. If not, it returns an invalid anchor. 

Definition at line 567 of file dvi\+Renderer.\+cpp.


\begin{DoxyCode}
568 \{
569   QMutexLocker locker(&mutex);
570 
571 \textcolor{preprocessor}{#ifdef DEBUG\_DVIRENDERER}
572   kError(kvs::dvi) << \textcolor{stringliteral}{"dviRenderer::parseReference( "} << reference << \textcolor{stringliteral}{" ) called"} << endl;
573 \textcolor{preprocessor}{#endif}
574 
575   \textcolor{keywordflow}{if} (\hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile} == 0)
576     \textcolor{keywordflow}{return} \hyperlink{classAnchor}{Anchor}();
577 
578   \textcolor{comment}{// case 1: The reference is a number, which we'll interpret as a}
579   \textcolor{comment}{// page number.}
580   \textcolor{keywordtype}{bool} ok;
581   \textcolor{keywordtype}{int} page = reference.toInt ( &ok );
582   \textcolor{keywordflow}{if} (ok == \textcolor{keyword}{true}) \{
583     \textcolor{keywordflow}{if} (page < 0)
584       page = 0;
585     \textcolor{keywordflow}{if} (page > \hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->\hyperlink{classdvifile_a71577dbd82a462b855abc96be3b369c5}{total\_pages})
586       page = \hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->\hyperlink{classdvifile_a71577dbd82a462b855abc96be3b369c5}{total\_pages};
587 
588     \textcolor{keywordflow}{return} \hyperlink{classAnchor}{Anchor}(page, \hyperlink{classLength}{Length}() );
589   \}
590 
591   \textcolor{comment}{// case 2: The reference is of form "src:1111Filename", where "1111"}
592   \textcolor{comment}{// points to line number 1111 in the file "Filename". KDVI then}
593   \textcolor{comment}{// looks for source specials of the form "src:xxxxFilename", and}
594   \textcolor{comment}{// tries to find the special with the biggest xxxx}
595   \textcolor{keywordflow}{if} (reference.indexOf(\textcolor{stringliteral}{"src:"}, 0, Qt::CaseInsensitive) == 0) \{
596 
597     \textcolor{comment}{// Extract the file name and the numeral part from the reference string}
598     \hyperlink{classDVI__SourceFileSplitter}{DVI\_SourceFileSplitter} splitter(reference, \hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->
      \hyperlink{classdvifile_a1c0fe420231e71f256b5db367b7e1178}{filename});
599     quint32 refLineNumber = splitter.line();
600     QString  refFileName   = splitter.filePath();
601 
602     \textcolor{keywordflow}{if} (sourceHyperLinkAnchors.isEmpty()) \{
603       emit \hyperlink{classdviRenderer_a07b2460ad76478aa074720e2fd4876bd}{warning}(i18n(\textcolor{stringliteral}{"You have asked Okular to locate the place in the DVI file which corresponds
       to "}
604                         \textcolor{stringliteral}{"line %1 in the TeX-file %2. It seems, however, that the DVI file "}
605                         \textcolor{stringliteral}{"does not contain the necessary source file information. "},
606                         refLineNumber, refFileName), -1);
607       \textcolor{keywordflow}{return} \hyperlink{classAnchor}{Anchor}();
608     \}
609 
610     \textcolor{comment}{// Go through the list of source file anchors, and find the anchor}
611     \textcolor{comment}{// whose line number is the biggest among those that are smaller}
612     \textcolor{comment}{// than the refLineNumber. That way, the position in the DVI file}
613     \textcolor{comment}{// which is highlighted is always a little further up than the}
614     \textcolor{comment}{// position in the editor, e.g. if the DVI file contains}
615     \textcolor{comment}{// positional information at the beginning of every paragraph,}
616     \textcolor{comment}{// KDVI jumps to the beginning of the paragraph that the cursor is}
617     \textcolor{comment}{// in, and never to the next paragraph. If source file anchors for}
618     \textcolor{comment}{// the refFileName can be found, but none of their line numbers is}
619     \textcolor{comment}{// smaller than the refLineNumber, the reason is most likely, that}
620     \textcolor{comment}{// the cursor in the editor stands somewhere in the preamble of}
621     \textcolor{comment}{// the LaTeX file. In that case, we jump to the beginning of the}
622     \textcolor{comment}{// document.}
623     \textcolor{keywordtype}{bool} anchorForRefFileFound = \textcolor{keyword}{false}; \textcolor{comment}{// Flag that is set if source file anchors for the refFileName
       could be found at all}
624 
625     QVector<DVI\_SourceFileAnchor>::iterator bestMatch = sourceHyperLinkAnchors.end();
626     QVector<DVI\_SourceFileAnchor>::iterator it;
627     \textcolor{keywordflow}{for}( it = sourceHyperLinkAnchors.begin(); it != sourceHyperLinkAnchors.end(); ++it )
628       \textcolor{keywordflow}{if} (refFileName.trimmed() == it->fileName.trimmed()
629       || refFileName.trimmed() == it->fileName.trimmed() + \textcolor{stringliteral}{".tex"}
630       ) \{
631         anchorForRefFileFound = \textcolor{keyword}{true};
632 
633         \textcolor{keywordflow}{if} ( (it->line <= refLineNumber) &&
634              ( (bestMatch == sourceHyperLinkAnchors.end()) || (it->line > bestMatch->line) ) )
635           bestMatch = it;
636       \}
637 
638     \textcolor{keywordflow}{if} (bestMatch != sourceHyperLinkAnchors.end())
639       \textcolor{keywordflow}{return} \hyperlink{classAnchor}{Anchor}(bestMatch->page, bestMatch->distance\_from\_top);
640     \textcolor{keywordflow}{else}
641       \textcolor{keywordflow}{if} (anchorForRefFileFound == \textcolor{keyword}{false})
642       \{
643         emit \hyperlink{classdviRenderer_a07b2460ad76478aa074720e2fd4876bd}{warning}(i18n(\textcolor{stringliteral}{"Okular was not able to locate the place in the DVI file which corresponds
       to "}
644                           \textcolor{stringliteral}{"line %1 in the TeX-file %2."}, refLineNumber, refFileName), -1);
645       \}
646       \textcolor{keywordflow}{else}
647         \textcolor{keywordflow}{return} \hyperlink{classAnchor}{Anchor}();
648     \textcolor{keywordflow}{return} \hyperlink{classAnchor}{Anchor}();
649   \}
650   \textcolor{keywordflow}{return} \hyperlink{classAnchor}{Anchor}();
651 \}
\end{DoxyCode}
\hypertarget{classdviRenderer_ae8aea1960b6629e2559e4d73da894faf}{\index{dvi\+Renderer@{dvi\+Renderer}!print\+Error\+Msg\+For\+Specials@{print\+Error\+Msg\+For\+Specials}}
\index{print\+Error\+Msg\+For\+Specials@{print\+Error\+Msg\+For\+Specials}!dvi\+Renderer@{dvi\+Renderer}}
\subsubsection[{print\+Error\+Msg\+For\+Specials}]{\setlength{\rightskip}{0pt plus 5cm}void dvi\+Renderer\+::print\+Error\+Msg\+For\+Specials (
\begin{DoxyParamCaption}
\item[{const Q\+String \&}]{msg}
\end{DoxyParamCaption}
)}}\label{classdviRenderer_ae8aea1960b6629e2559e4d73da894faf}


Definition at line 30 of file special.\+cpp.


\begin{DoxyCode}
31 \{
32   \textcolor{keywordflow}{if} (\hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->\hyperlink{classdvifile_a9f1a21857ce4a3eeb9490ea63b1bfdcb}{errorCounter} < 25) \{
33     kError(kvs::dvi) << msg << endl;
34     \hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->\hyperlink{classdvifile_a9f1a21857ce4a3eeb9490ea63b1bfdcb}{errorCounter}++;
35     \textcolor{keywordflow}{if} (\hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->\hyperlink{classdvifile_a9f1a21857ce4a3eeb9490ea63b1bfdcb}{errorCounter} == 25)
36       kError(kvs::dvi) << i18n(\textcolor{stringliteral}{"That makes 25 errors. Further error messages will not be printed."}) << endl
      ;
37   \}
38 \}
\end{DoxyCode}
\hypertarget{classdviRenderer_a86f30945088aa924a9a79ea58d2c0b65}{\index{dvi\+Renderer@{dvi\+Renderer}!read\+\_\+postamble@{read\+\_\+postamble}}
\index{read\+\_\+postamble@{read\+\_\+postamble}!dvi\+Renderer@{dvi\+Renderer}}
\subsubsection[{read\+\_\+postamble}]{\setlength{\rightskip}{0pt plus 5cm}void dvi\+Renderer\+::read\+\_\+postamble (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classdviRenderer_a86f30945088aa924a9a79ea58d2c0b65}
\hypertarget{classdviRenderer_aee61c986d42cdc1f0ac1ff168a4e1663}{\index{dvi\+Renderer@{dvi\+Renderer}!set\+\_\+char@{set\+\_\+char}}
\index{set\+\_\+char@{set\+\_\+char}!dvi\+Renderer@{dvi\+Renderer}}
\subsubsection[{set\+\_\+char}]{\setlength{\rightskip}{0pt plus 5cm}void dvi\+Renderer\+::set\+\_\+char (
\begin{DoxyParamCaption}
\item[{unsigned int}]{cmd, }
\item[{unsigned int}]{ch}
\end{DoxyParamCaption}
)}}\label{classdviRenderer_aee61c986d42cdc1f0ac1ff168a4e1663}
Routine to print characters. 

Definition at line 76 of file dvi\+Renderer\+\_\+draw.\+cpp.


\begin{DoxyCode}
77 \{
78 \textcolor{preprocessor}{#ifdef DEBUG\_RENDER}
79   kDebug(kvs::dvi) << \textcolor{stringliteral}{"set\_char #"} << ch;
80 \textcolor{preprocessor}{#endif}
81 
82   \hyperlink{classglyph}{glyph} *g;
83   \textcolor{keywordflow}{if} (colorStack.isEmpty())
84     g = ((\hyperlink{classTeXFont}{TeXFont} *)(currinf.\hyperlink{structdrawinf_a4a6ec248b5b071099ddf9b5e4f0255e2}{fontp}->\hyperlink{classTeXFontDefinition_a3e788e09d8978795672226b472163b4f}{font}))->getGlyph(ch, \textcolor{keyword}{true}, globalColor);
85   \textcolor{keywordflow}{else}
86     g = ((\hyperlink{classTeXFont}{TeXFont} *)(currinf.\hyperlink{structdrawinf_a4a6ec248b5b071099ddf9b5e4f0255e2}{fontp}->\hyperlink{classTeXFontDefinition_a3e788e09d8978795672226b472163b4f}{font}))->getGlyph(ch, \textcolor{keyword}{true}, colorStack.top());
87   \textcolor{keywordflow}{if} (g == NULL)
88     \textcolor{keywordflow}{return};
89 
90   \textcolor{keywordtype}{long} dvi\_h\_sav = currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a530699c241126f99b81cee11c2c1c4e4}{dvi\_h};
91 
92   QImage pix = g->\hyperlink{classglyph_aeefa28a926bdd7a24595dbdc7cdf504c}{shrunkenCharacter};
93   \textcolor{keywordtype}{int} x = ((int) ((currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a530699c241126f99b81cee11c2c1c4e4}{dvi\_h}) / (shrinkfactor * 65536))) - g->
      \hyperlink{classglyph_a07a7aa840a9a34588a5cc02508ac5e6d}{x2};
94   \textcolor{keywordtype}{int} y = currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a0e7316fa88b0240baa7ce526650131a9}{pxl\_v} - g->\hyperlink{classglyph_afa1607f13eb1db99a5a3b1c92d47db7f}{y2};
95 
96   \textcolor{comment}{// Draw the character.}
97   foreGroundPainter->drawImage(x, y, pix);
98 
99   \textcolor{comment}{// Are we drawing text for a hyperlink? And are hyperlinks}
100   \textcolor{comment}{// enabled?}
101   \textcolor{keywordflow}{if} (HTML\_href != NULL) \{
102     \textcolor{comment}{// Now set up a rectangle which is checked against every mouse}
103     \textcolor{comment}{// event.}
104     \textcolor{keywordflow}{if} (line\_boundary\_encountered == \textcolor{keyword}{true}) \{
105       \textcolor{comment}{// Set up hyperlink}
106       \hyperlink{classHyperlink}{Hyperlink} dhl;
107       dhl.\hyperlink{classHyperlink_aec2a7167f48623f38d3c628e0ebb298f}{baseline} = currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a0e7316fa88b0240baa7ce526650131a9}{pxl\_v};
108       dhl.\hyperlink{classHyperlink_ad7a3e8de8ad043dd8bbfb65eb963c72d}{box}.setRect(x, y, pix.width(), pix.height());
109       dhl.\hyperlink{classHyperlink_a9aa732893dfb8f1c253132dca07cb052}{linkText} = *HTML\_href;
110       currentlyDrawnPage->hyperLinkList.push\_back(dhl);
111     \} \textcolor{keywordflow}{else} \{
112       QRect dshunion = currentlyDrawnPage->hyperLinkList[currentlyDrawnPage->hyperLinkList.size()-1].box.
      unite(QRect(x, y, pix.width(), pix.height())) ;
113       currentlyDrawnPage->hyperLinkList[currentlyDrawnPage->hyperLinkList.size()-1].box = dshunion;
114     \}
115   \}
116 
117   \textcolor{comment}{// Are we drawing text for a source hyperlink? And are source}
118   \textcolor{comment}{// hyperlinks enabled?}
119   \textcolor{comment}{// If we are printing source hyperlinks are irrelevant, otherwise we}
120   \textcolor{comment}{// actually got a pointer to a RenderedDviPagePixmap.}
121   \hyperlink{dviPageInfo_8h_ac16fb3ec8d590bf2412bda0e176a2e65}{RenderedDviPagePixmap}* currentDVIPage = \textcolor{keyword}{dynamic\_cast<}
      \hyperlink{dviPageInfo_8h_ac16fb3ec8d590bf2412bda0e176a2e65}{RenderedDviPagePixmap}*\textcolor{keyword}{>}(currentlyDrawnPage);
122   \textcolor{keywordflow}{if} (source\_href != 0 && currentDVIPage) \{
123     \textcolor{comment}{// Now set up a rectangle which is checked against every mouse}
124     \textcolor{comment}{// event.}
125     \textcolor{keywordflow}{if} (line\_boundary\_encountered == \textcolor{keyword}{true}) \{
126       \textcolor{comment}{// Set up source hyperlinks}
127       \hyperlink{classHyperlink}{Hyperlink} dhl;
128       dhl.\hyperlink{classHyperlink_aec2a7167f48623f38d3c628e0ebb298f}{baseline} = currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a0e7316fa88b0240baa7ce526650131a9}{pxl\_v};
129       dhl.\hyperlink{classHyperlink_ad7a3e8de8ad043dd8bbfb65eb963c72d}{box}.setRect(x, y, pix.width(), pix.height());
130       \textcolor{keywordflow}{if} (source\_href != NULL)
131         dhl.\hyperlink{classHyperlink_a9aa732893dfb8f1c253132dca07cb052}{linkText} = *source\_href;
132       \textcolor{keywordflow}{else}
133         dhl.\hyperlink{classHyperlink_a9aa732893dfb8f1c253132dca07cb052}{linkText} = \textcolor{stringliteral}{""};
134       currentDVIPage->sourceHyperLinkList.push\_back(dhl);
135     \} \textcolor{keywordflow}{else} \{
136       QRect dshunion = currentDVIPage->sourceHyperLinkList[currentDVIPage->sourceHyperLinkList.size()-1].
      box.unite(QRect(x, y, pix.width(), pix.height())) ;
137       currentDVIPage->sourceHyperLinkList[currentDVIPage->sourceHyperLinkList.size()-1].box = dshunion;
138     \}
139   \}
140 
141   \textcolor{comment}{// Code for DVI -> text functions (e.g. marking of text, full text}
142   \textcolor{comment}{// search, etc.). Set up the currentlyDrawnPage->textBoxList.}
143   \hyperlink{classTextBox}{TextBox} link;
144   link.\hyperlink{classTextBox_aa383110556fc2ca0e787b9618a333074}{box}.setRect(x, y, pix.width(), pix.height());
145   link.\hyperlink{classTextBox_a60aeb0b354c3e92da942f3fac174da2e}{text} = \textcolor{stringliteral}{""};
146   currentlyDrawnPage->textBoxList.push\_back(link);
147 
148   \textcolor{keywordflow}{switch}(ch) \{
149   \textcolor{keywordflow}{case} 0x0b:
150     currentlyDrawnPage->textBoxList[currentlyDrawnPage->textBoxList.size()-1].text += \textcolor{stringliteral}{"ff"};
151     \textcolor{keywordflow}{break};
152   \textcolor{keywordflow}{case} 0x0c:
153     currentlyDrawnPage->textBoxList[currentlyDrawnPage->textBoxList.size()-1].text += \textcolor{stringliteral}{"fi"};
154     \textcolor{keywordflow}{break};
155   \textcolor{keywordflow}{case} 0x0d:
156     currentlyDrawnPage->textBoxList[currentlyDrawnPage->textBoxList.size()-1].text += \textcolor{stringliteral}{"fl"};
157     \textcolor{keywordflow}{break};
158   \textcolor{keywordflow}{case} 0x0e:
159     currentlyDrawnPage->textBoxList[currentlyDrawnPage->textBoxList.size()-1].text += \textcolor{stringliteral}{"ffi"};
160     \textcolor{keywordflow}{break};
161   \textcolor{keywordflow}{case} 0x0f:
162     currentlyDrawnPage->textBoxList[currentlyDrawnPage->textBoxList.size()-1].text += \textcolor{stringliteral}{"ffl"};
163     \textcolor{keywordflow}{break};
164 
165   \textcolor{keywordflow}{case} 0x7b:
166     currentlyDrawnPage->textBoxList[currentlyDrawnPage->textBoxList.size()-1].text += \textcolor{charliteral}{'-'};
167     \textcolor{keywordflow}{break};
168   \textcolor{keywordflow}{case} 0x7c:
169     currentlyDrawnPage->textBoxList[currentlyDrawnPage->textBoxList.size()-1].text += \textcolor{stringliteral}{"---"};
170     \textcolor{keywordflow}{break};
171   \textcolor{keywordflow}{case} 0x7d:
172     currentlyDrawnPage->textBoxList[currentlyDrawnPage->textBoxList.size()-1].text += \textcolor{stringliteral}{"\(\backslash\)""};
173     \textcolor{keywordflow}{break};
174   \textcolor{keywordflow}{case} 0x7e:
175     currentlyDrawnPage->textBoxList[currentlyDrawnPage->textBoxList.size()-1].text += \textcolor{charliteral}{'~'};
176     \textcolor{keywordflow}{break};
177   \textcolor{keywordflow}{case} 0x7f:
178     currentlyDrawnPage->textBoxList[currentlyDrawnPage->textBoxList.size()-1].text += \textcolor{stringliteral}{"@@"}; \textcolor{comment}{// @@@ check!}
179     \textcolor{keywordflow}{break};
180 
181   \textcolor{keywordflow}{default}:
182     \textcolor{keywordflow}{if} ((ch >= 0x21) && (ch <= 0x7a))
183       currentlyDrawnPage->textBoxList[currentlyDrawnPage->textBoxList.size()-1].text += QChar(ch);
184     \textcolor{keywordflow}{else}
185       currentlyDrawnPage->textBoxList[currentlyDrawnPage->textBoxList.size()-1].text += \textcolor{charliteral}{'?'};
186     \textcolor{keywordflow}{break};
187   \}
188 
189 
190   \textcolor{keywordflow}{if} (cmd == \hyperlink{dvi_8h_ac2ccc1b9d8eb59ffdd81c958dcedf4b3}{PUT1})
191     currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a530699c241126f99b81cee11c2c1c4e4}{dvi\_h} = dvi\_h\_sav;
192   \textcolor{keywordflow}{else}
193     currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a530699c241126f99b81cee11c2c1c4e4}{dvi\_h} += (int)(currinf.\hyperlink{structdrawinf_a4a6ec248b5b071099ddf9b5e4f0255e2}{fontp}->
      \hyperlink{classTeXFontDefinition_a8514a1b74d448c5e9e9dafc8737938e9}{scaled\_size\_in\_DVI\_units} * \hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->
      \hyperlink{classdvifile_a59a8b5b2c7b0ae199f4183b6062e6fb0}{getCmPerDVIunit}() *
194                                 (1200.0 / 2.54)/16.0 * g->
      \hyperlink{classglyph_ad5d39f93c1c63bd072b23783cd9ac7ce}{dvi\_advance\_in\_units\_of\_design\_size\_by\_2e20} + 0.5);
195 
196   word\_boundary\_encountered = \textcolor{keyword}{false};
197   line\_boundary\_encountered = \textcolor{keyword}{false};
198 \}
\end{DoxyCode}
\hypertarget{classdviRenderer_a96fba91804fe14b87b554192fb772cb3}{\index{dvi\+Renderer@{dvi\+Renderer}!set\+\_\+empty\+\_\+char@{set\+\_\+empty\+\_\+char}}
\index{set\+\_\+empty\+\_\+char@{set\+\_\+empty\+\_\+char}!dvi\+Renderer@{dvi\+Renderer}}
\subsubsection[{set\+\_\+empty\+\_\+char}]{\setlength{\rightskip}{0pt plus 5cm}void dvi\+Renderer\+::set\+\_\+empty\+\_\+char (
\begin{DoxyParamCaption}
\item[{unsigned int}]{cmd, }
\item[{unsigned int}]{ch}
\end{DoxyParamCaption}
)}}\label{classdviRenderer_a96fba91804fe14b87b554192fb772cb3}


Definition at line 200 of file dvi\+Renderer\+\_\+draw.\+cpp.


\begin{DoxyCode}
201 \{
202   \textcolor{keywordflow}{return};
203 \}
\end{DoxyCode}
\hypertarget{classdviRenderer_af39ff19024aab0a2da12815c14851f19}{\index{dvi\+Renderer@{dvi\+Renderer}!set\+\_\+no\+\_\+char@{set\+\_\+no\+\_\+char}}
\index{set\+\_\+no\+\_\+char@{set\+\_\+no\+\_\+char}!dvi\+Renderer@{dvi\+Renderer}}
\subsubsection[{set\+\_\+no\+\_\+char}]{\setlength{\rightskip}{0pt plus 5cm}void dvi\+Renderer\+::set\+\_\+no\+\_\+char (
\begin{DoxyParamCaption}
\item[{unsigned int}]{cmd, }
\item[{unsigned int}]{ch}
\end{DoxyParamCaption}
)}}\label{classdviRenderer_af39ff19024aab0a2da12815c14851f19}


Definition at line 246 of file dvi\+Renderer\+\_\+draw.\+cpp.


\begin{DoxyCode}
247 \{
248 \textcolor{preprocessor}{#ifdef DEBUG\_RENDER}
249   kDebug(kvs::dvi) << \textcolor{stringliteral}{"dviRenderer::set\_no\_char( cmd="} << cmd << \textcolor{stringliteral}{", ch ="} << ch << \textcolor{stringliteral}{" )"} ;
250 \textcolor{preprocessor}{#endif}
251 
252   \textcolor{keywordflow}{if} (currinf.\hyperlink{structdrawinf_a9fef874e701c25d0d781612bd3f615a5}{\_virtual}) \{
253     currinf.\hyperlink{structdrawinf_a4a6ec248b5b071099ddf9b5e4f0255e2}{fontp} = currinf.\hyperlink{structdrawinf_a9fef874e701c25d0d781612bd3f615a5}{\_virtual}->\hyperlink{classTeXFontDefinition_ab6e60134247487e543a17590bf5ed774}{first\_font};
254     \textcolor{keywordflow}{if} (currinf.\hyperlink{structdrawinf_a4a6ec248b5b071099ddf9b5e4f0255e2}{fontp} != NULL) \{
255       currinf.\hyperlink{structdrawinf_a365a1c9700846921b83cc69e0f2780c6}{set\_char\_p} = currinf.\hyperlink{structdrawinf_a4a6ec248b5b071099ddf9b5e4f0255e2}{fontp}->\hyperlink{classTeXFontDefinition_a2901636eeb7920b42396cdbdd3f93774}{set\_char\_p};
256       (this->*currinf.\hyperlink{structdrawinf_a365a1c9700846921b83cc69e0f2780c6}{set\_char\_p})(cmd, ch);
257       \textcolor{keywordflow}{return};
258     \}
259   \}
260 
261   errorMsg = i18n(\textcolor{stringliteral}{"The DVI code set a character of an unknown font."});
262   \textcolor{keywordflow}{return};
263 \}
\end{DoxyCode}
\hypertarget{classdviRenderer_a7a37517f903bc0446faadfbc4acff6e9}{\index{dvi\+Renderer@{dvi\+Renderer}!set\+\_\+vf\+\_\+char@{set\+\_\+vf\+\_\+char}}
\index{set\+\_\+vf\+\_\+char@{set\+\_\+vf\+\_\+char}!dvi\+Renderer@{dvi\+Renderer}}
\subsubsection[{set\+\_\+vf\+\_\+char}]{\setlength{\rightskip}{0pt plus 5cm}void dvi\+Renderer\+::set\+\_\+vf\+\_\+char (
\begin{DoxyParamCaption}
\item[{unsigned int}]{cmd, }
\item[{unsigned int}]{ch}
\end{DoxyParamCaption}
)}}\label{classdviRenderer_a7a37517f903bc0446faadfbc4acff6e9}


Definition at line 205 of file dvi\+Renderer\+\_\+draw.\+cpp.


\begin{DoxyCode}
206 \{
207 \textcolor{preprocessor}{#ifdef DEBUG\_RENDER}
208   kDebug(kvs::dvi) << \textcolor{stringliteral}{"dviRenderer::set\_vf\_char( cmd="} << cmd << \textcolor{stringliteral}{", ch="} << ch << \textcolor{stringliteral}{" )"};
209 \textcolor{preprocessor}{#endif}
210 
211   \textcolor{keyword}{static} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}   c;
212   \hyperlink{classmacro}{macro} *m = &currinf.\hyperlink{structdrawinf_a4a6ec248b5b071099ddf9b5e4f0255e2}{fontp}->\hyperlink{classTeXFontDefinition_a03a3d2e16fb85e0847243aec5671c724}{macrotable}[ch];
213   \textcolor{keywordflow}{if} (m->\hyperlink{classmacro_a56bb221e766cbb0240c9fb2cd443e2fe}{pos} == NULL) \{
214     kError(kvs::dvi) << \textcolor{stringliteral}{"Character "} << ch << \textcolor{stringliteral}{" not defined in font "} << currinf.
      \hyperlink{structdrawinf_a4a6ec248b5b071099ddf9b5e4f0255e2}{fontp}->\hyperlink{classTeXFontDefinition_a9f1c42427054d44e3a5f110230858c03}{fontname} << endl;
215     m->\hyperlink{classmacro_a56bb221e766cbb0240c9fb2cd443e2fe}{pos} = m->\hyperlink{classmacro_af735e3479e8a7088d4e84d918dbf73f7}{end} = &c;
216     \textcolor{keywordflow}{return};
217   \}
218 
219   \textcolor{keywordtype}{long} dvi\_h\_sav = currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a530699c241126f99b81cee11c2c1c4e4}{dvi\_h};
220 
221   \textcolor{keyword}{struct }\hyperlink{structdrawinf}{drawinf} oldinfo = currinf;
222   currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a41ba8896ec8b4ea0765b13c36fd9d18e}{w}         = 0;
223   currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a487a6e23e33001a732d8ed5c6f245f1d}{x}         = 0;
224   currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a383e2dc0b450b26619b86c9025c6ecae}{y}         = 0;
225   currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a563f47ad708ba389b24d1d89a63a7ec4}{z}         = 0;
226 
227   currinf.\hyperlink{structdrawinf_ac68bb33a017c34bf63f8dce71ad3ef17}{fonttable}         = &(currinf.\hyperlink{structdrawinf_a4a6ec248b5b071099ddf9b5e4f0255e2}{fontp}->\hyperlink{classTeXFontDefinition_a5cbb8fb4966c6f2488053eb7b4abbfed}{vf\_table});
228   currinf.\hyperlink{structdrawinf_a9fef874e701c25d0d781612bd3f615a5}{\_virtual}          = currinf.\hyperlink{structdrawinf_a4a6ec248b5b071099ddf9b5e4f0255e2}{fontp};
229   quint8 *command\_ptr\_sav  = \hyperlink{classbigEndianByteReader_aa8919f6fe116fd3230337675fd23abac}{command\_pointer};
230   quint8 *end\_ptr\_sav      = \hyperlink{classbigEndianByteReader_ace2790221530572c87c58f1f77924beb}{end\_pointer};
231   \hyperlink{classbigEndianByteReader_aa8919f6fe116fd3230337675fd23abac}{command\_pointer}           = m->\hyperlink{classmacro_a56bb221e766cbb0240c9fb2cd443e2fe}{pos};
232   \hyperlink{classbigEndianByteReader_ace2790221530572c87c58f1f77924beb}{end\_pointer}               = m->\hyperlink{classmacro_af735e3479e8a7088d4e84d918dbf73f7}{end};
233   \hyperlink{classdviRenderer_a590afd35c11e92d20fe0d8d98a84e2d2}{draw\_part}(currinf.\hyperlink{structdrawinf_a4a6ec248b5b071099ddf9b5e4f0255e2}{fontp}->\hyperlink{classTeXFontDefinition_a8514a1b74d448c5e9e9dafc8737938e9}{scaled\_size\_in\_DVI\_units}*(
      \hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->\hyperlink{classdvifile_a59a8b5b2c7b0ae199f4183b6062e6fb0}{getCmPerDVIunit}() * 1200.0 / 2.54)/16.0, \textcolor{keyword}{true});
234   \hyperlink{classbigEndianByteReader_aa8919f6fe116fd3230337675fd23abac}{command\_pointer}           = command\_ptr\_sav;
235   \hyperlink{classbigEndianByteReader_ace2790221530572c87c58f1f77924beb}{end\_pointer}               = end\_ptr\_sav;
236   currinf = oldinfo;
237 
238   \textcolor{keywordflow}{if} (cmd == \hyperlink{dvi_8h_ac2ccc1b9d8eb59ffdd81c958dcedf4b3}{PUT1})
239     currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a530699c241126f99b81cee11c2c1c4e4}{dvi\_h} = dvi\_h\_sav;
240   \textcolor{keywordflow}{else}
241     currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}.\hyperlink{structframedata_a530699c241126f99b81cee11c2c1c4e4}{dvi\_h} += (int)(currinf.\hyperlink{structdrawinf_a4a6ec248b5b071099ddf9b5e4f0255e2}{fontp}->
      \hyperlink{classTeXFontDefinition_a8514a1b74d448c5e9e9dafc8737938e9}{scaled\_size\_in\_DVI\_units} * \hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->
      \hyperlink{classdvifile_a59a8b5b2c7b0ae199f4183b6062e6fb0}{getCmPerDVIunit}() *
242                                 (1200.0 / 2.54)/16.0 * m->
      \hyperlink{classmacro_a863ec3097dc73a4d71bad3e73b0b2e62}{dvi\_advance\_in\_units\_of\_design\_size\_by\_2e20} + 0.5);
243 \}
\end{DoxyCode}
\hypertarget{classdviRenderer_a2fd78732f8a754a69680ba49a7c33dd0}{\index{dvi\+Renderer@{dvi\+Renderer}!set\+Event\+Loop@{set\+Event\+Loop}}
\index{set\+Event\+Loop@{set\+Event\+Loop}!dvi\+Renderer@{dvi\+Renderer}}
\subsubsection[{set\+Event\+Loop}]{\setlength{\rightskip}{0pt plus 5cm}void dvi\+Renderer\+::set\+Event\+Loop (
\begin{DoxyParamCaption}
\item[{Q\+Event\+Loop $\ast$}]{el}
\end{DoxyParamCaption}
)}}\label{classdviRenderer_a2fd78732f8a754a69680ba49a7c33dd0}


Definition at line 748 of file dvi\+Renderer.\+cpp.


\begin{DoxyCode}
749 \{
750   \textcolor{keywordflow}{if} (el == NULL)
751   \{
752      \textcolor{keyword}{delete} m\_eventLoop;
753      m\_eventLoop = NULL; 
754   \}
755   \textcolor{keywordflow}{else}
756      m\_eventLoop = el;
757 \}
\end{DoxyCode}
\hypertarget{classdviRenderer_a1e7b4808351b40f86051926f006506d9}{\index{dvi\+Renderer@{dvi\+Renderer}!set\+File@{set\+File}}
\index{set\+File@{set\+File}!dvi\+Renderer@{dvi\+Renderer}}
\subsubsection[{set\+File}]{\setlength{\rightskip}{0pt plus 5cm}bool dvi\+Renderer\+::set\+File (
\begin{DoxyParamCaption}
\item[{const Q\+String \&}]{fname, }
\item[{const K\+Url \&}]{base}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classdviRenderer_a1e7b4808351b40f86051926f006506d9}


Definition at line 418 of file dvi\+Renderer.\+cpp.


\begin{DoxyCode}
419 \{
420 \textcolor{preprocessor}{#ifdef DEBUG\_DVIRENDERER}
421   kDebug(kvs::dvi) << \textcolor{stringliteral}{"dviRenderer::setFile( fname='"} << fname << \textcolor{stringliteral}{"' )"}; \textcolor{comment}{//, ref='" << ref << "',
       sourceMarker=" << sourceMarker << " )";}
422 \textcolor{preprocessor}{#endif}
423 
424   \textcolor{comment}{//QMutexLocker lock(&mutex);}
425 
426   QFileInfo fi(fname);
427   QString   filename = fi.absoluteFilePath();
428 
429   \textcolor{comment}{// If fname is the empty string, then this means: "close". Delete}
430   \textcolor{comment}{// the dvifile and the pixmap.}
431   \textcolor{keywordflow}{if} (fname.isEmpty()) \{
432     \textcolor{comment}{// Delete DVI file}
433     \textcolor{keyword}{delete} \hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile};
434     \hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile} = 0;
435     \textcolor{keywordflow}{return} \textcolor{keyword}{true};
436   \}
437 
438 
439   \textcolor{comment}{// Make sure the file actually exists.}
440   \textcolor{keywordflow}{if} (!fi.exists() || fi.isDir()) \{
441     emit \hyperlink{classdviRenderer_ac3e658a3f6b99c724413fc1f5663f976}{error}(i18n(\textcolor{stringliteral}{"The specified file '%1' does not exist."}, filename), -1);
442     \textcolor{keywordflow}{return} \textcolor{keyword}{false};
443   \}
444 
445   QApplication::setOverrideCursor( Qt::WaitCursor );
446   \hyperlink{classdvifile}{dvifile} *dviFile\_new = \textcolor{keyword}{new} \hyperlink{classdvifile}{dvifile}(filename, &font\_pool);
447 
448   \textcolor{keywordflow}{if} ((\hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile} == 0) || (\hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->\hyperlink{classdvifile_a1c0fe420231e71f256b5db367b7e1178}{filename} != filename))
449     dviFile\_new->\hyperlink{classdvifile_a3121bb4c368ca1d30949cffb1df44d81}{sourceSpecialMarker} = \textcolor{keyword}{true};
450   \textcolor{keywordflow}{else}
451     dviFile\_new->\hyperlink{classdvifile_a3121bb4c368ca1d30949cffb1df44d81}{sourceSpecialMarker} = \textcolor{keyword}{false};
452 
453   \textcolor{keywordflow}{if} ((dviFile\_new->\hyperlink{classdvifile_a81f1d32c52377a7b1802072eb40998b7}{dvi\_Data}() == NULL)||(dviFile\_new->\hyperlink{classdvifile_a57d83b062272da49940bb34863d0b595}{errorMsg}.isEmpty() != \textcolor{keyword}{true})) \{
454     QApplication::restoreOverrideCursor();
455     \textcolor{keywordflow}{if} (dviFile\_new->\hyperlink{classdvifile_a57d83b062272da49940bb34863d0b595}{errorMsg}.isEmpty() != \textcolor{keyword}{true})
456       emit \hyperlink{classdviRenderer_ac3e658a3f6b99c724413fc1f5663f976}{error}(i18n(\textcolor{stringliteral}{"File corruption. %1"}, dviFile\_new->\hyperlink{classdvifile_a57d83b062272da49940bb34863d0b595}{errorMsg}), -1);
457     \textcolor{keyword}{delete} dviFile\_new;
458     \textcolor{keywordflow}{return} \textcolor{keyword}{false};
459   \}
460 
461   \textcolor{keyword}{delete} \hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile};
462   \hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile} = dviFile\_new;
463   numPages = \hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->\hyperlink{classdvifile_a71577dbd82a462b855abc96be3b369c5}{total\_pages};
464   \_isModified = \textcolor{keyword}{false};
465   baseURL = base;
466 
467   font\_pool.\hyperlink{classfontPool_aced1a76b1ac1ff2fd362a969c32b6367}{setExtraSearchPath}( fi.absolutePath() );
468   font\_pool.\hyperlink{classfontPool_a2460a35758f22529c57bf50e2ca94918}{setCMperDVIunit}( \hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->\hyperlink{classdvifile_a59a8b5b2c7b0ae199f4183b6062e6fb0}{getCmPerDVIunit}() );
469 
470   \textcolor{comment}{// Extract PostScript from the DVI file, and store the PostScript}
471   \textcolor{comment}{// specials in PostScriptDirectory, and the headers in the}
472   \textcolor{comment}{// PostScriptHeaderString.}
473   PS\_interface->\hyperlink{classghostscript__interface_ad304fbc79f41cc832e8fe4c01751fb46}{clear}();
474 
475   \textcolor{comment}{// If the DVI file comes from a remote URL (e.g. downloaded from a}
476   \textcolor{comment}{// web server), we limit the PostScript files that can be accessed}
477   \textcolor{comment}{// by this file to the download directory, in order to limit the}
478   \textcolor{comment}{// possibilities of a denial of service attack.}
479   QString includePath;
480   \textcolor{keywordflow}{if} (!baseURL.isLocalFile()) \{
481     includePath = filename;
482     includePath.truncate(includePath.lastIndexOf(\textcolor{charliteral}{'/'}));
483   \}
484   PS\_interface->\hyperlink{classghostscript__interface_a493c8915bc644ffa3abeb34e8bc79d65}{setIncludePath}(includePath);
485 
486   \textcolor{comment}{// We will also generate a list of hyperlink-anchors and source-file}
487   \textcolor{comment}{// anchors in the document. So declare the existing lists empty.}
488   \textcolor{comment}{//anchorList.clear();}
489   sourceHyperLinkAnchors.clear();
490   \textcolor{comment}{//bookmarks.clear();}
491   prebookmarks.clear();
492 
493   \textcolor{keywordflow}{if} (\hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->\hyperlink{classdvifile_aeafc97277647ad5077a774be71b3253a}{page\_offset}.isEmpty() == \textcolor{keyword}{true})
494     \textcolor{keywordflow}{return} \textcolor{keyword}{false};
495 
496   \textcolor{comment}{// Locate fonts.}
497   font\_pool.\hyperlink{classfontPool_a46fecbc3b61af504c2327a1df7d76fdd}{locateFonts}();
498 
499   \textcolor{comment}{// We should pre-scan the document now (to extract embedded,}
500   \textcolor{comment}{// PostScript, Hyperlinks, ets).}
501 
502   \textcolor{comment}{// PRESCAN STARTS HERE}
503 \textcolor{preprocessor}{#ifdef PERFORMANCE\_MEASUREMENT}
504   \textcolor{comment}{//kDebug(kvs::dvi) << "Time elapsed till prescan phase starts " << performanceTimer.elapsed() << "ms";}
505   \textcolor{comment}{//QTime preScanTimer;}
506   \textcolor{comment}{//preScanTimer.start();}
507 \textcolor{preprocessor}{#endif}
508   \hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->\hyperlink{classdvifile_abd8bd3fc29f66ce9220efbd0246d7fc0}{numberOfExternalPSFiles} = 0;
509   quint16 currPageSav = current\_page;
510   prebookmarks.clear();
511 
512   \textcolor{keywordflow}{for}(current\_page=0; current\_page < \hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->\hyperlink{classdvifile_a71577dbd82a462b855abc96be3b369c5}{total\_pages}; current\_page++) \{
513     PostScriptOutPutString = \textcolor{keyword}{new} QString();
514 
515     \textcolor{keywordflow}{if} (current\_page < dviFile->total\_pages) \{
516       \hyperlink{classbigEndianByteReader_aa8919f6fe116fd3230337675fd23abac}{command\_pointer} = \hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->\hyperlink{classdvifile_a81f1d32c52377a7b1802072eb40998b7}{dvi\_Data}() + 
      \hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->\hyperlink{classdvifile_aeafc97277647ad5077a774be71b3253a}{page\_offset}[int(current\_page)];
517       \hyperlink{classbigEndianByteReader_ace2790221530572c87c58f1f77924beb}{end\_pointer}     = \hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->\hyperlink{classdvifile_a81f1d32c52377a7b1802072eb40998b7}{dvi\_Data}() + \hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->
      \hyperlink{classdvifile_aeafc97277647ad5077a774be71b3253a}{page\_offset}[int(current\_page+1)];
518     \} \textcolor{keywordflow}{else}
519       \hyperlink{classbigEndianByteReader_aa8919f6fe116fd3230337675fd23abac}{command\_pointer} = \hyperlink{classbigEndianByteReader_ace2790221530572c87c58f1f77924beb}{end\_pointer} = 0;
520 
521     memset((\textcolor{keywordtype}{char} *) &currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}, 0, \textcolor{keyword}{sizeof}(currinf.\hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}));
522     currinf.\hyperlink{structdrawinf_ac68bb33a017c34bf63f8dce71ad3ef17}{fonttable} = &(\hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->\hyperlink{classdvifile_a05cb283609e6d1627940d14e8fc85b62}{tn\_table});
523     currinf.\hyperlink{structdrawinf_a9fef874e701c25d0d781612bd3f615a5}{\_virtual}  = NULL;
524     prescan(&dviRenderer::prescan\_parseSpecials);
525 
526     \textcolor{keywordflow}{if} (!PostScriptOutPutString->isEmpty())
527       PS\_interface->\hyperlink{classghostscript__interface_a5ae4823881dcb0f283d2ec705df38313}{setPostScript}(current\_page, *PostScriptOutPutString);
528     \textcolor{keyword}{delete} PostScriptOutPutString;
529   \}
530   PostScriptOutPutString = NULL;
531 
532 \textcolor{preprocessor}{#if 0}
533   \textcolor{comment}{// Generate the list of bookmarks}
534   bookmarks.clear();
535   Q3PtrStack<Bookmark> stack;
536   stack.setAutoDelete (\textcolor{keyword}{false});
537   QVector<PreBookmark>::iterator it;
538   \textcolor{keywordflow}{for}( it = prebookmarks.begin(); it != prebookmarks.end(); ++it ) \{
539     Bookmark *bmk = \textcolor{keyword}{new} Bookmark((*it).title, \hyperlink{classdviRenderer_a0f11aa712420cb39bf0909822a4e98bf}{findAnchor}((*it).anchorName));
540     \textcolor{keywordflow}{if} (stack.isEmpty())
541       bookmarks.append(bmk);
542     \textcolor{keywordflow}{else} \{
543       stack.top()->subordinateBookmarks.append(bmk);
544       stack.remove();
545     \}
546     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i=0; i<(*it).noOfChildren; i++)
547       stack.push(bmk);
548   \}
549   prebookmarks.clear();
550 \textcolor{preprocessor}{#endif}
551 
552 \textcolor{preprocessor}{#ifdef PERFORMANCE\_MEASUREMENT}
553   \textcolor{comment}{//kDebug(kvs::dvi) << "Time required for prescan phase: " << preScanTimer.restart() << "ms";}
554 \textcolor{preprocessor}{#endif}
555   current\_page = currPageSav;
556   \textcolor{comment}{// PRESCAN ENDS HERE}
557 
558   pageSizes.resize(0);
559   \textcolor{keywordflow}{if} (\hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->\hyperlink{classdvifile_a9fdbeee20bb39fcafe317925767b24ef}{suggestedPageSize} != 0) \{
560     \textcolor{comment}{// Fill the vector pageSizes with total\_pages identical entries}
561     pageSizes.fill(*(\hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->\hyperlink{classdvifile_a9fdbeee20bb39fcafe317925767b24ef}{suggestedPageSize}), 
      \hyperlink{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{dviFile}->\hyperlink{classdvifile_a71577dbd82a462b855abc96be3b369c5}{total\_pages});
562   \}
563   QApplication::restoreOverrideCursor();
564   \textcolor{keywordflow}{return} \textcolor{keyword}{true};
565 \}
\end{DoxyCode}
\hypertarget{classdviRenderer_af30d1266141994da13096f793e4fc25b}{\index{dvi\+Renderer@{dvi\+Renderer}!set\+Parent\+Widget@{set\+Parent\+Widget}}
\index{set\+Parent\+Widget@{set\+Parent\+Widget}!dvi\+Renderer@{dvi\+Renderer}}
\subsubsection[{set\+Parent\+Widget}]{\setlength{\rightskip}{0pt plus 5cm}void dvi\+Renderer\+::set\+Parent\+Widget (
\begin{DoxyParamCaption}
\item[{Q\+Widget $\ast$}]{parent}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}}\label{classdviRenderer_af30d1266141994da13096f793e4fc25b}


Definition at line 126 of file dvi\+Renderer.\+h.


\begin{DoxyCode}
126 \{parentWidget = parent;\}
\end{DoxyCode}
\hypertarget{classdviRenderer_a5e971ffab212a0c901e5b40d6466becc}{\index{dvi\+Renderer@{dvi\+Renderer}!show\+P\+S@{show\+P\+S}}
\index{show\+P\+S@{show\+P\+S}!dvi\+Renderer@{dvi\+Renderer}}
\subsubsection[{show\+P\+S}]{\setlength{\rightskip}{0pt plus 5cm}bool dvi\+Renderer\+::show\+P\+S (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}}\label{classdviRenderer_a5e971ffab212a0c901e5b40d6466becc}


Definition at line 110 of file dvi\+Renderer.\+h.


\begin{DoxyCode}
110 \{ \textcolor{keywordflow}{return} \_postscript; \}
\end{DoxyCode}
\hypertarget{classdviRenderer_a8d5430b14cdc4bdf6579402004f31317}{\index{dvi\+Renderer@{dvi\+Renderer}!size\+Of\+Page@{size\+Of\+Page}}
\index{size\+Of\+Page@{size\+Of\+Page}!dvi\+Renderer@{dvi\+Renderer}}
\subsubsection[{size\+Of\+Page}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Simple\+Page\+Size} dvi\+Renderer\+::size\+Of\+Page (
\begin{DoxyParamCaption}
\item[{const {\bf Page\+Number} \&}]{page}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [slot]}}}\label{classdviRenderer_a8d5430b14cdc4bdf6579402004f31317}


Definition at line 17 of file dvi\+Renderer\+\_\+dr.\+cpp.


\begin{DoxyCode}
18 \{
19 \textcolor{preprocessor}{#if !defined(QT\_NO\_THREAD)}
20   \textcolor{comment}{// Wait for all access to this DocumentRenderer to finish}
21   \textcolor{comment}{//QMutexLocker locker(&mutex);}
22 \textcolor{preprocessor}{#endif}
23 
24   \textcolor{keywordflow}{if} (!page.\hyperlink{classPageNumber_a701f1be28f2dd97b88d83c4abce18645}{isValid}())
25     \textcolor{keywordflow}{return} \hyperlink{classSimplePageSize}{SimplePageSize}();
26   \textcolor{keywordflow}{if} (page > \hyperlink{classdviRenderer_a694e70b7bf8453cab6f6922b4e9d66b7}{totalPages}())
27     \textcolor{keywordflow}{return} \hyperlink{classSimplePageSize}{SimplePageSize}();
28   \textcolor{keywordflow}{if} (page > pageSizes.size())
29     \textcolor{keywordflow}{return} \hyperlink{classSimplePageSize}{SimplePageSize}();
30 
31   \textcolor{keywordflow}{return} pageSizes[page-1];
32 \}
\end{DoxyCode}
\hypertarget{classdviRenderer_a0f0daa0b75c84c46bbdb3298979797d9}{\index{dvi\+Renderer@{dvi\+Renderer}!source\+Anchors@{source\+Anchors}}
\index{source\+Anchors@{source\+Anchors}!dvi\+Renderer@{dvi\+Renderer}}
\subsubsection[{source\+Anchors}]{\setlength{\rightskip}{0pt plus 5cm}const Q\+Vector$<${\bf D\+V\+I\+\_\+\+Source\+File\+Anchor}$>$\& dvi\+Renderer\+::source\+Anchors (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [slot]}}}\label{classdviRenderer_a0f0daa0b75c84c46bbdb3298979797d9}


Definition at line 174 of file dvi\+Renderer.\+h.


\begin{DoxyCode}
174 \{ \textcolor{keywordflow}{return} sourceHyperLinkAnchors; \}
\end{DoxyCode}
\hypertarget{classdviRenderer_a32c6c3b2d90c0c3b75977d6de1e8bc59}{\index{dvi\+Renderer@{dvi\+Renderer}!special@{special}}
\index{special@{special}!dvi\+Renderer@{dvi\+Renderer}}
\subsubsection[{special}]{\setlength{\rightskip}{0pt plus 5cm}void dvi\+Renderer\+::special (
\begin{DoxyParamCaption}
\item[{long}]{nbytes}
\end{DoxyParamCaption}
)}}\label{classdviRenderer_a32c6c3b2d90c0c3b75977d6de1e8bc59}
\hypertarget{classdviRenderer_a19678af601aef8476d304bf33cd40fcb}{\index{dvi\+Renderer@{dvi\+Renderer}!supports\+Text\+Search@{supports\+Text\+Search}}
\index{supports\+Text\+Search@{supports\+Text\+Search}!dvi\+Renderer@{dvi\+Renderer}}
\subsubsection[{supports\+Text\+Search}]{\setlength{\rightskip}{0pt plus 5cm}virtual bool dvi\+Renderer\+::supports\+Text\+Search (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}}\label{classdviRenderer_a19678af601aef8476d304bf33cd40fcb}


Definition at line 108 of file dvi\+Renderer.\+h.


\begin{DoxyCode}
108 \{\textcolor{keywordflow}{return} \textcolor{keyword}{true};\}
\end{DoxyCode}
\hypertarget{classdviRenderer_a694e70b7bf8453cab6f6922b4e9d66b7}{\index{dvi\+Renderer@{dvi\+Renderer}!total\+Pages@{total\+Pages}}
\index{total\+Pages@{total\+Pages}!dvi\+Renderer@{dvi\+Renderer}}
\subsubsection[{total\+Pages}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Page\+Number} dvi\+Renderer\+::total\+Pages (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classdviRenderer_a694e70b7bf8453cab6f6922b4e9d66b7}


Definition at line 44 of file dvi\+Renderer\+\_\+dr.\+cpp.


\begin{DoxyCode}
45 \{
46   \hyperlink{classPageNumber}{PageNumber} temp = numPages;
47   \textcolor{keywordflow}{return} temp;
48 \}
\end{DoxyCode}
\hypertarget{classdviRenderer_a07b2460ad76478aa074720e2fd4876bd}{\index{dvi\+Renderer@{dvi\+Renderer}!warning@{warning}}
\index{warning@{warning}!dvi\+Renderer@{dvi\+Renderer}}
\subsubsection[{warning}]{\setlength{\rightskip}{0pt plus 5cm}void dvi\+Renderer\+::warning (
\begin{DoxyParamCaption}
\item[{const Q\+String \&}]{message, }
\item[{int}]{duration}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [signal]}}}\label{classdviRenderer_a07b2460ad76478aa074720e2fd4876bd}


\subsection{Friends And Related Function Documentation}
\hypertarget{classdviRenderer_af00868f58c699150d1a8c3a8f4ac592c}{\index{dvi\+Renderer@{dvi\+Renderer}!D\+V\+I\+Export@{D\+V\+I\+Export}}
\index{D\+V\+I\+Export@{D\+V\+I\+Export}!dvi\+Renderer@{dvi\+Renderer}}
\subsubsection[{D\+V\+I\+Export}]{\setlength{\rightskip}{0pt plus 5cm}friend class {\bf D\+V\+I\+Export}\hspace{0.3cm}{\ttfamily [friend]}}}\label{classdviRenderer_af00868f58c699150d1a8c3a8f4ac592c}


Definition at line 184 of file dvi\+Renderer.\+h.

\hypertarget{classdviRenderer_a741d5e51c874df4d150f2c4b35491790}{\index{dvi\+Renderer@{dvi\+Renderer}!D\+V\+I\+Export\+To\+P\+S@{D\+V\+I\+Export\+To\+P\+S}}
\index{D\+V\+I\+Export\+To\+P\+S@{D\+V\+I\+Export\+To\+P\+S}!dvi\+Renderer@{dvi\+Renderer}}
\subsubsection[{D\+V\+I\+Export\+To\+P\+S}]{\setlength{\rightskip}{0pt plus 5cm}friend class {\bf D\+V\+I\+Export\+To\+P\+S}\hspace{0.3cm}{\ttfamily [friend]}}}\label{classdviRenderer_a741d5e51c874df4d150f2c4b35491790}
This method shows a dialog that tells the user that source information is present, and gives the opportunity to open the manual and learn more about forward and inverse search 

Definition at line 183 of file dvi\+Renderer.\+h.



\subsection{Member Data Documentation}
\hypertarget{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}{\index{dvi\+Renderer@{dvi\+Renderer}!dvi\+File@{dvi\+File}}
\index{dvi\+File@{dvi\+File}!dvi\+Renderer@{dvi\+Renderer}}
\subsubsection[{dvi\+File}]{\setlength{\rightskip}{0pt plus 5cm}{\bf dvifile}$\ast$ dvi\+Renderer\+::dvi\+File}}\label{classdviRenderer_a67ded13a1a8da343aa0ee921ed96d4c2}


Definition at line 100 of file dvi\+Renderer.\+h.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
generators/dvi/\hyperlink{dviRenderer_8h}{dvi\+Renderer.\+h}\item 
generators/dvi/\hyperlink{dviRenderer_8cpp}{dvi\+Renderer.\+cpp}\item 
generators/dvi/\hyperlink{dviRenderer__dr_8cpp}{dvi\+Renderer\+\_\+dr.\+cpp}\item 
generators/dvi/\hyperlink{dviRenderer__draw_8cpp}{dvi\+Renderer\+\_\+draw.\+cpp}\item 
generators/dvi/\hyperlink{dviRenderer__prescan_8cpp}{dvi\+Renderer\+\_\+prescan.\+cpp}\item 
generators/dvi/\hyperlink{special_8cpp}{special.\+cpp}\end{DoxyCompactItemize}
