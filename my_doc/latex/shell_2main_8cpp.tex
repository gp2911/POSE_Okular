\hypertarget{shell_2main_8cpp}{\section{shell/main.cpp File Reference}
\label{shell_2main_8cpp}\index{shell/main.\+cpp@{shell/main.\+cpp}}
}
{\ttfamily \#include \char`\"{}shell.\+h\char`\"{}}\\*
{\ttfamily \#include $<$kapplication.\+h$>$}\\*
{\ttfamily \#include $<$kcmdlineargs.\+h$>$}\\*
{\ttfamily \#include $<$klocale.\+h$>$}\\*
{\ttfamily \#include $<$Qt\+D\+Bus/qdbusinterface.\+h$>$}\\*
{\ttfamily \#include $<$Q\+Text\+Stream$>$}\\*
{\ttfamily \#include \char`\"{}aboutdata.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}shellutils.\+h\char`\"{}}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{shell_2main_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}{main} (int argc, char $\ast$$\ast$argv)
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\hypertarget{shell_2main_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}{\index{shell/main.\+cpp@{shell/main.\+cpp}!main@{main}}
\index{main@{main}!shell/main.\+cpp@{shell/main.\+cpp}}
\subsubsection[{main}]{\setlength{\rightskip}{0pt plus 5cm}int main (
\begin{DoxyParamCaption}
\item[{int}]{argc, }
\item[{char $\ast$$\ast$}]{argv}
\end{DoxyParamCaption}
)}}\label{shell_2main_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}


Definition at line 47 of file main.\+cpp.


\begin{DoxyCode}
48 \{
49     KAboutData about = \hyperlink{aboutdata_8h_a2f42c04ec50c4ab644b0dfcf88e91ea4}{okularAboutData}( \textcolor{stringliteral}{"okular"}, I18N\_NOOP( \textcolor{stringliteral}{"Okular"} ) );
50 
51     KCmdLineArgs::init(argc, argv, &about);
52 
53     KCmdLineOptions options;
54     options.add(\textcolor{stringliteral}{"p"});
55     options.add(\textcolor{stringliteral}{"page <number>"}, ki18n(\textcolor{stringliteral}{"Page of the document to be shown"}));
56     options.add(\textcolor{stringliteral}{"presentation"}, ki18n(\textcolor{stringliteral}{"Start the document in presentation mode"}));
57     options.add(\textcolor{stringliteral}{"print"}, ki18n(\textcolor{stringliteral}{"Start with print dialog"}));
58     options.add(\textcolor{stringliteral}{"unique"}, ki18n(\textcolor{stringliteral}{"\(\backslash\)"Unique instance\(\backslash\)" control"}));
59     options.add(\textcolor{stringliteral}{"noraise"}, ki18n(\textcolor{stringliteral}{"Not raise window"}));
60     options.add(\textcolor{stringliteral}{"+[URL]"}, ki18n(\textcolor{stringliteral}{"Document to open. Specify '-' to read from stdin."}));
61     KCmdLineArgs::addCmdLineOptions( options );
62     KApplication app;
63 
64     \textcolor{comment}{// see if we are starting with session management}
65     \textcolor{keywordflow}{if} (app.isSessionRestored())
66     \{
67         RESTORE(\hyperlink{classShell}{Shell});
68     \} \textcolor{keywordflow}{else} \{
69         \textcolor{comment}{// no session.. just start up normally}
70         KCmdLineArgs* args = KCmdLineArgs::parsedArgs();
71 
72         \textcolor{comment}{// try to attach the "unique" session: if we succeed, do nothing more and exit}
73         \textcolor{keywordflow}{if} (attachUniqueInstance(args))
74         \{
75             args->clear();
76             \textcolor{keywordflow}{return} 0;
77         \}
78 
79         \textcolor{keywordflow}{if} (args->count() == 0)
80         \{
81             \hyperlink{classShell}{Shell}* widget = \textcolor{keyword}{new} \hyperlink{classShell}{Shell}(args);
82             widget->show();
83         \}
84         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (args->isSet( \textcolor{stringliteral}{"unique"} ) && args->count() > 1)
85         \{
86             QTextStream stream(stderr);
87             stream << i18n( \textcolor{stringliteral}{"Error: Can't open more than one document with the --unique switch"} ) << endl;
88             \textcolor{keywordflow}{return} -1;
89         \}
90         \textcolor{keywordflow}{else}
91         \{
92             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < args->count(); ++i)
93             \{
94                 \hyperlink{classShell}{Shell}* widget = \textcolor{keyword}{new} \hyperlink{classShell}{Shell}(args, i);
95                 widget->show();
96             \}
97         \}
98     \}
99 
100     \textcolor{keywordflow}{return} app.exec();
101 \}
\end{DoxyCode}
