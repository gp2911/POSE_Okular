\hypertarget{classPresentationWidget}{\section{Presentation\+Widget Class Reference}
\label{classPresentationWidget}\index{Presentation\+Widget@{Presentation\+Widget}}
}


A widget that shows pages as fullscreen slides (with transitions fx).  




{\ttfamily \#include $<$presentationwidget.\+h$>$}

Inheritance diagram for Presentation\+Widget\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classPresentationWidget}
\end{center}
\end{figure}
\subsection*{Public Slots}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classPresentationWidget_a4488b5ed4958497c9c07e9e5478c4b13}{slot\+Find} ()
\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classPresentationWidget_acf3c7673d921c8a12a9e1f2ba325bf56}{Presentation\+Widget} (Q\+Widget $\ast$parent, \hyperlink{classOkular_1_1Document}{Okular\+::\+Document} $\ast$doc, K\+Action\+Collection $\ast$collection)
\item 
\hyperlink{classPresentationWidget_acfb166d318c2f302155db66027ed6542}{$\sim$\+Presentation\+Widget} ()
\item 
void \hyperlink{classPresentationWidget_a3bd0def67af18fd092301adfdb9f98a7}{notify\+Setup} (const Q\+Vector$<$ \hyperlink{classOkular_1_1Page}{Okular\+::\+Page} $\ast$ $>$ \&pages, int setup\+Flags)
\item 
void \hyperlink{classPresentationWidget_ac52c978b325991707aebbc0f99ffff27}{notify\+Viewport\+Changed} (bool smooth\+Move)
\item 
void \hyperlink{classPresentationWidget_a40b4d1dc7949527832d772699cbbf1a0}{notify\+Page\+Changed} (int page\+Number, int changed\+Flags)
\item 
bool \hyperlink{classPresentationWidget_a7e4a68278443b8b2be83234cd28afbd4}{can\+Unload\+Pixmap} (int page\+Number) const 
\item 
void \hyperlink{classPresentationWidget_a54be819b15799a923345a8dc7f4b0333}{notify\+Current\+Page\+Changed} (int previous, int current)
\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
bool \hyperlink{classPresentationWidget_ac4052134a73c3a957fbac11837c81714}{event} (Q\+Event $\ast$e)
\item 
void \hyperlink{classPresentationWidget_a2fce466227974c5258fc5123dd875114}{key\+Press\+Event} (Q\+Key\+Event $\ast$e)
\item 
void \hyperlink{classPresentationWidget_a70da82bbab9dbf243bb8e4637537f20e}{wheel\+Event} (Q\+Wheel\+Event $\ast$e)
\item 
void \hyperlink{classPresentationWidget_a502d9c8e44488ae4c78fef4ab4e6da4c}{mouse\+Press\+Event} (Q\+Mouse\+Event $\ast$e)
\item 
void \hyperlink{classPresentationWidget_a7f761d8aec6ec9c55fdf466c5c21bb6b}{mouse\+Release\+Event} (Q\+Mouse\+Event $\ast$e)
\item 
void \hyperlink{classPresentationWidget_a7f059f2489e5482ce1e69759d50b5200}{mouse\+Move\+Event} (Q\+Mouse\+Event $\ast$e)
\item 
void \hyperlink{classPresentationWidget_a95dc92b582c27c1cd979878f1805f179}{paint\+Event} (Q\+Paint\+Event $\ast$e)
\item 
void \hyperlink{classPresentationWidget_a710b035d00f0b81e835a31d01782c6ff}{resize\+Event} (Q\+Resize\+Event $\ast$e)
\item 
void \hyperlink{classPresentationWidget_a6298d50d07e540d555f6b8da8c8054ba}{leave\+Event} (Q\+Event $\ast$e)
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
A widget that shows pages as fullscreen slides (with transitions fx). 

This is a fullscreen widget that displays 

Definition at line 44 of file presentationwidget.\+h.



\subsection{Constructor \& Destructor Documentation}
\hypertarget{classPresentationWidget_acf3c7673d921c8a12a9e1f2ba325bf56}{\index{Presentation\+Widget@{Presentation\+Widget}!Presentation\+Widget@{Presentation\+Widget}}
\index{Presentation\+Widget@{Presentation\+Widget}!Presentation\+Widget@{Presentation\+Widget}}
\subsubsection[{Presentation\+Widget}]{\setlength{\rightskip}{0pt plus 5cm}Presentation\+Widget\+::\+Presentation\+Widget (
\begin{DoxyParamCaption}
\item[{Q\+Widget $\ast$}]{parent, }
\item[{{\bf Okular\+::\+Document} $\ast$}]{doc, }
\item[{K\+Action\+Collection $\ast$}]{collection}
\end{DoxyParamCaption}
)}}\label{classPresentationWidget_acf3c7673d921c8a12a9e1f2ba325bf56}


Definition at line 133 of file presentationwidget.\+cpp.


\begin{DoxyCode}
134     : QWidget( 0 \textcolor{comment}{/* must be null, to have an independent widget */}, Qt::FramelessWindowHint ),
135     m\_pressedLink( 0 ), m\_handCursor( \textcolor{keyword}{false} ), m\_drawingEngine( 0 ),
136     m\_parentWidget( parent ),
137     m\_document( doc ), m\_frameIndex( -1 ), m\_topBar( 0 ), m\_pagesEdit( 0 ), m\_searchBar( 0 ),
138     m\_ac( collection ), m\_screenSelect( 0 ), m\_isSetup( \textcolor{keyword}{false} ), m\_blockNotifications( \textcolor{keyword}{false} ), 
      m\_inBlackScreenMode( \textcolor{keyword}{false} ),
139     m\_showSummaryView( \hyperlink{classOkular_1_1Settings_ac06ca89e428ad1ee40753da80a1f35e5}{Okular::Settings::slidesShowSummary}() ),
140     m\_advanceSlides( \hyperlink{classOkular_1_1SettingsCore_ae778283eb0b083eb09f97f81545f683d}{Okular::SettingsCore::slidesAdvance}() )
141 \{
142     Q\_UNUSED( parent )
143     setAttribute( Qt::WA\_DeleteOnClose );
144     setAttribute( Qt::WA\_OpaquePaintEvent );
145     setObjectName( QLatin1String( "presentationWidget" ) );
146     QString caption = doc->metaData( "DocumentTitle" ).\hyperlink{namespaceQTest_a861302f3f44f1ae8461d2752a3e3813c}{toString}();
147     if ( caption.trimmed().isEmpty() )
148         caption = doc->currentDocument().fileName();
149     caption = i18nc( "[document title/filename] – Presentation", "%1 – Presentation", caption );
150     setWindowTitle( KDialog::makeStandardCaption( caption ) );
151 
152     m\_width = -1;
153     m\_screen = -2;
154 
155     \textcolor{comment}{// create top toolbar}
156     m\_topBar = new \hyperlink{classPresentationToolBar}{PresentationToolBar}( this );
157     m\_topBar->setObjectName( QLatin1String( "presentationBar" ) );
158     m\_topBar->setIconSize( QSize( 32, 32 ) );
159     m\_topBar->setMovable( false );
160     m\_topBar->layout()->setMargin(0);
161     m\_topBar->addAction( KIcon( layoutDirection() == Qt::RightToLeft ? "go-next" : "go-previous" ), i18n( "
      Previous Page" ), this, SLOT(slotPrevPage()) );
162     m\_pagesEdit = new KLineEdit( m\_topBar );
163     QSizePolicy sp = m\_pagesEdit->sizePolicy();
164     sp.setHorizontalPolicy( QSizePolicy::Minimum );
165     m\_pagesEdit->setSizePolicy( sp );
166     QFontMetrics fm( m\_pagesEdit->font() );
167     QStyleOptionFrame option;
168     option.initFrom( m\_pagesEdit );
169     m\_pagesEdit->setMaximumWidth( fm.width( QString::number( m\_document->pages() ) ) + 2 * style()->
      pixelMetric( QStyle::PM\_DefaultFrameWidth, &option, m\_pagesEdit ) + 4 ); \textcolor{comment}{// the 4 comes from 2*horizontalMargin,
       horizontalMargin being a define in qlineedit.cpp}
170     QIntValidator *validator = new QIntValidator( 1, m\_document->pages(), m\_pagesEdit );
171     m\_pagesEdit->setValidator( validator );
172     m\_topBar->addWidget( m\_pagesEdit );
173     QLabel *pagesLabel = new QLabel( m\_topBar );
174     pagesLabel->setText( QLatin1String( " / " ) + QString::number( m\_document->pages() ) + QLatin1String( "
       " ) );
175     m\_topBar->addWidget( pagesLabel );
176     connect( m\_pagesEdit, SIGNAL(returnPressed()), this, SLOT(slotPageChanged()) );
177     m\_topBar->addAction( KIcon( layoutDirection() == Qt::RightToLeft ? "go-previous" : "go-next" ), i18n( "
      Next Page" ), this, SLOT(slotNextPage()) );
178     m\_topBar->addSeparator();
179     QAction *playPauseAct = collection->action( "presentation\_play\_pause" );
180     playPauseAct->setEnabled( true );
181     connect( playPauseAct, SIGNAL(triggered()), SLOT(slotTogglePlayPause()) );
182     m\_topBar->addAction( playPauseAct );
183     setPlayPauseIcon();
184     addAction( playPauseAct );
185     m\_topBar->addSeparator();
186     QAction *drawingAct = collection->action( "presentation\_drawing\_mode" );
187     connect( drawingAct, SIGNAL(toggled(\textcolor{keywordtype}{bool})), SLOT(togglePencilMode(\textcolor{keywordtype}{bool})) );
188     drawingAct->setEnabled( true );
189     m\_topBar->addAction( drawingAct );
190     addAction( drawingAct );
191     QAction *eraseDrawingAct = collection->action( "presentation\_erase\_drawings" );
192     eraseDrawingAct->setEnabled( true );
193     connect( eraseDrawingAct, SIGNAL(triggered()), SLOT(clearDrawings()) );
194     m\_topBar->addAction( eraseDrawingAct );
195     addAction( eraseDrawingAct );
196     QDesktopWidget *desktop = QApplication::desktop();
197     if ( desktop->numScreens() > 1 )
198     \{
199         m\_topBar->addSeparator();
200         m\_screenSelect = \textcolor{keyword}{new} KSelectAction( KIcon( \textcolor{stringliteral}{"video-display"} ), i18n( \textcolor{stringliteral}{"Switch Screen"} ), m\_topBar );
201         m\_screenSelect->setToolBarMode( KSelectAction::MenuMode );
202         m\_screenSelect->setToolButtonPopupMode( QToolButton::InstantPopup );
203         m\_topBar->addAction( m\_screenSelect );
204         \textcolor{keyword}{const} \textcolor{keywordtype}{int} screenCount = desktop->numScreens();
205         \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{int} i = 0; i < screenCount; ++i )
206         \{
207             QAction *act = m\_screenSelect->addAction( i18nc( \textcolor{stringliteral}{"%1 is the screen number (0, 1, ...)"}, \textcolor{stringliteral}{"Screen
       %1"}, i ) );
208             act->setData( qVariantFromValue( i ) );
209         \}
210     \}
211     QWidget *spacer = \textcolor{keyword}{new} QWidget( m\_topBar );
212     spacer->setSizePolicy( QSizePolicy::Expanding, QSizePolicy::MinimumExpanding );
213     m\_topBar->addWidget( spacer );
214     m\_topBar->addAction( KIcon( \textcolor{stringliteral}{"application-exit"} ), i18n( \textcolor{stringliteral}{"Exit Presentation Mode"} ), \textcolor{keyword}{this}, SLOT(close())
       );
215     m\_topBar->setAutoFillBackground( \textcolor{keyword}{true} );
216     showTopBar( \textcolor{keyword}{false} );
217     \textcolor{comment}{// change topbar background color}
218     QPalette p = m\_topBar->palette();
219     p.setColor( QPalette::Active, QPalette::Button, Qt::gray );
220     p.setColor( QPalette::Active, QPalette::Background, Qt::darkGray );
221     m\_topBar->setPalette( p );
222 
223     \textcolor{comment}{// misc stuff}
224     setMouseTracking( \textcolor{keyword}{true} );
225     setContextMenuPolicy( Qt::PreventContextMenu );
226     m\_transitionTimer = \textcolor{keyword}{new} QTimer( \textcolor{keyword}{this} );
227     m\_transitionTimer->setSingleShot( \textcolor{keyword}{true} );
228     connect( m\_transitionTimer, SIGNAL(timeout()), \textcolor{keyword}{this}, SLOT(slotTransitionStep()) );
229     m\_overlayHideTimer = \textcolor{keyword}{new} QTimer( \textcolor{keyword}{this} );
230     m\_overlayHideTimer->setSingleShot( \textcolor{keyword}{true} );
231     connect( m\_overlayHideTimer, SIGNAL(timeout()), \textcolor{keyword}{this}, SLOT(slotHideOverlay()) );
232     m\_nextPageTimer = \textcolor{keyword}{new} QTimer( \textcolor{keyword}{this} ); 
233     m\_nextPageTimer->setSingleShot( \textcolor{keyword}{true} );
234     connect( m\_nextPageTimer, SIGNAL(timeout()), \textcolor{keyword}{this}, SLOT(slotNextPage()) ); 
235 
236     connect( m\_document, SIGNAL(processMovieAction(\textcolor{keyword}{const} \hyperlink{classOkular_1_1MovieAction}{Okular::MovieAction}*)), \textcolor{keyword}{this}, 
      SLOT(slotProcessMovieAction(\textcolor{keyword}{const} \hyperlink{classOkular_1_1MovieAction}{Okular::MovieAction}*)) );
237     connect( m\_document, SIGNAL(processRenditionAction(\textcolor{keyword}{const} 
      \hyperlink{classOkular_1_1RenditionAction}{Okular::RenditionAction}*)), \textcolor{keyword}{this}, SLOT(slotProcessRenditionAction(\textcolor{keyword}{const} 
      \hyperlink{classOkular_1_1RenditionAction}{Okular::RenditionAction}*)) );
238 
239     \textcolor{comment}{// handle cursor appearance as specified in configuration}
240     \textcolor{keywordflow}{if} ( \hyperlink{classOkular_1_1Settings_a278364f63d8eb7e0bd3a6761d310993f}{Okular::Settings::slidesCursor}() == 
      \hyperlink{classOkular_1_1Settings_1_1EnumSlidesCursor_a1e2cb729c98ff2274a74500aa64abbc4ad3624e5ed1cac74d2009cd6a67491ab6}{Okular::Settings::EnumSlidesCursor::HiddenDelay} )
241     \{
242         KCursor::setAutoHideCursor( \textcolor{keyword}{this}, \textcolor{keyword}{true} );
243         KCursor::setHideCursorDelay( 3000 );
244     \}
245     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( \hyperlink{classOkular_1_1Settings_a278364f63d8eb7e0bd3a6761d310993f}{Okular::Settings::slidesCursor}() == 
      \hyperlink{classOkular_1_1Settings_1_1EnumSlidesCursor_a1e2cb729c98ff2274a74500aa64abbc4a117b68ab1af66e116ddf4f78a0e05819}{Okular::Settings::EnumSlidesCursor::Hidden} )
246     \{
247         setCursor( QCursor( Qt::BlankCursor ) );
248     \}
249 
250     setupActions();
251 
252     \textcolor{comment}{// inhibit power management}
253     inhibitPowerManagement();
254 
255     show();
256 
257     QTimer::singleShot( 0, \textcolor{keyword}{this}, SLOT(slotDelayedEvents()) );
258 
259     \textcolor{comment}{// setFocus() so KCursor::setAutoHideCursor() goes into effect if it's enabled}
260     setFocus( Qt::OtherFocusReason );
261 \}
\end{DoxyCode}
\hypertarget{classPresentationWidget_acfb166d318c2f302155db66027ed6542}{\index{Presentation\+Widget@{Presentation\+Widget}!````~Presentation\+Widget@{$\sim$\+Presentation\+Widget}}
\index{````~Presentation\+Widget@{$\sim$\+Presentation\+Widget}!Presentation\+Widget@{Presentation\+Widget}}
\subsubsection[{$\sim$\+Presentation\+Widget}]{\setlength{\rightskip}{0pt plus 5cm}Presentation\+Widget\+::$\sim$\+Presentation\+Widget (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classPresentationWidget_acfb166d318c2f302155db66027ed6542}


Definition at line 263 of file presentationwidget.\+cpp.


\begin{DoxyCode}
264 \{
265     \textcolor{comment}{// allow power management saver again}
266     allowPowerManagement();
267 
268     \textcolor{comment}{// stop the audio playbacks}
269     \hyperlink{classOkular_1_1AudioPlayer_a5bbc067e81b46451098a2a0becf23e67}{Okular::AudioPlayer::instance}()->\hyperlink{classOkular_1_1AudioPlayer_a48730f5eb7dbc0551679c367e0ba9234}{stopPlaybacks}();
270 
271     \textcolor{comment}{// remove our highlights}
272     \textcolor{keywordflow}{if} ( m\_searchBar )
273     \{
274         m\_document->\hyperlink{classOkular_1_1Document_a9a6bfbdfcf7a07fcf3b2624fdea81126}{resetSearch}( \hyperlink{core_2document_8h_acd6eb601c5a13e8378441bedbfc608c2}{PRESENTATION\_SEARCH\_ID} );
275     \}
276 
277     \textcolor{comment}{// remove this widget from document observer}
278     m\_document->\hyperlink{classOkular_1_1Document_a2d704dea2ab28c846e58443ac38841f2}{removeObserver}( \textcolor{keyword}{this} );
279 
280     QAction *drawingAct = m\_ac->action( \textcolor{stringliteral}{"presentation\_drawing\_mode"} );
281     disconnect( drawingAct, 0, \textcolor{keyword}{this}, 0 );
282     drawingAct->setChecked( \textcolor{keyword}{false} );
283     drawingAct->setEnabled( \textcolor{keyword}{false} );
284 
285     QAction *eraseDrawingAct = m\_ac->action( \textcolor{stringliteral}{"presentation\_erase\_drawings"} );
286     eraseDrawingAct->setEnabled( \textcolor{keyword}{false} );
287 
288     QAction *playPauseAction = m\_ac->action( \textcolor{stringliteral}{"presentation\_play\_pause"} );
289     playPauseAction->setEnabled( \textcolor{keyword}{false} );
290 
291     QAction *blackScreenAct = m\_ac->action( \textcolor{stringliteral}{"switch\_blackscreen\_mode"} );
292     blackScreenAct->setChecked( \textcolor{keyword}{false} );
293     blackScreenAct->setEnabled( \textcolor{keyword}{false} );
294     \textcolor{keyword}{delete} m\_drawingEngine;
295 
296     \textcolor{comment}{// delete frames}
297     QVector< PresentationFrame * >::iterator fIt = m\_frames.begin(), fEnd = m\_frames.end();
298     \textcolor{keywordflow}{for} ( ; fIt != fEnd; ++fIt )
299         \textcolor{keyword}{delete} *fIt;
300 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\hypertarget{classPresentationWidget_a7e4a68278443b8b2be83234cd28afbd4}{\index{Presentation\+Widget@{Presentation\+Widget}!can\+Unload\+Pixmap@{can\+Unload\+Pixmap}}
\index{can\+Unload\+Pixmap@{can\+Unload\+Pixmap}!Presentation\+Widget@{Presentation\+Widget}}
\subsubsection[{can\+Unload\+Pixmap}]{\setlength{\rightskip}{0pt plus 5cm}bool Presentation\+Widget\+::can\+Unload\+Pixmap (
\begin{DoxyParamCaption}
\item[{int}]{page}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classPresentationWidget_a7e4a68278443b8b2be83234cd28afbd4}
Returns whether the observer agrees that all pixmaps for the given {\ttfamily page} can be unloaded to improve memory usage.

Returns true per default. 

Reimplemented from \hyperlink{classOkular_1_1DocumentObserver_a6b294d9207a1546eb9fcb7b878d94f20}{Okular\+::\+Document\+Observer}.



Definition at line 473 of file presentationwidget.\+cpp.


\begin{DoxyCode}
474 \{
475     \textcolor{keywordflow}{if} ( \hyperlink{classOkular_1_1SettingsCore_a07d75a8b7db6da9213663287a87e3226}{Okular::SettingsCore::memoryLevel}() == 
      \hyperlink{classOkular_1_1SettingsCore_1_1EnumMemoryLevel_a6dcad4c36c335a5cab78f24dd88090b4aa61e4f07eed0bf070a41fb0998e8c3b5}{Okular::SettingsCore::EnumMemoryLevel::Low} ||
476          \hyperlink{classOkular_1_1SettingsCore_a07d75a8b7db6da9213663287a87e3226}{Okular::SettingsCore::memoryLevel}() == 
      \hyperlink{classOkular_1_1SettingsCore_1_1EnumMemoryLevel_a6dcad4c36c335a5cab78f24dd88090b4aab69bfc6de34e8bf9634a7586486296a}{Okular::SettingsCore::EnumMemoryLevel::Normal} )
477     \{
478         \textcolor{comment}{// can unload all pixmaps except for the currently visible one}
479         \textcolor{keywordflow}{return} pageNumber != m\_frameIndex;
480     \}
481     \textcolor{keywordflow}{else}
482     \{
483         \textcolor{comment}{// can unload all pixmaps except for the currently visible one, previous and next}
484         \textcolor{keywordflow}{return} qAbs(pageNumber - m\_frameIndex) <= 1;
485     \}
486 \}
\end{DoxyCode}
\hypertarget{classPresentationWidget_ac4052134a73c3a957fbac11837c81714}{\index{Presentation\+Widget@{Presentation\+Widget}!event@{event}}
\index{event@{event}!Presentation\+Widget@{Presentation\+Widget}}
\subsubsection[{event}]{\setlength{\rightskip}{0pt plus 5cm}bool Presentation\+Widget\+::event (
\begin{DoxyParamCaption}
\item[{Q\+Event $\ast$}]{e}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{classPresentationWidget_ac4052134a73c3a957fbac11837c81714}


Definition at line 519 of file presentationwidget.\+cpp.


\begin{DoxyCode}
520 \{
521     \textcolor{keywordflow}{if} ( e->type() == QEvent::ToolTip )
522     \{
523         QHelpEvent * he = (QHelpEvent*)e;
524 
525         QRect r;
526         \textcolor{keyword}{const} \hyperlink{classOkular_1_1Action}{Okular::Action} * link = getLink( he->x(), he->y(), &r );
527 
528         \textcolor{keywordflow}{if} ( link )
529         \{
530             QString tip = link->\hyperlink{classOkular_1_1Action_a359c33818281df712da697c84975952f}{actionTip}();
531             \textcolor{keywordflow}{if} ( !tip.isEmpty() )
532                 QToolTip::showText( he->globalPos(), tip, \textcolor{keyword}{this}, r );
533         \}
534         e->accept();
535         \textcolor{keywordflow}{return} \textcolor{keyword}{true};
536     \}
537     \textcolor{keywordflow}{else}
538         \textcolor{comment}{// do not stop the event}
539         \textcolor{keywordflow}{return} QWidget::event( e );
540 \}
\end{DoxyCode}
\hypertarget{classPresentationWidget_a2fce466227974c5258fc5123dd875114}{\index{Presentation\+Widget@{Presentation\+Widget}!key\+Press\+Event@{key\+Press\+Event}}
\index{key\+Press\+Event@{key\+Press\+Event}!Presentation\+Widget@{Presentation\+Widget}}
\subsubsection[{key\+Press\+Event}]{\setlength{\rightskip}{0pt plus 5cm}void Presentation\+Widget\+::key\+Press\+Event (
\begin{DoxyParamCaption}
\item[{Q\+Key\+Event $\ast$}]{e}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{classPresentationWidget_a2fce466227974c5258fc5123dd875114}


Definition at line 542 of file presentationwidget.\+cpp.


\begin{DoxyCode}
543 \{
544     \textcolor{keywordflow}{if} ( !m\_isSetup )
545         \textcolor{keywordflow}{return};
546 
547     \textcolor{keywordflow}{switch} ( e->key() )
548     \{
549         \textcolor{keywordflow}{case} Qt::Key\_Left:
550         \textcolor{keywordflow}{case} Qt::Key\_Backspace:
551         \textcolor{keywordflow}{case} Qt::Key\_PageUp:
552         \textcolor{keywordflow}{case} Qt::Key\_Up:
553             slotPrevPage();
554             \textcolor{keywordflow}{break};
555         \textcolor{keywordflow}{case} Qt::Key\_Right:
556         \textcolor{keywordflow}{case} Qt::Key\_Space:
557         \textcolor{keywordflow}{case} Qt::Key\_PageDown:
558         \textcolor{keywordflow}{case} Qt::Key\_Down:
559             slotNextPage();
560             \textcolor{keywordflow}{break};
561         \textcolor{keywordflow}{case} Qt::Key\_Home:
562             slotFirstPage();
563             \textcolor{keywordflow}{break};
564         \textcolor{keywordflow}{case} Qt::Key\_End:
565             slotLastPage();
566             \textcolor{keywordflow}{break};
567         \textcolor{keywordflow}{case} Qt::Key\_Escape:
568             \textcolor{keywordflow}{if} ( !m\_topBar->isHidden() )
569                 showTopBar( \textcolor{keyword}{false} );
570             \textcolor{keywordflow}{else}
571                 close();
572             \textcolor{keywordflow}{break};
573     \}
574 \}
\end{DoxyCode}
\hypertarget{classPresentationWidget_a6298d50d07e540d555f6b8da8c8054ba}{\index{Presentation\+Widget@{Presentation\+Widget}!leave\+Event@{leave\+Event}}
\index{leave\+Event@{leave\+Event}!Presentation\+Widget@{Presentation\+Widget}}
\subsubsection[{leave\+Event}]{\setlength{\rightskip}{0pt plus 5cm}void Presentation\+Widget\+::leave\+Event (
\begin{DoxyParamCaption}
\item[{Q\+Event $\ast$}]{e}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{classPresentationWidget_a6298d50d07e540d555f6b8da8c8054ba}


Definition at line 832 of file presentationwidget.\+cpp.


\begin{DoxyCode}
833 \{
834     Q\_UNUSED( e )
835 
836     if ( !m\_topBar->isHidden() )
837     \{
838         showTopBar( \textcolor{keyword}{false} );
839     \}
840 \}
\end{DoxyCode}
\hypertarget{classPresentationWidget_a7f059f2489e5482ce1e69759d50b5200}{\index{Presentation\+Widget@{Presentation\+Widget}!mouse\+Move\+Event@{mouse\+Move\+Event}}
\index{mouse\+Move\+Event@{mouse\+Move\+Event}!Presentation\+Widget@{Presentation\+Widget}}
\subsubsection[{mouse\+Move\+Event}]{\setlength{\rightskip}{0pt plus 5cm}void Presentation\+Widget\+::mouse\+Move\+Event (
\begin{DoxyParamCaption}
\item[{Q\+Mouse\+Event $\ast$}]{e}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{classPresentationWidget_a7f059f2489e5482ce1e69759d50b5200}


Definition at line 690 of file presentationwidget.\+cpp.


\begin{DoxyCode}
691 \{
692     \textcolor{comment}{// safety check}
693     \textcolor{keywordflow}{if} ( !m\_isSetup )
694         \textcolor{keywordflow}{return};
695 
696     \textcolor{comment}{// update cursor and tooltip if hovering a link}
697     \textcolor{keywordflow}{if} ( !m\_drawingEngine && \hyperlink{classOkular_1_1Settings_a278364f63d8eb7e0bd3a6761d310993f}{Okular::Settings::slidesCursor}() != 
      \hyperlink{classOkular_1_1Settings_1_1EnumSlidesCursor_a1e2cb729c98ff2274a74500aa64abbc4a117b68ab1af66e116ddf4f78a0e05819}{Okular::Settings::EnumSlidesCursor::Hidden} )
698         testCursorOnLink( e->x(), e->y() );
699 
700     \textcolor{keywordflow}{if} ( !m\_topBar->isHidden() )
701     \{
702         \textcolor{comment}{// hide a shown bar when exiting the area}
703         \textcolor{keywordflow}{if} ( e->y() > ( m\_topBar->height() + 1 ) )
704         \{
705             showTopBar( \textcolor{keyword}{false} );
706             setFocus( Qt::OtherFocusReason );
707         \}
708     \}
709     \textcolor{keywordflow}{else}
710     \{
711         \textcolor{keywordflow}{if} ( m\_drawingEngine && e->buttons() != Qt::NoButton )
712         \{
713             QRect r = routeMouseDrawingEvent( e );
714             \textcolor{keywordflow}{if} ( r.isValid() )
715             \{
716                 m\_drawingRect |= r.translated( m\_frames[ m\_frameIndex ]->geometry.topLeft() );
717                 update( m\_drawingRect );
718             \}
719         \}
720         \textcolor{keywordflow}{else}
721         \{
722             \textcolor{comment}{// show the bar if reaching top 2 pixels}
723             \textcolor{keywordflow}{if} ( e->y() <= 1 )
724                 showTopBar( \textcolor{keyword}{true} );
725             \textcolor{comment}{// handle "dragging the wheel" if clicking on its geometry}
726             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( ( QApplication::mouseButtons() & Qt::LeftButton ) && m\_overlayGeometry.contains( e->
      pos() ) )
727                 overlayClick( e->pos() );
728         \}
729     \}
730 \}
\end{DoxyCode}
\hypertarget{classPresentationWidget_a502d9c8e44488ae4c78fef4ab4e6da4c}{\index{Presentation\+Widget@{Presentation\+Widget}!mouse\+Press\+Event@{mouse\+Press\+Event}}
\index{mouse\+Press\+Event@{mouse\+Press\+Event}!Presentation\+Widget@{Presentation\+Widget}}
\subsubsection[{mouse\+Press\+Event}]{\setlength{\rightskip}{0pt plus 5cm}void Presentation\+Widget\+::mouse\+Press\+Event (
\begin{DoxyParamCaption}
\item[{Q\+Mouse\+Event $\ast$}]{e}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{classPresentationWidget_a502d9c8e44488ae4c78fef4ab4e6da4c}


Definition at line 599 of file presentationwidget.\+cpp.


\begin{DoxyCode}
600 \{
601     \textcolor{keywordflow}{if} ( !m\_isSetup )
602         \textcolor{keywordflow}{return};
603 
604     \textcolor{keywordflow}{if} ( m\_drawingEngine )
605     \{
606         QRect r = routeMouseDrawingEvent( e );
607         \textcolor{keywordflow}{if} ( r.isValid() )
608         \{
609             m\_drawingRect |= r.translated( m\_frames[ m\_frameIndex ]->geometry.topLeft() );
610             update( m\_drawingRect );
611         \}
612         \textcolor{keywordflow}{return};
613     \}
614 
615     \textcolor{comment}{// pressing left button}
616     \textcolor{keywordflow}{if} ( e->button() == Qt::LeftButton )
617     \{
618         \textcolor{comment}{// if pressing on a link, skip other checks}
619         \textcolor{keywordflow}{if} ( ( m\_pressedLink = getLink( e->x(), e->y() ) ) )
620             \textcolor{keywordflow}{return};
621 
622         \textcolor{keyword}{const} \hyperlink{classOkular_1_1Annotation}{Okular::Annotation} *annotation = getAnnotation( e->x(), e->y() );
623         \textcolor{keywordflow}{if} ( annotation )
624         \{
625             \textcolor{keywordflow}{if} ( annotation->\hyperlink{classOkular_1_1Annotation_af9833449767eacd740f377e69a1fdd48}{subType}() == \hyperlink{classOkular_1_1Annotation_af71b46e37d5f850b97d5c4de3be9aac0a711a9d706a86b55f0799e944fb2750e6}{Okular::Annotation::AMovie} )
626             \{
627                 \textcolor{keyword}{const} \hyperlink{classOkular_1_1MovieAnnotation}{Okular::MovieAnnotation} *movieAnnotation = \textcolor{keyword}{static\_cast<}\textcolor{keyword}{const }
      \hyperlink{classOkular_1_1MovieAnnotation}{Okular::MovieAnnotation}*\textcolor{keyword}{>}( annotation );
628 
629                 \hyperlink{classVideoWidget}{VideoWidget} *vw = m\_frames[ m\_frameIndex ]->videoWidgets.value( movieAnnotation
      ->\hyperlink{classOkular_1_1MovieAnnotation_a1fc38e32a1704351c3e5916031be0267}{movie}() );
630                 vw->show();
631                 vw->\hyperlink{classVideoWidget_a00e08beaa6d8234f0cd3a6ef51e6709c}{play}();
632                 \textcolor{keywordflow}{return};
633             \}
634             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( annotation->\hyperlink{classOkular_1_1Annotation_af9833449767eacd740f377e69a1fdd48}{subType}() == 
      \hyperlink{classOkular_1_1Annotation_af71b46e37d5f850b97d5c4de3be9aac0a7cf8ba374ec139a8e2fb47a36182fa32}{Okular::Annotation::AScreen} )
635             \{
636                 m\_document->\hyperlink{classOkular_1_1Document_aabdf41f40fe0391590391e303891b5ed}{processAction}( static\_cast<const Okular::ScreenAnnotation*>( 
      annotation )->action() );
637                 \textcolor{keywordflow}{return};
638             \}
639         \}
640 
641         \textcolor{comment}{// handle clicking on top-right overlay}
642         \textcolor{keywordflow}{if} ( !( \hyperlink{classOkular_1_1Settings_a278364f63d8eb7e0bd3a6761d310993f}{Okular::Settings::slidesCursor}() == 
      \hyperlink{classOkular_1_1Settings_1_1EnumSlidesCursor_a1e2cb729c98ff2274a74500aa64abbc4a117b68ab1af66e116ddf4f78a0e05819}{Okular::Settings::EnumSlidesCursor::Hidden} ) &&
643              m\_overlayGeometry.contains( e->pos() ) )
644         \{
645             overlayClick( e->pos() );
646             \textcolor{keywordflow}{return};
647         \}
648 
649         \textcolor{comment}{// if no other actions, go to next page}
650         slotNextPage();
651     \}
652     \textcolor{comment}{// pressing right button}
653     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( e->button() == Qt::RightButton )
654         slotPrevPage();
655 \}
\end{DoxyCode}
\hypertarget{classPresentationWidget_a7f761d8aec6ec9c55fdf466c5c21bb6b}{\index{Presentation\+Widget@{Presentation\+Widget}!mouse\+Release\+Event@{mouse\+Release\+Event}}
\index{mouse\+Release\+Event@{mouse\+Release\+Event}!Presentation\+Widget@{Presentation\+Widget}}
\subsubsection[{mouse\+Release\+Event}]{\setlength{\rightskip}{0pt plus 5cm}void Presentation\+Widget\+::mouse\+Release\+Event (
\begin{DoxyParamCaption}
\item[{Q\+Mouse\+Event $\ast$}]{e}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{classPresentationWidget_a7f761d8aec6ec9c55fdf466c5c21bb6b}


Definition at line 657 of file presentationwidget.\+cpp.


\begin{DoxyCode}
658 \{
659     \textcolor{keywordflow}{if} ( m\_drawingEngine )
660     \{
661         QRect r = routeMouseDrawingEvent( e );
662         (void)r;
663         \textcolor{keywordflow}{if} ( m\_drawingEngine->\hyperlink{classAnnotatorEngine_a54e1ac7803149f1a94490e5511ad3deb}{creationCompleted}() )
664         \{
665             \textcolor{comment}{// add drawing to current page}
666             m\_frames[ m\_frameIndex ]->drawings << m\_drawingEngine->\hyperlink{classSmoothPathEngine_aa029e01d4c38d701466498fc7c222133}{endSmoothPath}();
667 
668             \textcolor{comment}{// manually disable and re-enable the pencil mode, so we can do}
669             \textcolor{comment}{// cleaning of the actual drawer and create a new one just after}
670             \textcolor{comment}{// that - that gives continuous drawing}
671             togglePencilMode( \textcolor{keyword}{false} );
672             togglePencilMode( \textcolor{keyword}{true} );
673 
674             \textcolor{comment}{// schedule repaint}
675             update();
676         \}
677         \textcolor{keywordflow}{return};
678     \}
679 
680     \textcolor{comment}{// if releasing on the same link we pressed over, execute it}
681     \textcolor{keywordflow}{if} ( m\_pressedLink && e->button() == Qt::LeftButton )
682     \{
683         \textcolor{keyword}{const} \hyperlink{classOkular_1_1Action}{Okular::Action} * link = getLink( e->x(), e->y() );
684         \textcolor{keywordflow}{if} ( link == m\_pressedLink )
685             m\_document->\hyperlink{classOkular_1_1Document_aabdf41f40fe0391590391e303891b5ed}{processAction}( link );
686         m\_pressedLink = 0;
687     \}
688 \}
\end{DoxyCode}
\hypertarget{classPresentationWidget_a54be819b15799a923345a8dc7f4b0333}{\index{Presentation\+Widget@{Presentation\+Widget}!notify\+Current\+Page\+Changed@{notify\+Current\+Page\+Changed}}
\index{notify\+Current\+Page\+Changed@{notify\+Current\+Page\+Changed}!Presentation\+Widget@{Presentation\+Widget}}
\subsubsection[{notify\+Current\+Page\+Changed}]{\setlength{\rightskip}{0pt plus 5cm}void Presentation\+Widget\+::notify\+Current\+Page\+Changed (
\begin{DoxyParamCaption}
\item[{int}]{previous, }
\item[{int}]{current}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classPresentationWidget_a54be819b15799a923345a8dc7f4b0333}
This method is called after the current page of the document has been entered.


\begin{DoxyParams}{Parameters}
{\em previous} & The number of the previous page (is {\ttfamily -\/1} for the initial page change). \\
\hline
{\em current} & The number of the current page.\\
\hline
\end{DoxyParams}
\begin{DoxySince}{Since}
0.\+16 (K\+D\+E 4.\+10) 
\end{DoxySince}


Reimplemented from \hyperlink{classOkular_1_1DocumentObserver_ae449ca3f3f8aa7dffab61a6b723a1fd8}{Okular\+::\+Document\+Observer}.



Definition at line 390 of file presentationwidget.\+cpp.


\begin{DoxyCode}
391 \{
392     \textcolor{keywordflow}{if} ( previousPage != -1 )
393     \{
394         \textcolor{comment}{// stop video playback}
395         Q\_FOREACH ( \hyperlink{classVideoWidget}{VideoWidget} *vw, m\_frames[ previousPage ]->videoWidgets )
396         \{
397             vw->\hyperlink{classVideoWidget_a71bd6da5120ab3556d0ac41e905f6e26}{stop}();
398             vw->\hyperlink{classVideoWidget_a332a8907b98df63648b90f6ae6d42cac}{pageLeft}();
399         \}
400 
401         \textcolor{comment}{// stop audio playback, if any}
402         \hyperlink{classOkular_1_1AudioPlayer_a5bbc067e81b46451098a2a0becf23e67}{Okular::AudioPlayer::instance}()->
      \hyperlink{classOkular_1_1AudioPlayer_a48730f5eb7dbc0551679c367e0ba9234}{stopPlaybacks}();
403 
404         \textcolor{comment}{// perform the page closing action, if any}
405         \textcolor{keywordflow}{if} ( m\_document->\hyperlink{classOkular_1_1Document_a1c95c2f192d739c217d00971da48f69d}{page}( previousPage )->\hyperlink{classOkular_1_1Page_a960c4dd29f12aaabaa66880c19540203}{pageAction}( 
      \hyperlink{classOkular_1_1Page_a6a8e241cdb604d5c90d5f80b169788f7ae9b42d3ddb97cc7f889104c73c686f80}{Okular::Page::Closing} ) )
406             m\_document->\hyperlink{classOkular_1_1Document_aabdf41f40fe0391590391e303891b5ed}{processAction}( m\_document->\hyperlink{classOkular_1_1Document_a1c95c2f192d739c217d00971da48f69d}{page}( previousPage )->
      \hyperlink{classOkular_1_1Page_a960c4dd29f12aaabaa66880c19540203}{pageAction}( \hyperlink{classOkular_1_1Page_a6a8e241cdb604d5c90d5f80b169788f7ae9b42d3ddb97cc7f889104c73c686f80}{Okular::Page::Closing} ) );
407 
408         \textcolor{comment}{// perform the additional actions of the page's annotations, if any}
409         Q\_FOREACH ( \textcolor{keyword}{const} \hyperlink{classOkular_1_1Annotation}{Okular::Annotation} *annotation, m\_document->
      \hyperlink{classOkular_1_1Document_a1c95c2f192d739c217d00971da48f69d}{page}( previousPage )->\hyperlink{classOkular_1_1Page_ad82e0f26d5435b5ccfa3d23c359ac23c}{annotations}() )
410         \{
411             \hyperlink{classOkular_1_1Action}{Okular::Action} *action = 0;
412 
413             \textcolor{keywordflow}{if} ( annotation->\hyperlink{classOkular_1_1Annotation_af9833449767eacd740f377e69a1fdd48}{subType}() == \hyperlink{classOkular_1_1Annotation_af71b46e37d5f850b97d5c4de3be9aac0a7cf8ba374ec139a8e2fb47a36182fa32}{Okular::Annotation::AScreen} )
414                 action = static\_cast<const Okular::ScreenAnnotation*>( annotation )->additionalAction( 
      \hyperlink{classOkular_1_1Annotation_aa34152e337b1cb13e9327f37fc295057a163dda71b8c9ac45ce1c250f37458bac}{Okular::Annotation::PageClosing} );
415             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( annotation->\hyperlink{classOkular_1_1Annotation_af9833449767eacd740f377e69a1fdd48}{subType}() == 
      \hyperlink{classOkular_1_1Annotation_af71b46e37d5f850b97d5c4de3be9aac0aa0f6a560b971fe69d18156176258d6c8}{Okular::Annotation::AWidget} )
416                 action = static\_cast<const Okular::WidgetAnnotation*>( annotation )->additionalAction( 
      \hyperlink{classOkular_1_1Annotation_aa34152e337b1cb13e9327f37fc295057a163dda71b8c9ac45ce1c250f37458bac}{Okular::Annotation::PageClosing} );
417 
418             \textcolor{keywordflow}{if} ( action )
419                 m\_document->\hyperlink{classOkular_1_1Document_aabdf41f40fe0391590391e303891b5ed}{processAction}( action );
420         \}
421     \}
422 
423     \textcolor{keywordflow}{if} ( currentPage != -1 )
424     \{
425         m\_frameIndex = currentPage;
426 
427         \textcolor{comment}{// check if pixmap exists or else request it}
428         \hyperlink{structPresentationFrame}{PresentationFrame} * frame = m\_frames[ m\_frameIndex ];
429         \textcolor{keywordtype}{int} pixW = frame->\hyperlink{structPresentationFrame_af80fd4c4305934bb3723aec0b7f72bcf}{geometry}.width();
430         \textcolor{keywordtype}{int} pixH = frame->\hyperlink{structPresentationFrame_af80fd4c4305934bb3723aec0b7f72bcf}{geometry}.height();
431 
432         \textcolor{keywordtype}{bool} signalsBlocked = m\_pagesEdit->signalsBlocked();
433         m\_pagesEdit->blockSignals( \textcolor{keyword}{true} );
434         m\_pagesEdit->setText( QString::number( m\_frameIndex + 1 ) );
435         m\_pagesEdit->blockSignals( signalsBlocked );
436 
437         \textcolor{comment}{// if pixmap not inside the Okular::Page we request it and wait for}
438         \textcolor{comment}{// notifyPixmapChanged call or else we can proceed to pixmap generation}
439         \textcolor{keywordflow}{if} ( !frame->\hyperlink{structPresentationFrame_ab40e6871a08519f4f2c97d3f1009f2a5}{page}->\hyperlink{classOkular_1_1Page_a4c14959c8283b76513d4ba4139634575}{hasPixmap}( \textcolor{keyword}{this}, pixW, pixH ) )
440         \{
441             requestPixmaps();
442         \}
443         \textcolor{keywordflow}{else}
444         \{
445             \textcolor{comment}{// make the background pixmap}
446             generatePage();
447         \}
448 
449         \textcolor{comment}{// perform the page opening action, if any}
450         \textcolor{keywordflow}{if} ( m\_document->\hyperlink{classOkular_1_1Document_a1c95c2f192d739c217d00971da48f69d}{page}( m\_frameIndex )->\hyperlink{classOkular_1_1Page_a960c4dd29f12aaabaa66880c19540203}{pageAction}( 
      \hyperlink{classOkular_1_1Page_a6a8e241cdb604d5c90d5f80b169788f7adbcb6b79c0b2118ed23a0d1c89391f87}{Okular::Page::Opening} ) )
451             m\_document->\hyperlink{classOkular_1_1Document_aabdf41f40fe0391590391e303891b5ed}{processAction}( m\_document->\hyperlink{classOkular_1_1Document_a1c95c2f192d739c217d00971da48f69d}{page}( m\_frameIndex )->
      \hyperlink{classOkular_1_1Page_a960c4dd29f12aaabaa66880c19540203}{pageAction}( \hyperlink{classOkular_1_1Page_a6a8e241cdb604d5c90d5f80b169788f7adbcb6b79c0b2118ed23a0d1c89391f87}{Okular::Page::Opening} ) );
452 
453         \textcolor{comment}{// perform the additional actions of the page's annotations, if any}
454         Q\_FOREACH ( \textcolor{keyword}{const} \hyperlink{classOkular_1_1Annotation}{Okular::Annotation} *annotation, m\_document->
      \hyperlink{classOkular_1_1Document_a1c95c2f192d739c217d00971da48f69d}{page}( m\_frameIndex )->\hyperlink{classOkular_1_1Page_ad82e0f26d5435b5ccfa3d23c359ac23c}{annotations}() )
455         \{
456             \hyperlink{classOkular_1_1Action}{Okular::Action} *action = 0;
457 
458             \textcolor{keywordflow}{if} ( annotation->\hyperlink{classOkular_1_1Annotation_af9833449767eacd740f377e69a1fdd48}{subType}() == \hyperlink{classOkular_1_1Annotation_af71b46e37d5f850b97d5c4de3be9aac0a7cf8ba374ec139a8e2fb47a36182fa32}{Okular::Annotation::AScreen} )
459                 action = static\_cast<const Okular::ScreenAnnotation*>( annotation )->additionalAction( 
      \hyperlink{classOkular_1_1Annotation_aa34152e337b1cb13e9327f37fc295057a46ab9d0c7ed65157b6982a807975b7f0}{Okular::Annotation::PageOpening} );
460             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( annotation->\hyperlink{classOkular_1_1Annotation_af9833449767eacd740f377e69a1fdd48}{subType}() == 
      \hyperlink{classOkular_1_1Annotation_af71b46e37d5f850b97d5c4de3be9aac0aa0f6a560b971fe69d18156176258d6c8}{Okular::Annotation::AWidget} )
461                 action = static\_cast<const Okular::WidgetAnnotation*>( annotation )->additionalAction( 
      \hyperlink{classOkular_1_1Annotation_aa34152e337b1cb13e9327f37fc295057a46ab9d0c7ed65157b6982a807975b7f0}{Okular::Annotation::PageOpening} );
462 
463             \textcolor{keywordflow}{if} ( action )
464                 m\_document->\hyperlink{classOkular_1_1Document_aabdf41f40fe0391590391e303891b5ed}{processAction}( action );
465         \}
466 
467         \textcolor{comment}{// start autoplay video playback}
468         Q\_FOREACH ( \hyperlink{classVideoWidget}{VideoWidget} *vw, m\_frames[ m\_frameIndex ]->videoWidgets )
469             vw->pageEntered();
470     \}
471 \}
\end{DoxyCode}
\hypertarget{classPresentationWidget_a40b4d1dc7949527832d772699cbbf1a0}{\index{Presentation\+Widget@{Presentation\+Widget}!notify\+Page\+Changed@{notify\+Page\+Changed}}
\index{notify\+Page\+Changed@{notify\+Page\+Changed}!Presentation\+Widget@{Presentation\+Widget}}
\subsubsection[{notify\+Page\+Changed}]{\setlength{\rightskip}{0pt plus 5cm}void Presentation\+Widget\+::notify\+Page\+Changed (
\begin{DoxyParamCaption}
\item[{int}]{page, }
\item[{int}]{flags}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classPresentationWidget_a40b4d1dc7949527832d772699cbbf1a0}
This method is called whenever the content on {\ttfamily page} described by the passed {\ttfamily flags} has been changed. 

Reimplemented from \hyperlink{classOkular_1_1DocumentObserver_abf7600dabd7d6c1e38c950d99f7be595}{Okular\+::\+Document\+Observer}.



Definition at line 379 of file presentationwidget.\+cpp.


\begin{DoxyCode}
380 \{
381     \textcolor{comment}{// if we are blocking the notifications, do nothing}
382     \textcolor{keywordflow}{if} ( m\_blockNotifications )
383         \textcolor{keywordflow}{return};
384 
385     \textcolor{comment}{// check if it's the last requested pixmap. if so update the widget.}
386     \textcolor{keywordflow}{if} ( (changedFlags & ( DocumentObserver::Pixmap | DocumentObserver::Annotations | 
      DocumentObserver::Highlights ) ) && pageNumber == m\_frameIndex )
387         generatePage( changedFlags & ( DocumentObserver::Annotations | DocumentObserver::Highlights ) );
388 \}
\end{DoxyCode}
\hypertarget{classPresentationWidget_a3bd0def67af18fd092301adfdb9f98a7}{\index{Presentation\+Widget@{Presentation\+Widget}!notify\+Setup@{notify\+Setup}}
\index{notify\+Setup@{notify\+Setup}!Presentation\+Widget@{Presentation\+Widget}}
\subsubsection[{notify\+Setup}]{\setlength{\rightskip}{0pt plus 5cm}void Presentation\+Widget\+::notify\+Setup (
\begin{DoxyParamCaption}
\item[{const Q\+Vector$<$ {\bf Okular\+::\+Page} $\ast$ $>$ \&}]{pages, }
\item[{int}]{setup\+Flags}
\end{DoxyParamCaption}
)}}\label{classPresentationWidget_a3bd0def67af18fd092301adfdb9f98a7}


Definition at line 303 of file presentationwidget.\+cpp.


\begin{DoxyCode}
304 \{
305     \textcolor{comment}{// same document, nothing to change - here we assume the document sets up}
306     \textcolor{comment}{// us with the whole document set as first notifySetup()}
307     \textcolor{keywordflow}{if} ( !( setupFlags & \hyperlink{classOkular_1_1DocumentObserver_aba00584af99894f95a9650e91f109d40ae599564392c01b22e96eff7602c4dd03}{Okular::DocumentObserver::DocumentChanged}
       ) )
308         \textcolor{keywordflow}{return};
309 
310     \textcolor{comment}{// delete previous frames (if any (shouldn't be))}
311     QVector< PresentationFrame * >::iterator fIt = m\_frames.begin(), fEnd = m\_frames.end();
312     \textcolor{keywordflow}{for} ( ; fIt != fEnd; ++fIt )
313         \textcolor{keyword}{delete} *fIt;
314     \textcolor{keywordflow}{if} ( !m\_frames.isEmpty() )
315         kWarning() << \textcolor{stringliteral}{"Frames setup changed while a Presentation is in progress."};
316     m\_frames.clear();
317 
318     \textcolor{comment}{// create the new frames}
319     QVector< Okular::Page * >::const\_iterator setIt = pageSet.begin(), setEnd = pageSet.end();
320     \textcolor{keywordtype}{float} screenRatio = (float)m\_height / (\textcolor{keywordtype}{float})m\_width;
321     \textcolor{keywordflow}{for} ( ; setIt != setEnd; ++setIt )
322     \{
323         \hyperlink{structPresentationFrame}{PresentationFrame} * frame = \textcolor{keyword}{new} \hyperlink{structPresentationFrame}{PresentationFrame}();
324         frame->\hyperlink{structPresentationFrame_ab40e6871a08519f4f2c97d3f1009f2a5}{page} = *setIt;
325         \textcolor{keyword}{const} \hyperlink{classQLinkedList}{QLinkedList< Okular::Annotation * >} annotations = (*setIt)
      ->annotations();
326         \hyperlink{classQLinkedList}{QLinkedList< Okular::Annotation * >::const\_iterator}
       aIt = annotations.begin(), aEnd = annotations.end();
327         \textcolor{keywordflow}{for} ( ; aIt != aEnd; ++aIt )
328         \{
329             \hyperlink{classOkular_1_1Annotation}{Okular::Annotation} * a = *aIt;
330             \textcolor{keywordflow}{if} ( a->\hyperlink{classOkular_1_1Annotation_af9833449767eacd740f377e69a1fdd48}{subType}() == \hyperlink{classOkular_1_1Annotation_af71b46e37d5f850b97d5c4de3be9aac0a711a9d706a86b55f0799e944fb2750e6}{Okular::Annotation::AMovie} )
331             \{
332                 \hyperlink{classOkular_1_1MovieAnnotation}{Okular::MovieAnnotation} * movieAnn = \textcolor{keyword}{static\_cast<} 
      \hyperlink{classOkular_1_1MovieAnnotation}{Okular::MovieAnnotation} * \textcolor{keyword}{>}( a );
333                 \hyperlink{classVideoWidget}{VideoWidget} * vw = \textcolor{keyword}{new} \hyperlink{classVideoWidget}{VideoWidget}( movieAnn, movieAnn->
      \hyperlink{classOkular_1_1MovieAnnotation_a1fc38e32a1704351c3e5916031be0267}{movie}(), m\_document, this );
334                 frame->\hyperlink{structPresentationFrame_ace9a73ff662d4d93b3f9d7d22f6630cd}{videoWidgets}.insert( movieAnn->\hyperlink{classOkular_1_1MovieAnnotation_a1fc38e32a1704351c3e5916031be0267}{movie}(), vw );
335                 vw->\hyperlink{classVideoWidget_a90dbdcbaffc7717c7e3b327ad076bc58}{pageInitialized}();
336             \}
337             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( a->\hyperlink{classOkular_1_1Annotation_af9833449767eacd740f377e69a1fdd48}{subType}() == \hyperlink{classOkular_1_1Annotation_af71b46e37d5f850b97d5c4de3be9aac0a7cf8ba374ec139a8e2fb47a36182fa32}{Okular::Annotation::AScreen} )
338             \{
339                 \textcolor{keyword}{const} \hyperlink{classOkular_1_1ScreenAnnotation}{Okular::ScreenAnnotation} * screenAnn = \textcolor{keyword}{static\_cast<} 
      \hyperlink{classOkular_1_1ScreenAnnotation}{Okular::ScreenAnnotation} * \textcolor{keyword}{>}( a );
340                 \hyperlink{classOkular_1_1Movie}{Okular::Movie} *movie = 
      \hyperlink{namespaceGuiUtils_a51c606d14a293d5b3f5f49ad1c12be44}{GuiUtils::renditionMovieFromScreenAnnotation}( screenAnn );
341                 \textcolor{keywordflow}{if} ( movie )
342                 \{
343                     \hyperlink{classVideoWidget}{VideoWidget} * vw = \textcolor{keyword}{new} \hyperlink{classVideoWidget}{VideoWidget}( screenAnn, movie, m\_document,
       \textcolor{keyword}{this} );
344                     frame->\hyperlink{structPresentationFrame_ace9a73ff662d4d93b3f9d7d22f6630cd}{videoWidgets}.insert( movie, vw );
345                     vw->\hyperlink{classVideoWidget_a90dbdcbaffc7717c7e3b327ad076bc58}{pageInitialized}();
346                 \}
347             \}
348         \}
349         frame->\hyperlink{structPresentationFrame_a85b9ae3dd422b180b6fe976dd6719c3e}{recalcGeometry}( m\_width, m\_height, screenRatio );
350         \textcolor{comment}{// add the frame to the vector}
351         m\_frames.push\_back( frame );
352     \}
353 
354     \textcolor{comment}{// get metadata from the document}
355     m\_metaStrings.clear();
356     \textcolor{keyword}{const} \hyperlink{classOkular_1_1DocumentInfo}{Okular::DocumentInfo} * info = m\_document->
      \hyperlink{classOkular_1_1Document_a9c0b854496aa923bd575593a299af7e4}{documentInfo}();
357     \textcolor{keywordflow}{if} ( info )
358     \{
359         \textcolor{keywordflow}{if} ( !info->\hyperlink{classOkular_1_1DocumentInfo_a568ea22f19b034255be4c19f55ab1d82}{get}( \textcolor{stringliteral}{"title"} ).isNull() )
360             m\_metaStrings += i18n( \textcolor{stringliteral}{"Title: %1"}, info->\hyperlink{classOkular_1_1DocumentInfo_a568ea22f19b034255be4c19f55ab1d82}{get}( \textcolor{stringliteral}{"title"} ) );
361         \textcolor{keywordflow}{if} ( !info->\hyperlink{classOkular_1_1DocumentInfo_a568ea22f19b034255be4c19f55ab1d82}{get}( \textcolor{stringliteral}{"author"} ).isNull() )
362             m\_metaStrings += i18n( \textcolor{stringliteral}{"Author: %1"}, info->\hyperlink{classOkular_1_1DocumentInfo_a568ea22f19b034255be4c19f55ab1d82}{get}( \textcolor{stringliteral}{"author"} ) );
363     \}
364     m\_metaStrings += i18n( \textcolor{stringliteral}{"Pages: %1"}, m\_document->\hyperlink{classOkular_1_1Document_aaf5d986758e25127946986abaa401bcd}{pages}() );
365     m\_metaStrings += i18n( \textcolor{stringliteral}{"Click to begin"} );
366 
367     m\_isSetup = \textcolor{keyword}{true};
368 \}
\end{DoxyCode}
\hypertarget{classPresentationWidget_ac52c978b325991707aebbc0f99ffff27}{\index{Presentation\+Widget@{Presentation\+Widget}!notify\+Viewport\+Changed@{notify\+Viewport\+Changed}}
\index{notify\+Viewport\+Changed@{notify\+Viewport\+Changed}!Presentation\+Widget@{Presentation\+Widget}}
\subsubsection[{notify\+Viewport\+Changed}]{\setlength{\rightskip}{0pt plus 5cm}void Presentation\+Widget\+::notify\+Viewport\+Changed (
\begin{DoxyParamCaption}
\item[{bool}]{smooth\+Move}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classPresentationWidget_ac52c978b325991707aebbc0f99ffff27}
This method is called whenever the viewport has been changed.


\begin{DoxyParams}{Parameters}
{\em smooth\+Move} & If true, the move shall be animated. \\
\hline
\end{DoxyParams}


Reimplemented from \hyperlink{classOkular_1_1DocumentObserver_ac98c9e8b62ec9261ed9c9ea2710849f0}{Okular\+::\+Document\+Observer}.



Definition at line 370 of file presentationwidget.\+cpp.


\begin{DoxyCode}
371 \{
372     \textcolor{comment}{// display the current page}
373     changePage( m\_document->\hyperlink{classOkular_1_1Document_abb8738de0a53aa4a9f552de0e1e749f8}{viewport}().\hyperlink{classOkular_1_1DocumentViewport_a122674d4a493e79b1aa5fd5c00e81c93}{pageNumber} );
374 
375     \textcolor{comment}{// auto advance to the next page if set}
376     startAutoChangeTimer();
377 \}
\end{DoxyCode}
\hypertarget{classPresentationWidget_a95dc92b582c27c1cd979878f1805f179}{\index{Presentation\+Widget@{Presentation\+Widget}!paint\+Event@{paint\+Event}}
\index{paint\+Event@{paint\+Event}!Presentation\+Widget@{Presentation\+Widget}}
\subsubsection[{paint\+Event}]{\setlength{\rightskip}{0pt plus 5cm}void Presentation\+Widget\+::paint\+Event (
\begin{DoxyParamCaption}
\item[{Q\+Paint\+Event $\ast$}]{e}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{classPresentationWidget_a95dc92b582c27c1cd979878f1805f179}


Definition at line 732 of file presentationwidget.\+cpp.


\begin{DoxyCode}
733 \{
734     \textcolor{keywordflow}{if} ( m\_inBlackScreenMode )
735     \{
736         QPainter painter( \textcolor{keyword}{this} );
737         painter.fillRect( pe->rect(), Qt::black );
738         \textcolor{keywordflow}{return};
739     \}
740 
741     \textcolor{keywordflow}{if} ( !m\_isSetup )
742     \{
743         m\_width = width();
744         m\_height = height();
745 
746         connect( m\_document, SIGNAL(linkFind()), \textcolor{keyword}{this}, SLOT(\hyperlink{classPresentationWidget_a4488b5ed4958497c9c07e9e5478c4b13}{slotFind}()) );
747 
748         \textcolor{comment}{// register this observer in document. events will come immediately}
749         m\_document->\hyperlink{classOkular_1_1Document_a37300860cf93f60184305829b033e0e2}{addObserver}( \textcolor{keyword}{this} );
750 
751         \textcolor{comment}{// show summary if requested}
752         \textcolor{keywordflow}{if} ( \hyperlink{classOkular_1_1Settings_ac06ca89e428ad1ee40753da80a1f35e5}{Okular::Settings::slidesShowSummary}() )
753             generatePage();
754     \}
755 
756     \textcolor{comment}{// check painting rect consistancy}
757     QRect r = pe->rect().intersect( QRect( QPoint( 0, 0 ), geometry().\hyperlink{synctex__parser_8c_aa23c661441688350614bd6a350d2b6ff}{size}() ) );
758     \textcolor{keywordflow}{if} ( r.isNull() )
759         \textcolor{keywordflow}{return};
760 
761     \textcolor{keywordflow}{if} ( m\_lastRenderedPixmap.isNull() )
762     \{
763         QPainter painter( \textcolor{keyword}{this} );
764         painter.fillRect( pe->rect(), \hyperlink{classOkular_1_1Settings_a8a692db67200b9e78363d736dbf4cd5f}{Okular::Settings::slidesBackgroundColor}
      () );
765         \textcolor{keywordflow}{return};
766     \}
767 
768     \textcolor{comment}{// blit the pixmap to the screen}
769     QVector<QRect> allRects = pe->region().rects();
770     uint numRects = allRects.count();
771     QPainter painter( \textcolor{keyword}{this} );
772     \textcolor{keywordflow}{for} ( uint i = 0; i < numRects; i++ )
773     \{
774         \textcolor{keyword}{const} QRect & r = allRects[i];
775         \textcolor{keywordflow}{if} ( !r.isValid() )
776             \textcolor{keywordflow}{continue};
777 \textcolor{preprocessor}{#ifdef ENABLE\_PROGRESS\_OVERLAY}
778         \textcolor{keywordflow}{if} ( \hyperlink{classOkular_1_1Settings_ae6d1c06a5ae4bef003883132a9dc20bd}{Okular::Settings::slidesShowProgress}() && r.intersects( 
      m\_overlayGeometry ) )
779         \{
780             \textcolor{comment}{// backbuffer the overlay operation}
781             QPixmap backPixmap( r.size() );
782             QPainter pixPainter( &backPixmap );
783 
784             \textcolor{comment}{// first draw the background on the backbuffer}
785             pixPainter.drawPixmap( QPoint(0,0), m\_lastRenderedPixmap, r );
786 
787             \textcolor{comment}{// then blend the overlay (a piece of) over the background}
788             QRect ovr = m\_overlayGeometry.intersect( r );
789             pixPainter.drawPixmap( ovr.left() - r.left(), ovr.top() - r.top(),
790                 m\_lastRenderedOverlay, ovr.left() - m\_overlayGeometry.left(),
791                 ovr.top() - m\_overlayGeometry.top(), ovr.width(), ovr.height() );
792 
793             \textcolor{comment}{// finally blit the pixmap to the screen}
794             pixPainter.end();
795             painter.drawPixmap( r.topLeft(), backPixmap, backPixmap.rect() );
796         \} \textcolor{keywordflow}{else}
797 \textcolor{preprocessor}{#endif}
798         \textcolor{comment}{// copy the rendered pixmap to the screen}
799         painter.drawPixmap( r.topLeft(), m\_lastRenderedPixmap, r );
800     \}
801 
802     \textcolor{comment}{// paint drawings}
803     \textcolor{keywordflow}{if} ( m\_frameIndex != -1 )
804     \{
805         \textcolor{keyword}{const} QRect & geom = m\_frames[ m\_frameIndex ]->geometry;
806         painter.save();
807         painter.translate( geom.topLeft() );
808         painter.setRenderHints( QPainter::Antialiasing );
809 
810         \textcolor{keywordflow}{foreach} ( \textcolor{keyword}{const} \hyperlink{classSmoothPath}{SmoothPath} &drawing, m\_frames[ m\_frameIndex ]->drawings )
811             drawing.\hyperlink{classSmoothPath_aee2cd146044c9391ffbd07de87754567}{paint}( &painter, geom.width(), geom.height() );
812 
813         \textcolor{keywordflow}{if} ( m\_drawingEngine && m\_drawingRect.intersects( pe->rect() ) )
814             m\_drawingEngine->\hyperlink{classSmoothPathEngine_a08b94551c709ae56600afd692da10717}{paint}( &painter, geom.width(), geom.height(), m\_drawingRect.intersect( pe
      ->rect() ) );
815 
816         painter.restore();
817     \}
818     painter.end();
819 \}
\end{DoxyCode}
\hypertarget{classPresentationWidget_a710b035d00f0b81e835a31d01782c6ff}{\index{Presentation\+Widget@{Presentation\+Widget}!resize\+Event@{resize\+Event}}
\index{resize\+Event@{resize\+Event}!Presentation\+Widget@{Presentation\+Widget}}
\subsubsection[{resize\+Event}]{\setlength{\rightskip}{0pt plus 5cm}void Presentation\+Widget\+::resize\+Event (
\begin{DoxyParamCaption}
\item[{Q\+Resize\+Event $\ast$}]{e}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{classPresentationWidget_a710b035d00f0b81e835a31d01782c6ff}


Definition at line 821 of file presentationwidget.\+cpp.


\begin{DoxyCode}
822 \{
823     \textcolor{comment}{// kDebug() << re->oldSize() << "=>" << re->size();}
824     \textcolor{keywordflow}{if} ( re->oldSize() == QSize( -1, -1 ) )
825         \textcolor{keywordflow}{return};
826 
827     m\_screen = QApplication::desktop()->screenNumber( \textcolor{keyword}{this} );
828 
829     applyNewScreenSize( re->oldSize() );
830 \}
\end{DoxyCode}
\hypertarget{classPresentationWidget_a4488b5ed4958497c9c07e9e5478c4b13}{\index{Presentation\+Widget@{Presentation\+Widget}!slot\+Find@{slot\+Find}}
\index{slot\+Find@{slot\+Find}!Presentation\+Widget@{Presentation\+Widget}}
\subsubsection[{slot\+Find}]{\setlength{\rightskip}{0pt plus 5cm}void Presentation\+Widget\+::slot\+Find (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [slot]}}}\label{classPresentationWidget_a4488b5ed4958497c9c07e9e5478c4b13}


Definition at line 1607 of file presentationwidget.\+cpp.


\begin{DoxyCode}
1608 \{
1609     \textcolor{keywordflow}{if} ( !m\_searchBar )
1610     \{
1611         m\_searchBar = \textcolor{keyword}{new} \hyperlink{classPresentationSearchBar}{PresentationSearchBar}( m\_document, \textcolor{keyword}{this}, \textcolor{keyword}{this} );
1612         m\_searchBar->\hyperlink{classPresentationSearchBar_a2721abf1ed64273bca7aa8e324e9bf8c}{forceSnap}();
1613     \}
1614     m\_searchBar->\hyperlink{classPresentationSearchBar_a0ecb08c124952d0747f2478d918ddc97}{focusOnSearchEdit}();
1615     m\_searchBar->show();
1616 \}
\end{DoxyCode}
\hypertarget{classPresentationWidget_a70da82bbab9dbf243bb8e4637537f20e}{\index{Presentation\+Widget@{Presentation\+Widget}!wheel\+Event@{wheel\+Event}}
\index{wheel\+Event@{wheel\+Event}!Presentation\+Widget@{Presentation\+Widget}}
\subsubsection[{wheel\+Event}]{\setlength{\rightskip}{0pt plus 5cm}void Presentation\+Widget\+::wheel\+Event (
\begin{DoxyParamCaption}
\item[{Q\+Wheel\+Event $\ast$}]{e}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{classPresentationWidget_a70da82bbab9dbf243bb8e4637537f20e}


Definition at line 576 of file presentationwidget.\+cpp.


\begin{DoxyCode}
577 \{
578     \textcolor{keywordflow}{if} ( !m\_isSetup )
579         \textcolor{keywordflow}{return};
580 
581     \textcolor{comment}{// performance note: don't remove the clipping}
582     \textcolor{keywordtype}{int} div = e->delta() / 120;
583     \textcolor{keywordflow}{if} ( div > 0 )
584     \{
585         \textcolor{keywordflow}{if} ( div > 3 )
586             div = 3;
587         \textcolor{keywordflow}{while} ( div-- )
588             slotPrevPage();
589     \}
590     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( div < 0 )
591     \{
592         \textcolor{keywordflow}{if} ( div < -3 )
593             div = -3;
594         \textcolor{keywordflow}{while} ( div++ )
595             slotNextPage();
596     \}
597 \}
\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
ui/\hyperlink{presentationwidget_8h}{presentationwidget.\+h}\item 
ui/\hyperlink{presentationwidget_8cpp}{presentationwidget.\+cpp}\end{DoxyCompactItemize}
