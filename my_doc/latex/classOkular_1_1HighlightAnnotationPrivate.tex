\hypertarget{classOkular_1_1HighlightAnnotationPrivate}{\section{Okular\+:\+:Highlight\+Annotation\+Private Class Reference}
\label{classOkular_1_1HighlightAnnotationPrivate}\index{Okular\+::\+Highlight\+Annotation\+Private@{Okular\+::\+Highlight\+Annotation\+Private}}
}
Inheritance diagram for Okular\+:\+:Highlight\+Annotation\+Private\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classOkular_1_1HighlightAnnotationPrivate}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classOkular_1_1HighlightAnnotationPrivate_a48de29138e8bde908f4ead60c32219e7}{Highlight\+Annotation\+Private} ()
\item 
virtual void \hyperlink{classOkular_1_1HighlightAnnotationPrivate_a3b4f24f4078952bcaf75bf1e9411d581}{transform} (const Q\+Transform \&matrix)
\item 
virtual void \hyperlink{classOkular_1_1HighlightAnnotationPrivate_a9e9b792f43a4a1f050af1018d3118e32}{base\+Transform} (const Q\+Transform \&matrix)
\item 
virtual double \hyperlink{classOkular_1_1HighlightAnnotationPrivate_a8285cfe8a18e00cd14eb2dee6972d800}{distance\+Sqr} (double x, double y, double x\+Scale, double y\+Scale)
\item 
virtual void \hyperlink{classOkular_1_1HighlightAnnotationPrivate_a325cad498885cdeb23efc48b10e35587}{set\+Annotation\+Properties} (const Q\+Dom\+Node \&node)
\item 
virtual \hyperlink{classOkular_1_1AnnotationPrivate}{Annotation\+Private} $\ast$ \hyperlink{classOkular_1_1HighlightAnnotationPrivate_a9b7c4c00430f696265e49ecad9c69f14}{get\+New\+Annotation\+Private} ()
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classOkular_1_1HighlightAnnotation_a63d2488735d1d6320e2e118743243999}{Highlight\+Annotation\+::\+Highlight\+Type} \hyperlink{classOkular_1_1HighlightAnnotationPrivate_a9d5963335b5a637d21b5737250da329b}{m\+\_\+highlight\+Type}
\item 
\hyperlink{classQList}{Q\+List}$<$ \hyperlink{classOkular_1_1HighlightAnnotation_1_1Quad}{Highlight\+Annotation\+::\+Quad} $>$ \hyperlink{classOkular_1_1HighlightAnnotationPrivate_aa822b72c9bf0a2001ed17ce4bedb04f0}{m\+\_\+highlight\+Quads}
\end{DoxyCompactItemize}


\subsection{Detailed Description}


Definition at line 1862 of file annotations.\+cpp.



\subsection{Constructor \& Destructor Documentation}
\hypertarget{classOkular_1_1HighlightAnnotationPrivate_a48de29138e8bde908f4ead60c32219e7}{\index{Okular\+::\+Highlight\+Annotation\+Private@{Okular\+::\+Highlight\+Annotation\+Private}!Highlight\+Annotation\+Private@{Highlight\+Annotation\+Private}}
\index{Highlight\+Annotation\+Private@{Highlight\+Annotation\+Private}!Okular\+::\+Highlight\+Annotation\+Private@{Okular\+::\+Highlight\+Annotation\+Private}}
\subsubsection[{Highlight\+Annotation\+Private}]{\setlength{\rightskip}{0pt plus 5cm}Okular\+::\+Highlight\+Annotation\+Private\+::\+Highlight\+Annotation\+Private (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}}\label{classOkular_1_1HighlightAnnotationPrivate_a48de29138e8bde908f4ead60c32219e7}


Definition at line 1865 of file annotations.\+cpp.


\begin{DoxyCode}
1866             : \hyperlink{classOkular_1_1AnnotationPrivate_affc5d14076f4606905c3c0cd2f6b9dc1}{AnnotationPrivate}(), \hyperlink{classOkular_1_1HighlightAnnotationPrivate_a9d5963335b5a637d21b5737250da329b}{m\_highlightType}( 
      \hyperlink{classOkular_1_1HighlightAnnotation_a63d2488735d1d6320e2e118743243999a250833fcd89a56dd46955dc287e1a3af}{HighlightAnnotation::Highlight} )
1867         \{
1868         \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\hypertarget{classOkular_1_1HighlightAnnotationPrivate_a9e9b792f43a4a1f050af1018d3118e32}{\index{Okular\+::\+Highlight\+Annotation\+Private@{Okular\+::\+Highlight\+Annotation\+Private}!base\+Transform@{base\+Transform}}
\index{base\+Transform@{base\+Transform}!Okular\+::\+Highlight\+Annotation\+Private@{Okular\+::\+Highlight\+Annotation\+Private}}
\subsubsection[{base\+Transform}]{\setlength{\rightskip}{0pt plus 5cm}void Highlight\+Annotation\+Private\+::base\+Transform (
\begin{DoxyParamCaption}
\item[{const Q\+Transform \&}]{matrix}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classOkular_1_1HighlightAnnotationPrivate_a9e9b792f43a4a1f050af1018d3118e32}


Reimplemented from \hyperlink{classOkular_1_1AnnotationPrivate_aa60e3513cd1a25f60afbdef5614683d2}{Okular\+::\+Annotation\+Private}.



Definition at line 1964 of file annotations.\+cpp.


\begin{DoxyCode}
1965 \{
1966     \hyperlink{classOkular_1_1AnnotationPrivate_aa60e3513cd1a25f60afbdef5614683d2}{AnnotationPrivate::baseTransform}( matrix );
1967 
1968     QMutableListIterator<HighlightAnnotation::Quad> it( \hyperlink{classOkular_1_1HighlightAnnotationPrivate_aa822b72c9bf0a2001ed17ce4bedb04f0}{m\_highlightQuads} );
1969     \textcolor{keywordflow}{while} ( it.hasNext() )
1970         it.next().transform( matrix );
1971 \}
\end{DoxyCode}
\hypertarget{classOkular_1_1HighlightAnnotationPrivate_a8285cfe8a18e00cd14eb2dee6972d800}{\index{Okular\+::\+Highlight\+Annotation\+Private@{Okular\+::\+Highlight\+Annotation\+Private}!distance\+Sqr@{distance\+Sqr}}
\index{distance\+Sqr@{distance\+Sqr}!Okular\+::\+Highlight\+Annotation\+Private@{Okular\+::\+Highlight\+Annotation\+Private}}
\subsubsection[{distance\+Sqr}]{\setlength{\rightskip}{0pt plus 5cm}double Highlight\+Annotation\+Private\+::distance\+Sqr (
\begin{DoxyParamCaption}
\item[{double}]{x, }
\item[{double}]{y, }
\item[{double}]{x\+Scale, }
\item[{double}]{y\+Scale}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classOkular_1_1HighlightAnnotationPrivate_a8285cfe8a18e00cd14eb2dee6972d800}
Determines the distance of the closest point of the annotation to the given point {\ttfamily x} {\ttfamily y} {\ttfamily x\+Scale} {\ttfamily y\+Scale} \begin{DoxySince}{Since}
0.\+17 
\end{DoxySince}


Reimplemented from \hyperlink{classOkular_1_1AnnotationPrivate_ab4288200b0dd46f33e4958a64ffac373}{Okular\+::\+Annotation\+Private}.



Definition at line 2023 of file annotations.\+cpp.


\begin{DoxyCode}
2024 \{
2025     \hyperlink{classOkular_1_1NormalizedPoint}{NormalizedPoint} point( x, y );
2026     \textcolor{keywordtype}{double} outsideDistance = DBL\_MAX;
2027     \textcolor{keywordflow}{foreach} ( \textcolor{keyword}{const} \hyperlink{classOkular_1_1HighlightAnnotation_1_1Quad}{HighlightAnnotation::Quad}& quad, 
      \hyperlink{classOkular_1_1HighlightAnnotationPrivate_aa822b72c9bf0a2001ed17ce4bedb04f0}{m\_highlightQuads} )
2028     \{
2029         \hyperlink{classQLinkedList}{QLinkedList<NormalizedPoint>} pathPoints;
2030 
2031         \textcolor{comment}{//first, we check if the point is within the area described by the 4 quads}
2032         \textcolor{comment}{//this is the case, if the point is always on one side of each segments delimiting the polygon:}
2033         pathPoints << quad.\hyperlink{classOkular_1_1HighlightAnnotation_1_1Quad_acb6ab9f7ca3003937f7829941f5a0d52}{transformedPoint}( 0 );
2034         \textcolor{keywordtype}{int} directionVote = 0;
2035         \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{int} i = 1; i < 5; ++i )
2036         \{
2037             \hyperlink{classOkular_1_1NormalizedPoint}{NormalizedPoint} thisPoint = quad.\hyperlink{classOkular_1_1HighlightAnnotation_1_1Quad_acb6ab9f7ca3003937f7829941f5a0d52}{transformedPoint}( i % 4 );
2038             directionVote += (isLeftOfVector( pathPoints.back(), thisPoint, point )) ? 1 : -1;
2039             pathPoints << thisPoint;
2040         \}
2041         \textcolor{keywordflow}{if} ( abs( directionVote ) == 4 )
2042             \textcolor{keywordflow}{return} 0;
2043 
2044         \textcolor{comment}{//if that's not the case, we treat the outline as path and simply determine}
2045         \textcolor{comment}{//the distance from the path to the point}
2046         \textcolor{keyword}{const} \textcolor{keywordtype}{double} thisOutsideDistance = \hyperlink{classOkular_1_1HighlightAnnotationPrivate_a8285cfe8a18e00cd14eb2dee6972d800}{::distanceSqr}( x, y, xScale, yScale, pathPoints );
2047         \textcolor{keywordflow}{if} ( thisOutsideDistance < outsideDistance )
2048             outsideDistance = thisOutsideDistance;
2049     \}
2050 
2051     \textcolor{keywordflow}{return} outsideDistance;
2052 \}
\end{DoxyCode}
\hypertarget{classOkular_1_1HighlightAnnotationPrivate_a9b7c4c00430f696265e49ecad9c69f14}{\index{Okular\+::\+Highlight\+Annotation\+Private@{Okular\+::\+Highlight\+Annotation\+Private}!get\+New\+Annotation\+Private@{get\+New\+Annotation\+Private}}
\index{get\+New\+Annotation\+Private@{get\+New\+Annotation\+Private}!Okular\+::\+Highlight\+Annotation\+Private@{Okular\+::\+Highlight\+Annotation\+Private}}
\subsubsection[{get\+New\+Annotation\+Private}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Annotation\+Private} $\ast$ Highlight\+Annotation\+Private\+::get\+New\+Annotation\+Private (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classOkular_1_1HighlightAnnotationPrivate_a9b7c4c00430f696265e49ecad9c69f14}


Implements \hyperlink{classOkular_1_1AnnotationPrivate_a4a27afb6108cff892c7bcccd8ba3aafa}{Okular\+::\+Annotation\+Private}.



Definition at line 2018 of file annotations.\+cpp.


\begin{DoxyCode}
2019 \{
2020     \textcolor{keywordflow}{return} \textcolor{keyword}{new} \hyperlink{classOkular_1_1HighlightAnnotationPrivate_a48de29138e8bde908f4ead60c32219e7}{HighlightAnnotationPrivate}();
2021 \}
\end{DoxyCode}
\hypertarget{classOkular_1_1HighlightAnnotationPrivate_a325cad498885cdeb23efc48b10e35587}{\index{Okular\+::\+Highlight\+Annotation\+Private@{Okular\+::\+Highlight\+Annotation\+Private}!set\+Annotation\+Properties@{set\+Annotation\+Properties}}
\index{set\+Annotation\+Properties@{set\+Annotation\+Properties}!Okular\+::\+Highlight\+Annotation\+Private@{Okular\+::\+Highlight\+Annotation\+Private}}
\subsubsection[{set\+Annotation\+Properties}]{\setlength{\rightskip}{0pt plus 5cm}void Highlight\+Annotation\+Private\+::set\+Annotation\+Properties (
\begin{DoxyParamCaption}
\item[{const Q\+Dom\+Node \&}]{node}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classOkular_1_1HighlightAnnotationPrivate_a325cad498885cdeb23efc48b10e35587}


Reimplemented from \hyperlink{classOkular_1_1AnnotationPrivate_a5fc7b450fa8c7e2717372e7394c3aa39}{Okular\+::\+Annotation\+Private}.



Definition at line 1973 of file annotations.\+cpp.


\begin{DoxyCode}
1974 \{
1975     \hyperlink{classOkular_1_1AnnotationPrivate_a5fc7b450fa8c7e2717372e7394c3aa39}{Okular::AnnotationPrivate::setAnnotationProperties}(
      node);
1976     \hyperlink{classOkular_1_1HighlightAnnotationPrivate_aa822b72c9bf0a2001ed17ce4bedb04f0}{m\_highlightQuads}.clear();
1977 
1978     \textcolor{comment}{// loop through the whole children looking for a 'hl' element}
1979     QDomNode subNode = node.firstChild();
1980     \textcolor{keywordflow}{while}( subNode.isElement() )
1981     \{
1982         QDomElement e = subNode.toElement();
1983         subNode = subNode.nextSibling();
1984         \textcolor{keywordflow}{if} ( e.tagName() != \textcolor{stringliteral}{"hl"} )
1985             \textcolor{keywordflow}{continue};
1986 
1987         \textcolor{comment}{// parse the attributes}
1988         \textcolor{keywordflow}{if} ( e.hasAttribute( \textcolor{stringliteral}{"type"} ) )
1989             \hyperlink{classOkular_1_1HighlightAnnotationPrivate_a9d5963335b5a637d21b5737250da329b}{m\_highlightType} = (\hyperlink{classOkular_1_1HighlightAnnotation_a63d2488735d1d6320e2e118743243999}{HighlightAnnotation::HighlightType}
      )e.attribute( \textcolor{stringliteral}{"type"} ).toInt();
1990 
1991         \textcolor{comment}{// parse all 'quad' subnodes}
1992         QDomNode quadNode = e.firstChild();
1993         \textcolor{keywordflow}{for} ( ; quadNode.isElement(); quadNode = quadNode.nextSibling() )
1994         \{
1995             QDomElement qe = quadNode.toElement();
1996             \textcolor{keywordflow}{if} ( qe.tagName() != \textcolor{stringliteral}{"quad"} )
1997                 \textcolor{keywordflow}{continue};
1998 
1999             \hyperlink{classOkular_1_1HighlightAnnotation_1_1Quad}{HighlightAnnotation::Quad} q;
2000             q.\hyperlink{classOkular_1_1HighlightAnnotation_1_1Quad_ab9ce9af2562a336d4ef3d75d468c7eed}{setPoint}( \hyperlink{classOkular_1_1NormalizedPoint}{NormalizedPoint}( qe.attribute( \textcolor{stringliteral}{"ax"}, \textcolor{stringliteral}{"0.0"} ).toDouble(), qe.
      attribute( \textcolor{stringliteral}{"ay"}, \textcolor{stringliteral}{"0.0"} ).toDouble() ), 0 );
2001             q.\hyperlink{classOkular_1_1HighlightAnnotation_1_1Quad_ab9ce9af2562a336d4ef3d75d468c7eed}{setPoint}( \hyperlink{classOkular_1_1NormalizedPoint}{NormalizedPoint}( qe.attribute( \textcolor{stringliteral}{"bx"}, \textcolor{stringliteral}{"0.0"} ).toDouble(), qe.
      attribute( \textcolor{stringliteral}{"by"}, \textcolor{stringliteral}{"0.0"} ).toDouble() ), 1 );
2002             q.\hyperlink{classOkular_1_1HighlightAnnotation_1_1Quad_ab9ce9af2562a336d4ef3d75d468c7eed}{setPoint}( \hyperlink{classOkular_1_1NormalizedPoint}{NormalizedPoint}( qe.attribute( \textcolor{stringliteral}{"cx"}, \textcolor{stringliteral}{"0.0"} ).toDouble(), qe.
      attribute( \textcolor{stringliteral}{"cy"}, \textcolor{stringliteral}{"0.0"} ).toDouble() ), 2 );
2003             q.\hyperlink{classOkular_1_1HighlightAnnotation_1_1Quad_ab9ce9af2562a336d4ef3d75d468c7eed}{setPoint}( \hyperlink{classOkular_1_1NormalizedPoint}{NormalizedPoint}( qe.attribute( \textcolor{stringliteral}{"dx"}, \textcolor{stringliteral}{"0.0"} ).toDouble(), qe.
      attribute( \textcolor{stringliteral}{"dy"}, \textcolor{stringliteral}{"0.0"} ).toDouble() ), 3 );
2004             q.\hyperlink{classOkular_1_1HighlightAnnotation_1_1Quad_af6cd18515ceea4f9523d9c40cf646551}{setCapStart}( qe.hasAttribute( \textcolor{stringliteral}{"start"} ) );
2005             q.\hyperlink{classOkular_1_1HighlightAnnotation_1_1Quad_a0dcc70a6b9830a27bd6b6ad5f542992d}{setCapEnd}( qe.hasAttribute( \textcolor{stringliteral}{"end"} ) );
2006             q.\hyperlink{classOkular_1_1HighlightAnnotation_1_1Quad_ada9f47fe278053cf8a680140c7194ec3}{setFeather}( qe.attribute( \textcolor{stringliteral}{"feather"}, \textcolor{stringliteral}{"0.1"} ).toDouble() );
2007 
2008             q.\hyperlink{classOkular_1_1HighlightAnnotation_1_1Quad_ae0209e81742a659d430d02e3892aa3f6}{transform}( QTransform() );
2009 
2010             \hyperlink{classOkular_1_1HighlightAnnotationPrivate_aa822b72c9bf0a2001ed17ce4bedb04f0}{m\_highlightQuads}.append( q );
2011         \}
2012 
2013         \textcolor{comment}{// loading complete}
2014         \textcolor{keywordflow}{break};
2015     \}
2016 \}
\end{DoxyCode}
\hypertarget{classOkular_1_1HighlightAnnotationPrivate_a3b4f24f4078952bcaf75bf1e9411d581}{\index{Okular\+::\+Highlight\+Annotation\+Private@{Okular\+::\+Highlight\+Annotation\+Private}!transform@{transform}}
\index{transform@{transform}!Okular\+::\+Highlight\+Annotation\+Private@{Okular\+::\+Highlight\+Annotation\+Private}}
\subsubsection[{transform}]{\setlength{\rightskip}{0pt plus 5cm}void Highlight\+Annotation\+Private\+::transform (
\begin{DoxyParamCaption}
\item[{const Q\+Transform \&}]{matrix}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classOkular_1_1HighlightAnnotationPrivate_a3b4f24f4078952bcaf75bf1e9411d581}


Reimplemented from \hyperlink{classOkular_1_1AnnotationPrivate_a0d340a5ed89975edc173b72569f1e3f0}{Okular\+::\+Annotation\+Private}.



Definition at line 1955 of file annotations.\+cpp.


\begin{DoxyCode}
1956 \{
1957     \hyperlink{classOkular_1_1AnnotationPrivate_a0d340a5ed89975edc173b72569f1e3f0}{AnnotationPrivate::transform}( matrix );
1958 
1959     QMutableListIterator<HighlightAnnotation::Quad> it( \hyperlink{classOkular_1_1HighlightAnnotationPrivate_aa822b72c9bf0a2001ed17ce4bedb04f0}{m\_highlightQuads} );
1960     \textcolor{keywordflow}{while} ( it.hasNext() )
1961         it.next().transform( matrix );
1962 \}
\end{DoxyCode}


\subsection{Member Data Documentation}
\hypertarget{classOkular_1_1HighlightAnnotationPrivate_aa822b72c9bf0a2001ed17ce4bedb04f0}{\index{Okular\+::\+Highlight\+Annotation\+Private@{Okular\+::\+Highlight\+Annotation\+Private}!m\+\_\+highlight\+Quads@{m\+\_\+highlight\+Quads}}
\index{m\+\_\+highlight\+Quads@{m\+\_\+highlight\+Quads}!Okular\+::\+Highlight\+Annotation\+Private@{Okular\+::\+Highlight\+Annotation\+Private}}
\subsubsection[{m\+\_\+highlight\+Quads}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Q\+List}$<$ {\bf Highlight\+Annotation\+::\+Quad} $>$ Okular\+::\+Highlight\+Annotation\+Private\+::m\+\_\+highlight\+Quads}}\label{classOkular_1_1HighlightAnnotationPrivate_aa822b72c9bf0a2001ed17ce4bedb04f0}


Definition at line 1877 of file annotations.\+cpp.

\hypertarget{classOkular_1_1HighlightAnnotationPrivate_a9d5963335b5a637d21b5737250da329b}{\index{Okular\+::\+Highlight\+Annotation\+Private@{Okular\+::\+Highlight\+Annotation\+Private}!m\+\_\+highlight\+Type@{m\+\_\+highlight\+Type}}
\index{m\+\_\+highlight\+Type@{m\+\_\+highlight\+Type}!Okular\+::\+Highlight\+Annotation\+Private@{Okular\+::\+Highlight\+Annotation\+Private}}
\subsubsection[{m\+\_\+highlight\+Type}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Highlight\+Annotation\+::\+Highlight\+Type} Okular\+::\+Highlight\+Annotation\+Private\+::m\+\_\+highlight\+Type}}\label{classOkular_1_1HighlightAnnotationPrivate_a9d5963335b5a637d21b5737250da329b}


Definition at line 1876 of file annotations.\+cpp.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
core/\hyperlink{annotations_8cpp}{annotations.\+cpp}\end{DoxyCompactItemize}
