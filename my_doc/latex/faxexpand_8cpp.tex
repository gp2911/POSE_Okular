\hypertarget{faxexpand_8cpp}{\section{generators/fax/faxexpand.cpp File Reference}
\label{faxexpand_8cpp}\index{generators/fax/faxexpand.\+cpp@{generators/fax/faxexpand.\+cpp}}
}
{\ttfamily \#include $<$stdlib.\+h$>$}\\*
{\ttfamily \#include $<$stdio.\+h$>$}\\*
{\ttfamily \#include $<$sys/types.\+h$>$}\\*
{\ttfamily \#include $<$kdebug.\+h$>$}\\*
{\ttfamily \#include \char`\"{}faxexpand.\+h\char`\"{}}\\*
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{faxexpand_8cpp_afe0534ca994b08a0ec5edf614aa48e9c}{verbose}~false
\item 
\#define \hyperlink{faxexpand_8cpp_a31b0f8f92299cb8727dcce822701ce30}{Need\+Bits}(n)
\item 
\#define \hyperlink{faxexpand_8cpp_ad76ef429faf468b9d16c8592128b7373}{Get\+Bits}(n)~(Bit\+Acc \& ((1$<$$<$(n))-\/1))
\item 
\#define \hyperlink{faxexpand_8cpp_a4cd18b63c38e3e45095d7170b416151f}{Clr\+Bits}(n)
\item 
\#define \hyperlink{faxexpand_8cpp_a750f37ca16b48ad2b808c56cb4c0a873}{L\+O\+O\+K\+U\+P}(wid, tab)
\item 
\#define \hyperlink{faxexpand_8cpp_ae202ddfb332c083286badc478d9be98f}{S\+E\+T\+V\+A\+L}(x)
\item 
\#define \hyperlink{faxexpand_8cpp_a625eda66876b70fa2a555c37b220f06a}{dumpruns}(runs)
\item 
\#define \hyperlink{faxexpand_8cpp_a3b18273c163f8933af84e9709717de57}{End\+Of\+Data}(pn)~(sp $>$= pn-\/$>$data + pn-\/$>$length/sizeof($\ast$pn-\/$>$data))
\item 
\#define \hyperlink{faxexpand_8cpp_a0fd2e96399f498a8469d305b3f20d8a7}{S\+K\+I\+P\+\_\+\+E\+O\+L}
\item 
\#define \hyperlink{faxexpand_8cpp_a43c2433a5cb5d94dbf57c397f804834f}{eol2lab}~E\+O\+L2\+:
\item 
\#define \hyperlink{faxexpand_8cpp_a9e898ae20a23b0a6c8d1cc06b57b2c33}{expand1d}()
\item 
\#define \hyperlink{faxexpand_8cpp_a5bd62cb676ff55cc6df0c4cfccb88ee5}{C\+H\+E\+C\+K\+\_\+b1}
\item 
\#define \hyperlink{faxexpand_8cpp_a8f4cf775ca1e5756baad1dcd8fe26116}{expand2d}(eolab)
\item 
\#define \hyperlink{faxexpand_8cpp_a0fd2e96399f498a8469d305b3f20d8a7}{S\+K\+I\+P\+\_\+\+E\+O\+L}
\item 
\#define \hyperlink{faxexpand_8cpp_a43c2433a5cb5d94dbf57c397f804834f}{eol2lab}
\item 
\#define \hyperlink{faxexpand_8cpp_aba485a0392add91c143252d49a5dd45b}{check}(v)
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{faxexpand_8cpp_a5d8197a3325f410d68ced58a2409f3a6}{M\+Hexpand} (struct \hyperlink{classpagenode}{pagenode} $\ast$pn, \hyperlink{faxexpand_8h_ac0e224bb80ed597fc5cf7ac628e9ad5c}{drawfunc} df)
\item 
void \hyperlink{faxexpand_8cpp_ad8f94fd37a1722246b1475382606c874}{g31expand} (struct \hyperlink{classpagenode}{pagenode} $\ast$pn, \hyperlink{faxexpand_8h_ac0e224bb80ed597fc5cf7ac628e9ad5c}{drawfunc} df)
\item 
void \hyperlink{faxexpand_8cpp_a9631b70bf811d38db1c66850116902cc}{g32expand} (struct \hyperlink{classpagenode}{pagenode} $\ast$pn, \hyperlink{faxexpand_8h_ac0e224bb80ed597fc5cf7ac628e9ad5c}{drawfunc} df)
\item 
void \hyperlink{faxexpand_8cpp_a37f6116fbe2a2fd58d7c3203127672f8}{g4expand} (struct \hyperlink{classpagenode}{pagenode} $\ast$pn, \hyperlink{faxexpand_8h_ac0e224bb80ed597fc5cf7ac628e9ad5c}{drawfunc} df)
\item 
int \hyperlink{faxexpand_8cpp_ad21f38a7c1b4b9df58d2927d2a46fe17}{G3count} (struct \hyperlink{classpagenode}{pagenode} $\ast$pn, int two\+D)
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\hypertarget{faxexpand_8cpp_aba485a0392add91c143252d49a5dd45b}{\index{faxexpand.\+cpp@{faxexpand.\+cpp}!check@{check}}
\index{check@{check}!faxexpand.\+cpp@{faxexpand.\+cpp}}
\subsubsection[{check}]{\setlength{\rightskip}{0pt plus 5cm}\#define check(
\begin{DoxyParamCaption}
\item[{}]{v}
\end{DoxyParamCaption}
)}}\label{faxexpand_8cpp_aba485a0392add91c143252d49a5dd45b}
{\bfseries Value\+:}
\begin{DoxyCode}
\textcolor{keywordflow}{do} \{                            \(\backslash\)
    prezeros = zerotab[v];                      \(\backslash\)
    postzeros = prezeros & 15;                      \(\backslash\)
    prezeros >>= 4;                         \(\backslash\)
    if (prezeros == 8) \{                        \(\backslash\)
    zeros += 8;                         \(\backslash\)
    continue;                           \(\backslash\)
    \}                                   \(\backslash\)
    if (zeros + prezeros < 11) \{                    \(\backslash\)
    empty = 0;                          \(\backslash\)
    zeros = postzeros;                      \(\backslash\)
    continue;                           \(\backslash\)
    \}                                   \(\backslash\)
    zeros = postzeros;                          \(\backslash\)
    if (empty)                              \(\backslash\)
    EOLcnt++;                           \(\backslash\)
    lines++;                                \(\backslash\)
    empty = 1;                              \(\backslash\)
\} \textcolor{keywordflow}{while} (0)
\end{DoxyCode}


Definition at line 698 of file faxexpand.\+cpp.

\hypertarget{faxexpand_8cpp_a5bd62cb676ff55cc6df0c4cfccb88ee5}{\index{faxexpand.\+cpp@{faxexpand.\+cpp}!C\+H\+E\+C\+K\+\_\+b1@{C\+H\+E\+C\+K\+\_\+b1}}
\index{C\+H\+E\+C\+K\+\_\+b1@{C\+H\+E\+C\+K\+\_\+b1}!faxexpand.\+cpp@{faxexpand.\+cpp}}
\subsubsection[{C\+H\+E\+C\+K\+\_\+b1}]{\setlength{\rightskip}{0pt plus 5cm}\#define C\+H\+E\+C\+K\+\_\+b1}}\label{faxexpand_8cpp_a5bd62cb676ff55cc6df0c4cfccb88ee5}
{\bfseries Value\+:}
\begin{DoxyCode}
\textcolor{keywordflow}{do} \{                            \(\backslash\)
    if (pa != thisrun) while (b1 <= a0 && b1 < lastx) \{         \(\backslash\)
    b1 += pb[0] + pb[1];                        \(\backslash\)
    pb += 2;                            \(\backslash\)
    \}                                   \(\backslash\)
\} \textcolor{keywordflow}{while} (0)
\end{DoxyCode}


Definition at line 184 of file faxexpand.\+cpp.

\hypertarget{faxexpand_8cpp_a4cd18b63c38e3e45095d7170b416151f}{\index{faxexpand.\+cpp@{faxexpand.\+cpp}!Clr\+Bits@{Clr\+Bits}}
\index{Clr\+Bits@{Clr\+Bits}!faxexpand.\+cpp@{faxexpand.\+cpp}}
\subsubsection[{Clr\+Bits}]{\setlength{\rightskip}{0pt plus 5cm}\#define Clr\+Bits(
\begin{DoxyParamCaption}
\item[{}]{n}
\end{DoxyParamCaption}
)}}\label{faxexpand_8cpp_a4cd18b63c38e3e45095d7170b416151f}
{\bfseries Value\+:}
\begin{DoxyCode}
\textcolor{keywordflow}{do} \{                            \(\backslash\)
    BitAcc >>= (n);                         \(\backslash\)
    BitsAvail -= (n);                           \(\backslash\)
\} \textcolor{keywordflow}{while} (0)
\end{DoxyCode}


Definition at line 44 of file faxexpand.\+cpp.

\hypertarget{faxexpand_8cpp_a625eda66876b70fa2a555c37b220f06a}{\index{faxexpand.\+cpp@{faxexpand.\+cpp}!dumpruns@{dumpruns}}
\index{dumpruns@{dumpruns}!faxexpand.\+cpp@{faxexpand.\+cpp}}
\subsubsection[{dumpruns}]{\setlength{\rightskip}{0pt plus 5cm}\#define dumpruns(
\begin{DoxyParamCaption}
\item[{}]{runs}
\end{DoxyParamCaption}
)}}\label{faxexpand_8cpp_a625eda66876b70fa2a555c37b220f06a}
{\bfseries Value\+:}
\begin{DoxyCode}
\textcolor{keywordflow}{do} \{                        \(\backslash\)
    printf(\textcolor{stringliteral}{"-------------------- %d\(\backslash\)n"}, LineNum);           \(\backslash\)
    for (pa = runs, a0 = 0; a0 < lastx; a0 += *pa++)            \(\backslash\)
    printf(\textcolor{stringliteral}{"%4d %d\(\backslash\)n"}, a0, *pa);                    \(\backslash\)
\} \textcolor{keywordflow}{while} (0)
\end{DoxyCode}


Definition at line 101 of file faxexpand.\+cpp.

\hypertarget{faxexpand_8cpp_a3b18273c163f8933af84e9709717de57}{\index{faxexpand.\+cpp@{faxexpand.\+cpp}!End\+Of\+Data@{End\+Of\+Data}}
\index{End\+Of\+Data@{End\+Of\+Data}!faxexpand.\+cpp@{faxexpand.\+cpp}}
\subsubsection[{End\+Of\+Data}]{\setlength{\rightskip}{0pt plus 5cm}\#define End\+Of\+Data(
\begin{DoxyParamCaption}
\item[{}]{pn}
\end{DoxyParamCaption}
)~(sp $>$= pn-\/$>$data + pn-\/$>$length/sizeof($\ast$pn-\/$>$data))}}\label{faxexpand_8cpp_a3b18273c163f8933af84e9709717de57}


Definition at line 107 of file faxexpand.\+cpp.

\hypertarget{faxexpand_8cpp_a43c2433a5cb5d94dbf57c397f804834f}{\index{faxexpand.\+cpp@{faxexpand.\+cpp}!eol2lab@{eol2lab}}
\index{eol2lab@{eol2lab}!faxexpand.\+cpp@{faxexpand.\+cpp}}
\subsubsection[{eol2lab}]{\setlength{\rightskip}{0pt plus 5cm}\#define eol2lab~E\+O\+L2\+:}}\label{faxexpand_8cpp_a43c2433a5cb5d94dbf57c397f804834f}


Definition at line 599 of file faxexpand.\+cpp.

\hypertarget{faxexpand_8cpp_a43c2433a5cb5d94dbf57c397f804834f}{\index{faxexpand.\+cpp@{faxexpand.\+cpp}!eol2lab@{eol2lab}}
\index{eol2lab@{eol2lab}!faxexpand.\+cpp@{faxexpand.\+cpp}}
\subsubsection[{eol2lab}]{\setlength{\rightskip}{0pt plus 5cm}\#define eol2lab}}\label{faxexpand_8cpp_a43c2433a5cb5d94dbf57c397f804834f}


Definition at line 599 of file faxexpand.\+cpp.

\hypertarget{faxexpand_8cpp_a9e898ae20a23b0a6c8d1cc06b57b2c33}{\index{faxexpand.\+cpp@{faxexpand.\+cpp}!expand1d@{expand1d}}
\index{expand1d@{expand1d}!faxexpand.\+cpp@{faxexpand.\+cpp}}
\subsubsection[{expand1d}]{\setlength{\rightskip}{0pt plus 5cm}\#define expand1d(
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{faxexpand_8cpp_a9e898ae20a23b0a6c8d1cc06b57b2c33}


Definition at line 126 of file faxexpand.\+cpp.

\hypertarget{faxexpand_8cpp_a8f4cf775ca1e5756baad1dcd8fe26116}{\index{faxexpand.\+cpp@{faxexpand.\+cpp}!expand2d@{expand2d}}
\index{expand2d@{expand2d}!faxexpand.\+cpp@{faxexpand.\+cpp}}
\subsubsection[{expand2d}]{\setlength{\rightskip}{0pt plus 5cm}\#define expand2d(
\begin{DoxyParamCaption}
\item[{}]{eolab}
\end{DoxyParamCaption}
)}}\label{faxexpand_8cpp_a8f4cf775ca1e5756baad1dcd8fe26116}


Definition at line 191 of file faxexpand.\+cpp.

\hypertarget{faxexpand_8cpp_ad76ef429faf468b9d16c8592128b7373}{\index{faxexpand.\+cpp@{faxexpand.\+cpp}!Get\+Bits@{Get\+Bits}}
\index{Get\+Bits@{Get\+Bits}!faxexpand.\+cpp@{faxexpand.\+cpp}}
\subsubsection[{Get\+Bits}]{\setlength{\rightskip}{0pt plus 5cm}\#define Get\+Bits(
\begin{DoxyParamCaption}
\item[{}]{n}
\end{DoxyParamCaption}
)~(Bit\+Acc \& ((1$<$$<$(n))-\/1))}}\label{faxexpand_8cpp_ad76ef429faf468b9d16c8592128b7373}


Definition at line 43 of file faxexpand.\+cpp.

\hypertarget{faxexpand_8cpp_a750f37ca16b48ad2b808c56cb4c0a873}{\index{faxexpand.\+cpp@{faxexpand.\+cpp}!L\+O\+O\+K\+U\+P@{L\+O\+O\+K\+U\+P}}
\index{L\+O\+O\+K\+U\+P@{L\+O\+O\+K\+U\+P}!faxexpand.\+cpp@{faxexpand.\+cpp}}
\subsubsection[{L\+O\+O\+K\+U\+P}]{\setlength{\rightskip}{0pt plus 5cm}\#define L\+O\+O\+K\+U\+P(
\begin{DoxyParamCaption}
\item[{}]{wid, }
\item[{}]{tab}
\end{DoxyParamCaption}
)}}\label{faxexpand_8cpp_a750f37ca16b48ad2b808c56cb4c0a873}
{\bfseries Value\+:}
\begin{DoxyCode}
\textcolor{keywordflow}{do} \{                        \hyperlink{faxexpand_8cpp_a31b0f8f92299cb8727dcce822701ce30}{\(\backslash\)}
\hyperlink{faxexpand_8cpp_a31b0f8f92299cb8727dcce822701ce30}{    NeedBits}(wid);                          \(\backslash\)
    TabEnt = tab + \hyperlink{faxexpand_8cpp_ad76ef429faf468b9d16c8592128b7373}{GetBits}(wid);                 \hyperlink{faxexpand_8cpp_a4cd18b63c38e3e45095d7170b416151f}{\(\backslash\)}
\hyperlink{faxexpand_8cpp_a4cd18b63c38e3e45095d7170b416151f}{    ClrBits}(TabEnt->Width);                      \(\backslash\)
\} \textcolor{keywordflow}{while} (0)
\end{DoxyCode}


Definition at line 88 of file faxexpand.\+cpp.

\hypertarget{faxexpand_8cpp_a31b0f8f92299cb8727dcce822701ce30}{\index{faxexpand.\+cpp@{faxexpand.\+cpp}!Need\+Bits@{Need\+Bits}}
\index{Need\+Bits@{Need\+Bits}!faxexpand.\+cpp@{faxexpand.\+cpp}}
\subsubsection[{Need\+Bits}]{\setlength{\rightskip}{0pt plus 5cm}\#define Need\+Bits(
\begin{DoxyParamCaption}
\item[{}]{n}
\end{DoxyParamCaption}
)}}\label{faxexpand_8cpp_a31b0f8f92299cb8727dcce822701ce30}
{\bfseries Value\+:}
\begin{DoxyCode}
\textcolor{keywordflow}{do} \{                        \(\backslash\)
    if (BitsAvail < (n)) \{                      \(\backslash\)
    BitAcc |= *sp++ << BitsAvail;                   \(\backslash\)
    BitsAvail += 16;                        \(\backslash\)
    \}                                   \(\backslash\)
\} \textcolor{keywordflow}{while} (0)
\end{DoxyCode}


Definition at line 37 of file faxexpand.\+cpp.

\hypertarget{faxexpand_8cpp_ae202ddfb332c083286badc478d9be98f}{\index{faxexpand.\+cpp@{faxexpand.\+cpp}!S\+E\+T\+V\+A\+L@{S\+E\+T\+V\+A\+L}}
\index{S\+E\+T\+V\+A\+L@{S\+E\+T\+V\+A\+L}!faxexpand.\+cpp@{faxexpand.\+cpp}}
\subsubsection[{S\+E\+T\+V\+A\+L}]{\setlength{\rightskip}{0pt plus 5cm}\#define S\+E\+T\+V\+A\+L(
\begin{DoxyParamCaption}
\item[{}]{x}
\end{DoxyParamCaption}
)}}\label{faxexpand_8cpp_ae202ddfb332c083286badc478d9be98f}
{\bfseries Value\+:}
\begin{DoxyCode}
\textcolor{keywordflow}{do} \{                            \(\backslash\)
    *pa++ = RunLength + (x);                        \(\backslash\)
    a0 += x;                                \(\backslash\)
    RunLength = 0;                          \(\backslash\)
\} \textcolor{keywordflow}{while} (0)
\end{DoxyCode}


Definition at line 94 of file faxexpand.\+cpp.

\hypertarget{faxexpand_8cpp_a0fd2e96399f498a8469d305b3f20d8a7}{\index{faxexpand.\+cpp@{faxexpand.\+cpp}!S\+K\+I\+P\+\_\+\+E\+O\+L@{S\+K\+I\+P\+\_\+\+E\+O\+L}}
\index{S\+K\+I\+P\+\_\+\+E\+O\+L@{S\+K\+I\+P\+\_\+\+E\+O\+L}!faxexpand.\+cpp@{faxexpand.\+cpp}}
\subsubsection[{S\+K\+I\+P\+\_\+\+E\+O\+L}]{\setlength{\rightskip}{0pt plus 5cm}\#define S\+K\+I\+P\+\_\+\+E\+O\+L}}\label{faxexpand_8cpp_a0fd2e96399f498a8469d305b3f20d8a7}
{\bfseries Value\+:}
\begin{DoxyCode}
\textcolor{keywordflow}{do} \{                            \(\backslash\)
    while (!\hyperlink{faxexpand_8cpp_a3b18273c163f8933af84e9709717de57}{EndOfData}(pn)) \{                       \hyperlink{faxexpand_8cpp_a31b0f8f92299cb8727dcce822701ce30}{\(\backslash\)}
\hyperlink{faxexpand_8cpp_a31b0f8f92299cb8727dcce822701ce30}{    NeedBits}(11);                          \(\backslash\)
    if (\hyperlink{faxexpand_8cpp_ad76ef429faf468b9d16c8592128b7373}{GetBits}(11) == 0)                        \(\backslash\)
        break;                          \hyperlink{faxexpand_8cpp_a4cd18b63c38e3e45095d7170b416151f}{\(\backslash\)}
\hyperlink{faxexpand_8cpp_a4cd18b63c38e3e45095d7170b416151f}{    ClrBits}(1);                         \(\backslash\)
    \}                                   \hyperlink{faxexpand_8cpp_a4cd18b63c38e3e45095d7170b416151f}{\(\backslash\)}
\hyperlink{faxexpand_8cpp_a4cd18b63c38e3e45095d7170b416151f}{    ClrBits}(11);                         \(\backslash\)
    goto EOL;                               \(\backslash\)
\} \textcolor{keywordflow}{while} (0)
\end{DoxyCode}


Definition at line 593 of file faxexpand.\+cpp.

\hypertarget{faxexpand_8cpp_a0fd2e96399f498a8469d305b3f20d8a7}{\index{faxexpand.\+cpp@{faxexpand.\+cpp}!S\+K\+I\+P\+\_\+\+E\+O\+L@{S\+K\+I\+P\+\_\+\+E\+O\+L}}
\index{S\+K\+I\+P\+\_\+\+E\+O\+L@{S\+K\+I\+P\+\_\+\+E\+O\+L}!faxexpand.\+cpp@{faxexpand.\+cpp}}
\subsubsection[{S\+K\+I\+P\+\_\+\+E\+O\+L}]{\setlength{\rightskip}{0pt plus 5cm}\#define S\+K\+I\+P\+\_\+\+E\+O\+L}}\label{faxexpand_8cpp_a0fd2e96399f498a8469d305b3f20d8a7}
{\bfseries Value\+:}
\begin{DoxyCode}
\textcolor{keywordflow}{do} \{                            \(\backslash\)
    if (\hyperlink{faxexpand_8cpp_afe0534ca994b08a0ec5edf614aa48e9c}{verbose})                         \(\backslash\)
        kError() << \textcolor{stringliteral}{"Line "} << LineNum << \textcolor{stringliteral}{": G4 coding error\(\backslash\)n"};       \(\backslash\)
    free(run0);                             \(\backslash\)
    return;                             \(\backslash\)
\} \textcolor{keywordflow}{while} (0)
\end{DoxyCode}


Definition at line 593 of file faxexpand.\+cpp.

\hypertarget{faxexpand_8cpp_afe0534ca994b08a0ec5edf614aa48e9c}{\index{faxexpand.\+cpp@{faxexpand.\+cpp}!verbose@{verbose}}
\index{verbose@{verbose}!faxexpand.\+cpp@{faxexpand.\+cpp}}
\subsubsection[{verbose}]{\setlength{\rightskip}{0pt plus 5cm}\#define verbose~false}}\label{faxexpand_8cpp_afe0534ca994b08a0ec5edf614aa48e9c}


Definition at line 30 of file faxexpand.\+cpp.



\subsection{Function Documentation}
\hypertarget{faxexpand_8cpp_ad8f94fd37a1722246b1475382606c874}{\index{faxexpand.\+cpp@{faxexpand.\+cpp}!g31expand@{g31expand}}
\index{g31expand@{g31expand}!faxexpand.\+cpp@{faxexpand.\+cpp}}
\subsubsection[{g31expand}]{\setlength{\rightskip}{0pt plus 5cm}void g31expand (
\begin{DoxyParamCaption}
\item[{struct {\bf pagenode} $\ast$}]{pn, }
\item[{{\bf drawfunc}}]{df}
\end{DoxyParamCaption}
)}}\label{faxexpand_8cpp_ad8f94fd37a1722246b1475382606c874}


Definition at line 399 of file faxexpand.\+cpp.


\begin{DoxyCode}
400 \{
401     \textcolor{keywordtype}{int} a0;         \textcolor{comment}{/* reference element */}
402     \textcolor{keywordtype}{int} lastx;          \textcolor{comment}{/* copy line width to register */}
403     \hyperlink{faxexpand_8h_ad9a3ae0942e0e49005bcf1462c7bc875}{t32bits} BitAcc;      \textcolor{comment}{/* bit accumulator */}
404     \textcolor{keywordtype}{int} BitsAvail;      \textcolor{comment}{/* # valid bits in BitAcc */}
405     \textcolor{keywordtype}{int} RunLength;      \textcolor{comment}{/* Length of current run */}
406     \hyperlink{faxexpand_8h_adbe0cc2e2aa9b9127df55d505f059631}{t16bits} *sp;     \textcolor{comment}{/* pointer into compressed data */}
407     \hyperlink{faxexpand_8h_abb85bbcaaab5f47b32c9c44b6b5afc0d}{pixnum} *pa;           \textcolor{comment}{/* pointer into new line */}
408     \textcolor{keywordtype}{int} EOLcnt;         \textcolor{comment}{/* number of consecutive EOLs */}
409     \textcolor{keywordtype}{int} LineNum;        \textcolor{comment}{/* line number */}
410     \hyperlink{faxexpand_8h_abb85bbcaaab5f47b32c9c44b6b5afc0d}{pixnum} *runs;     \textcolor{comment}{/* list of run lengths */}
411     \textcolor{keyword}{struct }\hyperlink{structtabent}{tabent} *TabEnt;
412 
413     sp = pn->\hyperlink{classpagenode_af5c9ccfd1af1ac996caeb2518cbc739d}{data};
414     BitAcc = 0;
415     BitsAvail = 0;
416     lastx = pn->\hyperlink{classpagenode_a2be79286e9fc2179f6e3f97dc72a56fa}{size}.width();
417     runs = (\hyperlink{faxexpand_8h_abb85bbcaaab5f47b32c9c44b6b5afc0d}{pixnum} *) malloc(lastx * \textcolor{keyword}{sizeof}(\hyperlink{faxexpand_8h_abb85bbcaaab5f47b32c9c44b6b5afc0d}{pixnum}));
418     EOLcnt = 0;
419     \textcolor{keywordflow}{for} (LineNum = 0; LineNum < pn->\hyperlink{classpagenode_a728753690c18f318610ba9de5cf6f798}{rowsperstrip}; ) \{
420 \textcolor{preprocessor}{#ifdef DEBUG\_FAX}
421         fprintf(stderr,\textcolor{stringliteral}{"\(\backslash\)nBitAcc=%08lX, BitsAvail = %d\(\backslash\)n"}, BitAcc, BitsAvail);
422         fprintf(stderr,\textcolor{stringliteral}{"-------------------- %d\(\backslash\)n"}, LineNum);
423         fflush(stderr);
424 \textcolor{preprocessor}{#endif}
425     \textcolor{keywordflow}{if} (EOLcnt == 0)
426         \textcolor{keywordflow}{while} (!\hyperlink{faxexpand_8cpp_a3b18273c163f8933af84e9709717de57}{EndOfData}(pn)) \{
427         \textcolor{comment}{/* skip over garbage after a coding error */}
428         \hyperlink{faxexpand_8cpp_a31b0f8f92299cb8727dcce822701ce30}{NeedBits}(11);
429         \textcolor{keywordflow}{if} (\hyperlink{faxexpand_8cpp_ad76ef429faf468b9d16c8592128b7373}{GetBits}(11) == 0)
430             \textcolor{keywordflow}{break};
431         \hyperlink{faxexpand_8cpp_a4cd18b63c38e3e45095d7170b416151f}{ClrBits}(1);
432         \}
433     \textcolor{keywordflow}{for} (EOLcnt = 1; !\hyperlink{faxexpand_8cpp_a3b18273c163f8933af84e9709717de57}{EndOfData}(pn); EOLcnt++) \{
434         \textcolor{comment}{/* we have seen 11 zeros, which implies EOL,}
435 \textcolor{comment}{           skip possible fill bits too */}
436         \textcolor{keywordflow}{while} (1) \{
437         \hyperlink{faxexpand_8cpp_a31b0f8f92299cb8727dcce822701ce30}{NeedBits}(8);
438         \textcolor{keywordflow}{if} (\hyperlink{faxexpand_8cpp_ad76ef429faf468b9d16c8592128b7373}{GetBits}(8))
439             \textcolor{keywordflow}{break};
440         \hyperlink{faxexpand_8cpp_a4cd18b63c38e3e45095d7170b416151f}{ClrBits}(8);
441         \}
442         \textcolor{keywordflow}{while} (\hyperlink{faxexpand_8cpp_ad76ef429faf468b9d16c8592128b7373}{GetBits}(1) == 0)
443         \hyperlink{faxexpand_8cpp_a4cd18b63c38e3e45095d7170b416151f}{ClrBits}(1);
444         \hyperlink{faxexpand_8cpp_a4cd18b63c38e3e45095d7170b416151f}{ClrBits}(1);      \textcolor{comment}{/* the eol flag */}
445         \hyperlink{faxexpand_8cpp_a31b0f8f92299cb8727dcce822701ce30}{NeedBits}(11);
446         \textcolor{keywordflow}{if} (\hyperlink{faxexpand_8cpp_ad76ef429faf468b9d16c8592128b7373}{GetBits}(11))
447         \textcolor{keywordflow}{break};
448         \hyperlink{faxexpand_8cpp_a4cd18b63c38e3e45095d7170b416151f}{ClrBits}(11);
449     \}
450         \textcolor{keywordflow}{if} (EOLcnt > 1 && EOLcnt != 6 && \hyperlink{faxexpand_8cpp_afe0534ca994b08a0ec5edf614aa48e9c}{verbose}) \{
451             kError() << \textcolor{stringliteral}{"Line "} << LineNum << \textcolor{stringliteral}{": bad RTC ("} << EOLcnt << \textcolor{stringliteral}{" EOLs)\(\backslash\)n"};
452         \}
453     \textcolor{keywordflow}{if} (EOLcnt >= 6 || \hyperlink{faxexpand_8cpp_a3b18273c163f8933af84e9709717de57}{EndOfData}(pn)) \{
454         free(runs);
455         \textcolor{keywordflow}{return};
456     \}
457     RunLength = 0;
458     pa = runs;
459     a0 = 0;
460     EOLcnt = 0;
461     \hyperlink{faxexpand_8cpp_a9e898ae20a23b0a6c8d1cc06b57b2c33}{expand1d}();
462     \textcolor{keywordflow}{if} (RunLength)
463         \hyperlink{faxexpand_8cpp_ae202ddfb332c083286badc478d9be98f}{SETVAL}(0);
464     \textcolor{keywordflow}{if} (a0 != lastx) \{
465         \textcolor{keywordflow}{if} (\hyperlink{faxexpand_8cpp_afe0534ca994b08a0ec5edf614aa48e9c}{verbose})
466                 kWarning() << \textcolor{stringliteral}{"Line "} << LineNum << \textcolor{stringliteral}{": length is "}
467             << a0 << \textcolor{stringliteral}{" (expected "}<< lastx << \textcolor{stringliteral}{")\(\backslash\)n"};
468         \textcolor{keywordflow}{while} (a0 > lastx)
469         a0 -= *--pa;
470         \textcolor{keywordflow}{if} (a0 < lastx) \{
471         \textcolor{keywordflow}{if} ((pa - runs) & 1)
472             \hyperlink{faxexpand_8cpp_ae202ddfb332c083286badc478d9be98f}{SETVAL}(0);
473         \hyperlink{faxexpand_8cpp_ae202ddfb332c083286badc478d9be98f}{SETVAL}(lastx - a0);
474         \}
475     \}
476     (*df)(runs, LineNum++, pn);
477     \}
478     free(runs);
479 \}
\end{DoxyCode}
\hypertarget{faxexpand_8cpp_a9631b70bf811d38db1c66850116902cc}{\index{faxexpand.\+cpp@{faxexpand.\+cpp}!g32expand@{g32expand}}
\index{g32expand@{g32expand}!faxexpand.\+cpp@{faxexpand.\+cpp}}
\subsubsection[{g32expand}]{\setlength{\rightskip}{0pt plus 5cm}void g32expand (
\begin{DoxyParamCaption}
\item[{struct {\bf pagenode} $\ast$}]{pn, }
\item[{{\bf drawfunc}}]{df}
\end{DoxyParamCaption}
)}}\label{faxexpand_8cpp_a9631b70bf811d38db1c66850116902cc}


Definition at line 483 of file faxexpand.\+cpp.


\begin{DoxyCode}
484 \{
485     \textcolor{keywordtype}{int} RunLength;      \textcolor{comment}{/* Length of current run */}
486     \textcolor{keywordtype}{int} a0;         \textcolor{comment}{/* reference element */}
487     \textcolor{keywordtype}{int} b1;         \textcolor{comment}{/* next change on previous line */}
488     \textcolor{keywordtype}{int} lastx = pn->\hyperlink{classpagenode_a2be79286e9fc2179f6e3f97dc72a56fa}{size}.width();\textcolor{comment}{/* copy line width to register */}
489     \hyperlink{faxexpand_8h_abb85bbcaaab5f47b32c9c44b6b5afc0d}{pixnum} *run0, *run1;  \textcolor{comment}{/* run length arrays */}
490     \hyperlink{faxexpand_8h_abb85bbcaaab5f47b32c9c44b6b5afc0d}{pixnum} *thisrun, *pa, *pb;    \textcolor{comment}{/* pointers into runs */}
491     \hyperlink{faxexpand_8h_adbe0cc2e2aa9b9127df55d505f059631}{t16bits} *sp;     \textcolor{comment}{/* pointer into compressed data */}
492     \hyperlink{faxexpand_8h_ad9a3ae0942e0e49005bcf1462c7bc875}{t32bits} BitAcc;      \textcolor{comment}{/* bit accumulator */}
493     \textcolor{keywordtype}{int} BitsAvail;      \textcolor{comment}{/* # valid bits in BitAcc */}
494     \textcolor{keywordtype}{int} EOLcnt;         \textcolor{comment}{/* number of consecutive EOLs */}
495     \textcolor{keywordtype}{int} refline = 0;        \textcolor{comment}{/* 1D encoded reference line */}
496     \textcolor{keywordtype}{int} LineNum;        \textcolor{comment}{/* line number */}
497     \textcolor{keyword}{struct }\hyperlink{structtabent}{tabent} *TabEnt;
498 
499     sp = pn->\hyperlink{classpagenode_af5c9ccfd1af1ac996caeb2518cbc739d}{data};
500     BitAcc = 0;
501     BitsAvail = 0;
502     \textcolor{comment}{/* allocate space for 2 runlength arrays */}
503     run0 = (\hyperlink{faxexpand_8h_abb85bbcaaab5f47b32c9c44b6b5afc0d}{pixnum} *) malloc(2 * ((lastx+5)&~1) * \textcolor{keyword}{sizeof}(\hyperlink{faxexpand_8h_abb85bbcaaab5f47b32c9c44b6b5afc0d}{pixnum}));
504     run1 = run0 + ((lastx+5)&~1);
505     run1[0] = lastx;
506     run1[1] = 0;
507     EOLcnt = 0;
508     \textcolor{keywordflow}{for} (LineNum = 0; LineNum < pn->\hyperlink{classpagenode_a728753690c18f318610ba9de5cf6f798}{rowsperstrip}; ) \{
509 \textcolor{preprocessor}{#ifdef DEBUG\_FAX}
510     printf(\textcolor{stringliteral}{"\(\backslash\)nBitAcc=%08lX, BitsAvail = %d\(\backslash\)n"}, BitAcc, BitsAvail);
511     printf(\textcolor{stringliteral}{"-------------------- %d\(\backslash\)n"}, LineNum);
512     fflush(stdout);
513 \textcolor{preprocessor}{#endif}
514     \textcolor{keywordflow}{if} (EOLcnt == 0)
515         \textcolor{keywordflow}{while} (!\hyperlink{faxexpand_8cpp_a3b18273c163f8933af84e9709717de57}{EndOfData}(pn)) \{
516         \textcolor{comment}{/* skip over garbage after a coding error */}
517         \hyperlink{faxexpand_8cpp_a31b0f8f92299cb8727dcce822701ce30}{NeedBits}(11);
518         \textcolor{keywordflow}{if} (\hyperlink{faxexpand_8cpp_ad76ef429faf468b9d16c8592128b7373}{GetBits}(11) == 0)
519             \textcolor{keywordflow}{break};
520         \hyperlink{faxexpand_8cpp_a4cd18b63c38e3e45095d7170b416151f}{ClrBits}(1);
521         \}
522     \textcolor{keywordflow}{for} (EOLcnt = 1; !\hyperlink{faxexpand_8cpp_a3b18273c163f8933af84e9709717de57}{EndOfData}(pn); EOLcnt++) \{
523         \textcolor{comment}{/* we have seen 11 zeros, which implies EOL,}
524 \textcolor{comment}{           skip possible fill bits too */}
525         \textcolor{keywordflow}{while} (1) \{
526         \hyperlink{faxexpand_8cpp_a31b0f8f92299cb8727dcce822701ce30}{NeedBits}(8);
527         \textcolor{keywordflow}{if} (\hyperlink{faxexpand_8cpp_ad76ef429faf468b9d16c8592128b7373}{GetBits}(8))
528             \textcolor{keywordflow}{break};
529         \hyperlink{faxexpand_8cpp_a4cd18b63c38e3e45095d7170b416151f}{ClrBits}(8);
530         \}
531         \textcolor{keywordflow}{while} (\hyperlink{faxexpand_8cpp_ad76ef429faf468b9d16c8592128b7373}{GetBits}(1) == 0)
532         \hyperlink{faxexpand_8cpp_a4cd18b63c38e3e45095d7170b416151f}{ClrBits}(1);
533         \hyperlink{faxexpand_8cpp_a4cd18b63c38e3e45095d7170b416151f}{ClrBits}(1);      \textcolor{comment}{/* the eol flag */}
534         \hyperlink{faxexpand_8cpp_a31b0f8f92299cb8727dcce822701ce30}{NeedBits}(12);
535         refline = \hyperlink{faxexpand_8cpp_ad76ef429faf468b9d16c8592128b7373}{GetBits}(1); \textcolor{comment}{/* 1D / 2D flag */}
536         \hyperlink{faxexpand_8cpp_a4cd18b63c38e3e45095d7170b416151f}{ClrBits}(1);
537         \textcolor{keywordflow}{if} (\hyperlink{faxexpand_8cpp_ad76ef429faf468b9d16c8592128b7373}{GetBits}(11))
538         \textcolor{keywordflow}{break};
539         \hyperlink{faxexpand_8cpp_a4cd18b63c38e3e45095d7170b416151f}{ClrBits}(11);
540     \}
541     \textcolor{keywordflow}{if} (EOLcnt > 1 && EOLcnt != 6 && \hyperlink{faxexpand_8cpp_afe0534ca994b08a0ec5edf614aa48e9c}{verbose})
542             kError() << \textcolor{stringliteral}{"Line "} << LineNum << \textcolor{stringliteral}{": bad RTC ("} << EOLcnt << \textcolor{stringliteral}{" EOLs)\(\backslash\)n"};
543     \textcolor{keywordflow}{if} (EOLcnt >= 6 || \hyperlink{faxexpand_8cpp_a3b18273c163f8933af84e9709717de57}{EndOfData}(pn)) \{
544         free(run0);
545         \textcolor{keywordflow}{return};
546     \}
547     \textcolor{keywordflow}{if} (LineNum == 0 && refline == 0 && \hyperlink{faxexpand_8cpp_afe0534ca994b08a0ec5edf614aa48e9c}{verbose})
548             kDebug() << \textcolor{stringliteral}{"First line is 2-D encoded\(\backslash\)n"};
549     RunLength = 0;
550     \textcolor{keywordflow}{if} (LineNum & 1) \{
551         pa = run1;
552         pb = run0;
553     \}
554     \textcolor{keywordflow}{else} \{
555         pa = run0;
556         pb = run1;
557     \}
558     thisrun = pa;
559     EOLcnt = 0;
560     a0 = 0;
561     b1 = *pb++;
562 
563     \textcolor{keywordflow}{if} (refline) \{
564         \hyperlink{faxexpand_8cpp_a9e898ae20a23b0a6c8d1cc06b57b2c33}{expand1d}();
565     \}
566     \textcolor{keywordflow}{else} \{
567         \hyperlink{faxexpand_8cpp_a8f4cf775ca1e5756baad1dcd8fe26116}{expand2d}(EOL2);
568     \}
569     \textcolor{keywordflow}{if} (RunLength)
570         \hyperlink{faxexpand_8cpp_ae202ddfb332c083286badc478d9be98f}{SETVAL}(0);
571     \textcolor{keywordflow}{if} (a0 != lastx) \{
572         \textcolor{keywordflow}{if} (\hyperlink{faxexpand_8cpp_afe0534ca994b08a0ec5edf614aa48e9c}{verbose})
573                 kWarning() << \textcolor{stringliteral}{"Line "} << LineNum << \textcolor{stringliteral}{": length is "}
574             << a0 << \textcolor{stringliteral}{" (expected "}<< lastx << \textcolor{stringliteral}{")\(\backslash\)n"};
575         \textcolor{keywordflow}{while} (a0 > lastx)
576         a0 -= *--pa;
577         \textcolor{keywordflow}{if} (a0 < lastx) \{
578         \textcolor{keywordflow}{if} ((pa - run0) & 1)
579             \hyperlink{faxexpand_8cpp_ae202ddfb332c083286badc478d9be98f}{SETVAL}(0);
580         \hyperlink{faxexpand_8cpp_ae202ddfb332c083286badc478d9be98f}{SETVAL}(lastx - a0);
581         \}
582     \}
583     \hyperlink{faxexpand_8cpp_ae202ddfb332c083286badc478d9be98f}{SETVAL}(0);    \textcolor{comment}{/* imaginary change at end of line for reference */}
584     (*df)(thisrun, LineNum++, pn);
585     \}
586     free(run0);
587 \}
\end{DoxyCode}
\hypertarget{faxexpand_8cpp_ad21f38a7c1b4b9df58d2927d2a46fe17}{\index{faxexpand.\+cpp@{faxexpand.\+cpp}!G3count@{G3count}}
\index{G3count@{G3count}!faxexpand.\+cpp@{faxexpand.\+cpp}}
\subsubsection[{G3count}]{\setlength{\rightskip}{0pt plus 5cm}int G3count (
\begin{DoxyParamCaption}
\item[{struct {\bf pagenode} $\ast$}]{pn, }
\item[{int}]{two\+D}
\end{DoxyParamCaption}
)}}\label{faxexpand_8cpp_ad21f38a7c1b4b9df58d2927d2a46fe17}


Definition at line 720 of file faxexpand.\+cpp.


\begin{DoxyCode}
721 \{
722     \hyperlink{faxexpand_8h_adbe0cc2e2aa9b9127df55d505f059631}{t16bits} *p = pn->\hyperlink{classpagenode_af5c9ccfd1af1ac996caeb2518cbc739d}{data};
723     \hyperlink{faxexpand_8h_adbe0cc2e2aa9b9127df55d505f059631}{t16bits} *end = p + pn->\hyperlink{classpagenode_af5305c29fc27e5fe3ebd35d7d72927bb}{length}/\textcolor{keyword}{sizeof}(*p);
724     \textcolor{keywordtype}{int} lines = 0;      \textcolor{comment}{/* lines seen so far */}
725     \textcolor{keywordtype}{int} zeros = 0;      \textcolor{comment}{/* number of consecutive zero bits seen */}
726     \textcolor{keywordtype}{int} EOLcnt = 0;     \textcolor{comment}{/* number of consecutive EOLs seen */}
727     \textcolor{keywordtype}{int} empty = 1;      \textcolor{comment}{/* empty line */}
728     \textcolor{keywordtype}{int} prezeros, postzeros;
729 
730     \textcolor{keywordflow}{while} (p < end && EOLcnt < 6) \{
731     \hyperlink{faxexpand_8h_adbe0cc2e2aa9b9127df55d505f059631}{t16bits} bits = *p++;
732     \hyperlink{faxexpand_8cpp_aba485a0392add91c143252d49a5dd45b}{check}(bits&255);
733     \textcolor{keywordflow}{if} (twoD && (prezeros + postzeros == 7)) \{
734         \textcolor{keywordflow}{if} (postzeros || ((bits & 0x100) == 0))
735         zeros--;
736     \}
737     \hyperlink{faxexpand_8cpp_aba485a0392add91c143252d49a5dd45b}{check}(bits>>8);
738     \textcolor{keywordflow}{if} (twoD && (prezeros + postzeros == 7)) \{
739         \textcolor{keywordflow}{if} (postzeros || ((p < end) && ((*p & 1) == 0)))
740         zeros--;
741     \}
742     \}
743     \textcolor{keywordflow}{return} lines - EOLcnt;  \textcolor{comment}{/* don't count trailing EOLs */}
744 \}
\end{DoxyCode}
\hypertarget{faxexpand_8cpp_a37f6116fbe2a2fd58d7c3203127672f8}{\index{faxexpand.\+cpp@{faxexpand.\+cpp}!g4expand@{g4expand}}
\index{g4expand@{g4expand}!faxexpand.\+cpp@{faxexpand.\+cpp}}
\subsubsection[{g4expand}]{\setlength{\rightskip}{0pt plus 5cm}void g4expand (
\begin{DoxyParamCaption}
\item[{struct {\bf pagenode} $\ast$}]{pn, }
\item[{{\bf drawfunc}}]{df}
\end{DoxyParamCaption}
)}}\label{faxexpand_8cpp_a37f6116fbe2a2fd58d7c3203127672f8}


Definition at line 603 of file faxexpand.\+cpp.


\begin{DoxyCode}
604 \{
605     \textcolor{keywordtype}{int} RunLength;      \textcolor{comment}{/* Length of current run */}
606     \textcolor{keywordtype}{int} a0;         \textcolor{comment}{/* reference element */}
607     \textcolor{keywordtype}{int} b1;         \textcolor{comment}{/* next change on previous line */}
608     \textcolor{keywordtype}{int} lastx = pn->\hyperlink{classpagenode_a2be79286e9fc2179f6e3f97dc72a56fa}{size}.width();\textcolor{comment}{/* copy line width to register */}
609     \hyperlink{faxexpand_8h_abb85bbcaaab5f47b32c9c44b6b5afc0d}{pixnum} *run0, *run1;  \textcolor{comment}{/* run length arrays */}
610     \hyperlink{faxexpand_8h_abb85bbcaaab5f47b32c9c44b6b5afc0d}{pixnum} *thisrun, *pa, *pb;    \textcolor{comment}{/* pointers into runs */}
611     \hyperlink{faxexpand_8h_adbe0cc2e2aa9b9127df55d505f059631}{t16bits} *sp;     \textcolor{comment}{/* pointer into compressed data */}
612     \hyperlink{faxexpand_8h_ad9a3ae0942e0e49005bcf1462c7bc875}{t32bits} BitAcc;      \textcolor{comment}{/* bit accumulator */}
613     \textcolor{keywordtype}{int} BitsAvail;      \textcolor{comment}{/* # valid bits in BitAcc */}
614     \textcolor{keywordtype}{int} LineNum;        \textcolor{comment}{/* line number */}
615     \textcolor{keywordtype}{int} EOLcnt;
616     \textcolor{keyword}{struct }\hyperlink{structtabent}{tabent} *TabEnt;
617 
618     sp = pn->\hyperlink{classpagenode_af5c9ccfd1af1ac996caeb2518cbc739d}{data};
619     BitAcc = 0;
620     BitsAvail = 0;
621     \textcolor{comment}{/* allocate space for 2 runlength arrays */}
622     run0 = (\hyperlink{faxexpand_8h_abb85bbcaaab5f47b32c9c44b6b5afc0d}{pixnum} *) malloc(2 * ((lastx+5)&~1) * \textcolor{keyword}{sizeof}(\hyperlink{faxexpand_8h_abb85bbcaaab5f47b32c9c44b6b5afc0d}{pixnum}));
623     run1 = run0 + ((lastx+5)&~1);
624     run1[0] = lastx;        \textcolor{comment}{/* initial reference line */}
625     run1[1] = 0;
626 
627     \textcolor{keywordflow}{for} (LineNum = 0; LineNum < pn->\hyperlink{classpagenode_a728753690c18f318610ba9de5cf6f798}{rowsperstrip}; ) \{
628 \textcolor{preprocessor}{#ifdef DEBUG\_FAX}
629     printf(\textcolor{stringliteral}{"\(\backslash\)nBitAcc=%08lX, BitsAvail = %d\(\backslash\)n"}, BitAcc, BitsAvail);
630     printf(\textcolor{stringliteral}{"-------------------- %d\(\backslash\)n"}, LineNum);
631     fflush(stdout);
632 \textcolor{preprocessor}{#endif}
633     RunLength = 0;
634     \textcolor{keywordflow}{if} (LineNum & 1) \{
635         pa = run1;
636         pb = run0;
637     \}
638     \textcolor{keywordflow}{else} \{
639         pa = run0;
640         pb = run1;
641     \}
642     thisrun = pa;
643     a0 = 0;
644     b1 = *pb++;
645     \hyperlink{faxexpand_8cpp_a8f4cf775ca1e5756baad1dcd8fe26116}{expand2d}(EOFB);
646     \textcolor{keywordflow}{if} (a0 < lastx) \{
647         \textcolor{keywordflow}{if} ((pa - run0) & 1)
648         \hyperlink{faxexpand_8cpp_ae202ddfb332c083286badc478d9be98f}{SETVAL}(0);
649         \hyperlink{faxexpand_8cpp_ae202ddfb332c083286badc478d9be98f}{SETVAL}(lastx - a0);
650     \}
651     \hyperlink{faxexpand_8cpp_ae202ddfb332c083286badc478d9be98f}{SETVAL}(0);    \textcolor{comment}{/* imaginary change at end of line for reference */}
652     (*df)(thisrun, LineNum++, pn);
653     \textcolor{keywordflow}{continue};
654     EOFB:
655     \hyperlink{faxexpand_8cpp_a31b0f8f92299cb8727dcce822701ce30}{NeedBits}(13);
656     \textcolor{keywordflow}{if} (\hyperlink{faxexpand_8cpp_ad76ef429faf468b9d16c8592128b7373}{GetBits}(13) != 0x1001 && \hyperlink{faxexpand_8cpp_afe0534ca994b08a0ec5edf614aa48e9c}{verbose})
657             kError() << \textcolor{stringliteral}{"Bad RTC\(\backslash\)n"};
658     \textcolor{keywordflow}{break};
659     \}
660     free(run0);
661 \}
\end{DoxyCode}
\hypertarget{faxexpand_8cpp_a5d8197a3325f410d68ced58a2409f3a6}{\index{faxexpand.\+cpp@{faxexpand.\+cpp}!M\+Hexpand@{M\+Hexpand}}
\index{M\+Hexpand@{M\+Hexpand}!faxexpand.\+cpp@{faxexpand.\+cpp}}
\subsubsection[{M\+Hexpand}]{\setlength{\rightskip}{0pt plus 5cm}void M\+Hexpand (
\begin{DoxyParamCaption}
\item[{struct {\bf pagenode} $\ast$}]{pn, }
\item[{{\bf drawfunc}}]{df}
\end{DoxyParamCaption}
)}}\label{faxexpand_8cpp_a5d8197a3325f410d68ced58a2409f3a6}


Definition at line 346 of file faxexpand.\+cpp.


\begin{DoxyCode}
347 \{
348     \textcolor{keywordtype}{int} a0;         \textcolor{comment}{/* reference element */}
349     \textcolor{keywordtype}{int} lastx;          \textcolor{comment}{/* copy line width to register */}
350     \hyperlink{faxexpand_8h_ad9a3ae0942e0e49005bcf1462c7bc875}{t32bits} BitAcc;      \textcolor{comment}{/* bit accumulator */}
351     \textcolor{keywordtype}{int} BitsAvail;      \textcolor{comment}{/* # valid bits in BitAcc */}
352     \textcolor{keywordtype}{int} RunLength;      \textcolor{comment}{/* Length of current run */}
353     \hyperlink{faxexpand_8h_adbe0cc2e2aa9b9127df55d505f059631}{t16bits} *sp;     \textcolor{comment}{/* pointer into compressed data */}
354     \hyperlink{faxexpand_8h_abb85bbcaaab5f47b32c9c44b6b5afc0d}{pixnum} *pa;           \textcolor{comment}{/* pointer into new line */}
355     \textcolor{keywordtype}{int} EOLcnt;         \textcolor{comment}{/* number of consecutive EOLs */}
356     \textcolor{keywordtype}{int} LineNum;        \textcolor{comment}{/* line number */}
357     \hyperlink{faxexpand_8h_abb85bbcaaab5f47b32c9c44b6b5afc0d}{pixnum} *runs;     \textcolor{comment}{/* list of run lengths */}
358     \textcolor{keyword}{struct }\hyperlink{structtabent}{tabent} *TabEnt;
359 
360     sp = pn->\hyperlink{classpagenode_af5c9ccfd1af1ac996caeb2518cbc739d}{data};
361     BitAcc = 0;
362     BitsAvail = 0;
363     lastx = pn->\hyperlink{classpagenode_a2be79286e9fc2179f6e3f97dc72a56fa}{size}.width();
364     runs = (\hyperlink{faxexpand_8h_abb85bbcaaab5f47b32c9c44b6b5afc0d}{pixnum} *) malloc(lastx * \textcolor{keyword}{sizeof}(\hyperlink{faxexpand_8h_abb85bbcaaab5f47b32c9c44b6b5afc0d}{pixnum}));
365     \textcolor{keywordflow}{for} (LineNum = 0; LineNum < pn->\hyperlink{classpagenode_a728753690c18f318610ba9de5cf6f798}{rowsperstrip}; ) \{
366 \textcolor{preprocessor}{#ifdef DEBUG\_FAX}
367     printf(\textcolor{stringliteral}{"\(\backslash\)nBitAcc=%08lX, BitsAvail = %d\(\backslash\)n"}, BitAcc, BitsAvail);
368     printf(\textcolor{stringliteral}{"-------------------- %d\(\backslash\)n"}, LineNum);
369     fflush(stdout);
370 \textcolor{preprocessor}{#endif}
371     RunLength = 0;
372     pa = runs;
373     a0 = 0;
374     EOLcnt = 0;
375     \textcolor{keywordflow}{if} (BitsAvail & 7)  \textcolor{comment}{/* skip to byte boundary */}
376         \hyperlink{faxexpand_8cpp_a4cd18b63c38e3e45095d7170b416151f}{ClrBits}(BitsAvail & 7);
377     \hyperlink{faxexpand_8cpp_a9e898ae20a23b0a6c8d1cc06b57b2c33}{expand1d}();
378     \textcolor{keywordflow}{if} (RunLength)
379         \hyperlink{faxexpand_8cpp_ae202ddfb332c083286badc478d9be98f}{SETVAL}(0);
380     \textcolor{keywordflow}{if} (a0 != lastx) \{
381         \textcolor{keywordflow}{if} (\hyperlink{faxexpand_8cpp_afe0534ca994b08a0ec5edf614aa48e9c}{verbose})
382                 kWarning() << \textcolor{stringliteral}{"Line "} << LineNum << \textcolor{stringliteral}{": length is "}
383             << a0 << \textcolor{stringliteral}{" (expected "}<< lastx << \textcolor{stringliteral}{")\(\backslash\)n"};
384         \textcolor{keywordflow}{while} (a0 > lastx)
385         a0 -= *--pa;
386         \textcolor{keywordflow}{if} (a0 < lastx) \{
387         \textcolor{keywordflow}{if} ((pa - runs) & 1)
388             \hyperlink{faxexpand_8cpp_ae202ddfb332c083286badc478d9be98f}{SETVAL}(0);
389         \hyperlink{faxexpand_8cpp_ae202ddfb332c083286badc478d9be98f}{SETVAL}(lastx - a0);
390         \}
391     \}
392     (*df)(runs, LineNum++, pn);
393     \}
394     free(runs);
395 \}
\end{DoxyCode}
