\hypertarget{classPageView}{\section{Page\+View Class Reference}
\label{classPageView}\index{Page\+View@{Page\+View}}
}


The main view. Handles zoom and continuous mode.. oh, and page.  




{\ttfamily \#include $<$pageview.\+h$>$}

Inheritance diagram for Page\+View\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classPageView}
\end{center}
\end{figure}
\subsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{classPageView_af489dc2492677bb4f422660627f62aec}{Zoom\+Mode} \{ \\*
\hyperlink{classPageView_af489dc2492677bb4f422660627f62aeca282cef7e3408c3f6c1b83ec9694db066}{Zoom\+Fixed} = 0, 
\hyperlink{classPageView_af489dc2492677bb4f422660627f62aeca37b37e7554b8276eabe7310a11263664}{Zoom\+Fit\+Width} = 1, 
\hyperlink{classPageView_af489dc2492677bb4f422660627f62aecaa8ad8877fb7444b80d98c7871b5ee2fb}{Zoom\+Fit\+Page} = 2, 
\hyperlink{classPageView_af489dc2492677bb4f422660627f62aeca4021dc6ca422fa846e8c9c31e606cdbe}{Zoom\+Fit\+Auto} = 3, 
\\*
\hyperlink{classPageView_af489dc2492677bb4f422660627f62aecab2e658d672d8c9631d31502e6e748eda}{Zoom\+In}, 
\hyperlink{classPageView_af489dc2492677bb4f422660627f62aeca87c22d03f79c9cac97b85a7481c5e521}{Zoom\+Out}, 
\hyperlink{classPageView_af489dc2492677bb4f422660627f62aecab9583485dc9e9287fc1fc02392c5a47b}{Zoom\+Refresh\+Current}
 \}
\item 
enum \hyperlink{classPageView_a94ded93353c47276bfadb5ffc428a892}{Clear\+Mode} \{ \hyperlink{classPageView_a94ded93353c47276bfadb5ffc428a892acaa9219255254867e6ca9e31dff8fb8e}{Clear\+All\+Selection}, 
\hyperlink{classPageView_a94ded93353c47276bfadb5ffc428a892af8bc77b79de50cd32e76617e7f471354}{Clear\+Only\+Dividers}
 \}
\end{DoxyCompactItemize}
\subsection*{Public Slots}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classPageView_abb4e669b96f8e6ec68b31c33706cbd57}{error\+Message} (const Q\+String \&message, int duration=-\/1)
\item 
void \hyperlink{classPageView_a48d63f3a6165d255d0a9b3db15e1e4c1}{notice\+Message} (const Q\+String \&message, int duration=-\/1)
\item 
void \hyperlink{classPageView_ae42b8ce77b65e819119d678b8e8a3aac}{warning\+Message} (const Q\+String \&message, int duration=-\/1)
\item 
void \hyperlink{classPageView_abee3291f817500a510a818cf5e2819d4}{copy\+Text\+Selection} () const 
\item 
void \hyperlink{classPageView_a36b404916903bf976e4eace4cf2d0410}{select\+All} ()
\item 
void \hyperlink{classPageView_aae69bcd4740466f5af216c97f1c12f14}{open\+Annotation\+Window} (\hyperlink{classOkular_1_1Annotation}{Okular\+::\+Annotation} $\ast$annotation, int page\+Number)
\end{DoxyCompactItemize}
\subsection*{Signals}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classPageView_a017a53158a7094db93d11a009bc56891}{url\+Dropped} (const K\+Url \&)
\item 
void \hyperlink{classPageView_a51ac8814a8f47fd02ac0b61627ad164f}{right\+Click} (const \hyperlink{classOkular_1_1Page}{Okular\+::\+Page} $\ast$, const Q\+Point \&)
\item 
void \hyperlink{classPageView_a8b0a87f4acb179634452cbe114572a47}{mouse\+Back\+Button\+Click} ()
\item 
void \hyperlink{classPageView_af268becfa1f02cb231f5779ea154918d}{mouse\+Forward\+Button\+Click} ()
\item 
void \hyperlink{classPageView_abdd34f6d1c775b32ccc3e8bc9d0e3c29}{esc\+Pressed} ()
\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classPageView_aab5ffe3501dffdb181597740e75691a8}{Page\+View} (Q\+Widget $\ast$parent, \hyperlink{classOkular_1_1Document}{Okular\+::\+Document} $\ast$document)
\item 
\hyperlink{classPageView_aa109e889cf63e1aa8f469a169963e255}{$\sim$\+Page\+View} ()
\item 
void \hyperlink{classPageView_a743dd42566e0d285671a861592e133a9}{setup\+Base\+Actions} (K\+Action\+Collection $\ast$collection)
\item 
void \hyperlink{classPageView_a237853c5039228f8825cbc5724787f31}{setup\+Viewer\+Actions} (K\+Action\+Collection $\ast$collection)
\item 
void \hyperlink{classPageView_a8a1b285458297ea9fd6f9d4f2718e614}{setup\+Actions} (K\+Action\+Collection $\ast$collection)
\item 
void \hyperlink{classPageView_a3676a4a9b53502c4b6af945f28cd5179}{update\+Action\+State} (bool doc\+Has\+Pages, bool doc\+Changed, bool doc\+Has\+Form\+Widgets)
\item 
bool \hyperlink{classPageView_ad70c952bdf8229064f7304236d32495b}{can\+Fit\+Page\+Width} () const 
\item 
void \hyperlink{classPageView_a1c4752460636ebe7a7992aa3a54b36e0}{fit\+Page\+Width} (int page)
\item 
void \hyperlink{classPageView_ab9e13eff3e9a67c96985f9f138d35bb1}{display\+Message} (const Q\+String \&message, const Q\+String \&details=Q\+String(), \hyperlink{classPageViewMessage_aeb83801b92379715663d5a7beaa2ae0c}{Page\+View\+Message\+::\+Icon} icon=\hyperlink{classPageViewMessage_aeb83801b92379715663d5a7beaa2ae0ca2ae901576662b28f92067841a52e11dd}{Page\+View\+Message\+::\+Info}, int duration=-\/1)
\item 
void \hyperlink{classPageView_a13961fd5290e1678d34c8aa59864cdaf}{notify\+Setup} (const Q\+Vector$<$ \hyperlink{classOkular_1_1Page}{Okular\+::\+Page} $\ast$ $>$ \&pages, int setup\+Flags)
\item 
void \hyperlink{classPageView_a9b7b1540552e8ce8c4d089e58297493c}{notify\+Viewport\+Changed} (bool smooth\+Move)
\item 
void \hyperlink{classPageView_a5175ad1352eea1674a687f5a0072e874}{notify\+Page\+Changed} (int page\+Number, int changed\+Flags)
\item 
void \hyperlink{classPageView_a85d5c9030f5f5f0e85b8fdb981de81e9}{notify\+Contents\+Cleared} (int changed\+Flags)
\item 
void \hyperlink{classPageView_a6a9498322af52740ea85fcb89a9eb4f8}{notify\+Zoom} (int factor)
\item 
bool \hyperlink{classPageView_aaacf2a76b80572d853d96a94d98a4b89}{can\+Unload\+Pixmap} (int page\+Num) const 
\item 
void \hyperlink{classPageView_aed6c4bd9e667099fcfdb28ba3ed7be33}{notify\+Current\+Page\+Changed} (int previous, int current)
\item 
bool \hyperlink{classPageView_ad874758e1b8305ad1aeab986d1d2513c}{supports\+Capability} (\hyperlink{classOkular_1_1View_ad95d365554715eb1eabb79350f51b294}{View\+Capability} \hyperlink{classPageView_a2a3eb80b924b29dd1498259734f81311}{capability}) const 
\item 
Capability\+Flags \hyperlink{classPageView_afb9281a41f591a04ffb96e4d7e1fe67e}{capability\+Flags} (\hyperlink{classOkular_1_1View_ad95d365554715eb1eabb79350f51b294}{View\+Capability} \hyperlink{classPageView_a2a3eb80b924b29dd1498259734f81311}{capability}) const 
\item 
Q\+Variant \hyperlink{classPageView_a2a3eb80b924b29dd1498259734f81311}{capability} (\hyperlink{classOkular_1_1View_ad95d365554715eb1eabb79350f51b294}{View\+Capability} capability) const 
\item 
void \hyperlink{classPageView_aad3b63508df30a6bc2ecbe587353c6b6}{set\+Capability} (\hyperlink{classOkular_1_1View_ad95d365554715eb1eabb79350f51b294}{View\+Capability} \hyperlink{classPageView_a2a3eb80b924b29dd1498259734f81311}{capability}, const Q\+Variant \&option)
\item 
\hyperlink{classQList}{Q\+List}$<$ \hyperlink{classOkular_1_1RegularAreaRect}{Okular\+::\+Regular\+Area\+Rect} $\ast$ $>$ \hyperlink{classPageView_a741402cbb905eb81f49f7842a38ab3dc}{text\+Selections} (const Q\+Point \&start, const Q\+Point \&end, int \&firstpage)
\item 
\hyperlink{classOkular_1_1RegularAreaRect}{Okular\+::\+Regular\+Area\+Rect} $\ast$ \hyperlink{classPageView_ace30a37c79e7cd9b523a6cd4fd74f5ae}{text\+Selection\+For\+Item} (\hyperlink{classPageViewItem}{Page\+View\+Item} $\ast$item, const Q\+Point \&start\+Point=Q\+Point(), const Q\+Point \&end\+Point=Q\+Point())
\item 
void \hyperlink{classPageView_a82bbd6a6b843d5b43ec06a0f76d7ae34}{reparse\+Config} ()
\item 
K\+Action\+Collection $\ast$ \hyperlink{classPageView_a25067c9d6511ec48c69ec845f4d371f0}{action\+Collection} () const 
\item 
K\+Action $\ast$ \hyperlink{classPageView_a081dfad8c188c934c0c72d953fcca6a0}{toggle\+Forms\+Action} () const 
\item 
int \hyperlink{classPageView_acaead56a0e9efe0ad73e8c532fa9f160}{content\+Area\+Width} () const 
\item 
int \hyperlink{classPageView_a470bc494311a2741be6b84fca1bed847}{content\+Area\+Height} () const 
\item 
Q\+Point \hyperlink{classPageView_a055aaf87367b9ad0dcfcdc3d2f5ff619}{content\+Area\+Position} () const 
\item 
Q\+Point \hyperlink{classPageView_a7f432d3d6d05c69b568ad66a9c232cd7}{content\+Area\+Point} (const Q\+Point \&pos) const 
\item 
Q\+Point\+F \hyperlink{classPageView_a500fae7d053e7941ce0d02db28eac3cf}{content\+Area\+Point} (const Q\+Point\+F \&pos) const 
\item 
bool \hyperlink{classPageView_acc9042c07ce662cc9acc0ec11d50bf85}{are\+Source\+Locations\+Shown\+Graphically} () const 
\item 
void \hyperlink{classPageView_a17deaed022d1012ce0e663bcbc22e0d9}{set\+Show\+Source\+Locations\+Graphically} (bool show)
\item 
void \hyperlink{classPageView_a6564b027a53154dc576bf93b161bb440}{set\+Last\+Source\+Location\+Viewport} (const \hyperlink{classOkular_1_1DocumentViewport}{Okular\+::\+Document\+Viewport} \&vp)
\item 
void \hyperlink{classPageView_ac4df468cf5e87b8b3557bc609fd6498b}{clear\+Last\+Source\+Location\+Viewport} ()
\item 
void \hyperlink{classPageView_a0054ba6d2967fa31dea42dcc9d9020b6}{update\+Cursor} ()
\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classPageView_a8d8f120938a9fbaa4d0e8986af992a74}{resize\+Event} (Q\+Resize\+Event $\ast$)
\item 
void \hyperlink{classPageView_a8cef551480eb211db287352519e84a3c}{key\+Press\+Event} (Q\+Key\+Event $\ast$)
\item 
void \hyperlink{classPageView_a416ecd83bdf4038ffd4b1283341a0101}{key\+Release\+Event} (Q\+Key\+Event $\ast$)
\item 
void \hyperlink{classPageView_a8584d2dfb8f949da288f4f464391fce5}{input\+Method\+Event} (Q\+Input\+Method\+Event $\ast$)
\item 
void \hyperlink{classPageView_a680c6fbb0ccf6f6d92377792e6dfd879}{wheel\+Event} (Q\+Wheel\+Event $\ast$)
\item 
void \hyperlink{classPageView_a24a2a8dd0e07ec65369300adfaf55643}{drag\+Enter\+Event} (Q\+Drag\+Enter\+Event $\ast$)
\item 
void \hyperlink{classPageView_a6b7cf120075ebe3b86606fdf1fb34f0a}{drag\+Move\+Event} (Q\+Drag\+Move\+Event $\ast$)
\item 
void \hyperlink{classPageView_a68c12381b85e43d2677d15a4f2014803}{drop\+Event} (Q\+Drop\+Event $\ast$)
\item 
void \hyperlink{classPageView_a8e574213c4ac3db1304ecf4364a707e6}{paint\+Event} (Q\+Paint\+Event $\ast$e)
\item 
void \hyperlink{classPageView_aa714f5bd13c642ca4429453298c15681}{tablet\+Event} (Q\+Tablet\+Event $\ast$e)
\item 
void \hyperlink{classPageView_a88caca2e12687b9c9e0382cb16926dbb}{mouse\+Move\+Event} (Q\+Mouse\+Event $\ast$e)
\item 
void \hyperlink{classPageView_abb46c86152dad89b8b793859bdc82c8c}{mouse\+Press\+Event} (Q\+Mouse\+Event $\ast$e)
\item 
void \hyperlink{classPageView_ae1bdc30221bd3baa53cba083d7d462e7}{mouse\+Release\+Event} (Q\+Mouse\+Event $\ast$e)
\item 
void \hyperlink{classPageView_a9a2f4dac193b1e075ceec67299883076}{mouse\+Double\+Click\+Event} (Q\+Mouse\+Event $\ast$e)
\item 
bool \hyperlink{classPageView_a7d0b1b783db9b550d2b5bafe88ef5bb6}{viewport\+Event} (Q\+Event $\ast$e)
\item 
void \hyperlink{classPageView_a4e8b9b0b64ce87e74a8caed93b22ce7d}{scroll\+Contents\+By} (int dx, int dy)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
The main view. Handles zoom and continuous mode.. oh, and page. 

display of course \+:-\/) ... 

Definition at line 54 of file pageview.\+h.



\subsection{Member Enumeration Documentation}
\hypertarget{classPageView_a94ded93353c47276bfadb5ffc428a892}{\index{Page\+View@{Page\+View}!Clear\+Mode@{Clear\+Mode}}
\index{Clear\+Mode@{Clear\+Mode}!Page\+View@{Page\+View}}
\subsubsection[{Clear\+Mode}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf Page\+View\+::\+Clear\+Mode}}}\label{classPageView_a94ded93353c47276bfadb5ffc428a892}
\begin{Desc}
\item[Enumerator]\par
\begin{description}
\index{Clear\+All\+Selection@{Clear\+All\+Selection}!Page\+View@{Page\+View}}\index{Page\+View@{Page\+View}!Clear\+All\+Selection@{Clear\+All\+Selection}}\item[{\em 
\hypertarget{classPageView_a94ded93353c47276bfadb5ffc428a892acaa9219255254867e6ca9e31dff8fb8e}{Clear\+All\+Selection}\label{classPageView_a94ded93353c47276bfadb5ffc428a892acaa9219255254867e6ca9e31dff8fb8e}
}]\index{Clear\+Only\+Dividers@{Clear\+Only\+Dividers}!Page\+View@{Page\+View}}\index{Page\+View@{Page\+View}!Clear\+Only\+Dividers@{Clear\+Only\+Dividers}}\item[{\em 
\hypertarget{classPageView_a94ded93353c47276bfadb5ffc428a892af8bc77b79de50cd32e76617e7f471354}{Clear\+Only\+Dividers}\label{classPageView_a94ded93353c47276bfadb5ffc428a892af8bc77b79de50cd32e76617e7f471354}
}]\end{description}
\end{Desc}


Definition at line 66 of file pageview.\+h.


\begin{DoxyCode}
66 \{ \hyperlink{classPageView_a94ded93353c47276bfadb5ffc428a892acaa9219255254867e6ca9e31dff8fb8e}{ClearAllSelection}, \hyperlink{classPageView_a94ded93353c47276bfadb5ffc428a892af8bc77b79de50cd32e76617e7f471354}{ClearOnlyDividers} \};
\end{DoxyCode}
\hypertarget{classPageView_af489dc2492677bb4f422660627f62aec}{\index{Page\+View@{Page\+View}!Zoom\+Mode@{Zoom\+Mode}}
\index{Zoom\+Mode@{Zoom\+Mode}!Page\+View@{Page\+View}}
\subsubsection[{Zoom\+Mode}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf Page\+View\+::\+Zoom\+Mode}}}\label{classPageView_af489dc2492677bb4f422660627f62aec}
\begin{Desc}
\item[Enumerator]\par
\begin{description}
\index{Zoom\+Fixed@{Zoom\+Fixed}!Page\+View@{Page\+View}}\index{Page\+View@{Page\+View}!Zoom\+Fixed@{Zoom\+Fixed}}\item[{\em 
\hypertarget{classPageView_af489dc2492677bb4f422660627f62aeca282cef7e3408c3f6c1b83ec9694db066}{Zoom\+Fixed}\label{classPageView_af489dc2492677bb4f422660627f62aeca282cef7e3408c3f6c1b83ec9694db066}
}]\index{Zoom\+Fit\+Width@{Zoom\+Fit\+Width}!Page\+View@{Page\+View}}\index{Page\+View@{Page\+View}!Zoom\+Fit\+Width@{Zoom\+Fit\+Width}}\item[{\em 
\hypertarget{classPageView_af489dc2492677bb4f422660627f62aeca37b37e7554b8276eabe7310a11263664}{Zoom\+Fit\+Width}\label{classPageView_af489dc2492677bb4f422660627f62aeca37b37e7554b8276eabe7310a11263664}
}]\index{Zoom\+Fit\+Page@{Zoom\+Fit\+Page}!Page\+View@{Page\+View}}\index{Page\+View@{Page\+View}!Zoom\+Fit\+Page@{Zoom\+Fit\+Page}}\item[{\em 
\hypertarget{classPageView_af489dc2492677bb4f422660627f62aecaa8ad8877fb7444b80d98c7871b5ee2fb}{Zoom\+Fit\+Page}\label{classPageView_af489dc2492677bb4f422660627f62aecaa8ad8877fb7444b80d98c7871b5ee2fb}
}]\index{Zoom\+Fit\+Auto@{Zoom\+Fit\+Auto}!Page\+View@{Page\+View}}\index{Page\+View@{Page\+View}!Zoom\+Fit\+Auto@{Zoom\+Fit\+Auto}}\item[{\em 
\hypertarget{classPageView_af489dc2492677bb4f422660627f62aeca4021dc6ca422fa846e8c9c31e606cdbe}{Zoom\+Fit\+Auto}\label{classPageView_af489dc2492677bb4f422660627f62aeca4021dc6ca422fa846e8c9c31e606cdbe}
}]\index{Zoom\+In@{Zoom\+In}!Page\+View@{Page\+View}}\index{Page\+View@{Page\+View}!Zoom\+In@{Zoom\+In}}\item[{\em 
\hypertarget{classPageView_af489dc2492677bb4f422660627f62aecab2e658d672d8c9631d31502e6e748eda}{Zoom\+In}\label{classPageView_af489dc2492677bb4f422660627f62aecab2e658d672d8c9631d31502e6e748eda}
}]\index{Zoom\+Out@{Zoom\+Out}!Page\+View@{Page\+View}}\index{Page\+View@{Page\+View}!Zoom\+Out@{Zoom\+Out}}\item[{\em 
\hypertarget{classPageView_af489dc2492677bb4f422660627f62aeca87c22d03f79c9cac97b85a7481c5e521}{Zoom\+Out}\label{classPageView_af489dc2492677bb4f422660627f62aeca87c22d03f79c9cac97b85a7481c5e521}
}]\index{Zoom\+Refresh\+Current@{Zoom\+Refresh\+Current}!Page\+View@{Page\+View}}\index{Page\+View@{Page\+View}!Zoom\+Refresh\+Current@{Zoom\+Refresh\+Current}}\item[{\em 
\hypertarget{classPageView_af489dc2492677bb4f422660627f62aecab9583485dc9e9287fc1fc02392c5a47b}{Zoom\+Refresh\+Current}\label{classPageView_af489dc2492677bb4f422660627f62aecab9583485dc9e9287fc1fc02392c5a47b}
}]\end{description}
\end{Desc}


Definition at line 63 of file pageview.\+h.


\begin{DoxyCode}
63                       \{ \hyperlink{classPageView_af489dc2492677bb4f422660627f62aeca282cef7e3408c3f6c1b83ec9694db066}{ZoomFixed} = 0, \hyperlink{classPageView_af489dc2492677bb4f422660627f62aeca37b37e7554b8276eabe7310a11263664}{ZoomFitWidth} = 1, 
      \hyperlink{classPageView_af489dc2492677bb4f422660627f62aecaa8ad8877fb7444b80d98c7871b5ee2fb}{ZoomFitPage} = 2, \hyperlink{classPageView_af489dc2492677bb4f422660627f62aeca4021dc6ca422fa846e8c9c31e606cdbe}{ZoomFitAuto} = 3,
64                         \hyperlink{classPageView_af489dc2492677bb4f422660627f62aecab2e658d672d8c9631d31502e6e748eda}{ZoomIn}, \hyperlink{classPageView_af489dc2492677bb4f422660627f62aeca87c22d03f79c9cac97b85a7481c5e521}{ZoomOut}, \hyperlink{classPageView_af489dc2492677bb4f422660627f62aecab9583485dc9e9287fc1fc02392c5a47b}{ZoomRefreshCurrent} \};
\end{DoxyCode}


\subsection{Constructor \& Destructor Documentation}
\hypertarget{classPageView_aab5ffe3501dffdb181597740e75691a8}{\index{Page\+View@{Page\+View}!Page\+View@{Page\+View}}
\index{Page\+View@{Page\+View}!Page\+View@{Page\+View}}
\subsubsection[{Page\+View}]{\setlength{\rightskip}{0pt plus 5cm}Page\+View\+::\+Page\+View (
\begin{DoxyParamCaption}
\item[{Q\+Widget $\ast$}]{parent, }
\item[{{\bf Okular\+::\+Document} $\ast$}]{document}
\end{DoxyParamCaption}
)}}\label{classPageView_aab5ffe3501dffdb181597740e75691a8}


Definition at line 274 of file pageview.\+cpp.


\begin{DoxyCode}
275     : QAbstractScrollArea( parent )
276     , \hyperlink{classOkular_1_1View}{Okular::View}( QString::fromLatin1( \textcolor{stringliteral}{"PageView"} ) )
277 \{
278     \textcolor{comment}{// create and initialize private storage structure}
279     d = \textcolor{keyword}{new} \hyperlink{classPageViewPrivate}{PageViewPrivate}( \textcolor{keyword}{this} );
280     d->\hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document} = document;
281     d->\hyperlink{classPageViewPrivate_a389103a18e7590c8ec75c26e23806e51}{aRotateClockwise} = 0;
282     d->\hyperlink{classPageViewPrivate_a4a8b7b626080698fa1dbf78d60cbff59}{aRotateCounterClockwise} = 0;
283     d->\hyperlink{classPageViewPrivate_ae57bd1f37889d8a28535e877c2fa87ed}{aRotateOriginal} = 0;
284     d->\hyperlink{classPageViewPrivate_a89d998dea21b24010b2578c6b4f5d9d2}{aViewMode} = 0;
285     d->\hyperlink{classPageViewPrivate_a009f59f9f081ced030a81a8ca726c2b2}{zoomMode} = \hyperlink{classPageView_af489dc2492677bb4f422660627f62aeca37b37e7554b8276eabe7310a11263664}{PageView::ZoomFitWidth};
286     d->\hyperlink{classPageViewPrivate_a938411ef880f839b765aeac48a482b9e}{zoomFactor} = 1.0;
287     d->\hyperlink{classPageViewPrivate_a8819b152a8279b75359af2a3e0567681}{mouseSelecting} = \textcolor{keyword}{false};
288     d->\hyperlink{classPageViewPrivate_a64e9f3610cf2b731a3c0c4eae976e687}{mouseTextSelecting} = \textcolor{keyword}{false};
289     d->\hyperlink{classPageViewPrivate_af6568bdd2ef97bb2c81a71961923ee4d}{mouseOnRect} = \textcolor{keyword}{false};
290     d->\hyperlink{classPageViewPrivate_ac92373de9a9cb5f2085b186a7e321a3b}{mouseAnn} = 0;
291     d->\hyperlink{classPageViewPrivate_a2ceb798d9b9f218e6acc3769d01102f4}{tableDividersGuessed} = \textcolor{keyword}{false};
292     d->\hyperlink{classPageViewPrivate_acc47dfc95cad4f126c4dbd3e8f31e43b}{viewportMoveActive} = \textcolor{keyword}{false};
293     d->\hyperlink{classPageViewPrivate_a12f794c9556da941d62030f41e37ea87}{lastSourceLocationViewportPageNumber} = -1;
294     d->\hyperlink{classPageViewPrivate_ada1e593e53f5fe775184f97ec3b1bbc7}{lastSourceLocationViewportNormalizedX} = 0.0;
295     d->\hyperlink{classPageViewPrivate_af9fd59edb9afe621534cfb8086fc95ab}{lastSourceLocationViewportNormalizedY} = 0.0;
296     d->\hyperlink{classPageViewPrivate_aa64146b7eacddc342bbdded26dc08c6a}{viewportMoveTimer} = 0;
297     d->\hyperlink{classPageViewPrivate_a514156a25a5fc564a7ddabe5d30bcecb}{scrollIncrement} = 0;
298     d->\hyperlink{classPageViewPrivate_afe16a683945c2e7edf9906eb30ad6d8b}{autoScrollTimer} = 0;
299     d->\hyperlink{classPageViewPrivate_a07bad73b61f6b400411aacc7e2e820a0}{annotator} = 0;
300     d->\hyperlink{classPageViewPrivate_a2acaf067a43d2fae544738ceac1f7ed6}{dirtyLayout} = \textcolor{keyword}{false};
301     d->\hyperlink{classPageViewPrivate_a3d7de95f519e1c4e836d7b5876b2042b}{blockViewport} = \textcolor{keyword}{false};
302     d->\hyperlink{classPageViewPrivate_ac565de32d210643820d0c2d405e8f360}{blockPixmapsRequest} = \textcolor{keyword}{false};
303     d->\hyperlink{classPageViewPrivate_aa836af37149ea9fbfefd8de357c9194b}{messageWindow} = \textcolor{keyword}{new} \hyperlink{classPageViewMessage}{PageViewMessage}(\textcolor{keyword}{this});
304     d->\hyperlink{classPageViewPrivate_ab9f225d7d34deb0a414ded10ab49a4dc}{m\_formsVisible} = \textcolor{keyword}{false};
305     d->\hyperlink{classPageViewPrivate_a0b24eb01788092e1699d8380c88fb295}{formsWidgetController} = 0;
306     d->\hyperlink{classPageViewPrivate_a85874d387cff75a0c9b07e698942483d}{m\_tts} = 0;
307     d->\hyperlink{classPageViewPrivate_a1bfeacfe84200c82984784fb057eee64}{refreshTimer} = 0;
308     d->\hyperlink{classPageViewPrivate_a840db896fe007ae5df6cfa907cba6409}{refreshPage} = -1;
309     d->\hyperlink{classPageViewPrivate_a389103a18e7590c8ec75c26e23806e51}{aRotateClockwise} = 0;
310     d->\hyperlink{classPageViewPrivate_a4a8b7b626080698fa1dbf78d60cbff59}{aRotateCounterClockwise} = 0;
311     d->\hyperlink{classPageViewPrivate_ae57bd1f37889d8a28535e877c2fa87ed}{aRotateOriginal} = 0;
312     d->\hyperlink{classPageViewPrivate_a5f864847956ada5d8933fe2d28bbc075}{aPageSizes} = 0;
313     d->\hyperlink{classPageViewPrivate_a0ef5e6fe307660bd3fbe6bd999b895a7}{aTrimMargins} = 0;
314     d->\hyperlink{classPageViewPrivate_aad98b5d46ed82c5423f13cd1a10d0253}{aMouseNormal} = 0;
315     \textcolor{comment}{//added by Ganesh P Kumar on 29/3/2014 2156 hrs IST}
316     d->\hyperlink{classPageViewPrivate_a4f801cbeb2d2c5bb5cccd84f373aeec9}{aRightToLeft} = 0;
317     \textcolor{comment}{//modification ends}
318     d->\hyperlink{classPageViewPrivate_a9e809032b95484f491dd439198b7bb8e}{aMouseSelect} = 0;
319     d->\hyperlink{classPageViewPrivate_a1d8b1716abeb281e68dce858ffda489f}{aMouseTextSelect} = 0;
320     d->\hyperlink{classPageViewPrivate_a29f1ef25d86a534e1605ae5e662233b8}{aToggleAnnotator} = 0;
321     d->\hyperlink{classPageViewPrivate_a251dae24330598db9ee9b7eb6015be3b}{aZoomFitWidth} = 0;
322     d->\hyperlink{classPageViewPrivate_a821a7981295e5366b2f3d489b501ae37}{aZoomFitPage} = 0;
323     d->\hyperlink{classPageViewPrivate_ad119458f9f75be63ae18c65e86ded044}{aZoomAutoFit} = 0;
324     d->\hyperlink{classPageViewPrivate_a89d998dea21b24010b2578c6b4f5d9d2}{aViewMode} = 0;
325     d->\hyperlink{classPageViewPrivate_a9b68e639f07533308f37c0e1654a9c9a}{aViewContinuous} = 0;
326     d->\hyperlink{classPageViewPrivate_a63b5ccd8ed0f4ac9a89c040aeb3173a9}{aPrevAction} = 0;
327     d->\hyperlink{classPageViewPrivate_af0990514eb2a448c1400a4cecc0ca6bb}{aToggleForms} = 0;
328     d->\hyperlink{classPageViewPrivate_ae017762cbf8b93ab294f647563d6ccf0}{aSpeakDoc} = 0;
329     d->\hyperlink{classPageViewPrivate_abcf8673f8ee893b554984b46cc1b30d8}{aSpeakPage} = 0;
330     d->\hyperlink{classPageViewPrivate_ac0ad1db7d08f13202e952d1b0743a377}{aSpeakStop} = 0;
331     d->\hyperlink{classPageViewPrivate_a6abf868c8b0713a89291d48eef79d193}{actionCollection} = 0;
332     d->\hyperlink{classPageViewPrivate_a5f864847956ada5d8933fe2d28bbc075}{aPageSizes}=0;
333     d->\hyperlink{classPageViewPrivate_a21714496870aaec57f163f23a696da48}{setting\_viewCols} = \hyperlink{classOkular_1_1Settings_a89ff1e2d74235c7f591473a1976d343f}{Okular::Settings::viewColumns}();
334     d->\hyperlink{classPageViewPrivate_ae7b75854286f78f9b871f99bebb1eb73}{mouseModeActionGroup} = 0;
335     d->\hyperlink{classPageViewPrivate_ae7a7857d6dac44fa07cb314a6f239df1}{penDown} = \textcolor{keyword}{false};
336     d->\hyperlink{classPageViewPrivate_a48a8cc9cf9c4aa483c79c8f81fc62ea7}{aMouseMagnifier} = 0;
337 
338     \textcolor{keywordflow}{switch}( \hyperlink{classOkular_1_1Settings_afe2a387ad175a0ad4208cfe947a7e7a0}{Okular::Settings::zoomMode}() )
339     \{
340         \textcolor{keywordflow}{case} 0:
341         \{
342             d->\hyperlink{classPageViewPrivate_a938411ef880f839b765aeac48a482b9e}{zoomFactor} = 1;
343             d->\hyperlink{classPageViewPrivate_a009f59f9f081ced030a81a8ca726c2b2}{zoomMode} = \hyperlink{classPageView_af489dc2492677bb4f422660627f62aeca282cef7e3408c3f6c1b83ec9694db066}{PageView::ZoomFixed};
344             \textcolor{keywordflow}{break};
345         \}
346         \textcolor{keywordflow}{case} 1:
347         \{
348             d->\hyperlink{classPageViewPrivate_a009f59f9f081ced030a81a8ca726c2b2}{zoomMode} = \hyperlink{classPageView_af489dc2492677bb4f422660627f62aeca37b37e7554b8276eabe7310a11263664}{PageView::ZoomFitWidth};
349             \textcolor{keywordflow}{break};
350         \}
351         \textcolor{keywordflow}{case} 2:
352         \{
353             d->\hyperlink{classPageViewPrivate_a009f59f9f081ced030a81a8ca726c2b2}{zoomMode} = \hyperlink{classPageView_af489dc2492677bb4f422660627f62aecaa8ad8877fb7444b80d98c7871b5ee2fb}{PageView::ZoomFitPage};
354             \textcolor{keywordflow}{break};
355         \}
356         \textcolor{keywordflow}{case} 3:
357         \{
358             d->\hyperlink{classPageViewPrivate_a009f59f9f081ced030a81a8ca726c2b2}{zoomMode} = \hyperlink{classPageView_af489dc2492677bb4f422660627f62aeca4021dc6ca422fa846e8c9c31e606cdbe}{PageView::ZoomFitAuto};
359             \textcolor{keywordflow}{break};
360         \}
361     \}
362 
363     d->\hyperlink{classPageViewPrivate_a65c32086d23fd9e7fa3bd4256e7f2788}{delayResizeEventTimer} = \textcolor{keyword}{new} QTimer( \textcolor{keyword}{this} );
364     d->\hyperlink{classPageViewPrivate_a65c32086d23fd9e7fa3bd4256e7f2788}{delayResizeEventTimer}->setSingleShot( \textcolor{keyword}{true} );
365     connect( d->\hyperlink{classPageViewPrivate_a65c32086d23fd9e7fa3bd4256e7f2788}{delayResizeEventTimer}, SIGNAL(timeout()), \textcolor{keyword}{this}, SLOT(
      delayedResizeEvent()) );
366 
367     setFrameStyle(QFrame::NoFrame);
368 
369     setAttribute( Qt::WA\_StaticContents );
370 
371     setObjectName( QLatin1String( \textcolor{stringliteral}{"okular::pageView"} ) );
372 
373     \textcolor{comment}{// viewport setup: setup focus, accept drops and track mouse}
374     viewport()->setFocusProxy( \textcolor{keyword}{this} );
375     viewport()->setFocusPolicy( Qt::StrongFocus );
376     viewport()->setAttribute( Qt::WA\_OpaquePaintEvent );
377     viewport()->setAttribute( Qt::WA\_NoSystemBackground );
378     setAcceptDrops( \textcolor{keyword}{true} );
379     viewport()->setMouseTracking( \textcolor{keyword}{true} );
380     viewport()->setAutoFillBackground( \textcolor{keyword}{false} );
381     \textcolor{comment}{// the apparently "magic" value of 20 is the same used internally in QScrollArea}
382     verticalScrollBar()->setSingleStep( 20 );
383     horizontalScrollBar()->setSingleStep( 20 );
384 
385     \textcolor{comment}{// conntect the padding of the viewport to pixmaps requests}
386     connect(horizontalScrollBar(), SIGNAL(valueChanged(\textcolor{keywordtype}{int})), \textcolor{keyword}{this}, SLOT(slotRequestVisiblePixmaps(\textcolor{keywordtype}{int})));
387     connect(verticalScrollBar(), SIGNAL(valueChanged(\textcolor{keywordtype}{int})), \textcolor{keyword}{this}, SLOT(slotRequestVisiblePixmaps(\textcolor{keywordtype}{int})));
388     connect( &d->\hyperlink{classPageViewPrivate_a2aefc2e5ac5f4824c39593264277ad6a}{dragScrollTimer}, SIGNAL(timeout()), \textcolor{keyword}{this}, SLOT(slotDragScroll()) );
389 
390     d->\hyperlink{classPageViewPrivate_ac0d8482663a19cc6798a2c3b39f78d0e}{leftClickTimer}.setSingleShot( \textcolor{keyword}{true} );
391     connect( &d->\hyperlink{classPageViewPrivate_ac0d8482663a19cc6798a2c3b39f78d0e}{leftClickTimer}, SIGNAL(timeout()), \textcolor{keyword}{this}, SLOT(slotShowSizeAllCursor()) );
392 
393     \textcolor{comment}{// set a corner button to resize the view to the page size}
394 \textcolor{comment}{//    QPushButton * resizeButton = new QPushButton( viewport() );}
395 \textcolor{comment}{//    resizeButton->setPixmap( SmallIcon("crop") );}
396 \textcolor{comment}{//    setCornerWidget( resizeButton );}
397 \textcolor{comment}{//    resizeButton->setEnabled( false );}
398     \textcolor{comment}{// connect(...);}
399     setAttribute( Qt::WA\_InputMethodEnabled, \textcolor{keyword}{true} );
400 
401     d->\hyperlink{classPageViewPrivate_aee1dfa250e17ccbf107395f2fe733958}{magnifierView} = \textcolor{keyword}{new} \hyperlink{classMagnifierView}{MagnifierView}(document, \textcolor{keyword}{this});
402     d->\hyperlink{classPageViewPrivate_aee1dfa250e17ccbf107395f2fe733958}{magnifierView}->hide();
403     d->\hyperlink{classPageViewPrivate_aee1dfa250e17ccbf107395f2fe733958}{magnifierView}->setGeometry(0, 0, 351, 201); \textcolor{comment}{// TODO: more dynamic?}
404     document->\hyperlink{classOkular_1_1Document_a37300860cf93f60184305829b033e0e2}{addObserver}(d->\hyperlink{classPageViewPrivate_aee1dfa250e17ccbf107395f2fe733958}{magnifierView});
405 
406     connect(document, SIGNAL(processMovieAction(\textcolor{keyword}{const} \hyperlink{classOkular_1_1MovieAction}{Okular::MovieAction}*)), \textcolor{keyword}{this}, SLOT
      (slotProcessMovieAction(\textcolor{keyword}{const} \hyperlink{classOkular_1_1MovieAction}{Okular::MovieAction}*)));
407     connect(document, SIGNAL(processRenditionAction(\textcolor{keyword}{const} 
      \hyperlink{classOkular_1_1RenditionAction}{Okular::RenditionAction}*)), \textcolor{keyword}{this}, SLOT(slotProcessRenditionAction(\textcolor{keyword}{const} 
      \hyperlink{classOkular_1_1RenditionAction}{Okular::RenditionAction}*)));
408 
409     \textcolor{comment}{// schedule the welcome message}
410     QMetaObject::invokeMethod(\textcolor{keyword}{this}, \textcolor{stringliteral}{"slotShowWelcome"}, Qt::QueuedConnection);
411 \}
\end{DoxyCode}
\hypertarget{classPageView_aa109e889cf63e1aa8f469a169963e255}{\index{Page\+View@{Page\+View}!````~Page\+View@{$\sim$\+Page\+View}}
\index{````~Page\+View@{$\sim$\+Page\+View}!Page\+View@{Page\+View}}
\subsubsection[{$\sim$\+Page\+View}]{\setlength{\rightskip}{0pt plus 5cm}Page\+View\+::$\sim$\+Page\+View (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classPageView_aa109e889cf63e1aa8f469a169963e255}


Definition at line 413 of file pageview.\+cpp.


\begin{DoxyCode}
414 \{
415     \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_a85874d387cff75a0c9b07e698942483d}{m\_tts} )
416         d->\hyperlink{classPageViewPrivate_a85874d387cff75a0c9b07e698942483d}{m\_tts}->\hyperlink{classOkularTTS_ae8aa81e12a20adf6c356dbf0b3515f87}{stopAllSpeechs}();
417 
418     \textcolor{comment}{// delete the local storage structure}
419 
420     \textcolor{comment}{// We need to assign it to a different list otherwise slotAnnotationWindowDestroyed}
421     \textcolor{comment}{// will bite us and clear d->m\_annowindows}
422     QHash< Okular::Annotation *, AnnotWindow * > annowindows = d->\hyperlink{classPageViewPrivate_adb8fb9cfc6f045acbbe4cb534003adb2}{m\_annowindows};
423     d->\hyperlink{classPageViewPrivate_adb8fb9cfc6f045acbbe4cb534003adb2}{m\_annowindows}.clear();
424     qDeleteAll( annowindows );
425 
426     \textcolor{comment}{// delete all widgets}
427     QVector< PageViewItem * >::const\_iterator dIt = d->\hyperlink{classPageViewPrivate_ad90c795dead9abfaa5818a94e00435bc}{items}.constBegin(), dEnd = d->
      \hyperlink{classPageViewPrivate_ad90c795dead9abfaa5818a94e00435bc}{items}.constEnd();
428     \textcolor{keywordflow}{for} ( ; dIt != dEnd; ++dIt )
429         \textcolor{keyword}{delete} *dIt;
430     \textcolor{keyword}{delete} d->\hyperlink{classPageViewPrivate_a0b24eb01788092e1699d8380c88fb295}{formsWidgetController};
431     d->\hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}->\hyperlink{classOkular_1_1Document_a2d704dea2ab28c846e58443ac38841f2}{removeObserver}( \textcolor{keyword}{this} );
432     \textcolor{keyword}{delete} d;
433 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\hypertarget{classPageView_a25067c9d6511ec48c69ec845f4d371f0}{\index{Page\+View@{Page\+View}!action\+Collection@{action\+Collection}}
\index{action\+Collection@{action\+Collection}!Page\+View@{Page\+View}}
\subsubsection[{action\+Collection}]{\setlength{\rightskip}{0pt plus 5cm}K\+Action\+Collection $\ast$ Page\+View\+::action\+Collection (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const}}\label{classPageView_a25067c9d6511ec48c69ec845f4d371f0}


Definition at line 808 of file pageview.\+cpp.


\begin{DoxyCode}
809 \{
810     \textcolor{keywordflow}{return} d->\hyperlink{classPageViewPrivate_a6abf868c8b0713a89291d48eef79d193}{actionCollection};
811 \}
\end{DoxyCode}
\hypertarget{classPageView_acc9042c07ce662cc9acc0ec11d50bf85}{\index{Page\+View@{Page\+View}!are\+Source\+Locations\+Shown\+Graphically@{are\+Source\+Locations\+Shown\+Graphically}}
\index{are\+Source\+Locations\+Shown\+Graphically@{are\+Source\+Locations\+Shown\+Graphically}!Page\+View@{Page\+View}}
\subsubsection[{are\+Source\+Locations\+Shown\+Graphically}]{\setlength{\rightskip}{0pt plus 5cm}bool Page\+View\+::are\+Source\+Locations\+Shown\+Graphically (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const}}\label{classPageView_acc9042c07ce662cc9acc0ec11d50bf85}


Definition at line 1099 of file pageview.\+cpp.


\begin{DoxyCode}
1100 \{
1101     \textcolor{keywordflow}{return} \hyperlink{classOkular_1_1Settings_a0b10da29207269b4a338dcf9f18d6d7b}{Okular::Settings::showSourceLocationsGraphically}
      ();
1102 \}
\end{DoxyCode}
\hypertarget{classPageView_ad70c952bdf8229064f7304236d32495b}{\index{Page\+View@{Page\+View}!can\+Fit\+Page\+Width@{can\+Fit\+Page\+Width}}
\index{can\+Fit\+Page\+Width@{can\+Fit\+Page\+Width}!Page\+View@{Page\+View}}
\subsubsection[{can\+Fit\+Page\+Width}]{\setlength{\rightskip}{0pt plus 5cm}bool Page\+View\+::can\+Fit\+Page\+Width (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const}}\label{classPageView_ad70c952bdf8229064f7304236d32495b}


Definition at line 681 of file pageview.\+cpp.


\begin{DoxyCode}
682 \{
683     \textcolor{keywordflow}{return} \hyperlink{classOkular_1_1Settings_a54872ccea98a1749bdccc6552c1aaa84}{Okular::Settings::viewMode}() != 
      \hyperlink{classOkular_1_1Settings_1_1EnumViewMode_a33bc89b0f0c02bd5539bad916569a665a7ae89daa45516a7920bf5ee4f15c8d27}{Okular::Settings::EnumViewMode::Single} || d->
      \hyperlink{classPageViewPrivate_a009f59f9f081ced030a81a8ca726c2b2}{zoomMode} != \hyperlink{classPageView_af489dc2492677bb4f422660627f62aeca37b37e7554b8276eabe7310a11263664}{ZoomFitWidth};
684 \}
\end{DoxyCode}
\hypertarget{classPageView_aaacf2a76b80572d853d96a94d98a4b89}{\index{Page\+View@{Page\+View}!can\+Unload\+Pixmap@{can\+Unload\+Pixmap}}
\index{can\+Unload\+Pixmap@{can\+Unload\+Pixmap}!Page\+View@{Page\+View}}
\subsubsection[{can\+Unload\+Pixmap}]{\setlength{\rightskip}{0pt plus 5cm}bool Page\+View\+::can\+Unload\+Pixmap (
\begin{DoxyParamCaption}
\item[{int}]{page}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classPageView_aaacf2a76b80572d853d96a94d98a4b89}
Returns whether the observer agrees that all pixmaps for the given {\ttfamily page} can be unloaded to improve memory usage.

Returns true per default. 

Reimplemented from \hyperlink{classOkular_1_1DocumentObserver_a6b294d9207a1546eb9fcb7b878d94f20}{Okular\+::\+Document\+Observer}.



Definition at line 1322 of file pageview.\+cpp.


\begin{DoxyCode}
1323 \{
1324     \textcolor{keywordflow}{if} ( \hyperlink{classOkular_1_1SettingsCore_a07d75a8b7db6da9213663287a87e3226}{Okular::SettingsCore::memoryLevel}() == 
      \hyperlink{classOkular_1_1SettingsCore_1_1EnumMemoryLevel_a6dcad4c36c335a5cab78f24dd88090b4aa61e4f07eed0bf070a41fb0998e8c3b5}{Okular::SettingsCore::EnumMemoryLevel::Low} ||
1325          \hyperlink{classOkular_1_1SettingsCore_a07d75a8b7db6da9213663287a87e3226}{Okular::SettingsCore::memoryLevel}() == 
      \hyperlink{classOkular_1_1SettingsCore_1_1EnumMemoryLevel_a6dcad4c36c335a5cab78f24dd88090b4aab69bfc6de34e8bf9634a7586486296a}{Okular::SettingsCore::EnumMemoryLevel::Normal} )
1326     \{
1327         \textcolor{comment}{// if the item is visible, forbid unloading}
1328         \hyperlink{classQLinkedList}{QLinkedList< PageViewItem * >::const\_iterator} vIt = d
      ->\hyperlink{classPageViewPrivate_a918fbcda86c5b2b449c97e818ab5d5f9}{visibleItems}.constBegin(), vEnd = d->\hyperlink{classPageViewPrivate_a918fbcda86c5b2b449c97e818ab5d5f9}{visibleItems}.constEnd();
1329         \textcolor{keywordflow}{for} ( ; vIt != vEnd; ++vIt )
1330             \textcolor{keywordflow}{if} ( (*vIt)->pageNumber() == pageNumber )
1331                 \textcolor{keywordflow}{return} \textcolor{keyword}{false};
1332     \}
1333     \textcolor{keywordflow}{else}
1334     \{
1335         \textcolor{comment}{// forbid unloading of the visible items, and of the previous and next}
1336         \hyperlink{classQLinkedList}{QLinkedList< PageViewItem * >::const\_iterator} vIt = d
      ->\hyperlink{classPageViewPrivate_a918fbcda86c5b2b449c97e818ab5d5f9}{visibleItems}.constBegin(), vEnd = d->\hyperlink{classPageViewPrivate_a918fbcda86c5b2b449c97e818ab5d5f9}{visibleItems}.constEnd();
1337         \textcolor{keywordflow}{for} ( ; vIt != vEnd; ++vIt )
1338             \textcolor{keywordflow}{if} ( abs( (*vIt)->pageNumber() - pageNumber ) <= 1 )
1339                 \textcolor{keywordflow}{return} \textcolor{keyword}{false};
1340     \}
1341     \textcolor{comment}{// if hidden premit unloading}
1342     \textcolor{keywordflow}{return} \textcolor{keyword}{true};
1343 \}
\end{DoxyCode}
\hypertarget{classPageView_a2a3eb80b924b29dd1498259734f81311}{\index{Page\+View@{Page\+View}!capability@{capability}}
\index{capability@{capability}!Page\+View@{Page\+View}}
\subsubsection[{capability}]{\setlength{\rightskip}{0pt plus 5cm}Q\+Variant Page\+View\+::capability (
\begin{DoxyParamCaption}
\item[{{\bf View\+Capability}}]{capability}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classPageView_a2a3eb80b924b29dd1498259734f81311}
Query the value of the specified {\ttfamily capability}. 

Reimplemented from \hyperlink{classOkular_1_1View_a32763d9566680b0ae37650a894245322}{Okular\+::\+View}.



Definition at line 1393 of file pageview.\+cpp.


\begin{DoxyCode}
1394 \{
1395     \textcolor{keywordflow}{switch} ( \hyperlink{classPageView_a2a3eb80b924b29dd1498259734f81311}{capability} )
1396     \{
1397         \textcolor{keywordflow}{case} \hyperlink{classOkular_1_1View_ad95d365554715eb1eabb79350f51b294a3fa37aa9737e4a0f9753aa398c30f667}{Zoom}:
1398             \textcolor{keywordflow}{return} d->\hyperlink{classPageViewPrivate_a938411ef880f839b765aeac48a482b9e}{zoomFactor};
1399         \textcolor{keywordflow}{case} \hyperlink{classOkular_1_1View_ad95d365554715eb1eabb79350f51b294a2621c21053805b1e2f71fdeb069f9c35}{ZoomModality}:
1400             \textcolor{keywordflow}{return} d->\hyperlink{classPageViewPrivate_a009f59f9f081ced030a81a8ca726c2b2}{zoomMode};
1401     \}
1402     \textcolor{keywordflow}{return} QVariant();
1403 \}
\end{DoxyCode}
\hypertarget{classPageView_afb9281a41f591a04ffb96e4d7e1fe67e}{\index{Page\+View@{Page\+View}!capability\+Flags@{capability\+Flags}}
\index{capability\+Flags@{capability\+Flags}!Page\+View@{Page\+View}}
\subsubsection[{capability\+Flags}]{\setlength{\rightskip}{0pt plus 5cm}Okular\+::\+View\+::\+Capability\+Flags Page\+View\+::capability\+Flags (
\begin{DoxyParamCaption}
\item[{{\bf View\+Capability}}]{capability}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classPageView_afb9281a41f591a04ffb96e4d7e1fe67e}
Query the flags for the specified {\ttfamily capability}. 

Reimplemented from \hyperlink{classOkular_1_1View_abad9d21eaeb248a4b6712aa5cd0ab6fc}{Okular\+::\+View}.



Definition at line 1382 of file pageview.\+cpp.


\begin{DoxyCode}
1383 \{
1384     \textcolor{keywordflow}{switch} ( \hyperlink{classPageView_a2a3eb80b924b29dd1498259734f81311}{capability} )
1385     \{
1386         \textcolor{keywordflow}{case} \hyperlink{classOkular_1_1View_ad95d365554715eb1eabb79350f51b294a3fa37aa9737e4a0f9753aa398c30f667}{Zoom}:
1387         \textcolor{keywordflow}{case} \hyperlink{classOkular_1_1View_ad95d365554715eb1eabb79350f51b294a2621c21053805b1e2f71fdeb069f9c35}{ZoomModality}:
1388             \textcolor{keywordflow}{return} \hyperlink{classOkular_1_1View_a8552668497a612628f53b5010df7a45ea129d96c4ba7ee8cc9bf91a544d07bcd3}{CapabilityRead} | \hyperlink{classOkular_1_1View_a8552668497a612628f53b5010df7a45ea8d7008cfbe58531381430014358fceb3}{CapabilityWrite} | 
      \hyperlink{classOkular_1_1View_a8552668497a612628f53b5010df7a45eac0b7ffc919ca2416425d9b81b7fef5d9}{CapabilitySerializable};
1389     \}
1390     \textcolor{keywordflow}{return} 0;
1391 \}
\end{DoxyCode}
\hypertarget{classPageView_ac4df468cf5e87b8b3557bc609fd6498b}{\index{Page\+View@{Page\+View}!clear\+Last\+Source\+Location\+Viewport@{clear\+Last\+Source\+Location\+Viewport}}
\index{clear\+Last\+Source\+Location\+Viewport@{clear\+Last\+Source\+Location\+Viewport}!Page\+View@{Page\+View}}
\subsubsection[{clear\+Last\+Source\+Location\+Viewport}]{\setlength{\rightskip}{0pt plus 5cm}void Page\+View\+::clear\+Last\+Source\+Location\+Viewport (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classPageView_ac4df468cf5e87b8b3557bc609fd6498b}


Definition at line 1130 of file pageview.\+cpp.


\begin{DoxyCode}
1131 \{
1132     d->\hyperlink{classPageViewPrivate_a12f794c9556da941d62030f41e37ea87}{lastSourceLocationViewportPageNumber} = -1;
1133     d->\hyperlink{classPageViewPrivate_ada1e593e53f5fe775184f97ec3b1bbc7}{lastSourceLocationViewportNormalizedX} = 0.0;
1134     d->\hyperlink{classPageViewPrivate_af9fd59edb9afe621534cfb8086fc95ab}{lastSourceLocationViewportNormalizedY} = 0.0;
1135     viewport()->update();
1136 \}
\end{DoxyCode}
\hypertarget{classPageView_a470bc494311a2741be6b84fca1bed847}{\index{Page\+View@{Page\+View}!content\+Area\+Height@{content\+Area\+Height}}
\index{content\+Area\+Height@{content\+Area\+Height}!Page\+View@{Page\+View}}
\subsubsection[{content\+Area\+Height}]{\setlength{\rightskip}{0pt plus 5cm}int Page\+View\+::content\+Area\+Height (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const}}\label{classPageView_a470bc494311a2741be6b84fca1bed847}


Definition at line 823 of file pageview.\+cpp.


\begin{DoxyCode}
824 \{
825     \textcolor{keywordflow}{return} verticalScrollBar()->maximum() + viewport()->height();
826 \}
\end{DoxyCode}
\hypertarget{classPageView_a7f432d3d6d05c69b568ad66a9c232cd7}{\index{Page\+View@{Page\+View}!content\+Area\+Point@{content\+Area\+Point}}
\index{content\+Area\+Point@{content\+Area\+Point}!Page\+View@{Page\+View}}
\subsubsection[{content\+Area\+Point}]{\setlength{\rightskip}{0pt plus 5cm}Q\+Point Page\+View\+::content\+Area\+Point (
\begin{DoxyParamCaption}
\item[{const Q\+Point \&}]{pos}
\end{DoxyParamCaption}
) const}}\label{classPageView_a7f432d3d6d05c69b568ad66a9c232cd7}


Definition at line 833 of file pageview.\+cpp.


\begin{DoxyCode}
834 \{
835     \textcolor{keywordflow}{return} pos + \hyperlink{classPageView_a055aaf87367b9ad0dcfcdc3d2f5ff619}{contentAreaPosition}();
836 \}
\end{DoxyCode}
\hypertarget{classPageView_a500fae7d053e7941ce0d02db28eac3cf}{\index{Page\+View@{Page\+View}!content\+Area\+Point@{content\+Area\+Point}}
\index{content\+Area\+Point@{content\+Area\+Point}!Page\+View@{Page\+View}}
\subsubsection[{content\+Area\+Point}]{\setlength{\rightskip}{0pt plus 5cm}Q\+Point\+F Page\+View\+::content\+Area\+Point (
\begin{DoxyParamCaption}
\item[{const Q\+Point\+F \&}]{pos}
\end{DoxyParamCaption}
) const}}\label{classPageView_a500fae7d053e7941ce0d02db28eac3cf}


Definition at line 838 of file pageview.\+cpp.


\begin{DoxyCode}
839 \{
840     \textcolor{keywordflow}{return} pos + \hyperlink{classPageView_a055aaf87367b9ad0dcfcdc3d2f5ff619}{contentAreaPosition}();
841 \}
\end{DoxyCode}
\hypertarget{classPageView_a055aaf87367b9ad0dcfcdc3d2f5ff619}{\index{Page\+View@{Page\+View}!content\+Area\+Position@{content\+Area\+Position}}
\index{content\+Area\+Position@{content\+Area\+Position}!Page\+View@{Page\+View}}
\subsubsection[{content\+Area\+Position}]{\setlength{\rightskip}{0pt plus 5cm}Q\+Point Page\+View\+::content\+Area\+Position (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const}}\label{classPageView_a055aaf87367b9ad0dcfcdc3d2f5ff619}


Definition at line 828 of file pageview.\+cpp.


\begin{DoxyCode}
829 \{
830     \textcolor{keywordflow}{return} QPoint( horizontalScrollBar()->value(), verticalScrollBar()->value() );
831 \}
\end{DoxyCode}
\hypertarget{classPageView_acaead56a0e9efe0ad73e8c532fa9f160}{\index{Page\+View@{Page\+View}!content\+Area\+Width@{content\+Area\+Width}}
\index{content\+Area\+Width@{content\+Area\+Width}!Page\+View@{Page\+View}}
\subsubsection[{content\+Area\+Width}]{\setlength{\rightskip}{0pt plus 5cm}int Page\+View\+::content\+Area\+Width (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const}}\label{classPageView_acaead56a0e9efe0ad73e8c532fa9f160}


Definition at line 818 of file pageview.\+cpp.


\begin{DoxyCode}
819 \{
820     \textcolor{keywordflow}{return} horizontalScrollBar()->maximum() + viewport()->width();
821 \}
\end{DoxyCode}
\hypertarget{classPageView_abee3291f817500a510a818cf5e2819d4}{\index{Page\+View@{Page\+View}!copy\+Text\+Selection@{copy\+Text\+Selection}}
\index{copy\+Text\+Selection@{copy\+Text\+Selection}!Page\+View@{Page\+View}}
\subsubsection[{copy\+Text\+Selection}]{\setlength{\rightskip}{0pt plus 5cm}void Page\+View\+::copy\+Text\+Selection (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [slot]}}}\label{classPageView_abee3291f817500a510a818cf5e2819d4}


Definition at line 873 of file pageview.\+cpp.


\begin{DoxyCode}
874 \{
875     \textcolor{keyword}{const} QString text = d->\hyperlink{classPageViewPrivate_a0ecc0d9ad35e6990bc4b82f3649fc6c4}{selectedText}();
876     \textcolor{keywordflow}{if} ( !text.isEmpty() )
877     \{
878         QClipboard *cb = QApplication::clipboard();
879         cb->setText( text, QClipboard::Clipboard );
880     \}
881 \}
\end{DoxyCode}
\hypertarget{classPageView_ab9e13eff3e9a67c96985f9f138d35bb1}{\index{Page\+View@{Page\+View}!display\+Message@{display\+Message}}
\index{display\+Message@{display\+Message}!Page\+View@{Page\+View}}
\subsubsection[{display\+Message}]{\setlength{\rightskip}{0pt plus 5cm}void Page\+View\+::display\+Message (
\begin{DoxyParamCaption}
\item[{const Q\+String \&}]{message, }
\item[{const Q\+String \&}]{details = {\ttfamily QString()}, }
\item[{{\bf Page\+View\+Message\+::\+Icon}}]{icon = {\ttfamily {\bf Page\+View\+Message\+::\+Info}}, }
\item[{int}]{duration = {\ttfamily -\/1}}
\end{DoxyParamCaption}
)}}\label{classPageView_ab9e13eff3e9a67c96985f9f138d35bb1}


Definition at line 744 of file pageview.\+cpp.


\begin{DoxyCode}
745 \{
746     \textcolor{keywordflow}{if} ( !\hyperlink{classOkular_1_1Settings_ab6a3d4459b9ef5fa47cc7083968da797}{Okular::Settings::showOSD}() )
747     \{
748         \textcolor{keywordflow}{if} (icon == \hyperlink{classPageViewMessage_aeb83801b92379715663d5a7beaa2ae0ca4fab3e3265e2d4386ce7b7ed21b086cc}{PageViewMessage::Error})
749         \{
750             \textcolor{keywordflow}{if} ( !details.isEmpty() )
751                 KMessageBox::detailedError( \textcolor{keyword}{this}, message, details );
752             \textcolor{keywordflow}{else}
753                 KMessageBox::error( \textcolor{keyword}{this}, message );
754         \}
755         \textcolor{keywordflow}{return};
756     \}
757 
758     \textcolor{comment}{// hide messageWindow if string is empty}
759     \textcolor{keywordflow}{if} ( message.isEmpty() )
760         \textcolor{keywordflow}{return} d->\hyperlink{classPageViewPrivate_aa836af37149ea9fbfefd8de357c9194b}{messageWindow}->hide();
761 
762     \textcolor{comment}{// display message (duration is length dependant)}
763     \textcolor{keywordflow}{if} (duration==-1)
764     \{
765         duration = 500 + 100 * message.length();
766         \textcolor{keywordflow}{if} ( !details.isEmpty() )
767             duration += 500 + 100 * details.length();
768     \}
769     d->\hyperlink{classPageViewPrivate_aa836af37149ea9fbfefd8de357c9194b}{messageWindow}->\hyperlink{classPageViewMessage_a7fd107b1b7a6c0ae64a4d09fc2467982}{display}( message, details, icon, duration );
770 \}
\end{DoxyCode}
\hypertarget{classPageView_a24a2a8dd0e07ec65369300adfaf55643}{\index{Page\+View@{Page\+View}!drag\+Enter\+Event@{drag\+Enter\+Event}}
\index{drag\+Enter\+Event@{drag\+Enter\+Event}!Page\+View@{Page\+View}}
\subsubsection[{drag\+Enter\+Event}]{\setlength{\rightskip}{0pt plus 5cm}void Page\+View\+::drag\+Enter\+Event (
\begin{DoxyParamCaption}
\item[{Q\+Drag\+Enter\+Event $\ast$}]{ev}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{classPageView_a24a2a8dd0e07ec65369300adfaf55643}


Definition at line 3111 of file pageview.\+cpp.


\begin{DoxyCode}
3112 \{
3113     ev->accept();
3114 \}
\end{DoxyCode}
\hypertarget{classPageView_a6b7cf120075ebe3b86606fdf1fb34f0a}{\index{Page\+View@{Page\+View}!drag\+Move\+Event@{drag\+Move\+Event}}
\index{drag\+Move\+Event@{drag\+Move\+Event}!Page\+View@{Page\+View}}
\subsubsection[{drag\+Move\+Event}]{\setlength{\rightskip}{0pt plus 5cm}void Page\+View\+::drag\+Move\+Event (
\begin{DoxyParamCaption}
\item[{Q\+Drag\+Move\+Event $\ast$}]{ev}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{classPageView_a6b7cf120075ebe3b86606fdf1fb34f0a}


Definition at line 3116 of file pageview.\+cpp.


\begin{DoxyCode}
3117 \{
3118     ev->accept();
3119 \}
\end{DoxyCode}
\hypertarget{classPageView_a68c12381b85e43d2677d15a4f2014803}{\index{Page\+View@{Page\+View}!drop\+Event@{drop\+Event}}
\index{drop\+Event@{drop\+Event}!Page\+View@{Page\+View}}
\subsubsection[{drop\+Event}]{\setlength{\rightskip}{0pt plus 5cm}void Page\+View\+::drop\+Event (
\begin{DoxyParamCaption}
\item[{Q\+Drop\+Event $\ast$}]{ev}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{classPageView_a68c12381b85e43d2677d15a4f2014803}


Definition at line 3121 of file pageview.\+cpp.


\begin{DoxyCode}
3122 \{
3123     \textcolor{keywordflow}{if} (  KUrl::List::canDecode(  ev->mimeData() ) )
3124     \{
3125         \textcolor{keyword}{const} KUrl::List list = KUrl::List::fromMimeData( ev->mimeData() );
3126         \textcolor{keywordflow}{if} ( !list.isEmpty() )
3127             emit \hyperlink{classPageView_a017a53158a7094db93d11a009bc56891}{urlDropped}( list.first() );
3128     \}
3129 \}
\end{DoxyCode}
\hypertarget{classPageView_abb4e669b96f8e6ec68b31c33706cbd57}{\index{Page\+View@{Page\+View}!error\+Message@{error\+Message}}
\index{error\+Message@{error\+Message}!Page\+View@{Page\+View}}
\subsubsection[{error\+Message}]{\setlength{\rightskip}{0pt plus 5cm}void Page\+View\+::error\+Message (
\begin{DoxyParamCaption}
\item[{const Q\+String \&}]{message, }
\item[{int}]{duration = {\ttfamily -\/1}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [slot]}}}\label{classPageView_abb4e669b96f8e6ec68b31c33706cbd57}


Definition at line 118 of file pageview.\+h.


\begin{DoxyCode}
119         \{
120             \hyperlink{classPageView_ab9e13eff3e9a67c96985f9f138d35bb1}{displayMessage}( message, QString(), 
      \hyperlink{classPageViewMessage_aeb83801b92379715663d5a7beaa2ae0ca4fab3e3265e2d4386ce7b7ed21b086cc}{PageViewMessage::Error}, duration );
121         \}
\end{DoxyCode}
\hypertarget{classPageView_abdd34f6d1c775b32ccc3e8bc9d0e3c29}{\index{Page\+View@{Page\+View}!esc\+Pressed@{esc\+Pressed}}
\index{esc\+Pressed@{esc\+Pressed}!Page\+View@{Page\+View}}
\subsubsection[{esc\+Pressed}]{\setlength{\rightskip}{0pt plus 5cm}void Page\+View\+::esc\+Pressed (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [signal]}}}\label{classPageView_abdd34f6d1c775b32ccc3e8bc9d0e3c29}
\hypertarget{classPageView_a1c4752460636ebe7a7992aa3a54b36e0}{\index{Page\+View@{Page\+View}!fit\+Page\+Width@{fit\+Page\+Width}}
\index{fit\+Page\+Width@{fit\+Page\+Width}!Page\+View@{Page\+View}}
\subsubsection[{fit\+Page\+Width}]{\setlength{\rightskip}{0pt plus 5cm}void Page\+View\+::fit\+Page\+Width (
\begin{DoxyParamCaption}
\item[{int}]{page}
\end{DoxyParamCaption}
)}}\label{classPageView_a1c4752460636ebe7a7992aa3a54b36e0}


Definition at line 686 of file pageview.\+cpp.


\begin{DoxyCode}
687 \{
688     \textcolor{comment}{// zoom: Fit Width, columns: 1. setActions + relayout + setPage + update}
689     d->\hyperlink{classPageViewPrivate_a009f59f9f081ced030a81a8ca726c2b2}{zoomMode} = \hyperlink{classPageView_af489dc2492677bb4f422660627f62aeca37b37e7554b8276eabe7310a11263664}{ZoomFitWidth};
690     \hyperlink{classOkular_1_1Settings_a000321ae89149a9e10e9911152781633}{Okular::Settings::setViewMode}( 0 );
691     d->\hyperlink{classPageViewPrivate_a251dae24330598db9ee9b7eb6015be3b}{aZoomFitWidth}->setChecked( \textcolor{keyword}{true} );
692     d->\hyperlink{classPageViewPrivate_a821a7981295e5366b2f3d489b501ae37}{aZoomFitPage}->setChecked( \textcolor{keyword}{false} );
693     d->\hyperlink{classPageViewPrivate_ad119458f9f75be63ae18c65e86ded044}{aZoomAutoFit}->setChecked( \textcolor{keyword}{false} );
694     d->\hyperlink{classPageViewPrivate_a89d998dea21b24010b2578c6b4f5d9d2}{aViewMode}->menu()->actions().at( 0 )->setChecked( \textcolor{keyword}{true} );
695     viewport()->setUpdatesEnabled( \textcolor{keyword}{false} );
696     slotRelayoutPages();
697     viewport()->setUpdatesEnabled( \textcolor{keyword}{true} );
698     d->\hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}->\hyperlink{classOkular_1_1Document_ac3bdbd5137c7fd4d5e960646affc25ec}{setViewportPage}( page );
699     updateZoomText();
700     setFocus();
701 \}
\end{DoxyCode}
\hypertarget{classPageView_a8584d2dfb8f949da288f4f464391fce5}{\index{Page\+View@{Page\+View}!input\+Method\+Event@{input\+Method\+Event}}
\index{input\+Method\+Event@{input\+Method\+Event}!Page\+View@{Page\+View}}
\subsubsection[{input\+Method\+Event}]{\setlength{\rightskip}{0pt plus 5cm}void Page\+View\+::input\+Method\+Event (
\begin{DoxyParamCaption}
\item[{Q\+Input\+Method\+Event $\ast$}]{e}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{classPageView_a8584d2dfb8f949da288f4f464391fce5}


Definition at line 1802 of file pageview.\+cpp.


\begin{DoxyCode}
1803 \{
1804     Q\_UNUSED(e)
1805 \}
\end{DoxyCode}
\hypertarget{classPageView_a8cef551480eb211db287352519e84a3c}{\index{Page\+View@{Page\+View}!key\+Press\+Event@{key\+Press\+Event}}
\index{key\+Press\+Event@{key\+Press\+Event}!Page\+View@{Page\+View}}
\subsubsection[{key\+Press\+Event}]{\setlength{\rightskip}{0pt plus 5cm}void Page\+View\+::key\+Press\+Event (
\begin{DoxyParamCaption}
\item[{Q\+Key\+Event $\ast$}]{e}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{classPageView_a8cef551480eb211db287352519e84a3c}


Definition at line 1695 of file pageview.\+cpp.


\begin{DoxyCode}
1696 \{
1697     e->accept();
1698 
1699     \textcolor{comment}{// if performing a selection or dyn zooming, disable keys handling}
1700     \textcolor{keywordflow}{if} ( ( d->\hyperlink{classPageViewPrivate_a8819b152a8279b75359af2a3e0567681}{mouseSelecting} && e->key() != Qt::Key\_Escape ) || ( QApplication::mouseButtons 
      () & Qt::MidButton ) )
1701         \textcolor{keywordflow}{return};
1702 
1703     \textcolor{comment}{// if viewport is moving, disable keys handling}
1704     \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_acc47dfc95cad4f126c4dbd3e8f31e43b}{viewportMoveActive} )
1705         \textcolor{keywordflow}{return};
1706 
1707     \textcolor{comment}{// move/scroll page by using keys}
1708     \textcolor{keywordflow}{switch} ( e->key() )
1709     \{
1710         \textcolor{keywordflow}{case} Qt::Key\_J:
1711         \textcolor{keywordflow}{case} Qt::Key\_K:
1712         \textcolor{keywordflow}{case} Qt::Key\_Down:
1713         \textcolor{keywordflow}{case} Qt::Key\_PageDown:
1714         \textcolor{keywordflow}{case} Qt::Key\_Up:
1715         \textcolor{keywordflow}{case} Qt::Key\_PageUp:
1716         \textcolor{keywordflow}{case} Qt::Key\_Backspace:
1717             \textcolor{keywordflow}{if} ( e->key() == Qt::Key\_Down
1718                  || e->key() == Qt::Key\_PageDown
1719                  || e->key() == Qt::Key\_J )
1720             \{
1721                 \textcolor{keywordtype}{bool} singleStep = e->key() == Qt::Key\_Down || e->key() == Qt::Key\_J;
1722                 slotScrollDown( singleStep );
1723             \}
1724             \textcolor{keywordflow}{else}
1725             \{
1726                 \textcolor{keywordtype}{bool} singleStep = e->key() == Qt::Key\_Up || e->key() == Qt::Key\_K;
1727                 slotScrollUp( singleStep );
1728             \}
1729             \textcolor{keywordflow}{break};
1730         \textcolor{keywordflow}{case} Qt::Key\_Left:
1731         \textcolor{keywordflow}{case} Qt::Key\_H:
1732             \textcolor{keywordflow}{if} ( horizontalScrollBar()->maximum() == 0 )
1733             \{
1734                 \textcolor{comment}{//if we cannot scroll we go to the previous page vertically}
1735                 \textcolor{keywordtype}{int} next\_page = d->\hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}->\hyperlink{classOkular_1_1Document_a42ec374d73794bf56d7e7b11f1f56319}{currentPage}() - viewColumns();
1736                 d->\hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}->\hyperlink{classOkular_1_1Document_ac3bdbd5137c7fd4d5e960646affc25ec}{setViewportPage}(next\_page);
1737             \}
1738             \textcolor{keywordflow}{else}
1739                 horizontalScrollBar()->triggerAction( QScrollBar::SliderSingleStepSub );
1740             \textcolor{keywordflow}{break};
1741         \textcolor{keywordflow}{case} Qt::Key\_Right:
1742         \textcolor{keywordflow}{case} Qt::Key\_L:
1743             \textcolor{keywordflow}{if} ( horizontalScrollBar()->maximum() == 0 )
1744             \{
1745                 \textcolor{comment}{//if we cannot scroll we advance the page vertically}
1746                 \textcolor{keywordtype}{int} next\_page = d->\hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}->\hyperlink{classOkular_1_1Document_a42ec374d73794bf56d7e7b11f1f56319}{currentPage}() + viewColumns();
1747                 d->\hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}->\hyperlink{classOkular_1_1Document_ac3bdbd5137c7fd4d5e960646affc25ec}{setViewportPage}(next\_page);
1748             \}
1749             \textcolor{keywordflow}{else}
1750                 horizontalScrollBar()->triggerAction( QScrollBar::SliderSingleStepAdd );
1751             \textcolor{keywordflow}{break};
1752         \textcolor{keywordflow}{case} Qt::Key\_Escape:
1753             emit \hyperlink{classPageView_abdd34f6d1c775b32ccc3e8bc9d0e3c29}{escPressed}();
1754             selectionClear( d->\hyperlink{classPageViewPrivate_a2ceb798d9b9f218e6acc3769d01102f4}{tableDividersGuessed} ? 
      \hyperlink{classPageView_a94ded93353c47276bfadb5ffc428a892af8bc77b79de50cd32e76617e7f471354}{ClearOnlyDividers} : \hyperlink{classPageView_a94ded93353c47276bfadb5ffc428a892acaa9219255254867e6ca9e31dff8fb8e}{ClearAllSelection} );
1755             d->\hyperlink{classPageViewPrivate_aa4799ae3aa24957d19a95220d8f61216}{mousePressPos} = QPoint();
1756             \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_a63b5ccd8ed0f4ac9a89c040aeb3173a9}{aPrevAction} )
1757             \{
1758                 d->\hyperlink{classPageViewPrivate_a63b5ccd8ed0f4ac9a89c040aeb3173a9}{aPrevAction}->trigger();
1759                 d->\hyperlink{classPageViewPrivate_a63b5ccd8ed0f4ac9a89c040aeb3173a9}{aPrevAction} = 0;
1760             \}
1761             \textcolor{keywordflow}{break};
1762         \textcolor{keywordflow}{case} Qt::Key\_Shift:
1763         \textcolor{keywordflow}{case} Qt::Key\_Control:
1764             \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_afe16a683945c2e7edf9906eb30ad6d8b}{autoScrollTimer} )
1765             \{
1766                 \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_afe16a683945c2e7edf9906eb30ad6d8b}{autoScrollTimer}->isActive() )
1767                     d->\hyperlink{classPageViewPrivate_afe16a683945c2e7edf9906eb30ad6d8b}{autoScrollTimer}->stop();
1768                 \textcolor{keywordflow}{else}
1769                     slotAutoScoll();
1770                 \textcolor{keywordflow}{return};
1771             \}
1772             \textcolor{comment}{// else fall trhough}
1773         \textcolor{keywordflow}{default}:
1774             e->ignore();
1775             \textcolor{keywordflow}{return};
1776     \}
1777     \textcolor{comment}{// if a known key has been pressed, stop scrolling the page}
1778     \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_afe16a683945c2e7edf9906eb30ad6d8b}{autoScrollTimer} )
1779     \{
1780         d->\hyperlink{classPageViewPrivate_a514156a25a5fc564a7ddabe5d30bcecb}{scrollIncrement} = 0;
1781         d->\hyperlink{classPageViewPrivate_afe16a683945c2e7edf9906eb30ad6d8b}{autoScrollTimer}->stop();
1782     \}
1783 \}
\end{DoxyCode}
\hypertarget{classPageView_a416ecd83bdf4038ffd4b1283341a0101}{\index{Page\+View@{Page\+View}!key\+Release\+Event@{key\+Release\+Event}}
\index{key\+Release\+Event@{key\+Release\+Event}!Page\+View@{Page\+View}}
\subsubsection[{key\+Release\+Event}]{\setlength{\rightskip}{0pt plus 5cm}void Page\+View\+::key\+Release\+Event (
\begin{DoxyParamCaption}
\item[{Q\+Key\+Event $\ast$}]{e}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{classPageView_a416ecd83bdf4038ffd4b1283341a0101}


Definition at line 1785 of file pageview.\+cpp.


\begin{DoxyCode}
1786 \{
1787     e->accept();
1788 
1789     \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_a07bad73b61f6b400411aacc7e2e820a0}{annotator} && d->\hyperlink{classPageViewPrivate_a07bad73b61f6b400411aacc7e2e820a0}{annotator}->\hyperlink{classPageViewAnnotator_ae7fcfee911a4eb7811865863d852ffac}{active}() )
1790     \{
1791         \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_a07bad73b61f6b400411aacc7e2e820a0}{annotator}->\hyperlink{classPageViewAnnotator_af2c97f1da1fa61fffb86a6a8118f9dc6}{routeKeyEvent}( e ) )
1792             \textcolor{keywordflow}{return};
1793     \}
1794 
1795     \textcolor{keywordflow}{if} ( e->key() == Qt::Key\_Escape && d->\hyperlink{classPageViewPrivate_afe16a683945c2e7edf9906eb30ad6d8b}{autoScrollTimer} )
1796     \{
1797         d->\hyperlink{classPageViewPrivate_a514156a25a5fc564a7ddabe5d30bcecb}{scrollIncrement} = 0;
1798         d->\hyperlink{classPageViewPrivate_afe16a683945c2e7edf9906eb30ad6d8b}{autoScrollTimer}->stop();
1799     \}
1800 \}
\end{DoxyCode}
\hypertarget{classPageView_a8b0a87f4acb179634452cbe114572a47}{\index{Page\+View@{Page\+View}!mouse\+Back\+Button\+Click@{mouse\+Back\+Button\+Click}}
\index{mouse\+Back\+Button\+Click@{mouse\+Back\+Button\+Click}!Page\+View@{Page\+View}}
\subsubsection[{mouse\+Back\+Button\+Click}]{\setlength{\rightskip}{0pt plus 5cm}void Page\+View\+::mouse\+Back\+Button\+Click (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [signal]}}}\label{classPageView_a8b0a87f4acb179634452cbe114572a47}
\hypertarget{classPageView_a9a2f4dac193b1e075ceec67299883076}{\index{Page\+View@{Page\+View}!mouse\+Double\+Click\+Event@{mouse\+Double\+Click\+Event}}
\index{mouse\+Double\+Click\+Event@{mouse\+Double\+Click\+Event}!Page\+View@{Page\+View}}
\subsubsection[{mouse\+Double\+Click\+Event}]{\setlength{\rightskip}{0pt plus 5cm}void Page\+View\+::mouse\+Double\+Click\+Event (
\begin{DoxyParamCaption}
\item[{Q\+Mouse\+Event $\ast$}]{e}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{classPageView_a9a2f4dac193b1e075ceec67299883076}


Definition at line 3006 of file pageview.\+cpp.


\begin{DoxyCode}
3007 \{
3008     \textcolor{keywordflow}{if} ( e->button() == Qt::LeftButton )
3009     \{
3010         \textcolor{keyword}{const} QPoint eventPos = \hyperlink{classPageView_a7f432d3d6d05c69b568ad66a9c232cd7}{contentAreaPoint}( e->pos() );
3011         \hyperlink{classPageViewItem}{PageViewItem} * pageItem = pickItemOnPoint( eventPos.x(), eventPos.y() );
3012         \textcolor{keywordflow}{if} ( pageItem )
3013         \{
3014             \textcolor{comment}{// find out normalized mouse coords inside current item}
3015             \textcolor{keywordtype}{double} nX = pageItem->\hyperlink{classPageViewItem_ac8c32541cbae1efd5b4ab54f0a4b4576}{absToPageX}(eventPos.x());
3016             \textcolor{keywordtype}{double} nY = pageItem->absToPageY(eventPos.y());
3017 
3018             \textcolor{keywordflow}{if} ( \hyperlink{classOkular_1_1Settings_af8e39e25e841b413d67af2cb4dfc0688}{Okular::Settings::mouseMode}() == 
      \hyperlink{classOkular_1_1Settings_1_1EnumMouseMode_ab2ae04e2d7d069f02195ccf32c52415bafafb47a3dab02c4016246ee80090e2d9}{Okular::Settings::EnumMouseMode::TextSelect} ) \{
3019                 textSelectionClear();
3020 
3021                 \hyperlink{classOkular_1_1RegularAreaRect}{Okular::RegularAreaRect} *wordRect = pageItem->page()->wordAt( 
      \hyperlink{classOkular_1_1NormalizedPoint}{Okular::NormalizedPoint}( nX, nY ) );
3022                 \textcolor{keywordflow}{if} ( wordRect )
3023                 \{
3024                     \textcolor{comment}{// TODO words with hyphens across pages}
3025                     d->\hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}->\hyperlink{classOkular_1_1Document_ade0f70b9e9e3e08647592555f6c58357}{setPageTextSelection}( pageItem->pageNumber(), 
      wordRect, palette().color( QPalette::Active, QPalette::Highlight ) );
3026                     d->\hyperlink{classPageViewPrivate_ad82b596dc262e93c2268297b9eee8956}{pagesWithTextSelection} << pageItem->pageNumber();
3027                     \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}->\hyperlink{classOkular_1_1Document_a6dd7a475b14222c07d1c410311f35cdb}{isAllowed}( 
      \hyperlink{namespaceOkular_a3601f4e702453ddf1125476dd6e7577ba36a60050e67a446a5ff61aac6756718c}{Okular::AllowCopy} ) )
3028                     \{
3029                         \textcolor{keyword}{const} QString text = d->\hyperlink{classPageViewPrivate_a0ecc0d9ad35e6990bc4b82f3649fc6c4}{selectedText}();
3030                         \textcolor{keywordflow}{if} ( !text.isEmpty() )
3031                         \{
3032                             QClipboard *cb = QApplication::clipboard();
3033                             \textcolor{keywordflow}{if} ( cb->supportsSelection() )
3034                                 cb->setText( text, QClipboard::Selection );
3035                         \}
3036                     \}
3037                     \textcolor{keywordflow}{return};
3038                 \}
3039             \}
3040 
3041             \textcolor{keyword}{const} QRect & itemRect = pageItem->uncroppedGeometry();
3042             \hyperlink{classOkular_1_1Annotation}{Okular::Annotation} * ann = 0;
3043             \textcolor{keyword}{const} \hyperlink{classOkular_1_1ObjectRect}{Okular::ObjectRect} * orect = pageItem->page()->objectRect( 
      \hyperlink{classOkular_1_1ObjectRect_a2f77f7653306bae90bfb68277aaafe16a7fa3680e4804e223e58ce2dea398345f}{Okular::ObjectRect::OAnnotation}, nX, nY, itemRect.width(), itemRect.height()
       );
3044             \textcolor{keywordflow}{if} ( orect )
3045                 ann = ( (\hyperlink{classOkular_1_1AnnotationObjectRect}{Okular::AnnotationObjectRect} *)orect )->annotation();
3046             \textcolor{keywordflow}{if} ( ann && ann->\hyperlink{classOkular_1_1Annotation_af9833449767eacd740f377e69a1fdd48}{subType}() != \hyperlink{classOkular_1_1Annotation_af71b46e37d5f850b97d5c4de3be9aac0aa0f6a560b971fe69d18156176258d6c8}{Okular::Annotation::AWidget} )
3047             \{
3048                 \hyperlink{classPageView_aae69bcd4740466f5af216c97f1c12f14}{openAnnotationWindow}( ann, pageItem->pageNumber() );
3049             \}
3050         \}
3051     \}
3052 \}
\end{DoxyCode}
\hypertarget{classPageView_af268becfa1f02cb231f5779ea154918d}{\index{Page\+View@{Page\+View}!mouse\+Forward\+Button\+Click@{mouse\+Forward\+Button\+Click}}
\index{mouse\+Forward\+Button\+Click@{mouse\+Forward\+Button\+Click}!Page\+View@{Page\+View}}
\subsubsection[{mouse\+Forward\+Button\+Click}]{\setlength{\rightskip}{0pt plus 5cm}void Page\+View\+::mouse\+Forward\+Button\+Click (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [signal]}}}\label{classPageView_af268becfa1f02cb231f5779ea154918d}
\hypertarget{classPageView_a88caca2e12687b9c9e0382cb16926dbb}{\index{Page\+View@{Page\+View}!mouse\+Move\+Event@{mouse\+Move\+Event}}
\index{mouse\+Move\+Event@{mouse\+Move\+Event}!Page\+View@{Page\+View}}
\subsubsection[{mouse\+Move\+Event}]{\setlength{\rightskip}{0pt plus 5cm}void Page\+View\+::mouse\+Move\+Event (
\begin{DoxyParamCaption}
\item[{Q\+Mouse\+Event $\ast$}]{e}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{classPageView_a88caca2e12687b9c9e0382cb16926dbb}


Definition at line 1868 of file pageview.\+cpp.


\begin{DoxyCode}
1869 \{
1870     \textcolor{comment}{// don't perform any mouse action when no document is shown}
1871     \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_ad90c795dead9abfaa5818a94e00435bc}{items}.isEmpty() )
1872         \textcolor{keywordflow}{return};
1873 
1874     \textcolor{comment}{// don't perform any mouse action when viewport is autoscrolling}
1875     \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_acc47dfc95cad4f126c4dbd3e8f31e43b}{viewportMoveActive} )
1876         \textcolor{keywordflow}{return};
1877 
1878     \textcolor{comment}{// if holding mouse mid button, perform zoom}
1879     \textcolor{keywordflow}{if} ( e->buttons() & Qt::MidButton )
1880     \{
1881         \textcolor{keywordtype}{int} mouseY = e->globalPos().y();
1882         \textcolor{keywordtype}{int} deltaY = d->\hyperlink{classPageViewPrivate_a0962e2c6de7921af1c3e42cae846bd65}{mouseMidLastY} - mouseY;
1883 
1884         \textcolor{comment}{// wrap mouse from top to bottom}
1885         \textcolor{keyword}{const} QRect mouseContainer = KGlobalSettings::desktopGeometry( \textcolor{keyword}{this} );
1886         \textcolor{keyword}{const} \textcolor{keywordtype}{int} absDeltaY = abs(deltaY);
1887         \textcolor{keywordflow}{if} ( absDeltaY > mouseContainer.height() / 2 )
1888         \{
1889             deltaY = mouseContainer.height() - absDeltaY;
1890         \}
1891 
1892         \textcolor{keyword}{const} \textcolor{keywordtype}{float} upperZoomLimit = d->\hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}->\hyperlink{classOkular_1_1Document_a195dd7b2d52ecaf17541a437d5f9e579}{supportsTiles}() ? 15.99 : 3.99;
1893         \textcolor{keywordflow}{if} ( mouseY <= mouseContainer.top() + 4 &&
1894              d->\hyperlink{classPageViewPrivate_a938411ef880f839b765aeac48a482b9e}{zoomFactor} < upperZoomLimit )
1895         \{
1896             mouseY = mouseContainer.bottom() - 5;
1897             QCursor::setPos( e->globalPos().x(), mouseY );
1898         \}
1899         \textcolor{comment}{// wrap mouse from bottom to top}
1900         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( mouseY >= mouseContainer.bottom() - 4 &&
1901                   d->\hyperlink{classPageViewPrivate_a938411ef880f839b765aeac48a482b9e}{zoomFactor} > 0.101 )
1902         \{
1903             mouseY = mouseContainer.top() + 5;
1904             QCursor::setPos( e->globalPos().x(), mouseY );
1905         \}
1906         \textcolor{comment}{// remember last position}
1907         d->\hyperlink{classPageViewPrivate_a0962e2c6de7921af1c3e42cae846bd65}{mouseMidLastY} = mouseY;
1908 
1909         \textcolor{comment}{// update zoom level, perform zoom and redraw}
1910         \textcolor{keywordflow}{if} ( deltaY )
1911         \{
1912             d->\hyperlink{classPageViewPrivate_a938411ef880f839b765aeac48a482b9e}{zoomFactor} *= ( 1.0 + ( (double)deltaY / 500.0 ) );
1913             updateZoom( \hyperlink{classPageView_af489dc2492677bb4f422660627f62aecab9583485dc9e9287fc1fc02392c5a47b}{ZoomRefreshCurrent} );
1914             viewport()->repaint();
1915         \}
1916         \textcolor{keywordflow}{return};
1917     \}
1918 
1919     \textcolor{keyword}{const} QPoint eventPos = \hyperlink{classPageView_a7f432d3d6d05c69b568ad66a9c232cd7}{contentAreaPoint}( e->pos() );
1920 
1921     \textcolor{comment}{// if we're editing an annotation, dispatch event to it}
1922     \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_a07bad73b61f6b400411aacc7e2e820a0}{annotator} && d->\hyperlink{classPageViewPrivate_a07bad73b61f6b400411aacc7e2e820a0}{annotator}->\hyperlink{classPageViewAnnotator_ae7fcfee911a4eb7811865863d852ffac}{active}() )
1923     \{
1924         \hyperlink{classPageViewItem}{PageViewItem} * pageItem = pickItemOnPoint( eventPos.x(), eventPos.y() );
1925         \hyperlink{classPageView_a0054ba6d2967fa31dea42dcc9d9020b6}{updateCursor}( eventPos );
1926         d->\hyperlink{classPageViewPrivate_a07bad73b61f6b400411aacc7e2e820a0}{annotator}->\hyperlink{classPageViewAnnotator_a6cd952408052c6d7de1c1111d61266b0}{routeMouseEvent}( e, pageItem );
1927         \textcolor{keywordflow}{return};
1928     \}
1929 
1930     \textcolor{keywordtype}{bool} leftButton = (e->buttons() == Qt::LeftButton);
1931     \textcolor{keywordtype}{bool} rightButton = (e->buttons() == Qt::RightButton);
1932     \textcolor{keywordflow}{switch} ( \hyperlink{classOkular_1_1Settings_af8e39e25e841b413d67af2cb4dfc0688}{Okular::Settings::mouseMode}() )
1933     \{
1934         \textcolor{keywordflow}{case} \hyperlink{classOkular_1_1Settings_1_1EnumMouseMode_ab2ae04e2d7d069f02195ccf32c52415bae5c77f74b0cf35d7838da1baaad4e822}{Okular::Settings::EnumMouseMode::Browse}:
1935             \textcolor{keywordflow}{if} ( leftButton )
1936             \{
1937                 d->\hyperlink{classPageViewPrivate_ac0d8482663a19cc6798a2c3b39f78d0e}{leftClickTimer}.stop();
1938 
1939                 \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_ac92373de9a9cb5f2085b186a7e321a3b}{mouseAnn} )
1940                 \{
1941                     \hyperlink{classPageViewItem}{PageViewItem} * pageItem = pickItemOnPoint( eventPos.x(), eventPos.y() );
1942                     \textcolor{keywordflow}{if} ( pageItem )
1943                     \{
1944                         \textcolor{keyword}{const} QRect & itemRect = pageItem->\hyperlink{classPageViewItem_a5d2e73a003f65b4e95c0c21b1698f835}{uncroppedGeometry}();
1945                         QPoint newpos = eventPos - itemRect.topLeft();
1946                         QPoint p( newpos - d->\hyperlink{classPageViewPrivate_a1cc45a684f1f05e522c4874d017858cb}{mouseAnnPos} );
1947                         QPointF pf( rotateInRect( p, pageItem->\hyperlink{classPageViewItem_a5c512d95e5563e8d19d1fb3d93dafc31}{page}()->
      \hyperlink{classOkular_1_1Page_a731947e32744bdcda791d22a2dc88726}{rotation}() ) );
1948                         \textcolor{keywordflow}{if} ( pageItem->\hyperlink{classPageViewItem_a5c512d95e5563e8d19d1fb3d93dafc31}{page}()->\hyperlink{classOkular_1_1Page_a731947e32744bdcda791d22a2dc88726}{rotation}() % 2 == 0 )
1949                         \{
1950                             pf.rx() /= pageItem->\hyperlink{classPageViewItem_a240924407ae22bb0489363a6a2d481b9}{uncroppedWidth}();
1951                             pf.ry() /= pageItem->\hyperlink{classPageViewItem_af1380fce5dc13a72458ef834c720b128}{uncroppedHeight}();
1952                         \}
1953                         \textcolor{keywordflow}{else}
1954                         \{
1955                             pf.rx() /= pageItem->\hyperlink{classPageViewItem_af1380fce5dc13a72458ef834c720b128}{uncroppedHeight}();
1956                             pf.ry() /= pageItem->\hyperlink{classPageViewItem_a240924407ae22bb0489363a6a2d481b9}{uncroppedWidth}();
1957                         \}
1958 
1959                         d->\hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}->\hyperlink{classOkular_1_1Document_ab3ca55619ce1a60a4d60913a216ae01c}{translatePageAnnotation}(d->
      \hyperlink{classPageViewPrivate_a6e1d17de5ec97192d937dae41c89ff74}{mouseAnnPageNum}, d->\hyperlink{classPageViewPrivate_ac92373de9a9cb5f2085b186a7e321a3b}{mouseAnn}, \hyperlink{classOkular_1_1NormalizedPoint}{Okular::NormalizedPoint}( pf.x()
      , pf.y() ) );
1960                         d->\hyperlink{classPageViewPrivate_a1cc45a684f1f05e522c4874d017858cb}{mouseAnnPos} = newpos;
1961                     \}
1962                 \}
1963                 \textcolor{comment}{// drag page}
1964                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( !d->\hyperlink{classPageViewPrivate_aa02b40a75cef0ee7f1b423027a80c8d6}{mouseGrabPos}.isNull() )
1965                 \{
1966                     setCursor( Qt::ClosedHandCursor );
1967 
1968                     QPoint mousePos = e->globalPos();
1969                     QPoint delta = d->\hyperlink{classPageViewPrivate_aa02b40a75cef0ee7f1b423027a80c8d6}{mouseGrabPos} - mousePos;
1970 
1971                     \textcolor{comment}{// wrap mouse from top to bottom}
1972                     \textcolor{keyword}{const} QRect mouseContainer = KGlobalSettings::desktopGeometry( \textcolor{keyword}{this} );
1973                     \textcolor{comment}{// If the delta is huge it probably means we just wrapped in that direction}
1974                     \textcolor{keyword}{const} QPoint absDelta(abs(delta.x()), abs(delta.y()));
1975                     \textcolor{keywordflow}{if} ( absDelta.y() > mouseContainer.height() / 2 )
1976                     \{
1977                         delta.setY(mouseContainer.height() - absDelta.y());
1978                     \}
1979                     \textcolor{keywordflow}{if} ( absDelta.x() > mouseContainer.width() / 2 )
1980                     \{
1981                         delta.setX(mouseContainer.width() - absDelta.x());
1982                     \}
1983                     \textcolor{keywordflow}{if} ( mousePos.y() <= mouseContainer.top() + 4 &&
1984                          verticalScrollBar()->value() < verticalScrollBar()->maximum() - 10 )
1985                     \{
1986                         mousePos.setY( mouseContainer.bottom() - 5 );
1987                         QCursor::setPos( mousePos );
1988                     \}
1989                     \textcolor{comment}{// wrap mouse from bottom to top}
1990                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( mousePos.y() >= mouseContainer.bottom() - 4 &&
1991                               verticalScrollBar()->value() > 10 )
1992                     \{
1993                         mousePos.setY( mouseContainer.top() + 5 );
1994                         QCursor::setPos( mousePos );
1995                     \}
1996                     \textcolor{comment}{// remember last position}
1997                     d->\hyperlink{classPageViewPrivate_aa02b40a75cef0ee7f1b423027a80c8d6}{mouseGrabPos} = mousePos;
1998 
1999                     \textcolor{comment}{// scroll page by position increment}
2000                     scrollTo( horizontalScrollBar()->value() + delta.x(), verticalScrollBar()->value() + 
      delta.y() );
2001                 \}
2002             \}
2003             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( rightButton && !d->\hyperlink{classPageViewPrivate_aa4799ae3aa24957d19a95220d8f61216}{mousePressPos}.isNull() && d->
      \hyperlink{classPageViewPrivate_a9e809032b95484f491dd439198b7bb8e}{aMouseSelect} )
2004             \{
2005                 \textcolor{comment}{// if mouse moves 5 px away from the press point, switch to 'selection'}
2006                 \textcolor{keywordtype}{int} deltaX = d->\hyperlink{classPageViewPrivate_aa4799ae3aa24957d19a95220d8f61216}{mousePressPos}.x() - e->globalPos().x(),
2007                     deltaY = d->\hyperlink{classPageViewPrivate_aa4799ae3aa24957d19a95220d8f61216}{mousePressPos}.y() - e->globalPos().y();
2008                 \textcolor{keywordflow}{if} ( deltaX > 5 || deltaX < -5 || deltaY > 5 || deltaY < -5 )
2009                 \{
2010                     d->\hyperlink{classPageViewPrivate_a63b5ccd8ed0f4ac9a89c040aeb3173a9}{aPrevAction} = d->\hyperlink{classPageViewPrivate_aad98b5d46ed82c5423f13cd1a10d0253}{aMouseNormal};
2011                     d->\hyperlink{classPageViewPrivate_a9e809032b95484f491dd439198b7bb8e}{aMouseSelect}->trigger();
2012                     QPoint newPos = eventPos + QPoint( deltaX, deltaY );
2013                     selectionStart( newPos, palette().color( QPalette::Active, QPalette::Highlight ).light(
       120 ), \textcolor{keyword}{false} );
2014                     updateSelection( eventPos );
2015                     \textcolor{keywordflow}{break};
2016                 \}
2017             \}
2018             \textcolor{keywordflow}{else}
2019             \{
2020                 \textcolor{comment}{// only hovering the page, so update the cursor}
2021                 \hyperlink{classPageView_a0054ba6d2967fa31dea42dcc9d9020b6}{updateCursor}();
2022             \}
2023             \textcolor{keywordflow}{break};
2024 
2025         \textcolor{keywordflow}{case} \hyperlink{classOkular_1_1Settings_1_1EnumMouseMode_ab2ae04e2d7d069f02195ccf32c52415ba02b6269995c57d3fa3c40c5301591e62}{Okular::Settings::EnumMouseMode::Zoom}:
2026         \textcolor{keywordflow}{case} \hyperlink{classOkular_1_1Settings_1_1EnumMouseMode_ab2ae04e2d7d069f02195ccf32c52415baa9bf3100d0e93abfec2769957743e6a2}{Okular::Settings::EnumMouseMode::RectSelect}:
2027         \textcolor{keywordflow}{case} \hyperlink{classOkular_1_1Settings_1_1EnumMouseMode_ab2ae04e2d7d069f02195ccf32c52415ba5422065f9d7eff6cc08eef755e862af3}{Okular::Settings::EnumMouseMode::TableSelect}:
2028             \textcolor{comment}{// set second corner of selection}
2029             \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_a8819b152a8279b75359af2a3e0567681}{mouseSelecting} )
2030                 updateSelection( eventPos );
2031             \textcolor{keywordflow}{break};
2032 
2033         \textcolor{keywordflow}{case} \hyperlink{classOkular_1_1Settings_1_1EnumMouseMode_ab2ae04e2d7d069f02195ccf32c52415bab95111677f0c566414f48ece94ce0f45}{Okular::Settings::EnumMouseMode::Magnifier}:
2034             \textcolor{keywordflow}{if} ( e->buttons() ) \textcolor{comment}{// if any button is pressed at all}
2035             \{
2036                 moveMagnifier( e->pos() );
2037                 updateMagnifier( eventPos );
2038             \}
2039             \textcolor{keywordflow}{break};
2040 
2041         \textcolor{keywordflow}{case} \hyperlink{classOkular_1_1Settings_1_1EnumMouseMode_ab2ae04e2d7d069f02195ccf32c52415bafafb47a3dab02c4016246ee80090e2d9}{Okular::Settings::EnumMouseMode::TextSelect}:
2042             \textcolor{comment}{// if mouse moves 5 px away from the press point and the document soupports text extraction, do
       'textselection'}
2043             \textcolor{keywordflow}{if} ( !d->\hyperlink{classPageViewPrivate_a64e9f3610cf2b731a3c0c4eae976e687}{mouseTextSelecting} && !d->\hyperlink{classPageViewPrivate_aa4799ae3aa24957d19a95220d8f61216}{mousePressPos}.isNull() && d->
      \hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}->\hyperlink{classOkular_1_1Document_acadcf633db6332012dbbd1914fddd0c9}{supportsSearching}() && ( ( eventPos - d->
      \hyperlink{classPageViewPrivate_aaf8d4b01e8bb0db7ff49544972422a63}{mouseSelectPos} ).manhattanLength() > 5 ) )
2044             \{
2045                 d->\hyperlink{classPageViewPrivate_a64e9f3610cf2b731a3c0c4eae976e687}{mouseTextSelecting} = \textcolor{keyword}{true};
2046             \}
2047             updateSelection( eventPos );
2048             \hyperlink{classPageView_a0054ba6d2967fa31dea42dcc9d9020b6}{updateCursor}();
2049             \textcolor{keywordflow}{break};
2050     \}
2051 \}
\end{DoxyCode}
\hypertarget{classPageView_abb46c86152dad89b8b793859bdc82c8c}{\index{Page\+View@{Page\+View}!mouse\+Press\+Event@{mouse\+Press\+Event}}
\index{mouse\+Press\+Event@{mouse\+Press\+Event}!Page\+View@{Page\+View}}
\subsubsection[{mouse\+Press\+Event}]{\setlength{\rightskip}{0pt plus 5cm}void Page\+View\+::mouse\+Press\+Event (
\begin{DoxyParamCaption}
\item[{Q\+Mouse\+Event $\ast$}]{e}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{classPageView_abb46c86152dad89b8b793859bdc82c8c}


Definition at line 2053 of file pageview.\+cpp.


\begin{DoxyCode}
2054 \{
2055     \textcolor{comment}{// don't perform any mouse action when no document is shown}
2056     \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_ad90c795dead9abfaa5818a94e00435bc}{items}.isEmpty() )
2057         \textcolor{keywordflow}{return};
2058 
2059     \textcolor{comment}{// if performing a selection or dyn zooming, disable mouse press}
2060     \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_a8819b152a8279b75359af2a3e0567681}{mouseSelecting} || ( e->button() != Qt::MidButton && ( e->buttons() & 
      Qt::MidButton) ) || d->\hyperlink{classPageViewPrivate_acc47dfc95cad4f126c4dbd3e8f31e43b}{viewportMoveActive} )
2061         \textcolor{keywordflow}{return};
2062 
2063     \textcolor{comment}{// if the page is scrolling, stop it}
2064     \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_afe16a683945c2e7edf9906eb30ad6d8b}{autoScrollTimer} )
2065     \{
2066         d->\hyperlink{classPageViewPrivate_a514156a25a5fc564a7ddabe5d30bcecb}{scrollIncrement} = 0;
2067         d->\hyperlink{classPageViewPrivate_afe16a683945c2e7edf9906eb30ad6d8b}{autoScrollTimer}->stop();
2068     \}
2069 
2070     \textcolor{comment}{// if pressing mid mouse button while not doing other things, begin 'continuous zoom' mode}
2071     \textcolor{keywordflow}{if} ( e->button() == Qt::MidButton )
2072     \{
2073         d->\hyperlink{classPageViewPrivate_a0962e2c6de7921af1c3e42cae846bd65}{mouseMidLastY} = e->globalPos().y();
2074         setCursor( Qt::SizeVerCursor );
2075         \textcolor{keywordflow}{return};
2076     \}
2077 
2078     \textcolor{keyword}{const} QPoint eventPos = \hyperlink{classPageView_a7f432d3d6d05c69b568ad66a9c232cd7}{contentAreaPoint}( e->pos() );
2079 
2080     \textcolor{comment}{// if we're editing an annotation, dispatch event to it}
2081     \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_a07bad73b61f6b400411aacc7e2e820a0}{annotator} && d->\hyperlink{classPageViewPrivate_a07bad73b61f6b400411aacc7e2e820a0}{annotator}->\hyperlink{classPageViewAnnotator_ae7fcfee911a4eb7811865863d852ffac}{active}() )
2082     \{
2083         \hyperlink{classPageViewItem}{PageViewItem} * pageItem = pickItemOnPoint( eventPos.x(), eventPos.y() );
2084         d->\hyperlink{classPageViewPrivate_a07bad73b61f6b400411aacc7e2e820a0}{annotator}->\hyperlink{classPageViewAnnotator_a6cd952408052c6d7de1c1111d61266b0}{routeMouseEvent}( e, pageItem );
2085         \textcolor{keywordflow}{return};
2086     \}
2087 
2088     \textcolor{comment}{// trigger history navigation for additional mouse buttons}
2089     \textcolor{keywordflow}{if} ( e->button() == Qt::XButton1 )
2090     \{
2091         emit \hyperlink{classPageView_a8b0a87f4acb179634452cbe114572a47}{mouseBackButtonClick}();
2092         \textcolor{keywordflow}{return};
2093     \}
2094     \textcolor{keywordflow}{if} ( e->button() == Qt::XButton2 )
2095     \{
2096         emit \hyperlink{classPageView_af268becfa1f02cb231f5779ea154918d}{mouseForwardButtonClick}();
2097         \textcolor{keywordflow}{return};
2098     \}
2099 
2100     \textcolor{comment}{// update press / 'start drag' mouse position}
2101     d->\hyperlink{classPageViewPrivate_aa4799ae3aa24957d19a95220d8f61216}{mousePressPos} = e->globalPos();
2102 
2103     \textcolor{comment}{// handle mode dependant mouse press actions}
2104     \textcolor{keywordtype}{bool} leftButton = e->button() == Qt::LeftButton,
2105          rightButton = e->button() == Qt::RightButton;
2106 
2107 \textcolor{comment}{//   Not sure we should erase the selection when clicking with left.}
2108      \textcolor{keywordflow}{if} ( \hyperlink{classOkular_1_1Settings_af8e39e25e841b413d67af2cb4dfc0688}{Okular::Settings::mouseMode}() != 
      \hyperlink{classOkular_1_1Settings_1_1EnumMouseMode_ab2ae04e2d7d069f02195ccf32c52415bafafb47a3dab02c4016246ee80090e2d9}{Okular::Settings::EnumMouseMode::TextSelect} )
2109        textSelectionClear();
2110 
2111     \textcolor{keywordflow}{switch} ( \hyperlink{classOkular_1_1Settings_af8e39e25e841b413d67af2cb4dfc0688}{Okular::Settings::mouseMode}() )
2112     \{
2113         \textcolor{keywordflow}{case} \hyperlink{classOkular_1_1Settings_1_1EnumMouseMode_ab2ae04e2d7d069f02195ccf32c52415bae5c77f74b0cf35d7838da1baaad4e822}{Okular::Settings::EnumMouseMode::Browse}:   \textcolor{comment}{// drag
       start / click / link following}
2114             \textcolor{keywordflow}{if} ( leftButton )
2115             \{
2116                 \hyperlink{classPageViewItem}{PageViewItem} * pageItem = 0;
2117                 \textcolor{keywordflow}{if} ( ( e->modifiers() & Qt::ControlModifier ) && ( pageItem = pickItemOnPoint( eventPos.x()
      , eventPos.y() ) ) )
2118                 \{
2119                     \textcolor{comment}{// find out normalized mouse coords inside current item}
2120                     \textcolor{keyword}{const} QRect & itemRect = pageItem->\hyperlink{classPageViewItem_a5d2e73a003f65b4e95c0c21b1698f835}{uncroppedGeometry}();
2121                     \textcolor{keywordtype}{double} nX = pageItem->\hyperlink{classPageViewItem_ac8c32541cbae1efd5b4ab54f0a4b4576}{absToPageX}(eventPos.x());
2122                     \textcolor{keywordtype}{double} nY = pageItem->\hyperlink{classPageViewItem_afdbba9ce015155c0e655efbb23e5d13b}{absToPageY}(eventPos.y());
2123                     \textcolor{keyword}{const} \hyperlink{classOkular_1_1ObjectRect}{Okular::ObjectRect} * orect = pageItem->
      \hyperlink{classPageViewItem_a5c512d95e5563e8d19d1fb3d93dafc31}{page}()->\hyperlink{classOkular_1_1Page_ab6a680a31a5d67861013d706d028dde7}{objectRect}( \hyperlink{classOkular_1_1ObjectRect_a2f77f7653306bae90bfb68277aaafe16a7fa3680e4804e223e58ce2dea398345f}{Okular::ObjectRect::OAnnotation}, nX, nY, 
      itemRect.width(), itemRect.height() );
2124                     d->\hyperlink{classPageViewPrivate_a1cc45a684f1f05e522c4874d017858cb}{mouseAnnPos} = eventPos - itemRect.topLeft();
2125                     \textcolor{keywordflow}{if} ( orect )
2126                         d->\hyperlink{classPageViewPrivate_ac92373de9a9cb5f2085b186a7e321a3b}{mouseAnn} = ( (\hyperlink{classOkular_1_1AnnotationObjectRect}{Okular::AnnotationObjectRect} 
      *)orect )->annotation();
2127                     \textcolor{comment}{// consider no annotation caught if its type is not movable}
2128                     \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_ac92373de9a9cb5f2085b186a7e321a3b}{mouseAnn} && !d->\hyperlink{classPageViewPrivate_ac92373de9a9cb5f2085b186a7e321a3b}{mouseAnn}->\hyperlink{classOkular_1_1Annotation_aebeab4bec3d43cdb6498c6b9d9b59adf}{canBeMoved}() )
2129                         d->\hyperlink{classPageViewPrivate_ac92373de9a9cb5f2085b186a7e321a3b}{mouseAnn} = 0;
2130                 \}
2131                 \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_ac92373de9a9cb5f2085b186a7e321a3b}{mouseAnn} )
2132                 \{
2133                     d->\hyperlink{classPageViewPrivate_ac92373de9a9cb5f2085b186a7e321a3b}{mouseAnn}->\hyperlink{classOkular_1_1Annotation_ab91b36dc7ecfd9cacba7761ec58145fd}{setFlags}( d->\hyperlink{classPageViewPrivate_ac92373de9a9cb5f2085b186a7e321a3b}{mouseAnn}->
      \hyperlink{classOkular_1_1Annotation_a3d6f7ee5057155b90e76c24768880947}{flags}() | \hyperlink{classOkular_1_1Annotation_a8a214541446745761efeda70b3a4302ea9cd51e0fe53aac93798a205e7fb5c04a}{Okular::Annotation::BeingMoved} );
2134                     d->\hyperlink{classPageViewPrivate_a6e1d17de5ec97192d937dae41c89ff74}{mouseAnnPageNum} = pageItem->\hyperlink{classPageViewItem_ad75aab4c1ffd842bd5d54c0cfe84d1bf}{pageNumber}();
2135                 \}
2136                 \textcolor{keywordflow}{else}
2137                 \{
2138                     d->\hyperlink{classPageViewPrivate_aa02b40a75cef0ee7f1b423027a80c8d6}{mouseGrabPos} = d->\hyperlink{classPageViewPrivate_af6568bdd2ef97bb2c81a71961923ee4d}{mouseOnRect} ? QPoint() : d->mousePressPos;
2139                     \textcolor{keywordflow}{if} ( !d->\hyperlink{classPageViewPrivate_af6568bdd2ef97bb2c81a71961923ee4d}{mouseOnRect} )
2140                         d->\hyperlink{classPageViewPrivate_ac0d8482663a19cc6798a2c3b39f78d0e}{leftClickTimer}.start( QApplication::doubleClickInterval() + 10 );
2141                 \}
2142             \}
2143             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( rightButton )
2144             \{
2145                 \hyperlink{classPageViewItem}{PageViewItem} * pageItem = pickItemOnPoint( eventPos.x(), eventPos.y() );
2146                 \textcolor{keywordflow}{if} ( pageItem )
2147                 \{
2148                     \textcolor{comment}{// find out normalized mouse coords inside current item}
2149                     \textcolor{keyword}{const} QRect & itemRect = pageItem->\hyperlink{classPageViewItem_a5d2e73a003f65b4e95c0c21b1698f835}{uncroppedGeometry}();
2150                     \textcolor{keywordtype}{double} nX = pageItem->\hyperlink{classPageViewItem_ac8c32541cbae1efd5b4ab54f0a4b4576}{absToPageX}(eventPos.x());
2151                     \textcolor{keywordtype}{double} nY = pageItem->\hyperlink{classPageViewItem_afdbba9ce015155c0e655efbb23e5d13b}{absToPageY}(eventPos.y());
2152 
2153                     \textcolor{keyword}{const} \hyperlink{classQLinkedList}{QLinkedList< const Okular::ObjectRect *>} 
      orects = pageItem->\hyperlink{classPageViewItem_a5c512d95e5563e8d19d1fb3d93dafc31}{page}()->\hyperlink{classOkular_1_1Page_a501451ef85226267764bda58163a328a}{objectRects}( 
      \hyperlink{classOkular_1_1ObjectRect_a2f77f7653306bae90bfb68277aaafe16a7fa3680e4804e223e58ce2dea398345f}{Okular::ObjectRect::OAnnotation}, nX, nY, itemRect.width(), itemRect.height()
       );
2154 
2155                     \textcolor{keywordflow}{if} ( !orects.isEmpty() )
2156                     \{
2157                         \hyperlink{classAnnotationPopup}{AnnotationPopup} popup( d->\hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}, 
      \hyperlink{classAnnotationPopup_af8654f3f9c2a3377f86daf329f1e0679addf6a6dddf8c14065bb700f1835dafb9}{AnnotationPopup::MultiAnnotationMode}, \textcolor{keyword}{this} );
2158 
2159                         \textcolor{keywordflow}{foreach} ( \textcolor{keyword}{const} \hyperlink{classOkular_1_1ObjectRect}{Okular::ObjectRect} * orect, orects )
2160                         \{
2161                             \hyperlink{classOkular_1_1Annotation}{Okular::Annotation} * ann = ( (
      \hyperlink{classOkular_1_1AnnotationObjectRect}{Okular::AnnotationObjectRect} *)orect )->annotation();
2162                             \textcolor{keywordflow}{if} ( ann && (ann->\hyperlink{classOkular_1_1Annotation_af9833449767eacd740f377e69a1fdd48}{subType}() != 
      \hyperlink{classOkular_1_1Annotation_af71b46e37d5f850b97d5c4de3be9aac0aa0f6a560b971fe69d18156176258d6c8}{Okular::Annotation::AWidget}) )
2163                                 popup.addAnnotation( ann, pageItem->\hyperlink{classPageViewItem_ad75aab4c1ffd842bd5d54c0cfe84d1bf}{pageNumber}() );
2164 
2165                         \}
2166 
2167                         connect( &popup, SIGNAL(\hyperlink{classPageView_aae69bcd4740466f5af216c97f1c12f14}{openAnnotationWindow}(
      \hyperlink{classOkular_1_1Annotation}{Okular::Annotation}*,\textcolor{keywordtype}{int})),
2168                                  \textcolor{keyword}{this}, SLOT(\hyperlink{classPageView_aae69bcd4740466f5af216c97f1c12f14}{openAnnotationWindow}(
      \hyperlink{classOkular_1_1Annotation}{Okular::Annotation}*,\textcolor{keywordtype}{int})) );
2169 
2170                         popup.exec( e->globalPos() );
2171                     \}
2172                 \}
2173             \}
2174             \textcolor{keywordflow}{break};
2175 
2176         \textcolor{keywordflow}{case} \hyperlink{classOkular_1_1Settings_1_1EnumMouseMode_ab2ae04e2d7d069f02195ccf32c52415ba02b6269995c57d3fa3c40c5301591e62}{Okular::Settings::EnumMouseMode::Zoom}:     \textcolor{comment}{// set first
       corner of the zoom rect}
2177             \textcolor{keywordflow}{if} ( leftButton )
2178                 selectionStart( eventPos, palette().color( QPalette::Active, QPalette::Highlight ), \textcolor{keyword}{false} )
      ;
2179             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( rightButton )
2180                 updateZoom( \hyperlink{classPageView_af489dc2492677bb4f422660627f62aeca87c22d03f79c9cac97b85a7481c5e521}{ZoomOut} );
2181             \textcolor{keywordflow}{break};
2182 
2183         \textcolor{keywordflow}{case} \hyperlink{classOkular_1_1Settings_1_1EnumMouseMode_ab2ae04e2d7d069f02195ccf32c52415bab95111677f0c566414f48ece94ce0f45}{Okular::Settings::EnumMouseMode::Magnifier}:
2184             moveMagnifier( e->pos() );
2185             d->\hyperlink{classPageViewPrivate_aee1dfa250e17ccbf107395f2fe733958}{magnifierView}->show();
2186             updateMagnifier( eventPos );
2187             \textcolor{keywordflow}{break};
2188 
2189         \textcolor{keywordflow}{case} \hyperlink{classOkular_1_1Settings_1_1EnumMouseMode_ab2ae04e2d7d069f02195ccf32c52415baa9bf3100d0e93abfec2769957743e6a2}{Okular::Settings::EnumMouseMode::RectSelect}:   \textcolor{comment}{//
       set first corner of the selection rect}
2190              \textcolor{keywordflow}{if} ( leftButton )
2191              \{
2192                 selectionStart( eventPos, palette().color( QPalette::Active, QPalette::Highlight ).light( 1
      20 ), \textcolor{keyword}{false} );
2193              \}
2194             \textcolor{keywordflow}{break};
2195         \textcolor{keywordflow}{case} \hyperlink{classOkular_1_1Settings_1_1EnumMouseMode_ab2ae04e2d7d069f02195ccf32c52415ba5422065f9d7eff6cc08eef755e862af3}{Okular::Settings::EnumMouseMode::TableSelect}:
2196              \textcolor{keywordflow}{if} ( leftButton )
2197              \{
2198                 \textcolor{keywordflow}{if} (d->\hyperlink{classPageViewPrivate_aec476c0b74867740803d4ba34393b154}{tableSelectionParts}.isEmpty())
2199                 \{
2200                     selectionStart( eventPos, palette().color( QPalette::Active, QPalette::Highlight ).
      light( 120 ), \textcolor{keyword}{false} );
2201                 \} \textcolor{keywordflow}{else} \{
2202                     QRect updatedRect;
2203                     \textcolor{keywordflow}{foreach} (\textcolor{keyword}{const} \hyperlink{structTableSelectionPart}{TableSelectionPart} &tsp, d->
      \hyperlink{classPageViewPrivate_aec476c0b74867740803d4ba34393b154}{tableSelectionParts}) \{
2204                         QRect selectionPartRect = tsp.\hyperlink{structTableSelectionPart_ade01925b1444763cb413ad51ae7729a7}{rectInItem}.
      \hyperlink{classOkular_1_1NormalizedRect_a006897c5fcff2c3a97b4141f1a967513}{geometry}(tsp.\hyperlink{structTableSelectionPart_a400edc4e1ec30e28ff8159a741776e4b}{item}->\hyperlink{classPageViewItem_a240924407ae22bb0489363a6a2d481b9}{uncroppedWidth}(), tsp.\hyperlink{structTableSelectionPart_a400edc4e1ec30e28ff8159a741776e4b}{item}->
      \hyperlink{classPageViewItem_af1380fce5dc13a72458ef834c720b128}{uncroppedHeight}());
2205                         selectionPartRect.translate( tsp.\hyperlink{structTableSelectionPart_a400edc4e1ec30e28ff8159a741776e4b}{item}->
      \hyperlink{classPageViewItem_a5d2e73a003f65b4e95c0c21b1698f835}{uncroppedGeometry}().topLeft () );
2206 
2207                         \textcolor{comment}{// This will update the whole table rather than just the added/removed divider}
2208                         \textcolor{comment}{// (which can span more than one part).}
2209                         updatedRect = updatedRect.united(selectionPartRect);
2210 
2211                         \textcolor{keywordflow}{if} (!selectionPartRect.contains(eventPos))
2212                             \textcolor{keywordflow}{continue};
2213 
2214                         \textcolor{comment}{// At this point it's clear we're either adding or removing a divider manually, so
       obviously the user is happy with the guess (if any).}
2215                         d->\hyperlink{classPageViewPrivate_a2ceb798d9b9f218e6acc3769d01102f4}{tableDividersGuessed} = \textcolor{keyword}{false};
2216 
2217                         \textcolor{comment}{// There's probably a neat trick to finding which edge it's closest to,}
2218                         \textcolor{comment}{// but this way has the advantage of simplicity.}
2219                         \textcolor{keyword}{const} \textcolor{keywordtype}{int} fromLeft = abs(selectionPartRect.left() - eventPos.x());
2220                         \textcolor{keyword}{const} \textcolor{keywordtype}{int} fromRight = abs(selectionPartRect.left() + selectionPartRect.width() - 
      eventPos.x());
2221                         \textcolor{keyword}{const} \textcolor{keywordtype}{int} fromTop = abs(selectionPartRect.top() - eventPos.y());
2222                         \textcolor{keyword}{const} \textcolor{keywordtype}{int} fromBottom = abs(selectionPartRect.top() + selectionPartRect.height() - 
      eventPos.y());
2223                         \textcolor{keyword}{const} \textcolor{keywordtype}{int} colScore = fromTop<fromBottom ? fromTop : fromBottom;
2224                         \textcolor{keyword}{const} \textcolor{keywordtype}{int} rowScore = fromLeft<fromRight ? fromLeft : fromRight;
2225 
2226                         \textcolor{keywordflow}{if} (colScore < rowScore) \{
2227                             \textcolor{keywordtype}{bool} deleted=\textcolor{keyword}{false};
2228                             \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i=0; i<d->\hyperlink{classPageViewPrivate_a9d6389f129073d1af9973814a2b1d418}{tableSelectionCols}.length(); i++) \{
2229                                 \textcolor{keyword}{const} \textcolor{keywordtype}{double} col = (d->\hyperlink{classPageViewPrivate_a9d6389f129073d1af9973814a2b1d418}{tableSelectionCols}[i] - tsp.
      \hyperlink{structTableSelectionPart_a237572cb28552e59818071208c21ee43}{rectInSelection}.\hyperlink{classOkular_1_1NormalizedRect_a76336fe9d733f2b559cf8df3ef48f9e7}{left}) / (tsp.\hyperlink{structTableSelectionPart_a237572cb28552e59818071208c21ee43}{rectInSelection}.
      \hyperlink{classOkular_1_1NormalizedRect_a12bbdbb865e6282c9a325b61638553f4}{right} - tsp.\hyperlink{structTableSelectionPart_a237572cb28552e59818071208c21ee43}{rectInSelection}.\hyperlink{classOkular_1_1NormalizedRect_a76336fe9d733f2b559cf8df3ef48f9e7}{left});
2230                                 \textcolor{keyword}{const} \textcolor{keywordtype}{int} colX =  selectionPartRect.left() + col * selectionPartRect.width(
      ) + 0.5;
2231                                 \textcolor{keywordflow}{if} (abs(colX - eventPos.x())<=3) \{
2232                                     d->\hyperlink{classPageViewPrivate_a9d6389f129073d1af9973814a2b1d418}{tableSelectionCols}.removeAt(i);
2233                                     deleted=\textcolor{keyword}{true};
2234 
2235                                     \textcolor{keywordflow}{break};
2236                                 \}
2237                             \}
2238                             \textcolor{keywordflow}{if} (!deleted) \{
2239                                 \textcolor{keywordtype}{double} col = eventPos.x() - selectionPartRect.left();
2240                                 col /= selectionPartRect.width(); \textcolor{comment}{// at this point, it's normalised within
       the part}
2241                                 col *= (tsp.\hyperlink{structTableSelectionPart_a237572cb28552e59818071208c21ee43}{rectInSelection}.\hyperlink{classOkular_1_1NormalizedRect_a12bbdbb865e6282c9a325b61638553f4}{right} - tsp.
      \hyperlink{structTableSelectionPart_a237572cb28552e59818071208c21ee43}{rectInSelection}.\hyperlink{classOkular_1_1NormalizedRect_a76336fe9d733f2b559cf8df3ef48f9e7}{left});
2242                                 col += tsp.\hyperlink{structTableSelectionPart_a237572cb28552e59818071208c21ee43}{rectInSelection}.\hyperlink{classOkular_1_1NormalizedRect_a76336fe9d733f2b559cf8df3ef48f9e7}{left}; \textcolor{comment}{// at this point, it's
       normalised within the whole table}
2243 
2244                                 d->\hyperlink{classPageViewPrivate_a9d6389f129073d1af9973814a2b1d418}{tableSelectionCols}.append(col);
2245                                 qSort(d->\hyperlink{classPageViewPrivate_a9d6389f129073d1af9973814a2b1d418}{tableSelectionCols});
2246                             \}
2247                         \} \textcolor{keywordflow}{else} \{
2248                             \textcolor{keywordtype}{bool} deleted=\textcolor{keyword}{false};
2249                             \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i=0; i<d->\hyperlink{classPageViewPrivate_afa6ab874498223c0f7788831a67ef007}{tableSelectionRows}.length(); i++) \{
2250                                 \textcolor{keyword}{const} \textcolor{keywordtype}{double} row = (d->\hyperlink{classPageViewPrivate_afa6ab874498223c0f7788831a67ef007}{tableSelectionRows}[i] - tsp.
      \hyperlink{structTableSelectionPart_a237572cb28552e59818071208c21ee43}{rectInSelection}.\hyperlink{classOkular_1_1NormalizedRect_acfb70f6417c993508d50090b512cb954}{top}) / (tsp.\hyperlink{structTableSelectionPart_a237572cb28552e59818071208c21ee43}{rectInSelection}.
      \hyperlink{classOkular_1_1NormalizedRect_a06fddfff238371f6f584360c0678741a}{bottom} - tsp.\hyperlink{structTableSelectionPart_a237572cb28552e59818071208c21ee43}{rectInSelection}.\hyperlink{classOkular_1_1NormalizedRect_acfb70f6417c993508d50090b512cb954}{top});
2251                                 \textcolor{keyword}{const} \textcolor{keywordtype}{int} rowY =  selectionPartRect.top() + row * selectionPartRect.height(
      ) + 0.5;
2252                                 \textcolor{keywordflow}{if} (abs(rowY - eventPos.y())<=3) \{
2253                                     d->\hyperlink{classPageViewPrivate_afa6ab874498223c0f7788831a67ef007}{tableSelectionRows}.removeAt(i);
2254                                     deleted=\textcolor{keyword}{true};
2255 
2256                                     \textcolor{keywordflow}{break};
2257                                 \}
2258                             \}
2259                             \textcolor{keywordflow}{if} (!deleted) \{
2260                                 \textcolor{keywordtype}{double} row = eventPos.y() - selectionPartRect.top();
2261                                 row /= selectionPartRect.height(); \textcolor{comment}{// at this point, it's normalised within
       the part}
2262                                 row *= (tsp.\hyperlink{structTableSelectionPart_a237572cb28552e59818071208c21ee43}{rectInSelection}.
      \hyperlink{classOkular_1_1NormalizedRect_a06fddfff238371f6f584360c0678741a}{bottom} - tsp.\hyperlink{structTableSelectionPart_a237572cb28552e59818071208c21ee43}{rectInSelection}.\hyperlink{classOkular_1_1NormalizedRect_acfb70f6417c993508d50090b512cb954}{top});
2263                                 row += tsp.\hyperlink{structTableSelectionPart_a237572cb28552e59818071208c21ee43}{rectInSelection}.\hyperlink{classOkular_1_1NormalizedRect_acfb70f6417c993508d50090b512cb954}{top}; \textcolor{comment}{// at this point, it's
       normalised within the whole table}
2264 
2265                                 d->\hyperlink{classPageViewPrivate_afa6ab874498223c0f7788831a67ef007}{tableSelectionRows}.append(row);
2266                                 qSort(d->\hyperlink{classPageViewPrivate_afa6ab874498223c0f7788831a67ef007}{tableSelectionRows});
2267                             \}
2268                         \}
2269                     \}
2270                     updatedRect.translate( -\hyperlink{classPageView_a055aaf87367b9ad0dcfcdc3d2f5ff619}{contentAreaPosition}() );
2271                     viewport()->update( updatedRect );
2272                 \}
2273              \}
2274             \textcolor{keywordflow}{break};
2275         \textcolor{keywordflow}{case} \hyperlink{classOkular_1_1Settings_1_1EnumMouseMode_ab2ae04e2d7d069f02195ccf32c52415bafafb47a3dab02c4016246ee80090e2d9}{Okular::Settings::EnumMouseMode::TextSelect}:
2276             d->\hyperlink{classPageViewPrivate_aaf8d4b01e8bb0db7ff49544972422a63}{mouseSelectPos} = eventPos;
2277             \textcolor{keywordflow}{if} ( !rightButton )
2278             \{
2279                 textSelectionClear();
2280             \}
2281             \textcolor{keywordflow}{break};
2282     \}
2283 \}
\end{DoxyCode}
\hypertarget{classPageView_ae1bdc30221bd3baa53cba083d7d462e7}{\index{Page\+View@{Page\+View}!mouse\+Release\+Event@{mouse\+Release\+Event}}
\index{mouse\+Release\+Event@{mouse\+Release\+Event}!Page\+View@{Page\+View}}
\subsubsection[{mouse\+Release\+Event}]{\setlength{\rightskip}{0pt plus 5cm}void Page\+View\+::mouse\+Release\+Event (
\begin{DoxyParamCaption}
\item[{Q\+Mouse\+Event $\ast$}]{e}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{classPageView_ae1bdc30221bd3baa53cba083d7d462e7}


Definition at line 2285 of file pageview.\+cpp.


\begin{DoxyCode}
2286 \{
2287     \textcolor{comment}{// stop the drag scrolling}
2288     d->\hyperlink{classPageViewPrivate_a2aefc2e5ac5f4824c39593264277ad6a}{dragScrollTimer}.stop();
2289 
2290     d->\hyperlink{classPageViewPrivate_ac0d8482663a19cc6798a2c3b39f78d0e}{leftClickTimer}.stop();
2291 
2292     \textcolor{comment}{// don't perform any mouse action when no document is shown..}
2293     \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_ad90c795dead9abfaa5818a94e00435bc}{items}.isEmpty() )
2294     \{
2295         \textcolor{comment}{// ..except for right Clicks (emitted even it viewport is empty)}
2296         \textcolor{keywordflow}{if} ( e->button() == Qt::RightButton )
2297             emit \hyperlink{classPageView_a51ac8814a8f47fd02ac0b61627ad164f}{rightClick}( 0, e->globalPos() );
2298         \textcolor{keywordflow}{return};
2299     \}
2300 
2301     \textcolor{comment}{// don't perform any mouse action when viewport is autoscrolling}
2302     \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_acc47dfc95cad4f126c4dbd3e8f31e43b}{viewportMoveActive} )
2303         \textcolor{keywordflow}{return};
2304 
2305     \textcolor{keyword}{const} QPoint eventPos = \hyperlink{classPageView_a7f432d3d6d05c69b568ad66a9c232cd7}{contentAreaPoint}( e->pos() );
2306 
2307     \textcolor{comment}{// handle mode indepent mid buttom zoom}
2308     \textcolor{keywordflow}{if} ( e->button() == Qt::MidButton )
2309     \{
2310         \textcolor{comment}{// request pixmaps since it was disabled during drag}
2311         slotRequestVisiblePixmaps();
2312         \textcolor{comment}{// the cursor may now be over a link.. update it}
2313         \hyperlink{classPageView_a0054ba6d2967fa31dea42dcc9d9020b6}{updateCursor}( eventPos );
2314         \textcolor{keywordflow}{return};
2315     \}
2316 
2317     \textcolor{comment}{// if we're editing an annotation, dispatch event to it}
2318     \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_a07bad73b61f6b400411aacc7e2e820a0}{annotator} && d->\hyperlink{classPageViewPrivate_a07bad73b61f6b400411aacc7e2e820a0}{annotator}->\hyperlink{classPageViewAnnotator_ae7fcfee911a4eb7811865863d852ffac}{active}() )
2319     \{
2320         \hyperlink{classPageViewItem}{PageViewItem} * pageItem = pickItemOnPoint( eventPos.x(), eventPos.y() );
2321         d->\hyperlink{classPageViewPrivate_a07bad73b61f6b400411aacc7e2e820a0}{annotator}->\hyperlink{classPageViewAnnotator_a6cd952408052c6d7de1c1111d61266b0}{routeMouseEvent}( e, pageItem );
2322         \textcolor{keywordflow}{return};
2323     \}
2324 
2325     \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_ac92373de9a9cb5f2085b186a7e321a3b}{mouseAnn} )
2326     \{
2327         \textcolor{comment}{// Just finished to move the annotation}
2328         d->\hyperlink{classPageViewPrivate_ac92373de9a9cb5f2085b186a7e321a3b}{mouseAnn}->\hyperlink{classOkular_1_1Annotation_ab91b36dc7ecfd9cacba7761ec58145fd}{setFlags}( d->\hyperlink{classPageViewPrivate_ac92373de9a9cb5f2085b186a7e321a3b}{mouseAnn}->\hyperlink{classOkular_1_1Annotation_a3d6f7ee5057155b90e76c24768880947}{flags}() & ~Okular
      ::Annotation::BeingMoved );
2329         d->\hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}->\hyperlink{classOkular_1_1Document_ab3ca55619ce1a60a4d60913a216ae01c}{translatePageAnnotation}(d->
      \hyperlink{classPageViewPrivate_a6e1d17de5ec97192d937dae41c89ff74}{mouseAnnPageNum}, d->\hyperlink{classPageViewPrivate_ac92373de9a9cb5f2085b186a7e321a3b}{mouseAnn}, \hyperlink{classOkular_1_1NormalizedPoint}{Okular::NormalizedPoint}( 0.0, 0
      .0 ) );
2330         setCursor( Qt::ArrowCursor );
2331         d->\hyperlink{classPageViewPrivate_ac92373de9a9cb5f2085b186a7e321a3b}{mouseAnn} = 0;
2332     \}
2333 
2334     \textcolor{keywordtype}{bool} leftButton = e->button() == Qt::LeftButton;
2335     \textcolor{keywordtype}{bool} rightButton = e->button() == Qt::RightButton;
2336     \textcolor{keywordflow}{switch} ( \hyperlink{classOkular_1_1Settings_af8e39e25e841b413d67af2cb4dfc0688}{Okular::Settings::mouseMode}() )
2337     \{
2338         \textcolor{keywordflow}{case} \hyperlink{classOkular_1_1Settings_1_1EnumMouseMode_ab2ae04e2d7d069f02195ccf32c52415bae5c77f74b0cf35d7838da1baaad4e822}{Okular::Settings::EnumMouseMode::Browse}:\{
2339             \textcolor{comment}{// return the cursor to its normal state after dragging}
2340             \textcolor{keywordflow}{if} ( cursor().shape() == Qt::ClosedHandCursor )
2341                 \hyperlink{classPageView_a0054ba6d2967fa31dea42dcc9d9020b6}{updateCursor}( eventPos );
2342 
2343             \hyperlink{classPageViewItem}{PageViewItem} * pageItem = pickItemOnPoint( eventPos.x(), eventPos.y() );
2344             \textcolor{keyword}{const} QPoint pressPos = \hyperlink{classPageView_a7f432d3d6d05c69b568ad66a9c232cd7}{contentAreaPoint}( mapFromGlobal( d->
      \hyperlink{classPageViewPrivate_aa4799ae3aa24957d19a95220d8f61216}{mousePressPos} ) );
2345             \textcolor{keyword}{const} \hyperlink{classPageViewItem}{PageViewItem} * pageItemPressPos = pickItemOnPoint( pressPos.x(), pressPos.y()
       );
2346 
2347             \textcolor{comment}{// if the mouse has not moved since the press, that's a -click-}
2348             \textcolor{keywordflow}{if} ( leftButton && pageItem && pageItem == pageItemPressPos &&
2349                  ( (d->\hyperlink{classPageViewPrivate_aa4799ae3aa24957d19a95220d8f61216}{mousePressPos} - e->globalPos()).manhattanLength() < 
      QApplication::startDragDistance() ) )
2350             \{
2351                 \textcolor{keywordtype}{double} nX = pageItem->\hyperlink{classPageViewItem_ac8c32541cbae1efd5b4ab54f0a4b4576}{absToPageX}(eventPos.x());
2352                 \textcolor{keywordtype}{double} nY = pageItem->\hyperlink{classPageViewItem_afdbba9ce015155c0e655efbb23e5d13b}{absToPageY}(eventPos.y());
2353                 \textcolor{keyword}{const} \hyperlink{classOkular_1_1ObjectRect}{Okular::ObjectRect} * rect;
2354                 rect = pageItem->\hyperlink{classPageViewItem_a5c512d95e5563e8d19d1fb3d93dafc31}{page}()->\hyperlink{classOkular_1_1Page_ab6a680a31a5d67861013d706d028dde7}{objectRect}( 
      \hyperlink{classOkular_1_1ObjectRect_a2f77f7653306bae90bfb68277aaafe16a2ad02138861dfdc8bc2a0c29bae5bed2}{Okular::ObjectRect::Action}, nX, nY, pageItem->
      \hyperlink{classPageViewItem_a240924407ae22bb0489363a6a2d481b9}{uncroppedWidth}(), pageItem->\hyperlink{classPageViewItem_af1380fce5dc13a72458ef834c720b128}{uncroppedHeight}() );
2355                 \textcolor{keywordflow}{if} ( rect )
2356                 \{
2357                     \textcolor{comment}{// handle click over a link}
2358                     \textcolor{keyword}{const} \hyperlink{classOkular_1_1Action}{Okular::Action} * action = \textcolor{keyword}{static\_cast<} \textcolor{keyword}{const }
      \hyperlink{classOkular_1_1Action}{Okular::Action} * \textcolor{keyword}{>}( rect->\hyperlink{classOkular_1_1ObjectRect_abb2a3c95452ae753a33f3f5c73391374}{object}() );
2359                     d->\hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}->\hyperlink{classOkular_1_1Document_aabdf41f40fe0391590391e303891b5ed}{processAction}( action );
2360                 \}
2361                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( e->modifiers() == Qt::ShiftModifier )
2362                 \{
2363                     \textcolor{comment}{// TODO: find a better way to activate the source reference "links"}
2364                     \textcolor{comment}{// for the moment they are activated with Shift + left click}
2365                     \textcolor{comment}{// Search the nearest source reference.}
2366                     rect = pageItem->\hyperlink{classPageViewItem_a5c512d95e5563e8d19d1fb3d93dafc31}{page}()->\hyperlink{classOkular_1_1Page_ab6a680a31a5d67861013d706d028dde7}{objectRect}( 
      \hyperlink{classOkular_1_1ObjectRect_a2f77f7653306bae90bfb68277aaafe16abd7dcb9a8d9df2544c535d1a22155f83}{Okular::ObjectRect::SourceRef}, nX, nY, pageItem->
      \hyperlink{classPageViewItem_a240924407ae22bb0489363a6a2d481b9}{uncroppedWidth}(), pageItem->\hyperlink{classPageViewItem_af1380fce5dc13a72458ef834c720b128}{uncroppedHeight}() );
2367                     \textcolor{keywordflow}{if} ( !rect )
2368                     \{
2369                         \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{double} s\_minDistance = 0.025; \textcolor{comment}{// FIXME?: empirical value?}
2370                         \textcolor{keywordtype}{double} distance = 0.0;
2371                         rect = pageItem->\hyperlink{classPageViewItem_a5c512d95e5563e8d19d1fb3d93dafc31}{page}()->\hyperlink{classOkular_1_1Page_abd20ee862d49cc60be0c3daabfb94cf4}{nearestObjectRect}( 
      \hyperlink{classOkular_1_1ObjectRect_a2f77f7653306bae90bfb68277aaafe16abd7dcb9a8d9df2544c535d1a22155f83}{Okular::ObjectRect::SourceRef}, nX, nY, pageItem->
      \hyperlink{classPageViewItem_a240924407ae22bb0489363a6a2d481b9}{uncroppedWidth}(), pageItem->\hyperlink{classPageViewItem_af1380fce5dc13a72458ef834c720b128}{uncroppedHeight}(), &distance );
2372                         \textcolor{keywordflow}{if} ( rect && ( distance > s\_minDistance ) )
2373                             rect = 0;
2374                     \}
2375                     \textcolor{keywordflow}{if} ( rect )
2376                     \{
2377                         \textcolor{keyword}{const} \hyperlink{classOkular_1_1SourceReference}{Okular::SourceReference} * ref = \textcolor{keyword}{static\_cast<} \textcolor{keyword}{const }
      \hyperlink{classOkular_1_1SourceReference}{Okular::SourceReference} * \textcolor{keyword}{>}( rect->\hyperlink{classOkular_1_1ObjectRect_abb2a3c95452ae753a33f3f5c73391374}{object}() );
2378                         d->\hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}->\hyperlink{classOkular_1_1Document_a211b3b966271e561257def97439732a5}{processSourceReference}( ref );
2379                     \}
2380                     \textcolor{keywordflow}{else}
2381                     \{
2382                         \textcolor{keyword}{const} \hyperlink{classOkular_1_1SourceReference}{Okular::SourceReference} * ref = d->
      \hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}->\hyperlink{classOkular_1_1Document_ab8a36b616b699744cc58e4f3ab03ed25}{dynamicSourceReference}( pageItem->  pageNumber(), nX * pageItem->
      \hyperlink{classPageViewItem_a5c512d95e5563e8d19d1fb3d93dafc31}{page}()->\hyperlink{classOkular_1_1Page_a57114e88281da2a51b1bb0d5d4996d53}{width}(), nY * pageItem->\hyperlink{classPageViewItem_a5c512d95e5563e8d19d1fb3d93dafc31}{page}()->\hyperlink{classOkular_1_1Page_a67246a32b3e625946eb5c685b8372a4f}{height}() );
2383                         \textcolor{keywordflow}{if} ( ref )
2384                         \{
2385                             d->\hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}->\hyperlink{classOkular_1_1Document_a211b3b966271e561257def97439732a5}{processSourceReference}( ref );
2386                             \textcolor{keyword}{delete} ref;
2387                         \}
2388                     \}
2389                 \}
2390                 \textcolor{keywordflow}{else}
2391                 \{
2392                     \hyperlink{classOkular_1_1Annotation}{Okular::Annotation} *ann = 0;
2393 
2394                     rect = pageItem->\hyperlink{classPageViewItem_a5c512d95e5563e8d19d1fb3d93dafc31}{page}()->\hyperlink{classOkular_1_1Page_ab6a680a31a5d67861013d706d028dde7}{objectRect}( 
      \hyperlink{classOkular_1_1ObjectRect_a2f77f7653306bae90bfb68277aaafe16a7fa3680e4804e223e58ce2dea398345f}{Okular::ObjectRect::OAnnotation}, nX, nY, pageItem->
      \hyperlink{classPageViewItem_a240924407ae22bb0489363a6a2d481b9}{uncroppedWidth}(), pageItem->\hyperlink{classPageViewItem_af1380fce5dc13a72458ef834c720b128}{uncroppedHeight}() );
2395                     \textcolor{keywordflow}{if} ( rect )
2396                         ann = ( (\hyperlink{classOkular_1_1AnnotationObjectRect}{Okular::AnnotationObjectRect} *)rect )->
      annotation();
2397 
2398                     \textcolor{keywordflow}{if} ( ann )
2399                     \{
2400                         \textcolor{keywordflow}{if} ( ann->\hyperlink{classOkular_1_1Annotation_af9833449767eacd740f377e69a1fdd48}{subType}() == \hyperlink{classOkular_1_1Annotation_af71b46e37d5f850b97d5c4de3be9aac0a711a9d706a86b55f0799e944fb2750e6}{Okular::Annotation::AMovie} 
      )
2401                         \{
2402                             \hyperlink{classVideoWidget}{VideoWidget} *vw = pageItem->\hyperlink{classPageViewItem_a125302408597cab2a58ef2ad309e2912}{videoWidgets}().value( 
      static\_cast<Okular::MovieAnnotation*>( ann )->movie() );
2403                             vw->show();
2404                             vw->\hyperlink{classVideoWidget_a00e08beaa6d8234f0cd3a6ef51e6709c}{play}();
2405                         \}
2406                         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( ann->\hyperlink{classOkular_1_1Annotation_af9833449767eacd740f377e69a1fdd48}{subType}() == 
      \hyperlink{classOkular_1_1Annotation_af71b46e37d5f850b97d5c4de3be9aac0a7cf8ba374ec139a8e2fb47a36182fa32}{Okular::Annotation::AScreen} )
2407                         \{
2408                             d->\hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}->\hyperlink{classOkular_1_1Document_aabdf41f40fe0391590391e303891b5ed}{processAction}( 
      static\_cast<Okular::ScreenAnnotation*>( ann )->action() );
2409                         \}
2410                     \}
2411 \textcolor{preprocessor}{#if 0}
2412                     \textcolor{comment}{// a link can move us to another page or even to another document, there's no point in
       trying to}
2413                     \textcolor{comment}{//  process the click on the image once we have processes the click on the link}
2414                     rect = pageItem->\hyperlink{classPageViewItem_a5c512d95e5563e8d19d1fb3d93dafc31}{page}()->\hyperlink{classOkular_1_1Page_ab6a680a31a5d67861013d706d028dde7}{objectRect}( 
      \hyperlink{classOkular_1_1ObjectRect_a2f77f7653306bae90bfb68277aaafe16a1384fe70201a84f6c3554a7ca6fc84d2}{Okular::ObjectRect::Image}, nX, nY, pageItem->width(), pageItem->height() );
2415                     \textcolor{keywordflow}{if} ( rect )
2416                     \{
2417                         \textcolor{comment}{// handle click over a image}
2418                     \}
2419 \textcolor{comment}{/*      Enrico and me have decided this is not worth the trouble it generates}
2420 \textcolor{comment}{                    else}
2421 \textcolor{comment}{                    \{}
2422 \textcolor{comment}{                        // if not on a rect, the click selects the page}
2423 \textcolor{comment}{                        // if ( pageItem->pageNumber() != (int)d->document->currentPage() )}
2424 \textcolor{comment}{                        d->document->setViewportPage( pageItem->pageNumber(), this );}
2425 \textcolor{comment}{                    \}*/}
2426 \textcolor{preprocessor}{#endif}
2427                 \}
2428             \}
2429             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( rightButton )
2430             \{
2431                 \textcolor{keywordflow}{if} ( pageItem && pageItem == pageItemPressPos &&
2432                      ( (d->\hyperlink{classPageViewPrivate_aa4799ae3aa24957d19a95220d8f61216}{mousePressPos} - e->globalPos()).manhattanLength() < 
      QApplication::startDragDistance() ) )
2433                 \{
2434                     \textcolor{keywordtype}{double} nX = pageItem->\hyperlink{classPageViewItem_ac8c32541cbae1efd5b4ab54f0a4b4576}{absToPageX}(eventPos.x());
2435                     \textcolor{keywordtype}{double} nY = pageItem->\hyperlink{classPageViewItem_afdbba9ce015155c0e655efbb23e5d13b}{absToPageY}(eventPos.y());
2436                     \textcolor{keyword}{const} \hyperlink{classOkular_1_1ObjectRect}{Okular::ObjectRect} * rect;
2437                     rect = pageItem->\hyperlink{classPageViewItem_a5c512d95e5563e8d19d1fb3d93dafc31}{page}()->\hyperlink{classOkular_1_1Page_ab6a680a31a5d67861013d706d028dde7}{objectRect}( 
      \hyperlink{classOkular_1_1ObjectRect_a2f77f7653306bae90bfb68277aaafe16a2ad02138861dfdc8bc2a0c29bae5bed2}{Okular::ObjectRect::Action}, nX, nY, pageItem->
      \hyperlink{classPageViewItem_a240924407ae22bb0489363a6a2d481b9}{uncroppedWidth}(), pageItem->\hyperlink{classPageViewItem_af1380fce5dc13a72458ef834c720b128}{uncroppedHeight}() );
2438                     \textcolor{keywordflow}{if} ( rect )
2439                     \{
2440                         \textcolor{comment}{// handle right click over a link}
2441                         \textcolor{keyword}{const} \hyperlink{classOkular_1_1Action}{Okular::Action} * link = \textcolor{keyword}{static\_cast<} \textcolor{keyword}{const }
      \hyperlink{classOkular_1_1Action}{Okular::Action} * \textcolor{keyword}{>}( rect->\hyperlink{classOkular_1_1ObjectRect_abb2a3c95452ae753a33f3f5c73391374}{object}() );
2442                         \textcolor{comment}{// creating the menu and its actions}
2443                         KMenu menu( \textcolor{keyword}{this} );
2444                         QAction * actProcessLink = menu.addAction( i18n( \textcolor{stringliteral}{"Follow This Link"} ) );
2445                         QAction * actStopSound = 0;
2446                         \textcolor{keywordflow}{if} ( link->\hyperlink{classOkular_1_1Action_ac4c2ef09b350b4041f8d1cfb261c3234}{actionType}() == 
      \hyperlink{classOkular_1_1Action_abe474735af30ea76105595533df9ec47ae1bf0d24610ef55451f2a122bbf48a3c}{Okular::Action::Sound} )
2447                             actStopSound = menu.addAction( i18n( \textcolor{stringliteral}{"Stop Sound"} ) );
2448                         QAction * actCopyLinkLocation = 0;
2449                         \textcolor{keywordflow}{if} ( dynamic\_cast< const Okular::BrowseAction * >( link ) )
2450                             actCopyLinkLocation = menu.addAction( KIcon( \textcolor{stringliteral}{"edit-copy"} ), i18n( \textcolor{stringliteral}{"Copy Link
       Address"} ) );
2451                         QAction * res = menu.exec( e->globalPos() );
2452                         \textcolor{keywordflow}{if} ( res )
2453                         \{
2454                             \textcolor{keywordflow}{if} ( res == actProcessLink )
2455                             \{
2456                                 d->\hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}->\hyperlink{classOkular_1_1Document_aabdf41f40fe0391590391e303891b5ed}{processAction}( link );
2457                             \}
2458                             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( res == actCopyLinkLocation )
2459                             \{
2460                                 \textcolor{keyword}{const} \hyperlink{classOkular_1_1BrowseAction}{Okular::BrowseAction} * browseLink = \textcolor{keyword}{static\_cast<} \textcolor{keyword}{
      const }\hyperlink{classOkular_1_1BrowseAction}{Okular::BrowseAction} * \textcolor{keyword}{>}( link );
2461                                 QClipboard *cb = QApplication::clipboard();
2462                                 cb->setText( browseLink->\hyperlink{classOkular_1_1BrowseAction_a02dfb682ec078bd783e125696bd00964}{url}(), QClipboard::Clipboard );
2463                                 \textcolor{keywordflow}{if} ( cb->supportsSelection() )
2464                                     cb->setText( browseLink->\hyperlink{classOkular_1_1BrowseAction_a02dfb682ec078bd783e125696bd00964}{url}(), QClipboard::Selection );
2465                             \}
2466                             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( res == actStopSound )
2467                             \{
2468                                 \hyperlink{classOkular_1_1AudioPlayer_a5bbc067e81b46451098a2a0becf23e67}{Okular::AudioPlayer::instance}()->
      \hyperlink{classOkular_1_1AudioPlayer_a48730f5eb7dbc0551679c367e0ba9234}{stopPlaybacks}();
2469                             \}
2470                         \}
2471                     \}
2472                     \textcolor{keywordflow}{else}
2473                     \{
2474                         \textcolor{comment}{// a link can move us to another page or even to another document, there's no point
       in trying to}
2475                         \textcolor{comment}{//  process the click on the image once we have processes the click on the link}
2476                         rect = pageItem->\hyperlink{classPageViewItem_a5c512d95e5563e8d19d1fb3d93dafc31}{page}()->\hyperlink{classOkular_1_1Page_ab6a680a31a5d67861013d706d028dde7}{objectRect}( 
      \hyperlink{classOkular_1_1ObjectRect_a2f77f7653306bae90bfb68277aaafe16a1384fe70201a84f6c3554a7ca6fc84d2}{Okular::ObjectRect::Image}, nX, nY, pageItem->
      \hyperlink{classPageViewItem_a240924407ae22bb0489363a6a2d481b9}{uncroppedWidth}(), pageItem->\hyperlink{classPageViewItem_af1380fce5dc13a72458ef834c720b128}{uncroppedHeight}() );
2477                         \textcolor{keywordflow}{if} ( rect )
2478                         \{
2479                             \textcolor{comment}{// handle right click over a image}
2480                         \}
2481                         \textcolor{keywordflow}{else}
2482                         \{
2483                             \textcolor{comment}{// right click (if not within 5 px of the press point, the mode}
2484                             \textcolor{comment}{// had been already changed to 'Selection' instead of 'Normal')}
2485                             emit \hyperlink{classPageView_a51ac8814a8f47fd02ac0b61627ad164f}{rightClick}( pageItem->\hyperlink{classPageViewItem_a5c512d95e5563e8d19d1fb3d93dafc31}{page}(), e->globalPos() );
2486                         \}
2487                     \}
2488                 \}
2489                 \textcolor{keywordflow}{else}
2490                 \{
2491                     \textcolor{comment}{// right click (if not within 5 px of the press point, the mode}
2492                     \textcolor{comment}{// had been already changed to 'Selection' instead of 'Normal')}
2493                     emit \hyperlink{classPageView_a51ac8814a8f47fd02ac0b61627ad164f}{rightClick}( pageItem ? pageItem->\hyperlink{classPageViewItem_a5c512d95e5563e8d19d1fb3d93dafc31}{page}() : 0, e->globalPos() );
2494                 \}
2495             \}
2496             \}\textcolor{keywordflow}{break};
2497 
2498         \textcolor{keywordflow}{case} \hyperlink{classOkular_1_1Settings_1_1EnumMouseMode_ab2ae04e2d7d069f02195ccf32c52415ba02b6269995c57d3fa3c40c5301591e62}{Okular::Settings::EnumMouseMode::Zoom}:
2499             \textcolor{comment}{// if a selection rect has been defined, zoom into it}
2500             \textcolor{keywordflow}{if} ( leftButton && d->\hyperlink{classPageViewPrivate_a8819b152a8279b75359af2a3e0567681}{mouseSelecting} )
2501             \{
2502                 QRect selRect = d->\hyperlink{classPageViewPrivate_a94473cb593838a977bea89214bd1ef66}{mouseSelectionRect}.normalized();
2503                 \textcolor{keywordflow}{if} ( selRect.width() <= 8 && selRect.height() <= 8 )
2504                 \{
2505                     selectionClear();
2506                     \textcolor{keywordflow}{break};
2507                 \}
2508 
2509                 \textcolor{comment}{// find out new zoom ratio and normalized view center (relative to the contentsRect)}
2510                 \textcolor{keywordtype}{double} zoom = qMin( (\textcolor{keywordtype}{double})viewport()->width() / (\textcolor{keywordtype}{double})selRect.width(), (double)viewport
      ()->height() / (double)selRect.height() );
2511                 \textcolor{keywordtype}{double} nX = (double)(selRect.left() + selRect.right()) / (2.0 * (\textcolor{keywordtype}{double})
      \hyperlink{classPageView_acaead56a0e9efe0ad73e8c532fa9f160}{contentAreaWidth}());
2512                 \textcolor{keywordtype}{double} nY = (double)(selRect.top() + selRect.bottom()) / (2.0 * (\textcolor{keywordtype}{double})
      \hyperlink{classPageView_a470bc494311a2741be6b84fca1bed847}{contentAreaHeight}());
2513 
2514                 \textcolor{keyword}{const} \textcolor{keywordtype}{float} upperZoomLimit = d->\hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}->\hyperlink{classOkular_1_1Document_a195dd7b2d52ecaf17541a437d5f9e579}{supportsTiles}() ? 16.0 : 4.0
      ;
2515                 \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_a938411ef880f839b765aeac48a482b9e}{zoomFactor} <= upperZoomLimit || zoom <= 1.0 )
2516                 \{
2517                     d->\hyperlink{classPageViewPrivate_a938411ef880f839b765aeac48a482b9e}{zoomFactor} *= zoom;
2518                     viewport()->setUpdatesEnabled( \textcolor{keyword}{false} );
2519                     updateZoom( \hyperlink{classPageView_af489dc2492677bb4f422660627f62aecab9583485dc9e9287fc1fc02392c5a47b}{ZoomRefreshCurrent} );
2520                     viewport()->setUpdatesEnabled( \textcolor{keyword}{true} );
2521                 \}
2522 
2523                 \textcolor{comment}{// recenter view and update the viewport}
2524                 center( (\textcolor{keywordtype}{int})(nX * \hyperlink{classPageView_acaead56a0e9efe0ad73e8c532fa9f160}{contentAreaWidth}()), (\textcolor{keywordtype}{int})(nY * 
      \hyperlink{classPageView_a470bc494311a2741be6b84fca1bed847}{contentAreaHeight}()) );
2525                 viewport()->update();
2526 
2527                 \textcolor{comment}{// hide message box and delete overlay window}
2528                 selectionClear();
2529             \}
2530             \textcolor{keywordflow}{break};
2531 
2532         \textcolor{keywordflow}{case} \hyperlink{classOkular_1_1Settings_1_1EnumMouseMode_ab2ae04e2d7d069f02195ccf32c52415bab95111677f0c566414f48ece94ce0f45}{Okular::Settings::EnumMouseMode::Magnifier}:
2533             d->\hyperlink{classPageViewPrivate_aee1dfa250e17ccbf107395f2fe733958}{magnifierView}->hide();
2534             \textcolor{keywordflow}{break};
2535 
2536         \textcolor{keywordflow}{case} \hyperlink{classOkular_1_1Settings_1_1EnumMouseMode_ab2ae04e2d7d069f02195ccf32c52415baa9bf3100d0e93abfec2769957743e6a2}{Okular::Settings::EnumMouseMode::RectSelect}:
2537         \{
2538             \textcolor{comment}{// if mouse is released and selection is null this is a rightClick}
2539             \textcolor{keywordflow}{if} ( rightButton && !d->\hyperlink{classPageViewPrivate_a8819b152a8279b75359af2a3e0567681}{mouseSelecting} )
2540             \{
2541                 \hyperlink{classPageViewItem}{PageViewItem} * pageItem = pickItemOnPoint( eventPos.x(), eventPos.y() );
2542                 emit \hyperlink{classPageView_a51ac8814a8f47fd02ac0b61627ad164f}{rightClick}( pageItem ? pageItem->\hyperlink{classPageViewItem_a5c512d95e5563e8d19d1fb3d93dafc31}{page}() : 0, e->globalPos() );
2543                 \textcolor{keywordflow}{break};
2544             \}
2545 
2546             \textcolor{comment}{// if a selection is defined, display a popup}
2547             \textcolor{keywordflow}{if} ( (!leftButton && !d->\hyperlink{classPageViewPrivate_a63b5ccd8ed0f4ac9a89c040aeb3173a9}{aPrevAction}) || (!rightButton && d->
      \hyperlink{classPageViewPrivate_a63b5ccd8ed0f4ac9a89c040aeb3173a9}{aPrevAction}) ||
2548                  !d->\hyperlink{classPageViewPrivate_a8819b152a8279b75359af2a3e0567681}{mouseSelecting} )
2549                 \textcolor{keywordflow}{break};
2550 
2551             QRect selectionRect = d->\hyperlink{classPageViewPrivate_a94473cb593838a977bea89214bd1ef66}{mouseSelectionRect}.normalized();
2552             \textcolor{keywordflow}{if} ( selectionRect.width() <= 8 && selectionRect.height() <= 8 )
2553             \{
2554                 selectionClear();
2555                 \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_a63b5ccd8ed0f4ac9a89c040aeb3173a9}{aPrevAction} )
2556                 \{
2557                     d->\hyperlink{classPageViewPrivate_a63b5ccd8ed0f4ac9a89c040aeb3173a9}{aPrevAction}->trigger();
2558                     d->\hyperlink{classPageViewPrivate_a63b5ccd8ed0f4ac9a89c040aeb3173a9}{aPrevAction} = 0;
2559                 \}
2560                 \textcolor{keywordflow}{break};
2561             \}
2562 
2563             \textcolor{comment}{// if we support text generation}
2564             QString selectedText;
2565             \textcolor{keywordflow}{if} (d->\hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}->\hyperlink{classOkular_1_1Document_acadcf633db6332012dbbd1914fddd0c9}{supportsSearching}())
2566             \{
2567                 \textcolor{comment}{// grab text in selection by extracting it from all intersected pages}
2568                 \textcolor{keyword}{const} \hyperlink{classOkular_1_1Page}{Okular::Page} * okularPage=0;
2569                 QVector< PageViewItem * >::const\_iterator iIt = d->\hyperlink{classPageViewPrivate_ad90c795dead9abfaa5818a94e00435bc}{items}.constBegin(), iEnd = d->
      \hyperlink{classPageViewPrivate_ad90c795dead9abfaa5818a94e00435bc}{items}.constEnd();
2570                 \textcolor{keywordflow}{for} ( ; iIt != iEnd; ++iIt )
2571                 \{
2572                     \hyperlink{classPageViewItem}{PageViewItem} * item = *iIt;
2573                     \textcolor{keywordflow}{if} ( !item->\hyperlink{classPageViewItem_ae7a4dfa618d0cb56e01075842c67bf9f}{isVisible}() )
2574                         \textcolor{keywordflow}{continue};
2575 
2576                     \textcolor{keyword}{const} QRect & itemRect = item->\hyperlink{classPageViewItem_aa2c3e988ccbe9ee162b73d7f89ab0d02}{croppedGeometry}();
2577                     \textcolor{keywordflow}{if} ( selectionRect.intersects( itemRect ) )
2578                     \{
2579                         \textcolor{comment}{// request the textpage if there isn't one}
2580                         okularPage= item->\hyperlink{classPageViewItem_a5c512d95e5563e8d19d1fb3d93dafc31}{page}();
2581                         kWarning() << \textcolor{stringliteral}{"checking if page"} << item->\hyperlink{classPageViewItem_ad75aab4c1ffd842bd5d54c0cfe84d1bf}{pageNumber}() << \textcolor{stringliteral}{"has text:"} << 
      okularPage->\hyperlink{classOkular_1_1Page_a44163bc0e76204a9d9c42da442ee734a}{hasTextPage}();
2582                         \textcolor{keywordflow}{if} ( !okularPage->\hyperlink{classOkular_1_1Page_a44163bc0e76204a9d9c42da442ee734a}{hasTextPage}() )
2583                             d->\hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}->\hyperlink{classOkular_1_1Document_ad4909d8411d3ad8faf716f30a6e9f417}{requestTextPage}( okularPage->
      \hyperlink{classOkular_1_1Page_a6eee5f157a130b47d81ddd63e501664b}{number}() );
2584                         \textcolor{comment}{// grab text in the rect that intersects itemRect}
2585                         QRect relativeRect = selectionRect.intersect( itemRect );
2586                         relativeRect.translate( -item->\hyperlink{classPageViewItem_a5d2e73a003f65b4e95c0c21b1698f835}{uncroppedGeometry}().topLeft() );
2587                         \hyperlink{classOkular_1_1RegularAreaRect}{Okular::RegularAreaRect} rects;
2588                         rects.append( \hyperlink{classOkular_1_1NormalizedRect}{Okular::NormalizedRect}( relativeRect, item->
      \hyperlink{classPageViewItem_a240924407ae22bb0489363a6a2d481b9}{uncroppedWidth}(), item->\hyperlink{classPageViewItem_af1380fce5dc13a72458ef834c720b128}{uncroppedHeight}() ) );
2589                         selectedText += okularPage->\hyperlink{classOkular_1_1Page_a11ab0f2abe5c1e760c046a33fd5393f3}{text}( &rects );
2590                     \}
2591                 \}
2592             \}
2593 
2594             \textcolor{comment}{// popup that ask to copy:text and copy/save:image}
2595             KMenu menu( \textcolor{keyword}{this} );
2596             QAction *textToClipboard = 0, *speakText = 0, *imageToClipboard = 0, *imageToFile = 0;
2597             \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}->\hyperlink{classOkular_1_1Document_acadcf633db6332012dbbd1914fddd0c9}{supportsSearching}() && !selectedText.isEmpty() )
2598             \{
2599                 menu.addTitle( i18np( \textcolor{stringliteral}{"Text (1 character)"}, \textcolor{stringliteral}{"Text (%1 characters)"}, selectedText.length() )
       );
2600                 textToClipboard = menu.addAction( KIcon(\textcolor{stringliteral}{"edit-copy"}), i18n( \textcolor{stringliteral}{"Copy to Clipboard"} ) );
2601                 \textcolor{keywordtype}{bool} copyAllowed = d->\hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}->\hyperlink{classOkular_1_1Document_a6dd7a475b14222c07d1c410311f35cdb}{isAllowed}( 
      \hyperlink{namespaceOkular_a3601f4e702453ddf1125476dd6e7577ba36a60050e67a446a5ff61aac6756718c}{Okular::AllowCopy} );
2602                 \textcolor{keywordflow}{if} ( !copyAllowed )
2603                 \{
2604                     textToClipboard->setEnabled( \textcolor{keyword}{false} );
2605                     textToClipboard->setText( i18n(\textcolor{stringliteral}{"Copy forbidden by DRM"}) );
2606                 \}
2607                 \textcolor{keywordflow}{if} ( \hyperlink{classOkular_1_1Settings_a165dd0c56407e353bda8a773fa1ad485}{Okular::Settings::useKTTSD}() )
2608                     speakText = menu.addAction( KIcon(\textcolor{stringliteral}{"text-speak"}), i18n( \textcolor{stringliteral}{"Speak Text"} ) );
2609                 \textcolor{keywordflow}{if} ( copyAllowed )
2610                 \{
2611                     addWebShortcutsMenu( &menu, selectedText );
2612                 \}
2613             \}
2614             menu.addTitle( i18n( \textcolor{stringliteral}{"Image (%1 by %2 pixels)"}, selectionRect.width(), selectionRect.height() )
       );
2615             imageToClipboard = menu.addAction( KIcon(\textcolor{stringliteral}{"image-x-generic"}), i18n( \textcolor{stringliteral}{"Copy to Clipboard"} ) );
2616             imageToFile = menu.addAction( KIcon(\textcolor{stringliteral}{"document-save"}), i18n( \textcolor{stringliteral}{"Save to File..."} ) );
2617             QAction *choice = menu.exec( e->globalPos() );
2618             \textcolor{comment}{// check if the user really selected an action}
2619             \textcolor{keywordflow}{if} ( choice )
2620             \{
2621             \textcolor{comment}{// IMAGE operation chosen}
2622             \textcolor{keywordflow}{if} ( choice == imageToClipboard || choice == imageToFile )
2623             \{
2624                 \textcolor{comment}{// renders page into a pixmap}
2625                 QPixmap copyPix( selectionRect.width(), selectionRect.height() );
2626                 QPainter copyPainter( &copyPix );
2627                 copyPainter.translate( -selectionRect.left(), -selectionRect.top() );
2628                 drawDocumentOnPainter( selectionRect, &copyPainter );
2629                 copyPainter.end();
2630 
2631                 \textcolor{keywordflow}{if} ( choice == imageToClipboard )
2632                 \{
2633                     \textcolor{comment}{// [2] copy pixmap to clipboard}
2634                     QClipboard *cb = QApplication::clipboard();
2635                     cb->setPixmap( copyPix, QClipboard::Clipboard );
2636                     \textcolor{keywordflow}{if} ( cb->supportsSelection() )
2637                         cb->setPixmap( copyPix, QClipboard::Selection );
2638                     d->\hyperlink{classPageViewPrivate_aa836af37149ea9fbfefd8de357c9194b}{messageWindow}->\hyperlink{classPageViewMessage_a7fd107b1b7a6c0ae64a4d09fc2467982}{display}( i18n( \textcolor{stringliteral}{"Image [%1x%2] copied to
       clipboard."}, copyPix.width(), copyPix.height() ) );
2639                 \}
2640                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( choice == imageToFile )
2641                 \{
2642                     \textcolor{comment}{// [3] save pixmap to file}
2643                     QString fileName = KFileDialog::getSaveFileName( KUrl(), \textcolor{stringliteral}{"image/png image/jpeg"}, \textcolor{keyword}{this}, 
      QString(),
2644                                                                      KFileDialog::ConfirmOverwrite );
2645                     \textcolor{keywordflow}{if} ( fileName.isEmpty() )
2646                         d->\hyperlink{classPageViewPrivate_aa836af37149ea9fbfefd8de357c9194b}{messageWindow}->\hyperlink{classPageViewMessage_a7fd107b1b7a6c0ae64a4d09fc2467982}{display}( i18n( \textcolor{stringliteral}{"File not saved."} ), QString()
      , \hyperlink{classPageViewMessage_aeb83801b92379715663d5a7beaa2ae0ca8d795d55732497f572dde8b9491ce280}{PageViewMessage::Warning} );
2647                     \textcolor{keywordflow}{else}
2648                     \{
2649                         KMimeType::Ptr mime = KMimeType::findByUrl( fileName );
2650                         QString type;
2651                         \textcolor{keywordflow}{if} ( !mime || mime == KMimeType::defaultMimeTypePtr() )
2652                             type = \textcolor{stringliteral}{"PNG"};
2653                         \textcolor{keywordflow}{else}
2654                             type = mime->name().section( \textcolor{charliteral}{'/'}, -1 ).toUpper();
2655                         copyPix.save( fileName, qPrintable( type ) );
2656                         d->\hyperlink{classPageViewPrivate_aa836af37149ea9fbfefd8de357c9194b}{messageWindow}->\hyperlink{classPageViewMessage_a7fd107b1b7a6c0ae64a4d09fc2467982}{display}( i18n( \textcolor{stringliteral}{"Image [%1x%2] saved to %3
       file."}, copyPix.width(), copyPix.height(), type ) );
2657                     \}
2658                 \}
2659             \}
2660             \textcolor{comment}{// TEXT operation chosen}
2661             \textcolor{keywordflow}{else}
2662             \{
2663                 \textcolor{keywordflow}{if} ( choice == textToClipboard )
2664                 \{
2665                     \textcolor{comment}{// [1] copy text to clipboard}
2666                     QClipboard *cb = QApplication::clipboard();
2667                     cb->setText( selectedText, QClipboard::Clipboard );
2668                     \textcolor{keywordflow}{if} ( cb->supportsSelection() )
2669                         cb->setText( selectedText, QClipboard::Selection );
2670                 \}
2671                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( choice == speakText )
2672                 \{
2673                     \textcolor{comment}{// [2] speech selection using KTTSD}
2674                     d->\hyperlink{classPageViewPrivate_afec701325b31f3ef894801171a11353f}{tts}()->\hyperlink{classOkularTTS_a2dc39591e328570027884f725c20ac7a}{say}( selectedText );
2675                 \}
2676             \}
2677             \}
2678             \textcolor{comment}{// clear widget selection and invalidate rect}
2679             selectionClear();
2680 
2681             \textcolor{comment}{// restore previous action if came from it using right button}
2682             \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_a63b5ccd8ed0f4ac9a89c040aeb3173a9}{aPrevAction} )
2683             \{
2684                 d->\hyperlink{classPageViewPrivate_a63b5ccd8ed0f4ac9a89c040aeb3173a9}{aPrevAction}->trigger();
2685                 d->\hyperlink{classPageViewPrivate_a63b5ccd8ed0f4ac9a89c040aeb3173a9}{aPrevAction} = 0;
2686             \}
2687             \}\textcolor{keywordflow}{break};
2688 
2689         \textcolor{keywordflow}{case} \hyperlink{classOkular_1_1Settings_1_1EnumMouseMode_ab2ae04e2d7d069f02195ccf32c52415ba5422065f9d7eff6cc08eef755e862af3}{Okular::Settings::EnumMouseMode::TableSelect}:
2690         \{
2691             \textcolor{comment}{// if mouse is released and selection is null this is a rightClick}
2692             \textcolor{keywordflow}{if} ( rightButton && !d->\hyperlink{classPageViewPrivate_a8819b152a8279b75359af2a3e0567681}{mouseSelecting} )
2693             \{
2694                 \hyperlink{classPageViewItem}{PageViewItem} * pageItem = pickItemOnPoint( eventPos.x(), eventPos.y() );
2695                 emit \hyperlink{classPageView_a51ac8814a8f47fd02ac0b61627ad164f}{rightClick}( pageItem ? pageItem->\hyperlink{classPageViewItem_a5c512d95e5563e8d19d1fb3d93dafc31}{page}() : 0, e->globalPos() );
2696                 \textcolor{keywordflow}{break};
2697             \}
2698 
2699             QRect selectionRect = d->\hyperlink{classPageViewPrivate_a94473cb593838a977bea89214bd1ef66}{mouseSelectionRect}.normalized();
2700             \textcolor{keywordflow}{if} ( selectionRect.width() <= 8 && selectionRect.height() <= 8 && d->
      \hyperlink{classPageViewPrivate_aec476c0b74867740803d4ba34393b154}{tableSelectionParts}.isEmpty() )
2701             \{
2702                 selectionClear();
2703                 \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_a63b5ccd8ed0f4ac9a89c040aeb3173a9}{aPrevAction} )
2704                 \{
2705                     d->\hyperlink{classPageViewPrivate_a63b5ccd8ed0f4ac9a89c040aeb3173a9}{aPrevAction}->trigger();
2706                     d->\hyperlink{classPageViewPrivate_a63b5ccd8ed0f4ac9a89c040aeb3173a9}{aPrevAction} = 0;
2707                 \}
2708                 \textcolor{keywordflow}{break};
2709             \}
2710 
2711             \textcolor{keywordflow}{if} (d->\hyperlink{classPageViewPrivate_a8819b152a8279b75359af2a3e0567681}{mouseSelecting}) \{
2712                 \textcolor{comment}{// break up the selection into page-relative pieces}
2713                 d->\hyperlink{classPageViewPrivate_aec476c0b74867740803d4ba34393b154}{tableSelectionParts}.clear();
2714                 \textcolor{keyword}{const} \hyperlink{classOkular_1_1Page}{Okular::Page} * okularPage=0;
2715                 QVector< PageViewItem * >::const\_iterator iIt = d->\hyperlink{classPageViewPrivate_ad90c795dead9abfaa5818a94e00435bc}{items}.constBegin(), iEnd = d->
      \hyperlink{classPageViewPrivate_ad90c795dead9abfaa5818a94e00435bc}{items}.constEnd();
2716                 \textcolor{keywordflow}{for} ( ; iIt != iEnd; ++iIt )
2717                 \{
2718                     \hyperlink{classPageViewItem}{PageViewItem} * item = *iIt;
2719                     \textcolor{keywordflow}{if} ( !item->\hyperlink{classPageViewItem_ae7a4dfa618d0cb56e01075842c67bf9f}{isVisible}() )
2720                         \textcolor{keywordflow}{continue};
2721 
2722                     \textcolor{keyword}{const} QRect & itemRect = item->\hyperlink{classPageViewItem_aa2c3e988ccbe9ee162b73d7f89ab0d02}{croppedGeometry}();
2723                     \textcolor{keywordflow}{if} ( selectionRect.intersects( itemRect ) )
2724                     \{
2725                         \textcolor{comment}{// request the textpage if there isn't one}
2726                         okularPage= item->\hyperlink{classPageViewItem_a5c512d95e5563e8d19d1fb3d93dafc31}{page}();
2727                         kWarning() << \textcolor{stringliteral}{"checking if page"} << item->\hyperlink{classPageViewItem_ad75aab4c1ffd842bd5d54c0cfe84d1bf}{pageNumber}() << \textcolor{stringliteral}{"has text:"} << 
      okularPage->\hyperlink{classOkular_1_1Page_a44163bc0e76204a9d9c42da442ee734a}{hasTextPage}();
2728                         \textcolor{keywordflow}{if} ( !okularPage->\hyperlink{classOkular_1_1Page_a44163bc0e76204a9d9c42da442ee734a}{hasTextPage}() )
2729                             d->\hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}->\hyperlink{classOkular_1_1Document_ad4909d8411d3ad8faf716f30a6e9f417}{requestTextPage}( okularPage->
      \hyperlink{classOkular_1_1Page_a6eee5f157a130b47d81ddd63e501664b}{number}() );
2730                         \textcolor{comment}{// grab text in the rect that intersects itemRect}
2731                         QRect rectInItem = selectionRect.intersect( itemRect );
2732                         rectInItem.translate( -item->\hyperlink{classPageViewItem_a5d2e73a003f65b4e95c0c21b1698f835}{uncroppedGeometry}().topLeft() );
2733                         QRect rectInSelection = selectionRect.intersect( itemRect );
2734                         rectInSelection.translate( -selectionRect.topLeft() );
2735                         d->\hyperlink{classPageViewPrivate_aec476c0b74867740803d4ba34393b154}{tableSelectionParts}.append(
2736                             \hyperlink{structTableSelectionPart}{TableSelectionPart}(
2737                                 item,
2738                                 \hyperlink{classOkular_1_1NormalizedRect}{Okular::NormalizedRect}( rectInItem, item->
      \hyperlink{classPageViewItem_a240924407ae22bb0489363a6a2d481b9}{uncroppedWidth}(), item->\hyperlink{classPageViewItem_af1380fce5dc13a72458ef834c720b128}{uncroppedHeight}() ),
2739                                 \hyperlink{classOkular_1_1NormalizedRect}{Okular::NormalizedRect}( rectInSelection, 
      selectionRect.width(), selectionRect.height() )
2740                             )
2741                         );
2742                     \}
2743                 \}
2744 
2745                 QRect updatedRect = d->\hyperlink{classPageViewPrivate_a94473cb593838a977bea89214bd1ef66}{mouseSelectionRect}.normalized().adjusted( 0, 0, 1,
       1 );
2746                 updatedRect.translate( -\hyperlink{classPageView_a055aaf87367b9ad0dcfcdc3d2f5ff619}{contentAreaPosition}() );
2747                 d->\hyperlink{classPageViewPrivate_a8819b152a8279b75359af2a3e0567681}{mouseSelecting} = \textcolor{keyword}{false};
2748                 d->\hyperlink{classPageViewPrivate_a94473cb593838a977bea89214bd1ef66}{mouseSelectionRect}.setCoords( 0, 0, 0, 0 );
2749                 d->\hyperlink{classPageViewPrivate_a9d6389f129073d1af9973814a2b1d418}{tableSelectionCols}.clear();
2750                 d->\hyperlink{classPageViewPrivate_afa6ab874498223c0f7788831a67ef007}{tableSelectionRows}.clear();
2751                 guessTableDividers();
2752                 viewport()->update( updatedRect );
2753             \}
2754 
2755             \textcolor{keywordflow}{if} ( !d->\hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}->\hyperlink{classOkular_1_1Document_a6dd7a475b14222c07d1c410311f35cdb}{isAllowed}( \hyperlink{namespaceOkular_a3601f4e702453ddf1125476dd6e7577ba36a60050e67a446a5ff61aac6756718c}{Okular::AllowCopy} ) ) \{
2756                 d->\hyperlink{classPageViewPrivate_aa836af37149ea9fbfefd8de357c9194b}{messageWindow}->\hyperlink{classPageViewMessage_a7fd107b1b7a6c0ae64a4d09fc2467982}{display}( i18n(\textcolor{stringliteral}{"Copy forbidden by DRM"}), QString(), 
      \hyperlink{classPageViewMessage_aeb83801b92379715663d5a7beaa2ae0ca2ae901576662b28f92067841a52e11dd}{PageViewMessage::Info}, -1 );
2757                 \textcolor{keywordflow}{break};
2758             \}
2759 
2760             QString selText;
2761             QString selHtml;
2762             \hyperlink{classQList}{QList<double>} xs = d->\hyperlink{classPageViewPrivate_a9d6389f129073d1af9973814a2b1d418}{tableSelectionCols};
2763             \hyperlink{classQList}{QList<double>} ys = d->\hyperlink{classPageViewPrivate_afa6ab874498223c0f7788831a67ef007}{tableSelectionRows};
2764             xs.prepend(0.0);
2765             xs.append(1.0);
2766             ys.prepend(0.0);
2767             ys.append(1.0);
2768             selHtml = \textcolor{stringliteral}{"<html><head>"}
2769                       \textcolor{stringliteral}{"<meta content=\(\backslash\)"text/html; charset=utf-8\(\backslash\)" http-equiv=\(\backslash\)"Content-Type\(\backslash\)">"}
2770                       \textcolor{stringliteral}{"</head><body><table>"};
2771             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} r=0; r+1<ys.length(); r++) \{
2772                 selHtml += \textcolor{stringliteral}{"<tr>"};
2773                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} c=0; c+1<xs.length(); c++) \{
2774                     \hyperlink{classOkular_1_1NormalizedRect}{Okular::NormalizedRect} cell(xs[c], ys[r], xs[c+1], ys[r+1]);
2775                     \textcolor{keywordflow}{if} (c) selText += \textcolor{charliteral}{'\(\backslash\)t'};
2776                     QString txt;
2777                     \textcolor{keywordflow}{foreach} (\textcolor{keyword}{const} \hyperlink{structTableSelectionPart}{TableSelectionPart} &tsp, d->
      \hyperlink{classPageViewPrivate_aec476c0b74867740803d4ba34393b154}{tableSelectionParts}) \{
2778                         \textcolor{comment}{// first, crop the cell to this part}
2779                         \textcolor{keywordflow}{if} (!tsp.\hyperlink{structTableSelectionPart_a237572cb28552e59818071208c21ee43}{rectInSelection}.\hyperlink{classOkular_1_1NormalizedRect_a9c2d89ccafd17802316c90406c6ec756}{intersects}(cell))
2780                             \textcolor{keywordflow}{continue};
2781                         \hyperlink{classOkular_1_1NormalizedRect}{Okular::NormalizedRect} cellPart = tsp.
      \hyperlink{structTableSelectionPart_a237572cb28552e59818071208c21ee43}{rectInSelection} & cell; \textcolor{comment}{// intersection}
2782 
2783                         \textcolor{comment}{// second, convert it from table coordinates to part coordinates}
2784                         cellPart.\hyperlink{classOkular_1_1NormalizedRect_a76336fe9d733f2b559cf8df3ef48f9e7}{left} -= tsp.\hyperlink{structTableSelectionPart_a237572cb28552e59818071208c21ee43}{rectInSelection}.
      \hyperlink{classOkular_1_1NormalizedRect_a76336fe9d733f2b559cf8df3ef48f9e7}{left};
2785                         cellPart.\hyperlink{classOkular_1_1NormalizedRect_a76336fe9d733f2b559cf8df3ef48f9e7}{left} /= (tsp.\hyperlink{structTableSelectionPart_a237572cb28552e59818071208c21ee43}{rectInSelection}.
      \hyperlink{classOkular_1_1NormalizedRect_a12bbdbb865e6282c9a325b61638553f4}{right} - tsp.\hyperlink{structTableSelectionPart_a237572cb28552e59818071208c21ee43}{rectInSelection}.\hyperlink{classOkular_1_1NormalizedRect_a76336fe9d733f2b559cf8df3ef48f9e7}{left});
2786                         cellPart.\hyperlink{classOkular_1_1NormalizedRect_a12bbdbb865e6282c9a325b61638553f4}{right} -= tsp.\hyperlink{structTableSelectionPart_a237572cb28552e59818071208c21ee43}{rectInSelection}.
      \hyperlink{classOkular_1_1NormalizedRect_a76336fe9d733f2b559cf8df3ef48f9e7}{left};
2787                         cellPart.\hyperlink{classOkular_1_1NormalizedRect_a12bbdbb865e6282c9a325b61638553f4}{right} /= (tsp.\hyperlink{structTableSelectionPart_a237572cb28552e59818071208c21ee43}{rectInSelection}.
      \hyperlink{classOkular_1_1NormalizedRect_a12bbdbb865e6282c9a325b61638553f4}{right} - tsp.\hyperlink{structTableSelectionPart_a237572cb28552e59818071208c21ee43}{rectInSelection}.\hyperlink{classOkular_1_1NormalizedRect_a76336fe9d733f2b559cf8df3ef48f9e7}{left});
2788                         cellPart.\hyperlink{classOkular_1_1NormalizedRect_acfb70f6417c993508d50090b512cb954}{top} -= tsp.\hyperlink{structTableSelectionPart_a237572cb28552e59818071208c21ee43}{rectInSelection}.
      \hyperlink{classOkular_1_1NormalizedRect_acfb70f6417c993508d50090b512cb954}{top};
2789                         cellPart.\hyperlink{classOkular_1_1NormalizedRect_acfb70f6417c993508d50090b512cb954}{top} /= (tsp.\hyperlink{structTableSelectionPart_a237572cb28552e59818071208c21ee43}{rectInSelection}.
      \hyperlink{classOkular_1_1NormalizedRect_a06fddfff238371f6f584360c0678741a}{bottom} - tsp.\hyperlink{structTableSelectionPart_a237572cb28552e59818071208c21ee43}{rectInSelection}.\hyperlink{classOkular_1_1NormalizedRect_acfb70f6417c993508d50090b512cb954}{top});
2790                         cellPart.\hyperlink{classOkular_1_1NormalizedRect_a06fddfff238371f6f584360c0678741a}{bottom} -= tsp.\hyperlink{structTableSelectionPart_a237572cb28552e59818071208c21ee43}{rectInSelection}.
      \hyperlink{classOkular_1_1NormalizedRect_acfb70f6417c993508d50090b512cb954}{top};
2791                         cellPart.\hyperlink{classOkular_1_1NormalizedRect_a06fddfff238371f6f584360c0678741a}{bottom} /= (tsp.\hyperlink{structTableSelectionPart_a237572cb28552e59818071208c21ee43}{rectInSelection}.
      \hyperlink{classOkular_1_1NormalizedRect_a06fddfff238371f6f584360c0678741a}{bottom} - tsp.\hyperlink{structTableSelectionPart_a237572cb28552e59818071208c21ee43}{rectInSelection}.\hyperlink{classOkular_1_1NormalizedRect_acfb70f6417c993508d50090b512cb954}{top});
2792 
2793                         \textcolor{comment}{// third, convert from part coordinates to item coordinates}
2794                         cellPart.\hyperlink{classOkular_1_1NormalizedRect_a76336fe9d733f2b559cf8df3ef48f9e7}{left} *= (tsp.\hyperlink{structTableSelectionPart_ade01925b1444763cb413ad51ae7729a7}{rectInItem}.\hyperlink{classOkular_1_1NormalizedRect_a12bbdbb865e6282c9a325b61638553f4}{right} - tsp.
      \hyperlink{structTableSelectionPart_ade01925b1444763cb413ad51ae7729a7}{rectInItem}.\hyperlink{classOkular_1_1NormalizedRect_a76336fe9d733f2b559cf8df3ef48f9e7}{left});
2795                         cellPart.\hyperlink{classOkular_1_1NormalizedRect_a76336fe9d733f2b559cf8df3ef48f9e7}{left} += tsp.\hyperlink{structTableSelectionPart_ade01925b1444763cb413ad51ae7729a7}{rectInItem}.\hyperlink{classOkular_1_1NormalizedRect_a76336fe9d733f2b559cf8df3ef48f9e7}{left};
2796                         cellPart.\hyperlink{classOkular_1_1NormalizedRect_a12bbdbb865e6282c9a325b61638553f4}{right} *= (tsp.\hyperlink{structTableSelectionPart_ade01925b1444763cb413ad51ae7729a7}{rectInItem}.\hyperlink{classOkular_1_1NormalizedRect_a12bbdbb865e6282c9a325b61638553f4}{right} - tsp.
      \hyperlink{structTableSelectionPart_ade01925b1444763cb413ad51ae7729a7}{rectInItem}.\hyperlink{classOkular_1_1NormalizedRect_a76336fe9d733f2b559cf8df3ef48f9e7}{left});
2797                         cellPart.\hyperlink{classOkular_1_1NormalizedRect_a12bbdbb865e6282c9a325b61638553f4}{right} += tsp.\hyperlink{structTableSelectionPart_ade01925b1444763cb413ad51ae7729a7}{rectInItem}.\hyperlink{classOkular_1_1NormalizedRect_a76336fe9d733f2b559cf8df3ef48f9e7}{left};
2798                         cellPart.\hyperlink{classOkular_1_1NormalizedRect_acfb70f6417c993508d50090b512cb954}{top} *= (tsp.\hyperlink{structTableSelectionPart_ade01925b1444763cb413ad51ae7729a7}{rectInItem}.\hyperlink{classOkular_1_1NormalizedRect_a06fddfff238371f6f584360c0678741a}{bottom} - tsp.
      \hyperlink{structTableSelectionPart_ade01925b1444763cb413ad51ae7729a7}{rectInItem}.\hyperlink{classOkular_1_1NormalizedRect_acfb70f6417c993508d50090b512cb954}{top});
2799                         cellPart.\hyperlink{classOkular_1_1NormalizedRect_acfb70f6417c993508d50090b512cb954}{top} += tsp.\hyperlink{structTableSelectionPart_ade01925b1444763cb413ad51ae7729a7}{rectInItem}.\hyperlink{classOkular_1_1NormalizedRect_acfb70f6417c993508d50090b512cb954}{top};
2800                         cellPart.\hyperlink{classOkular_1_1NormalizedRect_a06fddfff238371f6f584360c0678741a}{bottom} *= (tsp.\hyperlink{structTableSelectionPart_ade01925b1444763cb413ad51ae7729a7}{rectInItem}.
      \hyperlink{classOkular_1_1NormalizedRect_a06fddfff238371f6f584360c0678741a}{bottom} - tsp.\hyperlink{structTableSelectionPart_ade01925b1444763cb413ad51ae7729a7}{rectInItem}.\hyperlink{classOkular_1_1NormalizedRect_acfb70f6417c993508d50090b512cb954}{top});
2801                         cellPart.\hyperlink{classOkular_1_1NormalizedRect_a06fddfff238371f6f584360c0678741a}{bottom} += tsp.\hyperlink{structTableSelectionPart_ade01925b1444763cb413ad51ae7729a7}{rectInItem}.\hyperlink{classOkular_1_1NormalizedRect_acfb70f6417c993508d50090b512cb954}{top};
2802 
2803                         \textcolor{comment}{// now get the text}
2804                         \hyperlink{classOkular_1_1RegularAreaRect}{Okular::RegularAreaRect} rects;
2805                         rects.append( cellPart );
2806                         txt += tsp.\hyperlink{structTableSelectionPart_a400edc4e1ec30e28ff8159a741776e4b}{item}->\hyperlink{classPageViewItem_a5c512d95e5563e8d19d1fb3d93dafc31}{page}()->\hyperlink{classOkular_1_1Page_a11ab0f2abe5c1e760c046a33fd5393f3}{text}( &rects, 
      \hyperlink{classOkular_1_1TextPage_a07b135c84863f18df1d08e95aeeffd34a8f4ca9fdbb6e543cd335d787bc80eabc}{Okular::TextPage::CentralPixelTextAreaInclusionBehaviour}
       );
2807                     \}
2808                     QString html = txt;
2809                     selText += txt.replace(\textcolor{charliteral}{'\(\backslash\)n'}, \textcolor{charliteral}{' '});
2810                     html.replace(\textcolor{charliteral}{'&'}, \textcolor{stringliteral}{"&amp;"}).replace(\textcolor{charliteral}{'<'}, \textcolor{stringliteral}{"&lt;"}).replace(\textcolor{charliteral}{'>'}, \textcolor{stringliteral}{"&gt;"});
2811                     \textcolor{comment}{// Remove newlines, do not turn them into <br>, because}
2812                     \textcolor{comment}{// Excel interprets <br> within cell as new cell...}
2813                     html.replace(\textcolor{charliteral}{'\(\backslash\)n'}, \textcolor{stringliteral}{" "});
2814                     selHtml += \textcolor{stringliteral}{"<td>"}+html+\textcolor{stringliteral}{"</td>"};
2815                 \}
2816                 selText += \textcolor{charliteral}{'\(\backslash\)n'};
2817                 selHtml += \textcolor{stringliteral}{"</tr>\(\backslash\)n"};
2818             \}
2819             selHtml += \textcolor{stringliteral}{"</table></body></html>\(\backslash\)n"};
2820 
2821 
2822             QClipboard *cb = QApplication::clipboard();
2823             QMimeData *md = \textcolor{keyword}{new} QMimeData();
2824             md->setText(selText);
2825             md->setHtml(selHtml);
2826             cb->setMimeData( md, QClipboard::Clipboard );
2827             \textcolor{keywordflow}{if} ( cb->supportsSelection() )
2828                 cb->setMimeData( md, QClipboard::Selection );
2829 
2830         \}\textcolor{keywordflow}{break};
2831             \textcolor{keywordflow}{case} \hyperlink{classOkular_1_1Settings_1_1EnumMouseMode_ab2ae04e2d7d069f02195ccf32c52415bafafb47a3dab02c4016246ee80090e2d9}{Okular::Settings::EnumMouseMode::TextSelect}:
2832                 \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_a64e9f3610cf2b731a3c0c4eae976e687}{mouseTextSelecting} )
2833                 \{
2834                     d->\hyperlink{classPageViewPrivate_a64e9f3610cf2b731a3c0c4eae976e687}{mouseTextSelecting} = \textcolor{keyword}{false};
2835 \textcolor{comment}{//                    textSelectionClear();}
2836                     \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}->\hyperlink{classOkular_1_1Document_a6dd7a475b14222c07d1c410311f35cdb}{isAllowed}( 
      \hyperlink{namespaceOkular_a3601f4e702453ddf1125476dd6e7577ba36a60050e67a446a5ff61aac6756718c}{Okular::AllowCopy} ) )
2837                     \{
2838                         \textcolor{keyword}{const} QString text = d->\hyperlink{classPageViewPrivate_a0ecc0d9ad35e6990bc4b82f3649fc6c4}{selectedText}();
2839                         \textcolor{keywordflow}{if} ( !text.isEmpty() )
2840                         \{
2841                             QClipboard *cb = QApplication::clipboard();
2842                             \textcolor{keywordflow}{if} ( cb->supportsSelection() )
2843                                 cb->setText( text, QClipboard::Selection );
2844                         \}
2845                     \}
2846                 \}
2847                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( !d->\hyperlink{classPageViewPrivate_aa4799ae3aa24957d19a95220d8f61216}{mousePressPos}.isNull() && rightButton )
2848                 \{
2849                     \hyperlink{classPageViewItem}{PageViewItem}* item = pickItemOnPoint(eventPos.x(),eventPos.y());
2850                     \textcolor{keyword}{const} \hyperlink{classOkular_1_1Page}{Okular::Page} *page;
2851                     \textcolor{comment}{//if there is text selected in the page}
2852                     \textcolor{keywordflow}{if} (item && (page = item->\hyperlink{classPageViewItem_a5c512d95e5563e8d19d1fb3d93dafc31}{page}())->textSelection())
2853                     \{
2854                         KMenu menu( \textcolor{keyword}{this} );
2855                         QAction *textToClipboard = menu.addAction( KIcon( \textcolor{stringliteral}{"edit-copy"} ), i18n( \textcolor{stringliteral}{"Copy Text"} 
      ) );
2856                         QAction *speakText = 0;
2857                         QAction *httpLink = 0;
2858                         \textcolor{keywordflow}{if} ( \hyperlink{classOkular_1_1Settings_a165dd0c56407e353bda8a773fa1ad485}{Okular::Settings::useKTTSD}() )
2859                             speakText = menu.addAction( KIcon( \textcolor{stringliteral}{"text-speak"} ), i18n( \textcolor{stringliteral}{"Speak Text"} ) );
2860                         \textcolor{keywordflow}{if} ( !d->\hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}->\hyperlink{classOkular_1_1Document_a6dd7a475b14222c07d1c410311f35cdb}{isAllowed}( 
      \hyperlink{namespaceOkular_a3601f4e702453ddf1125476dd6e7577ba36a60050e67a446a5ff61aac6756718c}{Okular::AllowCopy} ) )
2861                         \{
2862                             textToClipboard->setEnabled( \textcolor{keyword}{false} );
2863                             textToClipboard->setText( i18n(\textcolor{stringliteral}{"Copy forbidden by DRM"}) );
2864                         \}
2865                         \textcolor{keywordflow}{else}
2866                         \{
2867                             addWebShortcutsMenu( &menu, d->\hyperlink{classPageViewPrivate_a0ecc0d9ad35e6990bc4b82f3649fc6c4}{selectedText}() );
2868                         \}
2869                         \textcolor{keyword}{const} QString url = \hyperlink{namespaceUrlUtils_a1b212366f82f315620027b1e567a7b3b}{UrlUtils::getUrl}( d->
      \hyperlink{classPageViewPrivate_a0ecc0d9ad35e6990bc4b82f3649fc6c4}{selectedText}() );
2870                         \textcolor{keywordflow}{if} ( !url.isEmpty() )
2871                         \{
2872                             \textcolor{keyword}{const} QString squeezedText = KStringHandler::rsqueeze( url, 30 );
2873                             httpLink = menu.addAction( i18n( \textcolor{stringliteral}{"Go to '%1'"}, squeezedText ) );
2874                         \}
2875                         QAction *choice = menu.exec( e->globalPos() );
2876                         \textcolor{comment}{// check if the user really selected an action}
2877                         \textcolor{keywordflow}{if} ( choice )
2878                         \{
2879                             \textcolor{keywordflow}{if} ( choice == textToClipboard )
2880                                 \hyperlink{classPageView_abee3291f817500a510a818cf5e2819d4}{copyTextSelection}();
2881                             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( choice == speakText )
2882                             \{
2883                                 \textcolor{keyword}{const} QString text = d->\hyperlink{classPageViewPrivate_a0ecc0d9ad35e6990bc4b82f3649fc6c4}{selectedText}();
2884                                 d->\hyperlink{classPageViewPrivate_afec701325b31f3ef894801171a11353f}{tts}()->\hyperlink{classOkularTTS_a2dc39591e328570027884f725c20ac7a}{say}( text );
2885                             \}
2886                             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( choice == httpLink )
2887                                 \textcolor{keyword}{new} KRun( KUrl( url ), \textcolor{keyword}{this} );
2888                         \}
2889                     \}
2890                 \}
2891             \textcolor{keywordflow}{break};
2892     \}
2893 
2894     \textcolor{comment}{// reset mouse press / 'drag start' position}
2895     d->\hyperlink{classPageViewPrivate_aa4799ae3aa24957d19a95220d8f61216}{mousePressPos} = QPoint();
2896 \}
\end{DoxyCode}
\hypertarget{classPageView_a48d63f3a6165d255d0a9b3db15e1e4c1}{\index{Page\+View@{Page\+View}!notice\+Message@{notice\+Message}}
\index{notice\+Message@{notice\+Message}!Page\+View@{Page\+View}}
\subsubsection[{notice\+Message}]{\setlength{\rightskip}{0pt plus 5cm}void Page\+View\+::notice\+Message (
\begin{DoxyParamCaption}
\item[{const Q\+String \&}]{message, }
\item[{int}]{duration = {\ttfamily -\/1}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [slot]}}}\label{classPageView_a48d63f3a6165d255d0a9b3db15e1e4c1}


Definition at line 123 of file pageview.\+h.


\begin{DoxyCode}
124         \{
125             \hyperlink{classPageView_ab9e13eff3e9a67c96985f9f138d35bb1}{displayMessage}( message, QString(), 
      \hyperlink{classPageViewMessage_aeb83801b92379715663d5a7beaa2ae0ca2ae901576662b28f92067841a52e11dd}{PageViewMessage::Info}, duration );
126         \}
\end{DoxyCode}
\hypertarget{classPageView_a85d5c9030f5f5f0e85b8fdb981de81e9}{\index{Page\+View@{Page\+View}!notify\+Contents\+Cleared@{notify\+Contents\+Cleared}}
\index{notify\+Contents\+Cleared@{notify\+Contents\+Cleared}!Page\+View@{Page\+View}}
\subsubsection[{notify\+Contents\+Cleared}]{\setlength{\rightskip}{0pt plus 5cm}void Page\+View\+::notify\+Contents\+Cleared (
\begin{DoxyParamCaption}
\item[{int}]{flags}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classPageView_a85d5c9030f5f5f0e85b8fdb981de81e9}
This method is called whenever the content described by the passed {\ttfamily flags} has been cleared. 

Reimplemented from \hyperlink{classOkular_1_1DocumentObserver_ada5aff7f1944ccdf81526b8278ab5843}{Okular\+::\+Document\+Observer}.



Definition at line 1307 of file pageview.\+cpp.


\begin{DoxyCode}
1308 \{
1309     \textcolor{comment}{// if pixmaps were cleared, re-ask them}
1310     \textcolor{keywordflow}{if} ( changedFlags & DocumentObserver::Pixmap )
1311         QMetaObject::invokeMethod(\textcolor{keyword}{this}, \textcolor{stringliteral}{"slotRequestVisiblePixmaps"}, Qt::QueuedConnection);
1312 \}
\end{DoxyCode}
\hypertarget{classPageView_aed6c4bd9e667099fcfdb28ba3ed7be33}{\index{Page\+View@{Page\+View}!notify\+Current\+Page\+Changed@{notify\+Current\+Page\+Changed}}
\index{notify\+Current\+Page\+Changed@{notify\+Current\+Page\+Changed}!Page\+View@{Page\+View}}
\subsubsection[{notify\+Current\+Page\+Changed}]{\setlength{\rightskip}{0pt plus 5cm}void Page\+View\+::notify\+Current\+Page\+Changed (
\begin{DoxyParamCaption}
\item[{int}]{previous, }
\item[{int}]{current}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classPageView_aed6c4bd9e667099fcfdb28ba3ed7be33}
This method is called after the current page of the document has been entered.


\begin{DoxyParams}{Parameters}
{\em previous} & The number of the previous page (is {\ttfamily -\/1} for the initial page change). \\
\hline
{\em current} & The number of the current page.\\
\hline
\end{DoxyParams}
\begin{DoxySince}{Since}
0.\+16 (K\+D\+E 4.\+10) 
\end{DoxySince}


Reimplemented from \hyperlink{classOkular_1_1DocumentObserver_ae449ca3f3f8aa7dffab61a6b723a1fd8}{Okular\+::\+Document\+Observer}.



Definition at line 1345 of file pageview.\+cpp.


\begin{DoxyCode}
1346 \{
1347     \textcolor{keywordflow}{if} ( previous != -1 )
1348     \{
1349         \hyperlink{classPageViewItem}{PageViewItem} * item = d->\hyperlink{classPageViewPrivate_ad90c795dead9abfaa5818a94e00435bc}{items}.at( previous );
1350         \textcolor{keywordflow}{if} ( item )
1351         \{
1352             Q\_FOREACH ( \hyperlink{classVideoWidget}{VideoWidget} *videoWidget, item->\hyperlink{classPageViewItem_a125302408597cab2a58ef2ad309e2912}{videoWidgets}() )
1353                 videoWidget->\hyperlink{classVideoWidget_a332a8907b98df63648b90f6ae6d42cac}{pageLeft}();
1354         \}
1355     \}
1356 
1357     \textcolor{keywordflow}{if} ( current != -1 )
1358     \{
1359         \hyperlink{classPageViewItem}{PageViewItem} * item = d->\hyperlink{classPageViewPrivate_ad90c795dead9abfaa5818a94e00435bc}{items}.at( current );
1360         \textcolor{keywordflow}{if} ( item )
1361         \{
1362             Q\_FOREACH ( \hyperlink{classVideoWidget}{VideoWidget} *videoWidget, item->\hyperlink{classPageViewItem_a125302408597cab2a58ef2ad309e2912}{videoWidgets}() )
1363                 videoWidget->\hyperlink{classVideoWidget_ad7ddc0da1795a191cd53618e71b7b937}{pageEntered}();
1364         \}
1365     \}
1366 \}
\end{DoxyCode}
\hypertarget{classPageView_a5175ad1352eea1674a687f5a0072e874}{\index{Page\+View@{Page\+View}!notify\+Page\+Changed@{notify\+Page\+Changed}}
\index{notify\+Page\+Changed@{notify\+Page\+Changed}!Page\+View@{Page\+View}}
\subsubsection[{notify\+Page\+Changed}]{\setlength{\rightskip}{0pt plus 5cm}void Page\+View\+::notify\+Page\+Changed (
\begin{DoxyParamCaption}
\item[{int}]{page, }
\item[{int}]{flags}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classPageView_a5175ad1352eea1674a687f5a0072e874}
This method is called whenever the content on {\ttfamily page} described by the passed {\ttfamily flags} has been changed. 

Reimplemented from \hyperlink{classOkular_1_1DocumentObserver_abf7600dabd7d6c1e38c950d99f7be595}{Okular\+::\+Document\+Observer}.



Definition at line 1240 of file pageview.\+cpp.


\begin{DoxyCode}
1241 \{
1242     \textcolor{comment}{// only handle pixmap / highlight changes notifies}
1243     \textcolor{keywordflow}{if} ( changedFlags & DocumentObserver::Bookmark )
1244         \textcolor{keywordflow}{return};
1245 
1246     \textcolor{keywordflow}{if} ( changedFlags & DocumentObserver::Annotations )
1247     \{
1248         \textcolor{keyword}{const} \hyperlink{classQLinkedList}{QLinkedList< Okular::Annotation * >} annots = d->
      \hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}->\hyperlink{classOkular_1_1Document_a1c95c2f192d739c217d00971da48f69d}{page}( pageNumber )->\hyperlink{classOkular_1_1Page_ad82e0f26d5435b5ccfa3d23c359ac23c}{annotations}();
1249         \textcolor{keyword}{const} \hyperlink{classQLinkedList}{QLinkedList< Okular::Annotation * >::ConstIterator}
       annItEnd = annots.end();
1250         QHash< Okular::Annotation*, AnnotWindow * >::Iterator it = d->
      \hyperlink{classPageViewPrivate_adb8fb9cfc6f045acbbe4cb534003adb2}{m\_annowindows}.begin();
1251         \textcolor{keywordflow}{for} ( ; it != d->\hyperlink{classPageViewPrivate_adb8fb9cfc6f045acbbe4cb534003adb2}{m\_annowindows}.end(); )
1252         \{
1253             \hyperlink{classQLinkedList}{QLinkedList< Okular::Annotation * >::ConstIterator}
       annIt = qFind( annots, it.key() );
1254             \textcolor{keywordflow}{if} ( annIt != annItEnd )
1255             \{
1256                 (*it)->reloadInfo();
1257                 ++it;
1258             \}
1259             \textcolor{keywordflow}{else}
1260             \{
1261                 \hyperlink{classAnnotWindow}{AnnotWindow} *w = *it;
1262                 it = d->\hyperlink{classPageViewPrivate_adb8fb9cfc6f045acbbe4cb534003adb2}{m\_annowindows}.erase( it );
1263                 \textcolor{comment}{// Need to delete after removing from the list}
1264                 \textcolor{comment}{// otherwise deleting will call slotAnnotationWindowDestroyed which will mess}
1265                 \textcolor{comment}{// the list and the iterators}
1266                 \textcolor{keyword}{delete} w;
1267             \}
1268         \}
1269     \}
1270 
1271     \textcolor{keywordflow}{if} ( changedFlags & DocumentObserver::BoundingBox )
1272     \{
1273 \textcolor{preprocessor}{#ifdef PAGEVIEW\_DEBUG}
1274         kDebug() << \textcolor{stringliteral}{"BoundingBox change on page"} << pageNumber;
1275 \textcolor{preprocessor}{#endif}
1276         slotRelayoutPages();
1277         slotRequestVisiblePixmaps(); \textcolor{comment}{// TODO: slotRelayoutPages() may have done this already!}
1278         \textcolor{comment}{// Repaint the whole widget since layout may have changed}
1279         viewport()->update();
1280         \textcolor{keywordflow}{return};
1281     \}
1282 
1283     \textcolor{comment}{// iterate over visible items: if page(pageNumber) is one of them, repaint it}
1284     \hyperlink{classQLinkedList}{QLinkedList< PageViewItem * >::const\_iterator} iIt = d->
      \hyperlink{classPageViewPrivate_a918fbcda86c5b2b449c97e818ab5d5f9}{visibleItems}.constBegin(), iEnd = d->\hyperlink{classPageViewPrivate_a918fbcda86c5b2b449c97e818ab5d5f9}{visibleItems}.constEnd();
1285     \textcolor{keywordflow}{for} ( ; iIt != iEnd; ++iIt )
1286         \textcolor{keywordflow}{if} ( (*iIt)->pageNumber() == pageNumber && (*iIt)->isVisible() )
1287         \{
1288             \textcolor{comment}{// update item's rectangle plus the little outline}
1289             QRect expandedRect = (*iIt)->croppedGeometry();
1290             \textcolor{comment}{// a PageViewItem is placed in the global page layout,}
1291             \textcolor{comment}{// while we need to map its position in the viewport coordinates}
1292             \textcolor{comment}{// (to get the correct area to repaint)}
1293             expandedRect.translate( -\hyperlink{classPageView_a055aaf87367b9ad0dcfcdc3d2f5ff619}{contentAreaPosition}() );
1294             expandedRect.adjust( -1, -1, 3, 3 );
1295             viewport()->update( expandedRect );
1296 
1297             \textcolor{comment}{// if we were "zoom-dragging" do not overwrite the "zoom-drag" cursor}
1298             \textcolor{keywordflow}{if} ( cursor().shape() != Qt::SizeVerCursor )
1299             \{
1300                 \textcolor{comment}{// since the page has been regenerated below cursor, update it}
1301                 \hyperlink{classPageView_a0054ba6d2967fa31dea42dcc9d9020b6}{updateCursor}();
1302             \}
1303             \textcolor{keywordflow}{break};
1304         \}
1305 \}
\end{DoxyCode}
\hypertarget{classPageView_a13961fd5290e1678d34c8aa59864cdaf}{\index{Page\+View@{Page\+View}!notify\+Setup@{notify\+Setup}}
\index{notify\+Setup@{notify\+Setup}!Page\+View@{Page\+View}}
\subsubsection[{notify\+Setup}]{\setlength{\rightskip}{0pt plus 5cm}void Page\+View\+::notify\+Setup (
\begin{DoxyParamCaption}
\item[{const Q\+Vector$<$ {\bf Okular\+::\+Page} $\ast$ $>$ \&}]{pages, }
\item[{int}]{setup\+Flags}
\end{DoxyParamCaption}
)}}\label{classPageView_a13961fd5290e1678d34c8aa59864cdaf}


Definition at line 895 of file pageview.\+cpp.


\begin{DoxyCode}
896 \{
897     \textcolor{keywordtype}{bool} documentChanged = setupFlags & 
      \hyperlink{classOkular_1_1DocumentObserver_aba00584af99894f95a9650e91f109d40ae599564392c01b22e96eff7602c4dd03}{Okular::DocumentObserver::DocumentChanged};
898     \textcolor{comment}{// reuse current pages if nothing new}
899     \textcolor{keywordflow}{if} ( ( pageSet.count() == d->\hyperlink{classPageViewPrivate_ad90c795dead9abfaa5818a94e00435bc}{items}.count() ) && !documentChanged && !( setupFlags & 
      \hyperlink{classOkular_1_1DocumentObserver_aba00584af99894f95a9650e91f109d40a053812331fcd35ccec8538c45d209799}{Okular::DocumentObserver::NewLayoutForPages} ) )
900     \{
901         \textcolor{keywordtype}{int} count = pageSet.count();
902         \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{int} i = 0; (i < count) && !documentChanged; i++ )
903             \textcolor{keywordflow}{if} ( (\textcolor{keywordtype}{int})pageSet[i]->number() != d->\hyperlink{classPageViewPrivate_ad90c795dead9abfaa5818a94e00435bc}{items}[i]->pageNumber() )
904                 documentChanged = \textcolor{keyword}{true};
905         \textcolor{keywordflow}{if} ( !documentChanged )
906             \textcolor{keywordflow}{return};
907     \}
908 
909     \textcolor{comment}{// delete all widgets (one for each page in pageSet)}
910     QVector< PageViewItem * >::const\_iterator dIt = d->\hyperlink{classPageViewPrivate_ad90c795dead9abfaa5818a94e00435bc}{items}.constBegin(), dEnd = d->
      \hyperlink{classPageViewPrivate_ad90c795dead9abfaa5818a94e00435bc}{items}.constEnd();
911     \textcolor{keywordflow}{for} ( ; dIt != dEnd; ++dIt )
912         \textcolor{keyword}{delete} *dIt;
913     d->\hyperlink{classPageViewPrivate_ad90c795dead9abfaa5818a94e00435bc}{items}.clear();
914     d->\hyperlink{classPageViewPrivate_a918fbcda86c5b2b449c97e818ab5d5f9}{visibleItems}.clear();
915     d->\hyperlink{classPageViewPrivate_ad82b596dc262e93c2268297b9eee8956}{pagesWithTextSelection}.clear();
916     toggleFormWidgets( \textcolor{keyword}{false} );
917     \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_a0b24eb01788092e1699d8380c88fb295}{formsWidgetController} )
918         d->\hyperlink{classPageViewPrivate_a0b24eb01788092e1699d8380c88fb295}{formsWidgetController}->\hyperlink{classFormWidgetsController_a06c4ce604513b55ad556fefc0b626fcc}{dropRadioButtons}();
919 
920     \textcolor{keywordtype}{bool} haspages = !pageSet.isEmpty();
921     \textcolor{keywordtype}{bool} hasformwidgets = \textcolor{keyword}{false};
922     \textcolor{comment}{// create children widgets}
923     QVector< Okular::Page * >::const\_iterator setIt = pageSet.constBegin(), setEnd = pageSet.constEnd();
924     \textcolor{keywordflow}{for} ( ; setIt != setEnd; ++setIt )
925     \{
926         \hyperlink{classPageViewItem}{PageViewItem} * item = \textcolor{keyword}{new} \hyperlink{classPageViewItem}{PageViewItem}( *setIt );
927         d->\hyperlink{classPageViewPrivate_ad90c795dead9abfaa5818a94e00435bc}{items}.push\_back( item );
928 \textcolor{preprocessor}{#ifdef PAGEVIEW\_DEBUG}
929         kDebug().nospace() << \textcolor{stringliteral}{"cropped geom for "} << d->\hyperlink{classPageViewPrivate_ad90c795dead9abfaa5818a94e00435bc}{items}.last()->pageNumber() << \textcolor{stringliteral}{" is "} << d->
      \hyperlink{classPageViewPrivate_ad90c795dead9abfaa5818a94e00435bc}{items}.last()->croppedGeometry();
930 \textcolor{preprocessor}{#endif}
931         \textcolor{keyword}{const} \hyperlink{classQLinkedList}{QLinkedList< Okular::FormField * >} pageFields = (*setIt)->
      formFields();
932         \hyperlink{classQLinkedList}{QLinkedList< Okular::FormField * >::const\_iterator}
       ffIt = pageFields.constBegin(), ffEnd = pageFields.constEnd();
933         \textcolor{keywordflow}{for} ( ; ffIt != ffEnd; ++ffIt )
934         \{
935             \hyperlink{classOkular_1_1FormField}{Okular::FormField} * ff = *ffIt;
936             \hyperlink{classFormWidgetIface}{FormWidgetIface} * w = \hyperlink{classFormWidgetFactory_a94c0bba1709783153ad39beee9f48a41}{FormWidgetFactory::createWidget}
      ( ff, viewport() );
937             \textcolor{keywordflow}{if} ( w )
938             \{
939                 w->\hyperlink{classFormWidgetIface_a67a28f4a30704dc435419eb9ea56a7de}{setPageItem}( item );
940                 w->\hyperlink{classFormWidgetIface_a4d3129afff43729fafc4e6b58a4d16fe}{setFormWidgetsController}( d->
      \hyperlink{classPageViewPrivate_a9265244018f7c818fe3c605397a14540}{formWidgetsController}() );
941                 w->\hyperlink{classFormWidgetIface_a1681c05ca9122ad0c44174856a2e2cb6}{setVisibility}( \textcolor{keyword}{false} );
942                 w->\hyperlink{classFormWidgetIface_a0cef84677236da4810610c781e38b7f8}{setCanBeFilled}( d->\hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}->\hyperlink{classOkular_1_1Document_a6dd7a475b14222c07d1c410311f35cdb}{isAllowed}( 
      \hyperlink{namespaceOkular_a3601f4e702453ddf1125476dd6e7577ba451db87f0977de39b47316b878722136}{Okular::AllowFillForms} ) );
943                 item->\hyperlink{classPageViewItem_a24394acf608eed67ef99280f6958258d}{formWidgets}().insert( ff->\hyperlink{classOkular_1_1FormField_a88ae3d04b4fbe5fd0fedeb068b3d5071}{id}(), w );
944                 hasformwidgets = \textcolor{keyword}{true};
945             \}
946         \}
947         \textcolor{keyword}{const} \hyperlink{classQLinkedList}{QLinkedList< Okular::Annotation * >} annotations = (*setIt)
      ->annotations();
948         \hyperlink{classQLinkedList}{QLinkedList< Okular::Annotation * >::const\_iterator}
       aIt = annotations.constBegin(), aEnd = annotations.constEnd();
949         \textcolor{keywordflow}{for} ( ; aIt != aEnd; ++aIt )
950         \{
951             \hyperlink{classOkular_1_1Annotation}{Okular::Annotation} * a = *aIt;
952             \textcolor{keywordflow}{if} ( a->\hyperlink{classOkular_1_1Annotation_af9833449767eacd740f377e69a1fdd48}{subType}() == \hyperlink{classOkular_1_1Annotation_af71b46e37d5f850b97d5c4de3be9aac0a711a9d706a86b55f0799e944fb2750e6}{Okular::Annotation::AMovie} )
953             \{
954                 \hyperlink{classOkular_1_1MovieAnnotation}{Okular::MovieAnnotation} * movieAnn = \textcolor{keyword}{static\_cast<} 
      \hyperlink{classOkular_1_1MovieAnnotation}{Okular::MovieAnnotation} * \textcolor{keyword}{>}( a );
955                 \hyperlink{classVideoWidget}{VideoWidget} * vw = \textcolor{keyword}{new} \hyperlink{classVideoWidget}{VideoWidget}( movieAnn, movieAnn->
      \hyperlink{classOkular_1_1MovieAnnotation_a1fc38e32a1704351c3e5916031be0267}{movie}(), d->\hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}, viewport() );
956                 item->\hyperlink{classPageViewItem_a125302408597cab2a58ef2ad309e2912}{videoWidgets}().insert( movieAnn->\hyperlink{classOkular_1_1MovieAnnotation_a1fc38e32a1704351c3e5916031be0267}{movie}(), vw );
957                 vw->\hyperlink{classVideoWidget_a90dbdcbaffc7717c7e3b327ad076bc58}{pageInitialized}();
958             \}
959             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( a->\hyperlink{classOkular_1_1Annotation_af9833449767eacd740f377e69a1fdd48}{subType}() == \hyperlink{classOkular_1_1Annotation_af71b46e37d5f850b97d5c4de3be9aac0a7cf8ba374ec139a8e2fb47a36182fa32}{Okular::Annotation::AScreen} )
960             \{
961                 \textcolor{keyword}{const} \hyperlink{classOkular_1_1ScreenAnnotation}{Okular::ScreenAnnotation} * screenAnn = \textcolor{keyword}{static\_cast<} 
      \hyperlink{classOkular_1_1ScreenAnnotation}{Okular::ScreenAnnotation} * \textcolor{keyword}{>}( a );
962                 \hyperlink{classOkular_1_1Movie}{Okular::Movie} *movie = 
      \hyperlink{namespaceGuiUtils_a51c606d14a293d5b3f5f49ad1c12be44}{GuiUtils::renditionMovieFromScreenAnnotation}( screenAnn );
963                 \textcolor{keywordflow}{if} ( movie )
964                 \{
965                     \hyperlink{classVideoWidget}{VideoWidget} * vw = \textcolor{keyword}{new} \hyperlink{classVideoWidget}{VideoWidget}( screenAnn, movie, d->
      \hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}, viewport() );
966                     item->\hyperlink{classPageViewItem_a125302408597cab2a58ef2ad309e2912}{videoWidgets}().insert( movie, vw );
967                     vw->\hyperlink{classVideoWidget_a90dbdcbaffc7717c7e3b327ad076bc58}{pageInitialized}();
968                 \}
969             \}
970         \}
971     \}
972 
973     \textcolor{comment}{// invalidate layout so relayout/repaint will happen on next viewport change}
974     \textcolor{keywordflow}{if} ( haspages )
975     \{
976         \textcolor{comment}{// We do a delayed call to slotRelayoutPages but also set the dirtyLayout}
977         \textcolor{comment}{// because we might end up in notifyViewportChanged while slotRelayoutPages}
978         \textcolor{comment}{// has not been done and we don't want that to happen}
979         d->\hyperlink{classPageViewPrivate_a2acaf067a43d2fae544738ceac1f7ed6}{dirtyLayout} = \textcolor{keyword}{true};
980         QMetaObject::invokeMethod(\textcolor{keyword}{this}, \textcolor{stringliteral}{"slotRelayoutPages"}, Qt::QueuedConnection);
981     \}
982     \textcolor{keywordflow}{else}
983     \{
984         \textcolor{comment}{// update the mouse cursor when closing because we may have close through a link and}
985         \textcolor{comment}{// want the cursor to come back to the normal cursor}
986         \hyperlink{classPageView_a0054ba6d2967fa31dea42dcc9d9020b6}{updateCursor}();
987         \textcolor{comment}{// then, make the message window and scrollbars disappear, and trigger a repaint}
988         d->\hyperlink{classPageViewPrivate_aa836af37149ea9fbfefd8de357c9194b}{messageWindow}->hide();
989         resizeContentArea( QSize( 0,0 ) );
990         viewport()->update(); \textcolor{comment}{// when there is no change to the scrollbars, no repaint would}
991                               \textcolor{comment}{// be done and the old document would still be shown}
992     \}
993 
994     \textcolor{comment}{// OSD to display pages}
995     \textcolor{keywordflow}{if} ( documentChanged && pageSet.count() > 0 && \hyperlink{classOkular_1_1Settings_ab6a3d4459b9ef5fa47cc7083968da797}{Okular::Settings::showOSD}() )
996         d->\hyperlink{classPageViewPrivate_aa836af37149ea9fbfefd8de357c9194b}{messageWindow}->\hyperlink{classPageViewMessage_a7fd107b1b7a6c0ae64a4d09fc2467982}{display}(
997             i18np(\textcolor{stringliteral}{" Loaded a one-page document."},
998                  \textcolor{stringliteral}{" Loaded a %1-page document."},
999                  pageSet.count() ),
1000             QString(),
1001             \hyperlink{classPageViewMessage_aeb83801b92379715663d5a7beaa2ae0ca2ae901576662b28f92067841a52e11dd}{PageViewMessage::Info}, 4000 );
1002 
1003     \hyperlink{classPageView_a3676a4a9b53502c4b6af945f28cd5179}{updateActionState}( haspages, documentChanged, hasformwidgets );
1004 
1005     \textcolor{comment}{// We need to assign it to a different list otherwise slotAnnotationWindowDestroyed}
1006     \textcolor{comment}{// will bite us and clear d->m\_annowindows}
1007     QHash< Okular::Annotation *, AnnotWindow * > annowindows = d->\hyperlink{classPageViewPrivate_adb8fb9cfc6f045acbbe4cb534003adb2}{m\_annowindows};
1008     d->\hyperlink{classPageViewPrivate_adb8fb9cfc6f045acbbe4cb534003adb2}{m\_annowindows}.clear();
1009     qDeleteAll( annowindows );
1010 
1011     selectionClear();
1012 \}
\end{DoxyCode}
\hypertarget{classPageView_a9b7b1540552e8ce8c4d089e58297493c}{\index{Page\+View@{Page\+View}!notify\+Viewport\+Changed@{notify\+Viewport\+Changed}}
\index{notify\+Viewport\+Changed@{notify\+Viewport\+Changed}!Page\+View@{Page\+View}}
\subsubsection[{notify\+Viewport\+Changed}]{\setlength{\rightskip}{0pt plus 5cm}void Page\+View\+::notify\+Viewport\+Changed (
\begin{DoxyParamCaption}
\item[{bool}]{smooth\+Move}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classPageView_a9b7b1540552e8ce8c4d089e58297493c}
This method is called whenever the viewport has been changed.


\begin{DoxyParams}{Parameters}
{\em smooth\+Move} & If true, the move shall be animated. \\
\hline
\end{DoxyParams}


Reimplemented from \hyperlink{classOkular_1_1DocumentObserver_ac98c9e8b62ec9261ed9c9ea2710849f0}{Okular\+::\+Document\+Observer}.



Definition at line 1138 of file pageview.\+cpp.


\begin{DoxyCode}
1139 \{
1140     QMetaObject::invokeMethod(\textcolor{keyword}{this}, \textcolor{stringliteral}{"slotRealNotifyViewportChanged"}, Qt::QueuedConnection, Q\_ARG( \textcolor{keywordtype}{bool}, 
      smoothMove ));
1141 \}
\end{DoxyCode}
\hypertarget{classPageView_a6a9498322af52740ea85fcb89a9eb4f8}{\index{Page\+View@{Page\+View}!notify\+Zoom@{notify\+Zoom}}
\index{notify\+Zoom@{notify\+Zoom}!Page\+View@{Page\+View}}
\subsubsection[{notify\+Zoom}]{\setlength{\rightskip}{0pt plus 5cm}void Page\+View\+::notify\+Zoom (
\begin{DoxyParamCaption}
\item[{int}]{factor}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classPageView_a6a9498322af52740ea85fcb89a9eb4f8}
This method is called whenever the zoom of the document has been changed. 

Reimplemented from \hyperlink{classOkular_1_1DocumentObserver_a3a233a300839943c68ba57a6c5d8f591}{Okular\+::\+Document\+Observer}.



Definition at line 1314 of file pageview.\+cpp.


\begin{DoxyCode}
1315 \{
1316     \textcolor{keywordflow}{if} ( factor > 0 )
1317         updateZoom( \hyperlink{classPageView_af489dc2492677bb4f422660627f62aecab2e658d672d8c9631d31502e6e748eda}{ZoomIn} );
1318     \textcolor{keywordflow}{else}
1319         updateZoom( \hyperlink{classPageView_af489dc2492677bb4f422660627f62aeca87c22d03f79c9cac97b85a7481c5e521}{ZoomOut} );
1320 \}
\end{DoxyCode}
\hypertarget{classPageView_aae69bcd4740466f5af216c97f1c12f14}{\index{Page\+View@{Page\+View}!open\+Annotation\+Window@{open\+Annotation\+Window}}
\index{open\+Annotation\+Window@{open\+Annotation\+Window}!Page\+View@{Page\+View}}
\subsubsection[{open\+Annotation\+Window}]{\setlength{\rightskip}{0pt plus 5cm}void Page\+View\+::open\+Annotation\+Window (
\begin{DoxyParamCaption}
\item[{{\bf Okular\+::\+Annotation} $\ast$}]{annotation, }
\item[{int}]{page\+Number}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [slot]}}}\label{classPageView_aae69bcd4740466f5af216c97f1c12f14}


Definition at line 703 of file pageview.\+cpp.


\begin{DoxyCode}
704 \{
705     \textcolor{keywordflow}{if} ( !annotation )
706         \textcolor{keywordflow}{return};
707 
708     \textcolor{comment}{// find the annot window}
709     \hyperlink{classAnnotWindow}{AnnotWindow}* existWindow = 0;
710     QHash< Okular::Annotation *, AnnotWindow * >::ConstIterator it = d->
      \hyperlink{classPageViewPrivate_adb8fb9cfc6f045acbbe4cb534003adb2}{m\_annowindows}.constFind( annotation );
711     \textcolor{keywordflow}{if} ( it != d->\hyperlink{classPageViewPrivate_adb8fb9cfc6f045acbbe4cb534003adb2}{m\_annowindows}.constEnd() )
712     \{
713         existWindow = *it;
714     \}
715 
716     \textcolor{keywordflow}{if} ( existWindow == 0 )
717     \{
718         existWindow = \textcolor{keyword}{new} \hyperlink{classAnnotWindow}{AnnotWindow}( \textcolor{keyword}{this}, annotation, d->\hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}, pageNumber );
719         connect(existWindow, SIGNAL(destroyed(QObject*)), \textcolor{keyword}{this}, SLOT(slotAnnotationWindowDestroyed(QObject
      *)));
720 
721         d->\hyperlink{classPageViewPrivate_adb8fb9cfc6f045acbbe4cb534003adb2}{m\_annowindows}.insert( annotation, existWindow );
722     \}
723 
724     existWindow->show();
725 \}
\end{DoxyCode}
\hypertarget{classPageView_a8e574213c4ac3db1304ecf4364a707e6}{\index{Page\+View@{Page\+View}!paint\+Event@{paint\+Event}}
\index{paint\+Event@{paint\+Event}!Page\+View@{Page\+View}}
\subsubsection[{paint\+Event}]{\setlength{\rightskip}{0pt plus 5cm}void Page\+View\+::paint\+Event (
\begin{DoxyParamCaption}
\item[{Q\+Paint\+Event $\ast$}]{e}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{classPageView_a8e574213c4ac3db1304ecf4364a707e6}


Definition at line 1437 of file pageview.\+cpp.


\begin{DoxyCode}
1438 \{
1439         \textcolor{keyword}{const} QPoint areaPos = \hyperlink{classPageView_a055aaf87367b9ad0dcfcdc3d2f5ff619}{contentAreaPosition}();
1440         \textcolor{comment}{// create the rect into contents from the clipped screen rect}
1441         QRect viewportRect = viewport()->rect();
1442         viewportRect.translate( areaPos );
1443         QRect contentsRect = pe->rect().translated( areaPos ).intersect( viewportRect );
1444         \textcolor{keywordflow}{if} ( !contentsRect.isValid() )
1445             \textcolor{keywordflow}{return};
1446 
1447 \textcolor{preprocessor}{#ifdef PAGEVIEW\_DEBUG}
1448         kDebug() << \textcolor{stringliteral}{"paintevent"} << contentsRect;
1449 \textcolor{preprocessor}{#endif}
1450 
1451         \textcolor{comment}{// create the screen painter. a pixel painted at contentsX,contentsY}
1452         \textcolor{comment}{// appears to the top-left corner of the scrollview.}
1453         QPainter screenPainter( viewport() );
1454         \textcolor{comment}{// translate to simulate the scrolled content widget}
1455         screenPainter.translate( -areaPos );
1456 
1457         \textcolor{comment}{// selectionRect is the normalized mouse selection rect}
1458         QRect selectionRect = d->\hyperlink{classPageViewPrivate_a94473cb593838a977bea89214bd1ef66}{mouseSelectionRect};
1459         \textcolor{keywordflow}{if} ( !selectionRect.isNull() )
1460             selectionRect = selectionRect.normalized();
1461         \textcolor{comment}{// selectionRectInternal without the border}
1462         QRect selectionRectInternal = selectionRect;
1463         selectionRectInternal.adjust( 1, 1, -1, -1 );
1464         \textcolor{comment}{// color for blending}
1465         QColor selBlendColor = (selectionRect.width() > 8 || selectionRect.height() > 8) ?
1466                             d->\hyperlink{classPageViewPrivate_ab09ba74cc55e9a99a5e7c0629dde8feb}{mouseSelectionColor} : Qt::red;
1467 
1468         \textcolor{comment}{// subdivide region into rects}
1469         \textcolor{keyword}{const} QVector<QRect> &allRects = pe->region().rects();
1470         uint numRects = allRects.count();
1471 
1472         \textcolor{comment}{// preprocess rects area to see if it worths or not using subdivision}
1473         uint summedArea = 0;
1474         \textcolor{keywordflow}{for} ( uint i = 0; i < numRects; i++ )
1475         \{
1476             \textcolor{keyword}{const} QRect & r = allRects[i];
1477             summedArea += r.width() * r.height();
1478         \}
1479         \textcolor{comment}{// very elementary check: SUMj(Region[j].area) is less than boundingRect.area}
1480         \textcolor{keywordtype}{bool} useSubdivision = summedArea < (0.6 * contentsRect.width() * contentsRect.height());
1481         \textcolor{keywordflow}{if} ( !useSubdivision )
1482             numRects = 1;
1483 
1484         \textcolor{comment}{// iterate over the rects (only one loop if not using subdivision)}
1485         \textcolor{keywordflow}{for} ( uint i = 0; i < numRects; i++ )
1486         \{
1487             \textcolor{keywordflow}{if} ( useSubdivision )
1488             \{
1489                 \textcolor{comment}{// set 'contentsRect' to a part of the sub-divided region}
1490                 contentsRect = allRects[i].translated( areaPos ).intersect( viewportRect );
1491                 \textcolor{keywordflow}{if} ( !contentsRect.isValid() )
1492                     \textcolor{keywordflow}{continue};
1493             \}
1494 \textcolor{preprocessor}{#ifdef PAGEVIEW\_DEBUG}
1495             kDebug() << contentsRect;
1496 \textcolor{preprocessor}{#endif}
1497 
1498             \textcolor{comment}{// note: this check will take care of all things requiring alpha blending (not only selection)}
1499             \textcolor{keywordtype}{bool} wantCompositing = !selectionRect.isNull() && contentsRect.intersects( selectionRect );
1500             \textcolor{comment}{// also alpha-blend when there is a table selection...}
1501             wantCompositing |= !d->\hyperlink{classPageViewPrivate_aec476c0b74867740803d4ba34393b154}{tableSelectionParts}.isEmpty();
1502 
1503             \textcolor{keywordflow}{if} ( wantCompositing && \hyperlink{classOkular_1_1Settings_a975dbba9c56b1a9df965dd2766aefc60}{Okular::Settings::enableCompositing}(
      ) )
1504             \{
1505                 \textcolor{comment}{// create pixmap and open a painter over it (contents\{left,top\} becomes pixmap \{0,0\})}
1506                 QPixmap doubleBuffer( contentsRect.size() );
1507                 QPainter pixmapPainter( &doubleBuffer );
1508                 pixmapPainter.translate( -contentsRect.left(), -contentsRect.top() );
1509 
1510                 \textcolor{comment}{// 1) Layer 0: paint items and clear bg on unpainted rects}
1511                 drawDocumentOnPainter( contentsRect, &pixmapPainter );
1512                 \textcolor{comment}{// 2a) Layer 1a: paint (blend) transparent selection (rectangle)}
1513                 \textcolor{keywordflow}{if} ( !selectionRect.isNull() && selectionRect.intersects( contentsRect ) &&
1514                     !selectionRectInternal.contains( contentsRect ) )
1515                 \{
1516                     QRect blendRect = selectionRectInternal.intersect( contentsRect );
1517                     \textcolor{comment}{// skip rectangles covered by the selection's border}
1518                     \textcolor{keywordflow}{if} ( blendRect.isValid() )
1519                     \{
1520                         \textcolor{comment}{// grab current pixmap into a new one to colorize contents}
1521                         QPixmap blendedPixmap( blendRect.width(), blendRect.height() );
1522                         QPainter p( &blendedPixmap );
1523                         p.drawPixmap( 0, 0, doubleBuffer,
1524                                     blendRect.left() - contentsRect.left(), blendRect.top() - contentsRect.
      top(),
1525                                     blendRect.width(), blendRect.height() );
1526 
1527                         QColor blCol = selBlendColor.dark( 140 );
1528                         blCol.setAlphaF( 0.2 );
1529                         p.fillRect( blendedPixmap.rect(), blCol );
1530                         p.end();
1531                         \textcolor{comment}{// copy the blended pixmap back to its place}
1532                         pixmapPainter.drawPixmap( blendRect.left(), blendRect.top(), blendedPixmap );
1533                     \}
1534                     \textcolor{comment}{// draw border (red if the selection is too small)}
1535                     pixmapPainter.setPen( selBlendColor );
1536                     pixmapPainter.drawRect( selectionRect.adjusted( 0, 0, -1, -1 ) );
1537                 \}
1538                 \textcolor{comment}{// 2b) Layer 1b: paint (blend) transparent selection (table)}
1539                 \textcolor{keywordflow}{foreach} (\textcolor{keyword}{const} \hyperlink{structTableSelectionPart}{TableSelectionPart} &tsp, d->
      \hyperlink{classPageViewPrivate_aec476c0b74867740803d4ba34393b154}{tableSelectionParts}) \{
1540                     QRect selectionPartRect = tsp.\hyperlink{structTableSelectionPart_ade01925b1444763cb413ad51ae7729a7}{rectInItem}.\hyperlink{classOkular_1_1NormalizedRect_a006897c5fcff2c3a97b4141f1a967513}{geometry}(tsp.
      \hyperlink{structTableSelectionPart_a400edc4e1ec30e28ff8159a741776e4b}{item}->\hyperlink{classPageViewItem_a240924407ae22bb0489363a6a2d481b9}{uncroppedWidth}(), tsp.\hyperlink{structTableSelectionPart_a400edc4e1ec30e28ff8159a741776e4b}{item}->\hyperlink{classPageViewItem_af1380fce5dc13a72458ef834c720b128}{uncroppedHeight}());
1541                     selectionPartRect.translate( tsp.\hyperlink{structTableSelectionPart_a400edc4e1ec30e28ff8159a741776e4b}{item}->\hyperlink{classPageViewItem_a5d2e73a003f65b4e95c0c21b1698f835}{uncroppedGeometry}().topLeft
       () );
1542                     QRect selectionPartRectInternal = selectionPartRect;
1543                     selectionPartRectInternal.adjust( 1, 1, -1, -1 );
1544                     \textcolor{keywordflow}{if} ( !selectionPartRect.isNull() && selectionPartRect.intersects( contentsRect ) &&
1545                         !selectionPartRectInternal.contains( contentsRect ) )
1546                     \{
1547                         QRect blendRect = selectionPartRectInternal.intersect( contentsRect );
1548                         \textcolor{comment}{// skip rectangles covered by the selection's border}
1549                         \textcolor{keywordflow}{if} ( blendRect.isValid() )
1550                         \{
1551                             \textcolor{comment}{// grab current pixmap into a new one to colorize contents}
1552                             QPixmap blendedPixmap( blendRect.width(), blendRect.height() );
1553                             QPainter p( &blendedPixmap );
1554                             p.drawPixmap( 0, 0, doubleBuffer,
1555                                         blendRect.left() - contentsRect.left(), blendRect.top() - 
      contentsRect.top(),
1556                                         blendRect.width(), blendRect.height() );
1557 
1558                             QColor blCol = d->\hyperlink{classPageViewPrivate_ab09ba74cc55e9a99a5e7c0629dde8feb}{mouseSelectionColor}.dark( 140 );
1559                             blCol.setAlphaF( 0.2 );
1560                             p.fillRect( blendedPixmap.rect(), blCol );
1561                             p.end();
1562                             \textcolor{comment}{// copy the blended pixmap back to its place}
1563                             pixmapPainter.drawPixmap( blendRect.left(), blendRect.top(), blendedPixmap );
1564                         \}
1565                         \textcolor{comment}{// draw border (red if the selection is too small)}
1566                         pixmapPainter.setPen( d->\hyperlink{classPageViewPrivate_ab09ba74cc55e9a99a5e7c0629dde8feb}{mouseSelectionColor} );
1567                         pixmapPainter.drawRect( selectionPartRect.adjusted( 0, 0, -1, -1 ) );
1568                     \}
1569                 \}
1570                 drawTableDividers( &pixmapPainter );
1571                 \textcolor{comment}{// 3) Layer 1: give annotator painting control}
1572                 \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_a07bad73b61f6b400411aacc7e2e820a0}{annotator} && d->\hyperlink{classPageViewPrivate_a07bad73b61f6b400411aacc7e2e820a0}{annotator}->\hyperlink{classPageViewAnnotator_a6c9bb2e357dfa97da72ad0e610b4b7f6}{routePaints}( contentsRect )
       )
1573                     d->\hyperlink{classPageViewPrivate_a07bad73b61f6b400411aacc7e2e820a0}{annotator}->\hyperlink{classPageViewAnnotator_a5d6faca78c8b002a1b2c30cb8570e47f}{routePaint}( &pixmapPainter, contentsRect );
1574                 \textcolor{comment}{// 4) Layer 2: overlays}
1575                 \textcolor{keywordflow}{if} ( \hyperlink{classOkular_1_1Settings_a21cc1aa57a32a43b985d916fa0f2b7ae}{Okular::Settings::debugDrawBoundaries}() )
1576                 \{
1577                     pixmapPainter.setPen( Qt::blue );
1578                     pixmapPainter.drawRect( contentsRect );
1579                 \}
1580 
1581                 \textcolor{comment}{// finish painting and draw contents}
1582                 pixmapPainter.end();
1583                 screenPainter.drawPixmap( contentsRect.left(), contentsRect.top(), doubleBuffer );
1584             \}
1585             \textcolor{keywordflow}{else}
1586             \{
1587                 \textcolor{comment}{// 1) Layer 0: paint items and clear bg on unpainted rects}
1588                 drawDocumentOnPainter( contentsRect, &screenPainter );
1589                 \textcolor{comment}{// 2a) Layer 1a: paint opaque selection (rectangle)}
1590                 \textcolor{keywordflow}{if} ( !selectionRect.isNull() && selectionRect.intersects( contentsRect ) &&
1591                     !selectionRectInternal.contains( contentsRect ) )
1592                 \{
1593                     screenPainter.setPen( palette().color( QPalette::Active, QPalette::Highlight ).dark(110
      ) );
1594                     screenPainter.drawRect( selectionRect );
1595                 \}
1596                 \textcolor{comment}{// 2b) Layer 1b: paint opaque selection (table)}
1597                 \textcolor{keywordflow}{foreach} (\textcolor{keyword}{const} \hyperlink{structTableSelectionPart}{TableSelectionPart} &tsp, d->
      \hyperlink{classPageViewPrivate_aec476c0b74867740803d4ba34393b154}{tableSelectionParts}) \{
1598                     QRect selectionPartRect = tsp.\hyperlink{structTableSelectionPart_ade01925b1444763cb413ad51ae7729a7}{rectInItem}.\hyperlink{classOkular_1_1NormalizedRect_a006897c5fcff2c3a97b4141f1a967513}{geometry}(tsp.
      \hyperlink{structTableSelectionPart_a400edc4e1ec30e28ff8159a741776e4b}{item}->\hyperlink{classPageViewItem_a240924407ae22bb0489363a6a2d481b9}{uncroppedWidth}(), tsp.\hyperlink{structTableSelectionPart_a400edc4e1ec30e28ff8159a741776e4b}{item}->\hyperlink{classPageViewItem_af1380fce5dc13a72458ef834c720b128}{uncroppedHeight}());
1599                     selectionPartRect.translate( tsp.\hyperlink{structTableSelectionPart_a400edc4e1ec30e28ff8159a741776e4b}{item}->\hyperlink{classPageViewItem_a5d2e73a003f65b4e95c0c21b1698f835}{uncroppedGeometry}().topLeft
       () );
1600                     QRect selectionPartRectInternal = selectionPartRect;
1601                     selectionPartRectInternal.adjust( 1, 1, -1, -1 );
1602                     \textcolor{keywordflow}{if} ( !selectionPartRect.isNull() && selectionPartRect.intersects( contentsRect ) &&
1603                         !selectionPartRectInternal.contains( contentsRect ) )
1604                     \{
1605                         screenPainter.setPen( palette().color( QPalette::Active, QPalette::Highlight ).dark
      (110) );
1606                         screenPainter.drawRect( selectionPartRect );
1607                     \}
1608                 \}
1609                 drawTableDividers( &screenPainter );
1610                 \textcolor{comment}{// 3) Layer 1: give annotator painting control}
1611                 \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_a07bad73b61f6b400411aacc7e2e820a0}{annotator} && d->\hyperlink{classPageViewPrivate_a07bad73b61f6b400411aacc7e2e820a0}{annotator}->\hyperlink{classPageViewAnnotator_a6c9bb2e357dfa97da72ad0e610b4b7f6}{routePaints}( contentsRect )
       )
1612                     d->\hyperlink{classPageViewPrivate_a07bad73b61f6b400411aacc7e2e820a0}{annotator}->\hyperlink{classPageViewAnnotator_a5d6faca78c8b002a1b2c30cb8570e47f}{routePaint}( &screenPainter, contentsRect );
1613                 \textcolor{comment}{// 4) Layer 2: overlays}
1614                 \textcolor{keywordflow}{if} ( \hyperlink{classOkular_1_1Settings_a21cc1aa57a32a43b985d916fa0f2b7ae}{Okular::Settings::debugDrawBoundaries}() )
1615                 \{
1616                     screenPainter.setPen( Qt::red );
1617                     screenPainter.drawRect( contentsRect );
1618                 \}
1619             \}
1620         \}
1621 \}
\end{DoxyCode}
\hypertarget{classPageView_a82bbd6a6b843d5b43ec06a0f76d7ae34}{\index{Page\+View@{Page\+View}!reparse\+Config@{reparse\+Config}}
\index{reparse\+Config@{reparse\+Config}!Page\+View@{Page\+View}}
\subsubsection[{reparse\+Config}]{\setlength{\rightskip}{0pt plus 5cm}void Page\+View\+::reparse\+Config (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classPageView_a82bbd6a6b843d5b43ec06a0f76d7ae34}


Definition at line 772 of file pageview.\+cpp.


\begin{DoxyCode}
773 \{
774     \textcolor{comment}{// set the scroll bars policies}
775     Qt::ScrollBarPolicy scrollBarMode = \hyperlink{classOkular_1_1Settings_ac42d4fae1c334be5db9cd30193290b04}{Okular::Settings::showScrollBars}() 
      ?
776         Qt::ScrollBarAsNeeded : Qt::ScrollBarAlwaysOff;
777     \textcolor{keywordflow}{if} ( horizontalScrollBarPolicy() != scrollBarMode )
778     \{
779         setHorizontalScrollBarPolicy( scrollBarMode );
780         setVerticalScrollBarPolicy( scrollBarMode );
781     \}
782 
783     \textcolor{keywordflow}{if} ( \hyperlink{classOkular_1_1Settings_a54872ccea98a1749bdccc6552c1aaa84}{Okular::Settings::viewMode}() == 
      \hyperlink{classOkular_1_1Settings_1_1EnumViewMode_a33bc89b0f0c02bd5539bad916569a665a6551656e4f96799c3792390290c061fb}{Okular::Settings::EnumViewMode::Summary} &&
784          ( (\textcolor{keywordtype}{int})\hyperlink{classOkular_1_1Settings_a89ff1e2d74235c7f591473a1976d343f}{Okular::Settings::viewColumns}() != d->
      \hyperlink{classPageViewPrivate_a21714496870aaec57f163f23a696da48}{setting\_viewCols} ) )
785     \{
786         d->\hyperlink{classPageViewPrivate_a21714496870aaec57f163f23a696da48}{setting\_viewCols} = \hyperlink{classOkular_1_1Settings_a89ff1e2d74235c7f591473a1976d343f}{Okular::Settings::viewColumns}();
787 
788         slotRelayoutPages();
789     \}
790 
791     updatePageStep();
792 
793     \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_a07bad73b61f6b400411aacc7e2e820a0}{annotator} )
794     \{
795         d->\hyperlink{classPageViewPrivate_a07bad73b61f6b400411aacc7e2e820a0}{annotator}->\hyperlink{classPageViewAnnotator_a69ebe26ffe14871bacc3b8bcb7fae14b}{setEnabled}( \textcolor{keyword}{false} );
796         d->\hyperlink{classPageViewPrivate_a07bad73b61f6b400411aacc7e2e820a0}{annotator}->\hyperlink{classPageViewAnnotator_a7d1a67976c625883662731070416e4df}{reparseConfig}();
797         \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_a29f1ef25d86a534e1605ae5e662233b8}{aToggleAnnotator}->isChecked() )
798             slotToggleAnnotator( \textcolor{keyword}{true} );
799     \}
800 
801     \textcolor{comment}{// Something like invert colors may have changed}
802     \textcolor{comment}{// As we don't have a way to find out the old value}
803     \textcolor{comment}{// We just update the viewport, this shouldn't be that bad}
804     \textcolor{comment}{// since it's just a repaint of pixmaps we already have}
805     viewport()->update();
806 \}
\end{DoxyCode}
\hypertarget{classPageView_a8d8f120938a9fbaa4d0e8986af992a74}{\index{Page\+View@{Page\+View}!resize\+Event@{resize\+Event}}
\index{resize\+Event@{resize\+Event}!Page\+View@{Page\+View}}
\subsubsection[{resize\+Event}]{\setlength{\rightskip}{0pt plus 5cm}void Page\+View\+::resize\+Event (
\begin{DoxyParamCaption}
\item[{Q\+Resize\+Event $\ast$}]{e}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{classPageView_a8d8f120938a9fbaa4d0e8986af992a74}


Definition at line 1661 of file pageview.\+cpp.


\begin{DoxyCode}
1662 \{
1663     \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_ad90c795dead9abfaa5818a94e00435bc}{items}.isEmpty() )
1664     \{
1665         resizeContentArea( e->size() );
1666         \textcolor{keywordflow}{return};
1667     \}
1668 
1669     \textcolor{keywordflow}{if} ( ( d->\hyperlink{classPageViewPrivate_a009f59f9f081ced030a81a8ca726c2b2}{zoomMode} == \hyperlink{classPageView_af489dc2492677bb4f422660627f62aeca37b37e7554b8276eabe7310a11263664}{ZoomFitWidth} || d->\hyperlink{classPageViewPrivate_a009f59f9f081ced030a81a8ca726c2b2}{zoomMode} == 
      \hyperlink{classPageView_af489dc2492677bb4f422660627f62aeca4021dc6ca422fa846e8c9c31e606cdbe}{ZoomFitAuto} ) && d->\hyperlink{classPageViewPrivate_ae6defa78192680c6f0943b1d2b2aafa8}{verticalScrollBarVisible} && !verticalScrollBar()->
      isVisible() && qAbs(e->oldSize().height() - e->size().height()) < verticalScrollBar()->width() )
1670     \{
1671         \textcolor{comment}{// this saves us from infinite resizing loop because of scrollbars appearing and disappearing}
1672         \textcolor{comment}{// see bug 160628 for more info}
1673         \textcolor{comment}{// TODO looks are still a bit ugly because things are left uncentered}
1674         \textcolor{comment}{// but better a bit ugly than unusable}
1675         d->\hyperlink{classPageViewPrivate_ae6defa78192680c6f0943b1d2b2aafa8}{verticalScrollBarVisible} = \textcolor{keyword}{false};
1676         resizeContentArea( e->size() );
1677         \textcolor{keywordflow}{return};
1678     \}
1679     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_a009f59f9f081ced030a81a8ca726c2b2}{zoomMode} == \hyperlink{classPageView_af489dc2492677bb4f422660627f62aeca4021dc6ca422fa846e8c9c31e606cdbe}{ZoomFitAuto} && d->
      \hyperlink{classPageViewPrivate_accc11688dc248fe9a09713b1c1acbe5e}{horizontalScrollBarVisible} && !horizontalScrollBar()->isVisible() && qAbs(e->
      oldSize().width() - e->size().width()) < horizontalScrollBar()->height() )
1680     \{
1681         \textcolor{comment}{// this saves us from infinite resizing loop because of scrollbars appearing and disappearing}
1682         \textcolor{comment}{// TODO looks are still a bit ugly because things are left uncentered}
1683         \textcolor{comment}{// but better a bit ugly than unusable}
1684         d->\hyperlink{classPageViewPrivate_accc11688dc248fe9a09713b1c1acbe5e}{horizontalScrollBarVisible} = \textcolor{keyword}{false};
1685         resizeContentArea( e->size() );
1686         \textcolor{keywordflow}{return};
1687     \}
1688 
1689     \textcolor{comment}{// start a timer that will refresh the pixmap after 0.2s}
1690     d->\hyperlink{classPageViewPrivate_a65c32086d23fd9e7fa3bd4256e7f2788}{delayResizeEventTimer}->start( 200 );
1691     d->\hyperlink{classPageViewPrivate_ae6defa78192680c6f0943b1d2b2aafa8}{verticalScrollBarVisible} = verticalScrollBar()->isVisible();
1692     d->\hyperlink{classPageViewPrivate_accc11688dc248fe9a09713b1c1acbe5e}{horizontalScrollBarVisible} = horizontalScrollBar()->isVisible();
1693 \}
\end{DoxyCode}
\hypertarget{classPageView_a51ac8814a8f47fd02ac0b61627ad164f}{\index{Page\+View@{Page\+View}!right\+Click@{right\+Click}}
\index{right\+Click@{right\+Click}!Page\+View@{Page\+View}}
\subsubsection[{right\+Click}]{\setlength{\rightskip}{0pt plus 5cm}void Page\+View\+::right\+Click (
\begin{DoxyParamCaption}
\item[{const {\bf Okular\+::\+Page} $\ast$}]{, }
\item[{const Q\+Point \&}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [signal]}}}\label{classPageView_a51ac8814a8f47fd02ac0b61627ad164f}
\hypertarget{classPageView_a4e8b9b0b64ce87e74a8caed93b22ce7d}{\index{Page\+View@{Page\+View}!scroll\+Contents\+By@{scroll\+Contents\+By}}
\index{scroll\+Contents\+By@{scroll\+Contents\+By}!Page\+View@{Page\+View}}
\subsubsection[{scroll\+Contents\+By}]{\setlength{\rightskip}{0pt plus 5cm}void Page\+View\+::scroll\+Contents\+By (
\begin{DoxyParamCaption}
\item[{int}]{dx, }
\item[{int}]{dy}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{classPageView_a4e8b9b0b64ce87e74a8caed93b22ce7d}


Definition at line 3181 of file pageview.\+cpp.


\begin{DoxyCode}
3182 \{
3183     \textcolor{keyword}{const} QRect r = viewport()->rect();
3184     viewport()->scroll( dx, dy, r );
3185     \textcolor{comment}{// HACK manually repaint the damaged regions, as it seems some updates are missed}
3186     \textcolor{comment}{// thus leaving artifacts around}
3187     QRegion rgn( r );
3188     rgn -= rgn & r.translated( dx, dy );
3189     \textcolor{keywordflow}{foreach} ( \textcolor{keyword}{const} QRect &rect, rgn.rects() )
3190         viewport()->repaint( rect );
3191 \}
\end{DoxyCode}
\hypertarget{classPageView_a36b404916903bf976e4eace4cf2d0410}{\index{Page\+View@{Page\+View}!select\+All@{select\+All}}
\index{select\+All@{select\+All}!Page\+View@{Page\+View}}
\subsubsection[{select\+All}]{\setlength{\rightskip}{0pt plus 5cm}void Page\+View\+::select\+All (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [slot]}}}\label{classPageView_a36b404916903bf976e4eace4cf2d0410}


Definition at line 883 of file pageview.\+cpp.


\begin{DoxyCode}
884 \{
885     QVector< PageViewItem * >::const\_iterator it = d->\hyperlink{classPageViewPrivate_ad90c795dead9abfaa5818a94e00435bc}{items}.constBegin(), itEnd = d->
      \hyperlink{classPageViewPrivate_ad90c795dead9abfaa5818a94e00435bc}{items}.constEnd();
886     \textcolor{keywordflow}{for} ( ; it < itEnd; ++it )
887     \{
888         \hyperlink{classOkular_1_1RegularAreaRect}{Okular::RegularAreaRect} * area = 
      \hyperlink{classPageView_ace30a37c79e7cd9b523a6cd4fd74f5ae}{textSelectionForItem}( *it );
889         d->\hyperlink{classPageViewPrivate_ad82b596dc262e93c2268297b9eee8956}{pagesWithTextSelection}.insert( (*it)->pageNumber() );
890         d->\hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}->\hyperlink{classOkular_1_1Document_ade0f70b9e9e3e08647592555f6c58357}{setPageTextSelection}( (*it)->pageNumber(), area, palette()
      .color( QPalette::Active, QPalette::Highlight ) );
891     \}
892 \}
\end{DoxyCode}
\hypertarget{classPageView_aad3b63508df30a6bc2ecbe587353c6b6}{\index{Page\+View@{Page\+View}!set\+Capability@{set\+Capability}}
\index{set\+Capability@{set\+Capability}!Page\+View@{Page\+View}}
\subsubsection[{set\+Capability}]{\setlength{\rightskip}{0pt plus 5cm}void Page\+View\+::set\+Capability (
\begin{DoxyParamCaption}
\item[{{\bf View\+Capability}}]{capability, }
\item[{const Q\+Variant \&}]{option}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classPageView_aad3b63508df30a6bc2ecbe587353c6b6}
Sets a new value for the specified {\ttfamily capability}. 

Reimplemented from \hyperlink{classOkular_1_1View_a8a6fa965fa025331f2653c529a60eafe}{Okular\+::\+View}.



Definition at line 1405 of file pageview.\+cpp.


\begin{DoxyCode}
1406 \{
1407     \textcolor{keywordflow}{switch} ( \hyperlink{classPageView_a2a3eb80b924b29dd1498259734f81311}{capability} )
1408     \{
1409         \textcolor{keywordflow}{case} \hyperlink{classOkular_1_1View_ad95d365554715eb1eabb79350f51b294a3fa37aa9737e4a0f9753aa398c30f667}{Zoom}:
1410         \{
1411             \textcolor{keywordtype}{bool} ok = \textcolor{keyword}{true};
1412             \textcolor{keywordtype}{double} factor = option.toDouble( &ok );
1413             \textcolor{keywordflow}{if} ( ok && factor > 0.0 )
1414             \{
1415                 d->\hyperlink{classPageViewPrivate_a938411ef880f839b765aeac48a482b9e}{zoomFactor} = \textcolor{keyword}{static\_cast<} \textcolor{keywordtype}{float} \textcolor{keyword}{>}( factor );
1416                 updateZoom( \hyperlink{classPageView_af489dc2492677bb4f422660627f62aecab9583485dc9e9287fc1fc02392c5a47b}{ZoomRefreshCurrent} );
1417             \}
1418             \textcolor{keywordflow}{break};
1419         \}
1420         \textcolor{keywordflow}{case} \hyperlink{classOkular_1_1View_ad95d365554715eb1eabb79350f51b294a2621c21053805b1e2f71fdeb069f9c35}{ZoomModality}:
1421         \{
1422             \textcolor{keywordtype}{bool} ok = \textcolor{keyword}{true};
1423             \textcolor{keywordtype}{int} mode = option.toInt( &ok );
1424             \textcolor{keywordflow}{if} ( ok )
1425             \{
1426                 \textcolor{keywordflow}{if} ( mode >= 0 && mode < 3 )
1427                     updateZoom( (\hyperlink{classPageView_af489dc2492677bb4f422660627f62aec}{ZoomMode})mode );
1428             \}
1429             \textcolor{keywordflow}{break};
1430         \}
1431     \}
1432 \}
\end{DoxyCode}
\hypertarget{classPageView_a6564b027a53154dc576bf93b161bb440}{\index{Page\+View@{Page\+View}!set\+Last\+Source\+Location\+Viewport@{set\+Last\+Source\+Location\+Viewport}}
\index{set\+Last\+Source\+Location\+Viewport@{set\+Last\+Source\+Location\+Viewport}!Page\+View@{Page\+View}}
\subsubsection[{set\+Last\+Source\+Location\+Viewport}]{\setlength{\rightskip}{0pt plus 5cm}void Page\+View\+::set\+Last\+Source\+Location\+Viewport (
\begin{DoxyParamCaption}
\item[{const {\bf Okular\+::\+Document\+Viewport} \&}]{vp}
\end{DoxyParamCaption}
)}}\label{classPageView_a6564b027a53154dc576bf93b161bb440}


Definition at line 1114 of file pageview.\+cpp.


\begin{DoxyCode}
1115 \{
1116     \textcolor{keywordflow}{if}( vp.\hyperlink{classOkular_1_1DocumentViewport_a054f24bcba44b795a3671ac53693ff45}{rePos}.\hyperlink{classOkular_1_1DocumentViewport_a6dddb31dbc72d7fb3efe094d840d8692}{enabled} )
1117     \{
1118         d->\hyperlink{classPageViewPrivate_ada1e593e53f5fe775184f97ec3b1bbc7}{lastSourceLocationViewportNormalizedX} = normClamp( vp.
      \hyperlink{classOkular_1_1DocumentViewport_a054f24bcba44b795a3671ac53693ff45}{rePos}.\hyperlink{classOkular_1_1DocumentViewport_a2f749d09360cca2f64af1a893a190e2f}{normalizedX}, 0.5 );
1119         d->\hyperlink{classPageViewPrivate_af9fd59edb9afe621534cfb8086fc95ab}{lastSourceLocationViewportNormalizedY} = normClamp( vp.
      \hyperlink{classOkular_1_1DocumentViewport_a054f24bcba44b795a3671ac53693ff45}{rePos}.\hyperlink{classOkular_1_1DocumentViewport_aa86271c42d62ef102c6ba570bf40e770}{normalizedY}, 0.0 );
1120     \}
1121     \textcolor{keywordflow}{else}
1122     \{
1123         d->\hyperlink{classPageViewPrivate_ada1e593e53f5fe775184f97ec3b1bbc7}{lastSourceLocationViewportNormalizedX} = 0.5;
1124         d->\hyperlink{classPageViewPrivate_af9fd59edb9afe621534cfb8086fc95ab}{lastSourceLocationViewportNormalizedY} = 0.0;
1125     \}
1126     d->\hyperlink{classPageViewPrivate_a12f794c9556da941d62030f41e37ea87}{lastSourceLocationViewportPageNumber} = vp.
      \hyperlink{classOkular_1_1DocumentViewport_a122674d4a493e79b1aa5fd5c00e81c93}{pageNumber};
1127     viewport()->update();
1128 \}
\end{DoxyCode}
\hypertarget{classPageView_a17deaed022d1012ce0e663bcbc22e0d9}{\index{Page\+View@{Page\+View}!set\+Show\+Source\+Locations\+Graphically@{set\+Show\+Source\+Locations\+Graphically}}
\index{set\+Show\+Source\+Locations\+Graphically@{set\+Show\+Source\+Locations\+Graphically}!Page\+View@{Page\+View}}
\subsubsection[{set\+Show\+Source\+Locations\+Graphically}]{\setlength{\rightskip}{0pt plus 5cm}void Page\+View\+::set\+Show\+Source\+Locations\+Graphically (
\begin{DoxyParamCaption}
\item[{bool}]{show}
\end{DoxyParamCaption}
)}}\label{classPageView_a17deaed022d1012ce0e663bcbc22e0d9}


Definition at line 1104 of file pageview.\+cpp.


\begin{DoxyCode}
1105 \{
1106     \textcolor{keywordflow}{if}( show == \hyperlink{classOkular_1_1Settings_a0b10da29207269b4a338dcf9f18d6d7b}{Okular::Settings::showSourceLocationsGraphically}
      () )
1107     \{
1108         \textcolor{keywordflow}{return};
1109     \}
1110     \hyperlink{classOkular_1_1Settings_ab9f7350a8d8fa5ed20ca2ba26861d031}{Okular::Settings::setShowSourceLocationsGraphically}(
       show );
1111     viewport()->update();
1112 \}
\end{DoxyCode}
\hypertarget{classPageView_a8a1b285458297ea9fd6f9d4f2718e614}{\index{Page\+View@{Page\+View}!setup\+Actions@{setup\+Actions}}
\index{setup\+Actions@{setup\+Actions}!Page\+View@{Page\+View}}
\subsubsection[{setup\+Actions}]{\setlength{\rightskip}{0pt plus 5cm}void Page\+View\+::setup\+Actions (
\begin{DoxyParamCaption}
\item[{K\+Action\+Collection $\ast$}]{collection}
\end{DoxyParamCaption}
)}}\label{classPageView_a8a1b285458297ea9fd6f9d4f2718e614}


Definition at line 569 of file pageview.\+cpp.


\begin{DoxyCode}
570 \{
571     d->\hyperlink{classPageViewPrivate_a6abf868c8b0713a89291d48eef79d193}{actionCollection} = ac;
572 
573     d->\hyperlink{classPageViewPrivate_a07171f9e585da785aba41e84bf6014fb}{aZoomIn}->setShortcut( KStandardShortcut::zoomIn() );
574     d->\hyperlink{classPageViewPrivate_a193ef99e27c1d7c1b1741e33ada152ec}{aZoomOut}->setShortcut( KStandardShortcut::zoomOut() );
575 
576     \textcolor{comment}{// Mouse-Mode actions}
577     d->\hyperlink{classPageViewPrivate_a9e809032b95484f491dd439198b7bb8e}{aMouseSelect}  = \textcolor{keyword}{new} KAction(KIcon( \textcolor{stringliteral}{"select-rectangular"} ), i18n(\textcolor{stringliteral}{"&Selection Tool"}), \textcolor{keyword}{this}
      );
578     ac->addAction(\textcolor{stringliteral}{"mouse\_select"}, d->\hyperlink{classPageViewPrivate_a9e809032b95484f491dd439198b7bb8e}{aMouseSelect} );
579     connect( d->\hyperlink{classPageViewPrivate_a9e809032b95484f491dd439198b7bb8e}{aMouseSelect}, SIGNAL(triggered()), \textcolor{keyword}{this}, SLOT(slotSetMouseSelect()) );
580     d->\hyperlink{classPageViewPrivate_a9e809032b95484f491dd439198b7bb8e}{aMouseSelect}->setIconText( i18nc( \textcolor{stringliteral}{"Select Tool"}, \textcolor{stringliteral}{"Selection"} ) );
581     d->\hyperlink{classPageViewPrivate_a9e809032b95484f491dd439198b7bb8e}{aMouseSelect}->setCheckable( \textcolor{keyword}{true} );
582     d->\hyperlink{classPageViewPrivate_a9e809032b95484f491dd439198b7bb8e}{aMouseSelect}->setShortcut( Qt::CTRL + Qt::Key\_3 );
583     d->\hyperlink{classPageViewPrivate_a9e809032b95484f491dd439198b7bb8e}{aMouseSelect}->setActionGroup( d->\hyperlink{classPageViewPrivate_ae7b75854286f78f9b871f99bebb1eb73}{mouseModeActionGroup} );
584     d->\hyperlink{classPageViewPrivate_a9e809032b95484f491dd439198b7bb8e}{aMouseSelect}->setChecked( \hyperlink{classOkular_1_1Settings_af8e39e25e841b413d67af2cb4dfc0688}{Okular::Settings::mouseMode}() == 
      \hyperlink{classOkular_1_1Settings_1_1EnumMouseMode_ab2ae04e2d7d069f02195ccf32c52415baa9bf3100d0e93abfec2769957743e6a2}{Okular::Settings::EnumMouseMode::RectSelect} );
585 
586     d->\hyperlink{classPageViewPrivate_a1d8b1716abeb281e68dce858ffda489f}{aMouseTextSelect}  = \textcolor{keyword}{new} KAction(KIcon( \textcolor{stringliteral}{"draw-text"} ), i18n(\textcolor{stringliteral}{"&Text Selection Tool"}), \textcolor{keyword}{
      this});
587     ac->addAction(\textcolor{stringliteral}{"mouse\_textselect"}, d->\hyperlink{classPageViewPrivate_a1d8b1716abeb281e68dce858ffda489f}{aMouseTextSelect} );
588     connect( d->\hyperlink{classPageViewPrivate_a1d8b1716abeb281e68dce858ffda489f}{aMouseTextSelect}, SIGNAL(triggered()), \textcolor{keyword}{this}, SLOT(slotSetMouseTextSelect())
       );
589     d->\hyperlink{classPageViewPrivate_a1d8b1716abeb281e68dce858ffda489f}{aMouseTextSelect}->setIconText( i18nc( \textcolor{stringliteral}{"Text Selection Tool"}, \textcolor{stringliteral}{"Text Selection"} ) );
590     d->\hyperlink{classPageViewPrivate_a1d8b1716abeb281e68dce858ffda489f}{aMouseTextSelect}->setCheckable( \textcolor{keyword}{true} );
591     d->\hyperlink{classPageViewPrivate_a1d8b1716abeb281e68dce858ffda489f}{aMouseTextSelect}->setShortcut( Qt::CTRL + Qt::Key\_4 );
592     d->\hyperlink{classPageViewPrivate_a1d8b1716abeb281e68dce858ffda489f}{aMouseTextSelect}->setActionGroup( d->\hyperlink{classPageViewPrivate_ae7b75854286f78f9b871f99bebb1eb73}{mouseModeActionGroup} );
593     d->\hyperlink{classPageViewPrivate_a1d8b1716abeb281e68dce858ffda489f}{aMouseTextSelect}->setChecked( \hyperlink{classOkular_1_1Settings_af8e39e25e841b413d67af2cb4dfc0688}{Okular::Settings::mouseMode}
      () == \hyperlink{classOkular_1_1Settings_1_1EnumMouseMode_ab2ae04e2d7d069f02195ccf32c52415bafafb47a3dab02c4016246ee80090e2d9}{Okular::Settings::EnumMouseMode::TextSelect} );
594 
595     d->\hyperlink{classPageViewPrivate_a6b679535b8feee220664963bcb7b0b56}{aMouseTableSelect}  = \textcolor{keyword}{new} KAction(KIcon( \textcolor{stringliteral}{"select-table"} ), i18n(\textcolor{stringliteral}{"T&able Selection
       Tool"}), \textcolor{keyword}{this});
596     ac->addAction(\textcolor{stringliteral}{"mouse\_tableselect"}, d->\hyperlink{classPageViewPrivate_a6b679535b8feee220664963bcb7b0b56}{aMouseTableSelect} );
597     connect( d->\hyperlink{classPageViewPrivate_a6b679535b8feee220664963bcb7b0b56}{aMouseTableSelect}, SIGNAL( triggered() ), \textcolor{keyword}{this}, SLOT( 
      slotSetMouseTableSelect() ) );
598     d->\hyperlink{classPageViewPrivate_a6b679535b8feee220664963bcb7b0b56}{aMouseTableSelect}->setIconText( i18nc( \textcolor{stringliteral}{"Table Selection Tool"}, \textcolor{stringliteral}{"Table Selection"} ) 
      );
599     d->\hyperlink{classPageViewPrivate_a6b679535b8feee220664963bcb7b0b56}{aMouseTableSelect}->setCheckable( \textcolor{keyword}{true} );
600     d->\hyperlink{classPageViewPrivate_a6b679535b8feee220664963bcb7b0b56}{aMouseTableSelect}->setShortcut( Qt::CTRL + Qt::Key\_5 );
601     d->\hyperlink{classPageViewPrivate_a6b679535b8feee220664963bcb7b0b56}{aMouseTableSelect}->setActionGroup( d->
      \hyperlink{classPageViewPrivate_ae7b75854286f78f9b871f99bebb1eb73}{mouseModeActionGroup} );
602     d->\hyperlink{classPageViewPrivate_a6b679535b8feee220664963bcb7b0b56}{aMouseTableSelect}->setChecked( 
      \hyperlink{classOkular_1_1Settings_af8e39e25e841b413d67af2cb4dfc0688}{Okular::Settings::mouseMode}() == 
      \hyperlink{classOkular_1_1Settings_1_1EnumMouseMode_ab2ae04e2d7d069f02195ccf32c52415ba5422065f9d7eff6cc08eef755e862af3}{Okular::Settings::EnumMouseMode::TableSelect} );
603 
604     d->\hyperlink{classPageViewPrivate_a48a8cc9cf9c4aa483c79c8f81fc62ea7}{aMouseMagnifier} = \textcolor{keyword}{new} KAction(KIcon( \textcolor{stringliteral}{"magnifier"} ), i18n(\textcolor{stringliteral}{"&Magnifier"}), \textcolor{keyword}{this});
605     ac->addAction(\textcolor{stringliteral}{"mouse\_magnifier"}, d->\hyperlink{classPageViewPrivate_a48a8cc9cf9c4aa483c79c8f81fc62ea7}{aMouseMagnifier} );
606     connect( d->\hyperlink{classPageViewPrivate_a48a8cc9cf9c4aa483c79c8f81fc62ea7}{aMouseMagnifier}, SIGNAL(triggered()), \textcolor{keyword}{this}, SLOT(slotSetMouseMagnifier()) );
607     d->\hyperlink{classPageViewPrivate_a48a8cc9cf9c4aa483c79c8f81fc62ea7}{aMouseMagnifier}->setIconText( i18nc( \textcolor{stringliteral}{"Magnifier Tool"}, \textcolor{stringliteral}{"Magnifier"} ) );
608     d->\hyperlink{classPageViewPrivate_a48a8cc9cf9c4aa483c79c8f81fc62ea7}{aMouseMagnifier}->setCheckable( \textcolor{keyword}{true} );
609     d->\hyperlink{classPageViewPrivate_a48a8cc9cf9c4aa483c79c8f81fc62ea7}{aMouseMagnifier}->setShortcut( Qt::CTRL + Qt::Key\_6 );
610     d->\hyperlink{classPageViewPrivate_a48a8cc9cf9c4aa483c79c8f81fc62ea7}{aMouseMagnifier}->setActionGroup( d->\hyperlink{classPageViewPrivate_ae7b75854286f78f9b871f99bebb1eb73}{mouseModeActionGroup} );
611     d->\hyperlink{classPageViewPrivate_a48a8cc9cf9c4aa483c79c8f81fc62ea7}{aMouseMagnifier}->setChecked( \hyperlink{classOkular_1_1Settings_af8e39e25e841b413d67af2cb4dfc0688}{Okular::Settings::mouseMode}()
       == \hyperlink{classOkular_1_1Settings_1_1EnumMouseMode_ab2ae04e2d7d069f02195ccf32c52415bab95111677f0c566414f48ece94ce0f45}{Okular::Settings::EnumMouseMode::Magnifier} );
612 
613     d->\hyperlink{classPageViewPrivate_a29f1ef25d86a534e1605ae5e662233b8}{aToggleAnnotator}  = \textcolor{keyword}{new} KToggleAction(KIcon( \textcolor{stringliteral}{"draw-freehand"} ), i18n(\textcolor{stringliteral}{"&Review"}), \textcolor{keyword}{
      this});
614     ac->addAction(\textcolor{stringliteral}{"mouse\_toggle\_annotate"}, d->\hyperlink{classPageViewPrivate_a29f1ef25d86a534e1605ae5e662233b8}{aToggleAnnotator} );
615     d->\hyperlink{classPageViewPrivate_a29f1ef25d86a534e1605ae5e662233b8}{aToggleAnnotator}->setCheckable( \textcolor{keyword}{true} );
616     connect( d->\hyperlink{classPageViewPrivate_a29f1ef25d86a534e1605ae5e662233b8}{aToggleAnnotator}, SIGNAL(toggled(\textcolor{keywordtype}{bool})), SLOT(slotToggleAnnotator(\textcolor{keywordtype}{bool})) );
617     d->\hyperlink{classPageViewPrivate_a29f1ef25d86a534e1605ae5e662233b8}{aToggleAnnotator}->setShortcut( Qt::Key\_F6 );
618 
619     \hyperlink{classToolAction}{ToolAction} *ta = \textcolor{keyword}{new} \hyperlink{classToolAction}{ToolAction}( \textcolor{keyword}{this} );
620     ac->addAction( \textcolor{stringliteral}{"mouse\_selecttools"}, ta );
621     ta->\hyperlink{classToolAction_a30cc899c6a7167fd9e7023f6e0a5ebf1}{addAction}( d->\hyperlink{classPageViewPrivate_a9e809032b95484f491dd439198b7bb8e}{aMouseSelect} );
622     ta->\hyperlink{classToolAction_a30cc899c6a7167fd9e7023f6e0a5ebf1}{addAction}( d->\hyperlink{classPageViewPrivate_a1d8b1716abeb281e68dce858ffda489f}{aMouseTextSelect} );
623     ta->\hyperlink{classToolAction_a30cc899c6a7167fd9e7023f6e0a5ebf1}{addAction}( d->\hyperlink{classPageViewPrivate_a6b679535b8feee220664963bcb7b0b56}{aMouseTableSelect} );
624 
625     \textcolor{comment}{// speak actions}
626     d->\hyperlink{classPageViewPrivate_ae017762cbf8b93ab294f647563d6ccf0}{aSpeakDoc} = \textcolor{keyword}{new} KAction( KIcon( \textcolor{stringliteral}{"text-speak"} ), i18n( \textcolor{stringliteral}{"Speak Whole Document"} ), \textcolor{keyword}{this} );
627     ac->addAction( \textcolor{stringliteral}{"speak\_document"}, d->\hyperlink{classPageViewPrivate_ae017762cbf8b93ab294f647563d6ccf0}{aSpeakDoc} );
628     d->\hyperlink{classPageViewPrivate_ae017762cbf8b93ab294f647563d6ccf0}{aSpeakDoc}->setEnabled( \textcolor{keyword}{false} );
629     connect( d->\hyperlink{classPageViewPrivate_ae017762cbf8b93ab294f647563d6ccf0}{aSpeakDoc}, SIGNAL(triggered()), SLOT(slotSpeakDocument()) );
630 
631     d->\hyperlink{classPageViewPrivate_abcf8673f8ee893b554984b46cc1b30d8}{aSpeakPage} = \textcolor{keyword}{new} KAction( KIcon( \textcolor{stringliteral}{"text-speak"} ), i18n( \textcolor{stringliteral}{"Speak Current Page"} ), \textcolor{keyword}{this} );
632     ac->addAction( \textcolor{stringliteral}{"speak\_current\_page"}, d->\hyperlink{classPageViewPrivate_abcf8673f8ee893b554984b46cc1b30d8}{aSpeakPage} );
633     d->\hyperlink{classPageViewPrivate_abcf8673f8ee893b554984b46cc1b30d8}{aSpeakPage}->setEnabled( \textcolor{keyword}{false} );
634     connect( d->\hyperlink{classPageViewPrivate_abcf8673f8ee893b554984b46cc1b30d8}{aSpeakPage}, SIGNAL(triggered()), SLOT(slotSpeakCurrentPage()) );
635 
636     d->\hyperlink{classPageViewPrivate_ac0ad1db7d08f13202e952d1b0743a377}{aSpeakStop} = \textcolor{keyword}{new} KAction( KIcon( \textcolor{stringliteral}{"media-playback-stop"} ), i18n( \textcolor{stringliteral}{"Stop Speaking"} ), \textcolor{keyword}{this} );
637     ac->addAction( \textcolor{stringliteral}{"speak\_stop\_all"}, d->\hyperlink{classPageViewPrivate_ac0ad1db7d08f13202e952d1b0743a377}{aSpeakStop} );
638     d->\hyperlink{classPageViewPrivate_ac0ad1db7d08f13202e952d1b0743a377}{aSpeakStop}->setEnabled( \textcolor{keyword}{false} );
639     connect( d->\hyperlink{classPageViewPrivate_ac0ad1db7d08f13202e952d1b0743a377}{aSpeakStop}, SIGNAL(triggered()), SLOT(slotStopSpeaks()) );
640 
641     \textcolor{comment}{// Other actions}
642     KAction * su  = \textcolor{keyword}{new} KAction(i18n(\textcolor{stringliteral}{"Scroll Up"}), \textcolor{keyword}{this});
643     ac->addAction(\textcolor{stringliteral}{"view\_scroll\_up"}, su );
644     connect( su, SIGNAL(triggered()), \textcolor{keyword}{this}, SLOT(slotAutoScrollUp()) );
645     su->setShortcut( QKeySequence(Qt::SHIFT + Qt::Key\_Up) );
646     addAction(su);
647 
648     KAction * sd  = \textcolor{keyword}{new} KAction(i18n(\textcolor{stringliteral}{"Scroll Down"}), \textcolor{keyword}{this});
649     ac->addAction(\textcolor{stringliteral}{"view\_scroll\_down"}, sd );
650     connect( sd, SIGNAL(triggered()), \textcolor{keyword}{this}, SLOT(slotAutoScrollDown()) );
651     sd->setShortcut( QKeySequence(Qt::SHIFT + Qt::Key\_Down) );
652     addAction(sd);
653 
654     KAction * spu = \textcolor{keyword}{new} KAction(i18n(\textcolor{stringliteral}{"Scroll Page Up"}), \textcolor{keyword}{this});
655     ac->addAction( \textcolor{stringliteral}{"view\_scroll\_page\_up"}, spu );
656     connect( spu, SIGNAL(triggered()), \textcolor{keyword}{this}, SLOT(slotScrollUp()) );
657     spu->setShortcut( QKeySequence(Qt::SHIFT + Qt::Key\_Space) );
658     addAction( spu );
659 
660     KAction * spd = \textcolor{keyword}{new} KAction(i18n(\textcolor{stringliteral}{"Scroll Page Down"}), \textcolor{keyword}{this});
661     ac->addAction( \textcolor{stringliteral}{"view\_scroll\_page\_down"}, spd );
662     connect( spd, SIGNAL(triggered()), \textcolor{keyword}{this}, SLOT(slotScrollDown()) );
663     spd->setShortcut( QKeySequence(Qt::Key\_Space) );
664     addAction( spd );
665 
666     d->\hyperlink{classPageViewPrivate_af0990514eb2a448c1400a4cecc0ca6bb}{aToggleForms} = \textcolor{keyword}{new} KAction( \textcolor{keyword}{this} );
667     ac->addAction( \textcolor{stringliteral}{"view\_toggle\_forms"}, d->\hyperlink{classPageViewPrivate_af0990514eb2a448c1400a4cecc0ca6bb}{aToggleForms} );
668     connect( d->\hyperlink{classPageViewPrivate_af0990514eb2a448c1400a4cecc0ca6bb}{aToggleForms}, SIGNAL(triggered()), \textcolor{keyword}{this}, SLOT(slotToggleForms()) );
669     d->\hyperlink{classPageViewPrivate_af0990514eb2a448c1400a4cecc0ca6bb}{aToggleForms}->setEnabled( \textcolor{keyword}{false} );
670     toggleFormWidgets( \textcolor{keyword}{false} );
671 
672     \textcolor{comment}{// Setup undo and redo actions}
673     KAction *kundo = KStandardAction::create( KStandardAction::Undo, d->\hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}, SLOT(undo()), ac 
      );
674     KAction *kredo = KStandardAction::create( KStandardAction::Redo, d->\hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}, SLOT(redo()), ac 
      );
675     connect(d->\hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}, SIGNAL(canUndoChanged(\textcolor{keywordtype}{bool})), kundo, SLOT(setEnabled(\textcolor{keywordtype}{bool})));
676     connect(d->\hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}, SIGNAL(canRedoChanged(\textcolor{keywordtype}{bool})), kredo, SLOT(setEnabled(\textcolor{keywordtype}{bool})));
677     kundo->setEnabled(\textcolor{keyword}{false});
678     kredo->setEnabled(\textcolor{keyword}{false});
679 \}
\end{DoxyCode}
\hypertarget{classPageView_a743dd42566e0d285671a861592e133a9}{\index{Page\+View@{Page\+View}!setup\+Base\+Actions@{setup\+Base\+Actions}}
\index{setup\+Base\+Actions@{setup\+Base\+Actions}!Page\+View@{Page\+View}}
\subsubsection[{setup\+Base\+Actions}]{\setlength{\rightskip}{0pt plus 5cm}void Page\+View\+::setup\+Base\+Actions (
\begin{DoxyParamCaption}
\item[{K\+Action\+Collection $\ast$}]{collection}
\end{DoxyParamCaption}
)}}\label{classPageView_a743dd42566e0d285671a861592e133a9}


Definition at line 435 of file pageview.\+cpp.


\begin{DoxyCode}
436 \{
437     d->\hyperlink{classPageViewPrivate_a6abf868c8b0713a89291d48eef79d193}{actionCollection} = ac;
438 
439     \textcolor{comment}{// Zoom actions ( higher scales takes lots of memory! )}
440     d->\hyperlink{classPageViewPrivate_a04f88453f9b09f91cce05b4b6647f2ad}{aZoom}  = \textcolor{keyword}{new} KSelectAction(KIcon( \textcolor{stringliteral}{"page-zoom"} ), i18n(\textcolor{stringliteral}{"Zoom"}), \textcolor{keyword}{this});
441     ac->addAction(\textcolor{stringliteral}{"zoom\_to"}, d->\hyperlink{classPageViewPrivate_a04f88453f9b09f91cce05b4b6647f2ad}{aZoom} );
442     d->\hyperlink{classPageViewPrivate_a04f88453f9b09f91cce05b4b6647f2ad}{aZoom}->setEditable( \textcolor{keyword}{true} );
443     d->\hyperlink{classPageViewPrivate_a04f88453f9b09f91cce05b4b6647f2ad}{aZoom}->setMaxComboViewCount( 14 );
444     connect( d->\hyperlink{classPageViewPrivate_a04f88453f9b09f91cce05b4b6647f2ad}{aZoom}, SIGNAL(triggered(QAction*)), \textcolor{keyword}{this}, SLOT(slotZoom()) );
445     updateZoomText();
446 
447     d->\hyperlink{classPageViewPrivate_a07171f9e585da785aba41e84bf6014fb}{aZoomIn} = KStandardAction::zoomIn( \textcolor{keyword}{this}, SLOT(slotZoomIn()), ac );
448 
449     d->\hyperlink{classPageViewPrivate_a193ef99e27c1d7c1b1741e33ada152ec}{aZoomOut} = KStandardAction::zoomOut( \textcolor{keyword}{this}, SLOT(slotZoomOut()), ac );
450 \}
\end{DoxyCode}
\hypertarget{classPageView_a237853c5039228f8825cbc5724787f31}{\index{Page\+View@{Page\+View}!setup\+Viewer\+Actions@{setup\+Viewer\+Actions}}
\index{setup\+Viewer\+Actions@{setup\+Viewer\+Actions}!Page\+View@{Page\+View}}
\subsubsection[{setup\+Viewer\+Actions}]{\setlength{\rightskip}{0pt plus 5cm}void Page\+View\+::setup\+Viewer\+Actions (
\begin{DoxyParamCaption}
\item[{K\+Action\+Collection $\ast$}]{collection}
\end{DoxyParamCaption}
)}}\label{classPageView_a237853c5039228f8825cbc5724787f31}


Definition at line 452 of file pageview.\+cpp.


\begin{DoxyCode}
453 \{
454     d->\hyperlink{classPageViewPrivate_a6abf868c8b0713a89291d48eef79d193}{actionCollection} = ac;
455 
456     d->\hyperlink{classPageViewPrivate_a07171f9e585da785aba41e84bf6014fb}{aZoomIn}->setShortcut( QKeySequence(Qt::CTRL + Qt::ALT + Qt::Key\_Plus) );
457     d->\hyperlink{classPageViewPrivate_a193ef99e27c1d7c1b1741e33ada152ec}{aZoomOut}->setShortcut( QKeySequence(Qt::CTRL + Qt::ALT + Qt::Key\_Minus) );
458 
459     \textcolor{comment}{// orientation menu actions}
460     d->\hyperlink{classPageViewPrivate_a389103a18e7590c8ec75c26e23806e51}{aRotateClockwise} = \textcolor{keyword}{new} KAction( KIcon( \textcolor{stringliteral}{"object-rotate-right"} ), i18n( \textcolor{stringliteral}{"Rotate &Right
      "} ), \textcolor{keyword}{this} );
461     d->\hyperlink{classPageViewPrivate_a389103a18e7590c8ec75c26e23806e51}{aRotateClockwise}->setIconText( i18nc( \textcolor{stringliteral}{"Rotate right"}, \textcolor{stringliteral}{"Right"} ) );
462     ac->addAction( \textcolor{stringliteral}{"view\_orientation\_rotate\_cw"}, d->\hyperlink{classPageViewPrivate_a389103a18e7590c8ec75c26e23806e51}{aRotateClockwise} );
463     d->\hyperlink{classPageViewPrivate_a389103a18e7590c8ec75c26e23806e51}{aRotateClockwise}->setEnabled( \textcolor{keyword}{false} );
464     connect( d->\hyperlink{classPageViewPrivate_a389103a18e7590c8ec75c26e23806e51}{aRotateClockwise}, SIGNAL(triggered()), \textcolor{keyword}{this}, SLOT(slotRotateClockwise()) );
465     d->\hyperlink{classPageViewPrivate_a4a8b7b626080698fa1dbf78d60cbff59}{aRotateCounterClockwise} = \textcolor{keyword}{new} KAction( KIcon( \textcolor{stringliteral}{"object-rotate-left"} ), i18n( \textcolor{stringliteral}{"
      Rotate &Left"} ), \textcolor{keyword}{this} );
466     d->\hyperlink{classPageViewPrivate_a4a8b7b626080698fa1dbf78d60cbff59}{aRotateCounterClockwise}->setIconText( i18nc( \textcolor{stringliteral}{"Rotate left"}, \textcolor{stringliteral}{"Left"} ) );
467     ac->addAction( \textcolor{stringliteral}{"view\_orientation\_rotate\_ccw"}, d->\hyperlink{classPageViewPrivate_a4a8b7b626080698fa1dbf78d60cbff59}{aRotateCounterClockwise} );
468     d->\hyperlink{classPageViewPrivate_a4a8b7b626080698fa1dbf78d60cbff59}{aRotateCounterClockwise}->setEnabled( \textcolor{keyword}{false} );
469     connect( d->\hyperlink{classPageViewPrivate_a4a8b7b626080698fa1dbf78d60cbff59}{aRotateCounterClockwise}, SIGNAL(triggered()), \textcolor{keyword}{this}, SLOT(
      slotRotateCounterClockwise()) );
470     d->\hyperlink{classPageViewPrivate_ae57bd1f37889d8a28535e877c2fa87ed}{aRotateOriginal} = \textcolor{keyword}{new} KAction( i18n( \textcolor{stringliteral}{"Original Orientation"} ), \textcolor{keyword}{this} );
471     ac->addAction( \textcolor{stringliteral}{"view\_orientation\_original"}, d->\hyperlink{classPageViewPrivate_ae57bd1f37889d8a28535e877c2fa87ed}{aRotateOriginal} );
472     d->\hyperlink{classPageViewPrivate_ae57bd1f37889d8a28535e877c2fa87ed}{aRotateOriginal}->setEnabled( \textcolor{keyword}{false} );
473     connect( d->\hyperlink{classPageViewPrivate_ae57bd1f37889d8a28535e877c2fa87ed}{aRotateOriginal}, SIGNAL(triggered()), \textcolor{keyword}{this}, SLOT(slotRotateOriginal()) );
474 
475     d->\hyperlink{classPageViewPrivate_a5f864847956ada5d8933fe2d28bbc075}{aPageSizes} = \textcolor{keyword}{new} KSelectAction(i18n(\textcolor{stringliteral}{"&Page Size"}), \textcolor{keyword}{this});
476     ac->addAction(\textcolor{stringliteral}{"view\_pagesizes"}, d->\hyperlink{classPageViewPrivate_a5f864847956ada5d8933fe2d28bbc075}{aPageSizes});
477     d->\hyperlink{classPageViewPrivate_a5f864847956ada5d8933fe2d28bbc075}{aPageSizes}->setEnabled( \textcolor{keyword}{false} );
478 
479     connect( d->\hyperlink{classPageViewPrivate_a5f864847956ada5d8933fe2d28bbc075}{aPageSizes} , SIGNAL(triggered(\textcolor{keywordtype}{int})),
480          \textcolor{keyword}{this}, SLOT(slotPageSizes(\textcolor{keywordtype}{int})) );
481 
482     d->\hyperlink{classPageViewPrivate_a0ef5e6fe307660bd3fbe6bd999b895a7}{aTrimMargins}  = \textcolor{keyword}{new} KToggleAction( i18n( \textcolor{stringliteral}{"&Trim Margins"} ), \textcolor{keyword}{this} );
483     ac->addAction(\textcolor{stringliteral}{"view\_trim\_margins"}, d->\hyperlink{classPageViewPrivate_a0ef5e6fe307660bd3fbe6bd999b895a7}{aTrimMargins} );
484     connect( d->\hyperlink{classPageViewPrivate_a0ef5e6fe307660bd3fbe6bd999b895a7}{aTrimMargins}, SIGNAL(toggled(\textcolor{keywordtype}{bool})), SLOT(slotTrimMarginsToggled(\textcolor{keywordtype}{bool})) );
485     d->\hyperlink{classPageViewPrivate_a0ef5e6fe307660bd3fbe6bd999b895a7}{aTrimMargins}->setChecked( \hyperlink{classOkular_1_1Settings_aaafcee0b6362edd2811f3ca8d575493d}{Okular::Settings::trimMargins}() )
      ;
486 
487     \textcolor{comment}{/* Added by Ganesh P Kumar on 29/3/2014 2158 hrs IST */}
488     \textcolor{comment}{/* Incomplete: Need to figure out actions            */}
489 
490     d->\hyperlink{classPageViewPrivate_a4f801cbeb2d2c5bb5cccd84f373aeec9}{aRightToLeft}  = \textcolor{keyword}{new} KToggleAction( i18n( \textcolor{stringliteral}{"Right To Left"} ), \textcolor{keyword}{this} );
491     ac->addAction(\textcolor{stringliteral}{"view\_right\_to\_left"}, d->\hyperlink{classPageViewPrivate_a4f801cbeb2d2c5bb5cccd84f373aeec9}{aRightToLeft} );
492     connect( d->\hyperlink{classPageViewPrivate_a4f801cbeb2d2c5bb5cccd84f373aeec9}{aRightToLeft}, SIGNAL(toggled(\textcolor{keywordtype}{bool})), SLOT(slotRightToLeftToggled(\textcolor{keywordtype}{bool})) );
493     d->\hyperlink{classPageViewPrivate_a4f801cbeb2d2c5bb5cccd84f373aeec9}{aRightToLeft}->setChecked( \hyperlink{classOkular_1_1Settings_a809dd5c4f2d3fc1cf85f6852ff264611}{Okular::Settings::rightToLeft}() )
      ;
494     printf(\textcolor{stringliteral}{"Right to Left = %d\(\backslash\)n"}, \hyperlink{classOkular_1_1Settings_a809dd5c4f2d3fc1cf85f6852ff264611}{Okular::Settings::rightToLeft}() ); 
495     \textcolor{comment}{/* Modification ends                                 */}
496 
497     d->\hyperlink{classPageViewPrivate_a251dae24330598db9ee9b7eb6015be3b}{aZoomFitWidth}  = \textcolor{keyword}{new} KToggleAction(KIcon( \textcolor{stringliteral}{"zoom-fit-width"} ), i18n(\textcolor{stringliteral}{"Fit &Width"}), \textcolor{keyword}{this})
      ;
498     ac->addAction(\textcolor{stringliteral}{"view\_fit\_to\_width"}, d->\hyperlink{classPageViewPrivate_a251dae24330598db9ee9b7eb6015be3b}{aZoomFitWidth} );
499     connect( d->\hyperlink{classPageViewPrivate_a251dae24330598db9ee9b7eb6015be3b}{aZoomFitWidth}, SIGNAL(toggled(\textcolor{keywordtype}{bool})), SLOT(slotFitToWidthToggled(\textcolor{keywordtype}{bool})) );
500 
501     d->\hyperlink{classPageViewPrivate_a821a7981295e5366b2f3d489b501ae37}{aZoomFitPage}  = \textcolor{keyword}{new} KToggleAction(KIcon( \textcolor{stringliteral}{"zoom-fit-best"} ), i18n(\textcolor{stringliteral}{"Fit &Page"}), \textcolor{keyword}{this});
502     ac->addAction(\textcolor{stringliteral}{"view\_fit\_to\_page"}, d->\hyperlink{classPageViewPrivate_a821a7981295e5366b2f3d489b501ae37}{aZoomFitPage} );
503     connect( d->\hyperlink{classPageViewPrivate_a821a7981295e5366b2f3d489b501ae37}{aZoomFitPage}, SIGNAL(toggled(\textcolor{keywordtype}{bool})), SLOT(slotFitToPageToggled(\textcolor{keywordtype}{bool})) );
504 
505     d->\hyperlink{classPageViewPrivate_ad119458f9f75be63ae18c65e86ded044}{aZoomAutoFit}  = \textcolor{keyword}{new} KToggleAction(KIcon( \textcolor{stringliteral}{"zoom-fit-best"} ), i18n(\textcolor{stringliteral}{"&Auto Fit"}), \textcolor{keyword}{this});
506     ac->addAction(\textcolor{stringliteral}{"view\_auto\_fit"}, d->\hyperlink{classPageViewPrivate_ad119458f9f75be63ae18c65e86ded044}{aZoomAutoFit} );
507     connect( d->\hyperlink{classPageViewPrivate_ad119458f9f75be63ae18c65e86ded044}{aZoomAutoFit}, SIGNAL(toggled(\textcolor{keywordtype}{bool})), SLOT(slotAutoFitToggled(\textcolor{keywordtype}{bool})) );
508     \textcolor{comment}{// View-Layout actions}
509     d->\hyperlink{classPageViewPrivate_a89d998dea21b24010b2578c6b4f5d9d2}{aViewMode} = \textcolor{keyword}{new} KActionMenu( KIcon( \textcolor{stringliteral}{"view-split-left-right"} ), i18n( \textcolor{stringliteral}{"&View Mode"} ), \textcolor{keyword}{this} )
      ;
510     d->\hyperlink{classPageViewPrivate_a89d998dea21b24010b2578c6b4f5d9d2}{aViewMode}->setDelayed( \textcolor{keyword}{false} );
511 \textcolor{preprocessor}{#define ADD\_VIEWMODE\_ACTION( text, name, id ) \(\backslash\)}
512 \textcolor{preprocessor}{do \{ \(\backslash\)}
513 \textcolor{preprocessor}{    KAction *vm = new KAction( text, d->aViewMode->menu() ); \(\backslash\)}
514 \textcolor{preprocessor}{    vm->setCheckable( true ); \(\backslash\)}
515 \textcolor{preprocessor}{    vm->setData( qVariantFromValue( id ) ); \(\backslash\)}
516 \textcolor{preprocessor}{    d->aViewMode->addAction( vm ); \(\backslash\)}
517 \textcolor{preprocessor}{    ac->addAction( name, vm ); \(\backslash\)}
518 \textcolor{preprocessor}{    vmGroup->addAction( vm ); \(\backslash\)}
519 \textcolor{preprocessor}{\} while( 0 )}
520     ac->addAction(\textcolor{stringliteral}{"view\_render\_mode"}, d->\hyperlink{classPageViewPrivate_a89d998dea21b24010b2578c6b4f5d9d2}{aViewMode} );
521     QActionGroup *vmGroup = \textcolor{keyword}{new} QActionGroup( d->\hyperlink{classPageViewPrivate_a89d998dea21b24010b2578c6b4f5d9d2}{aViewMode}->menu() );
522     \hyperlink{pageview_8cpp_a4cec0467f9d945fd6a0027c3c339c725}{ADD\_VIEWMODE\_ACTION}( i18n( \textcolor{stringliteral}{"Single Page"} ), \textcolor{stringliteral}{"view\_render\_mode\_single"}, (\textcolor{keywordtype}{int})
      \hyperlink{classOkular_1_1Settings_1_1EnumViewMode_a33bc89b0f0c02bd5539bad916569a665a7ae89daa45516a7920bf5ee4f15c8d27}{Okular::Settings::EnumViewMode::Single} );
523     \hyperlink{pageview_8cpp_a4cec0467f9d945fd6a0027c3c339c725}{ADD\_VIEWMODE\_ACTION}( i18n( \textcolor{stringliteral}{"Facing Pages"} ), \textcolor{stringliteral}{"view\_render\_mode\_facing"}, (\textcolor{keywordtype}{int})
      \hyperlink{classOkular_1_1Settings_1_1EnumViewMode_a33bc89b0f0c02bd5539bad916569a665ad6ce5fe491499be5fc070b0364e24287}{Okular::Settings::EnumViewMode::Facing} );
524     \hyperlink{pageview_8cpp_a4cec0467f9d945fd6a0027c3c339c725}{ADD\_VIEWMODE\_ACTION}( i18n( \textcolor{stringliteral}{"Facing Pages (Center First Page)"} ), \textcolor{stringliteral}{"
      view\_render\_mode\_facing\_center\_first"}, (\textcolor{keywordtype}{int})\hyperlink{classOkular_1_1Settings_1_1EnumViewMode_a33bc89b0f0c02bd5539bad916569a665a9c6afefcdc8d9a813c22e4492a8eecfb}{Okular::Settings::EnumViewMode::FacingFirstCentered}
       );
525     \hyperlink{pageview_8cpp_a4cec0467f9d945fd6a0027c3c339c725}{ADD\_VIEWMODE\_ACTION}( i18n( \textcolor{stringliteral}{"Overview"} ), \textcolor{stringliteral}{"view\_render\_mode\_overview"}, (\textcolor{keywordtype}{int})
      \hyperlink{classOkular_1_1Settings_1_1EnumViewMode_a33bc89b0f0c02bd5539bad916569a665a6551656e4f96799c3792390290c061fb}{Okular::Settings::EnumViewMode::Summary} );
526     \textcolor{keyword}{const} \hyperlink{classQList}{QList<QAction *>} viewModeActions = d->\hyperlink{classPageViewPrivate_a89d998dea21b24010b2578c6b4f5d9d2}{aViewMode}->menu()->actions();
527     \textcolor{keywordflow}{foreach}(QAction *viewModeAction, viewModeActions)
528     \{
529         \textcolor{keywordflow}{if} (viewModeAction->data().toInt() == \hyperlink{classOkular_1_1Settings_a54872ccea98a1749bdccc6552c1aaa84}{Okular::Settings::viewMode}())
530         \{
531             viewModeAction->setChecked( \textcolor{keyword}{true} );
532         \}
533     \}
534     connect( vmGroup, SIGNAL(triggered(QAction*)), \textcolor{keyword}{this}, SLOT(slotViewMode(QAction*)) );
535 \textcolor{preprocessor}{#undef ADD\_VIEWMODE\_ACTION}
536 
537     d->\hyperlink{classPageViewPrivate_a9b68e639f07533308f37c0e1654a9c9a}{aViewContinuous}  = \textcolor{keyword}{new} KToggleAction(KIcon( \textcolor{stringliteral}{"view-list-text"} ), i18n(\textcolor{stringliteral}{"&Continuous"}), \textcolor{keyword}{
      this});
538     ac->addAction(\textcolor{stringliteral}{"view\_continuous"}, d->\hyperlink{classPageViewPrivate_a9b68e639f07533308f37c0e1654a9c9a}{aViewContinuous} );
539     connect( d->\hyperlink{classPageViewPrivate_a9b68e639f07533308f37c0e1654a9c9a}{aViewContinuous}, SIGNAL(toggled(\textcolor{keywordtype}{bool})), SLOT(slotContinuousToggled(\textcolor{keywordtype}{bool})) );
540     d->\hyperlink{classPageViewPrivate_a9b68e639f07533308f37c0e1654a9c9a}{aViewContinuous}->setChecked( 
      \hyperlink{classOkular_1_1Settings_a6f16a784dc815b9192ce24d054e3f82b}{Okular::Settings::viewContinuous}() );
541 
542     \textcolor{comment}{// Mouse mode actions for viewer mode}
543     d->\hyperlink{classPageViewPrivate_ae7b75854286f78f9b871f99bebb1eb73}{mouseModeActionGroup} = \textcolor{keyword}{new} QActionGroup( \textcolor{keyword}{this} );
544     d->\hyperlink{classPageViewPrivate_ae7b75854286f78f9b871f99bebb1eb73}{mouseModeActionGroup}->setExclusive( \textcolor{keyword}{true} );
545     d->\hyperlink{classPageViewPrivate_aad98b5d46ed82c5423f13cd1a10d0253}{aMouseNormal}  = \textcolor{keyword}{new} KAction( KIcon( \textcolor{stringliteral}{"input-mouse"} ), i18n( \textcolor{stringliteral}{"&Browse Tool"} ), \textcolor{keyword}{this} );
546     ac->addAction(\textcolor{stringliteral}{"mouse\_drag"}, d->\hyperlink{classPageViewPrivate_aad98b5d46ed82c5423f13cd1a10d0253}{aMouseNormal} );
547     connect( d->\hyperlink{classPageViewPrivate_aad98b5d46ed82c5423f13cd1a10d0253}{aMouseNormal}, SIGNAL(triggered()), \textcolor{keyword}{this}, SLOT(slotSetMouseNormal()) );
548     d->\hyperlink{classPageViewPrivate_aad98b5d46ed82c5423f13cd1a10d0253}{aMouseNormal}->setIconText( i18nc( \textcolor{stringliteral}{"Browse Tool"}, \textcolor{stringliteral}{"Browse"} ) );
549     d->\hyperlink{classPageViewPrivate_aad98b5d46ed82c5423f13cd1a10d0253}{aMouseNormal}->setCheckable( \textcolor{keyword}{true} );
550     d->\hyperlink{classPageViewPrivate_aad98b5d46ed82c5423f13cd1a10d0253}{aMouseNormal}->setShortcut( Qt::CTRL + Qt::Key\_1 );
551     d->\hyperlink{classPageViewPrivate_aad98b5d46ed82c5423f13cd1a10d0253}{aMouseNormal}->setActionGroup( d->\hyperlink{classPageViewPrivate_ae7b75854286f78f9b871f99bebb1eb73}{mouseModeActionGroup} );
552     d->\hyperlink{classPageViewPrivate_aad98b5d46ed82c5423f13cd1a10d0253}{aMouseNormal}->setChecked( \hyperlink{classOkular_1_1Settings_af8e39e25e841b413d67af2cb4dfc0688}{Okular::Settings::mouseMode}() == 
      \hyperlink{classOkular_1_1Settings_1_1EnumMouseMode_ab2ae04e2d7d069f02195ccf32c52415bae5c77f74b0cf35d7838da1baaad4e822}{Okular::Settings::EnumMouseMode::Browse} );
553 
554     KAction * mz  = \textcolor{keyword}{new} KAction(KIcon( \textcolor{stringliteral}{"page-zoom"} ), i18n(\textcolor{stringliteral}{"&Zoom Tool"}), \textcolor{keyword}{this});
555     ac->addAction(\textcolor{stringliteral}{"mouse\_zoom"}, mz );
556     connect( mz, SIGNAL(triggered()), \textcolor{keyword}{this}, SLOT(slotSetMouseZoom()) );
557     mz->setIconText( i18nc( \textcolor{stringliteral}{"Zoom Tool"}, \textcolor{stringliteral}{"Zoom"} ) );
558     mz->setCheckable( \textcolor{keyword}{true} );
559     mz->setShortcut( Qt::CTRL + Qt::Key\_2 );
560     mz->setActionGroup( d->\hyperlink{classPageViewPrivate_ae7b75854286f78f9b871f99bebb1eb73}{mouseModeActionGroup} );
561     mz->setChecked( \hyperlink{classOkular_1_1Settings_af8e39e25e841b413d67af2cb4dfc0688}{Okular::Settings::mouseMode}() == 
      \hyperlink{classOkular_1_1Settings_1_1EnumMouseMode_ab2ae04e2d7d069f02195ccf32c52415ba02b6269995c57d3fa3c40c5301591e62}{Okular::Settings::EnumMouseMode::Zoom} );
562 
563     KAction * aToggleChangeColors  = \textcolor{keyword}{new} KAction(i18n(\textcolor{stringliteral}{"&Toggle Change Colors"}), \textcolor{keyword}{this});
564     ac->addAction(\textcolor{stringliteral}{"toggle\_change\_colors"}, aToggleChangeColors );
565     connect( aToggleChangeColors, SIGNAL(triggered()), \textcolor{keyword}{this}, SLOT(slotToggleChangeColors()) );
566 \}
\end{DoxyCode}
\hypertarget{classPageView_ad874758e1b8305ad1aeab986d1d2513c}{\index{Page\+View@{Page\+View}!supports\+Capability@{supports\+Capability}}
\index{supports\+Capability@{supports\+Capability}!Page\+View@{Page\+View}}
\subsubsection[{supports\+Capability}]{\setlength{\rightskip}{0pt plus 5cm}bool Page\+View\+::supports\+Capability (
\begin{DoxyParamCaption}
\item[{{\bf View\+Capability}}]{capability}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classPageView_ad874758e1b8305ad1aeab986d1d2513c}
Query whether the view support the specified {\ttfamily capability}. 

Reimplemented from \hyperlink{classOkular_1_1View_a65d4511363fe5a1fb836a26688bea50c}{Okular\+::\+View}.



Definition at line 1371 of file pageview.\+cpp.


\begin{DoxyCode}
1372 \{
1373     \textcolor{keywordflow}{switch} ( \hyperlink{classPageView_a2a3eb80b924b29dd1498259734f81311}{capability} )
1374     \{
1375         \textcolor{keywordflow}{case} \hyperlink{classOkular_1_1View_ad95d365554715eb1eabb79350f51b294a3fa37aa9737e4a0f9753aa398c30f667}{Zoom}:
1376         \textcolor{keywordflow}{case} \hyperlink{classOkular_1_1View_ad95d365554715eb1eabb79350f51b294a2621c21053805b1e2f71fdeb069f9c35}{ZoomModality}:
1377             \textcolor{keywordflow}{return} \textcolor{keyword}{true};
1378     \}
1379     \textcolor{keywordflow}{return} \textcolor{keyword}{false};
1380 \}
\end{DoxyCode}
\hypertarget{classPageView_aa714f5bd13c642ca4429453298c15681}{\index{Page\+View@{Page\+View}!tablet\+Event@{tablet\+Event}}
\index{tablet\+Event@{tablet\+Event}!Page\+View@{Page\+View}}
\subsubsection[{tablet\+Event}]{\setlength{\rightskip}{0pt plus 5cm}void Page\+View\+::tablet\+Event (
\begin{DoxyParamCaption}
\item[{Q\+Tablet\+Event $\ast$}]{e}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{classPageView_aa714f5bd13c642ca4429453298c15681}


Definition at line 1830 of file pageview.\+cpp.


\begin{DoxyCode}
1831 \{
1832     \textcolor{comment}{// Ignore tablet events that we don't care about}
1833     \textcolor{keywordflow}{if} ( !( e->type() == QEvent::TabletPress ||
1834             e->type() == QEvent::TabletRelease ||
1835             e->type() == QEvent::TabletMove ) )
1836     \{
1837         e->ignore();
1838         \textcolor{keywordflow}{return};
1839     \}
1840 
1841     \textcolor{comment}{// Determine pen state}
1842     \textcolor{keywordtype}{bool} penReleased = \textcolor{keyword}{false};
1843     \textcolor{keywordflow}{if} ( e->type() == QEvent::TabletPress )
1844     \{
1845         d->\hyperlink{classPageViewPrivate_ae7a7857d6dac44fa07cb314a6f239df1}{penDown} = \textcolor{keyword}{true};
1846     \}
1847     \textcolor{keywordflow}{if} ( e->type() == QEvent::TabletRelease )
1848     \{
1849         d->\hyperlink{classPageViewPrivate_ae7a7857d6dac44fa07cb314a6f239df1}{penDown} = \textcolor{keyword}{false};
1850         penReleased = \textcolor{keyword}{true};
1851     \}
1852 
1853     \textcolor{comment}{// If we're editing an annotation and the tablet pen is either down or just released}
1854     \textcolor{comment}{// then dispatch event to annotator}
1855     \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_a07bad73b61f6b400411aacc7e2e820a0}{annotator} && d->\hyperlink{classPageViewPrivate_a07bad73b61f6b400411aacc7e2e820a0}{annotator}->\hyperlink{classPageViewAnnotator_ae7fcfee911a4eb7811865863d852ffac}{active}() && ( d->
      \hyperlink{classPageViewPrivate_ae7a7857d6dac44fa07cb314a6f239df1}{penDown} || penReleased ) )
1856     \{
1857         \textcolor{keyword}{const} QPoint eventPos = \hyperlink{classPageView_a7f432d3d6d05c69b568ad66a9c232cd7}{contentAreaPoint}( e->pos() );
1858         \hyperlink{classPageViewItem}{PageViewItem} * pageItem = pickItemOnPoint( eventPos.x(), eventPos.y() );
1859         \textcolor{keyword}{const} QPoint localOriginInGlobal = mapToGlobal( QPoint(0,0) );
1860 
1861         \textcolor{comment}{// routeTabletEvent will accept or ignore event as appropriate}
1862         d->\hyperlink{classPageViewPrivate_a07bad73b61f6b400411aacc7e2e820a0}{annotator}->\hyperlink{classPageViewAnnotator_a5b8f1d3ac283209cd76838b199adee5d}{routeTabletEvent}( e, pageItem, localOriginInGlobal );
1863     \} \textcolor{keywordflow}{else} \{
1864         e->ignore();
1865     \}
1866 \}
\end{DoxyCode}
\hypertarget{classPageView_ace30a37c79e7cd9b523a6cd4fd74f5ae}{\index{Page\+View@{Page\+View}!text\+Selection\+For\+Item@{text\+Selection\+For\+Item}}
\index{text\+Selection\+For\+Item@{text\+Selection\+For\+Item}!Page\+View@{Page\+View}}
\subsubsection[{text\+Selection\+For\+Item}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Okular\+::\+Regular\+Area\+Rect} $\ast$ Page\+View\+::text\+Selection\+For\+Item (
\begin{DoxyParamCaption}
\item[{{\bf Page\+View\+Item} $\ast$}]{item, }
\item[{const Q\+Point \&}]{start\+Point = {\ttfamily QPoint()}, }
\item[{const Q\+Point \&}]{end\+Point = {\ttfamily QPoint()}}
\end{DoxyParamCaption}
)}}\label{classPageView_ace30a37c79e7cd9b523a6cd4fd74f5ae}


Definition at line 3590 of file pageview.\+cpp.


\begin{DoxyCode}
3591 \{
3592     \textcolor{keyword}{const} QRect & geometry = item->\hyperlink{classPageViewItem_a5d2e73a003f65b4e95c0c21b1698f835}{uncroppedGeometry}();
3593     \hyperlink{classOkular_1_1NormalizedPoint}{Okular::NormalizedPoint} startCursor( 0.0, 0.0 );
3594     \textcolor{keywordflow}{if} ( !startPoint.isNull() )
3595     \{
3596         startCursor = rotateInNormRect( startPoint, geometry, item->\hyperlink{classPageViewItem_a5c512d95e5563e8d19d1fb3d93dafc31}{page}()->
      \hyperlink{classOkular_1_1Page_a731947e32744bdcda791d22a2dc88726}{rotation}() );
3597     \}
3598     \hyperlink{classOkular_1_1NormalizedPoint}{Okular::NormalizedPoint} endCursor( 1.0, 1.0 );
3599     \textcolor{keywordflow}{if} ( !endPoint.isNull() )
3600     \{
3601         endCursor = rotateInNormRect( endPoint, geometry, item->\hyperlink{classPageViewItem_a5c512d95e5563e8d19d1fb3d93dafc31}{page}()->
      \hyperlink{classOkular_1_1Page_a731947e32744bdcda791d22a2dc88726}{rotation}() );
3602     \}
3603     \hyperlink{classOkular_1_1TextSelection}{Okular::TextSelection} mouseTextSelectionInfo( startCursor, endCursor );
3604 
3605     \textcolor{keyword}{const} \hyperlink{classOkular_1_1Page}{Okular::Page} * okularPage = item->\hyperlink{classPageViewItem_a5c512d95e5563e8d19d1fb3d93dafc31}{page}();
3606 
3607     \textcolor{keywordflow}{if} ( !okularPage->\hyperlink{classOkular_1_1Page_a44163bc0e76204a9d9c42da442ee734a}{hasTextPage}() )
3608         d->\hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}->\hyperlink{classOkular_1_1Document_ad4909d8411d3ad8faf716f30a6e9f417}{requestTextPage}( okularPage->\hyperlink{classOkular_1_1Page_a6eee5f157a130b47d81ddd63e501664b}{number}() );
3609 
3610     \hyperlink{classOkular_1_1RegularAreaRect}{Okular::RegularAreaRect} * selectionArea = okularPage->
      \hyperlink{classOkular_1_1Page_a117cec50481eeea1e1ca9881eaeceb9e}{textArea}( &mouseTextSelectionInfo );
3611 \textcolor{preprocessor}{#ifdef PAGEVIEW\_DEBUG}
3612     kDebug().nospace() << \textcolor{stringliteral}{"text areas ("} << okularPage->\hyperlink{classOkular_1_1Page_a6eee5f157a130b47d81ddd63e501664b}{number}() << \textcolor{stringliteral}{"): "} << ( selectionArea ? 
      QString::number( selectionArea->count() ) : \textcolor{stringliteral}{"(none)"} );
3613 \textcolor{preprocessor}{#endif}
3614     \textcolor{keywordflow}{return} selectionArea;
3615 \}
\end{DoxyCode}
\hypertarget{classPageView_a741402cbb905eb81f49f7842a38ab3dc}{\index{Page\+View@{Page\+View}!text\+Selections@{text\+Selections}}
\index{text\+Selections@{text\+Selections}!Page\+View@{Page\+View}}
\subsubsection[{text\+Selections}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Q\+List}$<$ {\bf Okular\+::\+Regular\+Area\+Rect} $\ast$ $>$ Page\+View\+::text\+Selections (
\begin{DoxyParamCaption}
\item[{const Q\+Point \&}]{start, }
\item[{const Q\+Point \&}]{end, }
\item[{int \&}]{firstpage}
\end{DoxyParamCaption}
)}}\label{classPageView_a741402cbb905eb81f49f7842a38ab3dc}


Definition at line 3194 of file pageview.\+cpp.


\begin{DoxyCode}
3195 \{
3196     firstpage = -1;
3197     \hyperlink{classQList}{QList< Okular::RegularAreaRect * >} ret;
3198     QSet< int > affectedItemsSet;
3199     QRect selectionRect = QRect( start, end ).normalized();
3200     \textcolor{keywordflow}{foreach}( \hyperlink{classPageViewItem}{PageViewItem} * item, d->\hyperlink{classPageViewPrivate_ad90c795dead9abfaa5818a94e00435bc}{items} )
3201     \{
3202         \textcolor{keywordflow}{if} ( item->\hyperlink{classPageViewItem_ae7a4dfa618d0cb56e01075842c67bf9f}{isVisible}() && selectionRect.intersects( item->
      \hyperlink{classPageViewItem_aa2c3e988ccbe9ee162b73d7f89ab0d02}{croppedGeometry}() ) )
3203             affectedItemsSet.insert( item->\hyperlink{classPageViewItem_ad75aab4c1ffd842bd5d54c0cfe84d1bf}{pageNumber}() );
3204     \}
3205 \textcolor{preprocessor}{#ifdef PAGEVIEW\_DEBUG}
3206     kDebug() << \textcolor{stringliteral}{">>>> item selected by mouse:"} << affectedItemsSet.count();
3207 \textcolor{preprocessor}{#endif}
3208 
3209     \textcolor{keywordflow}{if} ( !affectedItemsSet.isEmpty() )
3210     \{
3211         \textcolor{comment}{// is the mouse drag line the ne-sw diagonal of the selection rect?}
3212         \textcolor{keywordtype}{bool} direction\_ne\_sw = start == selectionRect.topRight() || start == selectionRect.bottomLeft();
3213 
3214         \textcolor{keywordtype}{int} tmpmin = d->\hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}->\hyperlink{classOkular_1_1Document_aaf5d986758e25127946986abaa401bcd}{pages}();
3215         \textcolor{keywordtype}{int} tmpmax = 0;
3216         \textcolor{keywordflow}{foreach}( \textcolor{keywordtype}{int} p, affectedItemsSet )
3217         \{
3218             \textcolor{keywordflow}{if} ( p < tmpmin ) tmpmin = p;
3219             \textcolor{keywordflow}{if} ( p > tmpmax ) tmpmax = p;
3220         \}
3221 
3222         \hyperlink{classPageViewItem}{PageViewItem} * a = pickItemOnPoint( (\textcolor{keywordtype}{int})( direction\_ne\_sw ? selectionRect.right() : 
      selectionRect.left() ), (\textcolor{keywordtype}{int})selectionRect.top() );
3223         \textcolor{keywordtype}{int} min = a && ( a->pageNumber() != tmpmax ) ? a->pageNumber() : tmpmin;
3224         \hyperlink{classPageViewItem}{PageViewItem} * b = pickItemOnPoint( (\textcolor{keywordtype}{int})( direction\_ne\_sw ? selectionRect.left() : 
      selectionRect.right() ), (\textcolor{keywordtype}{int})selectionRect.bottom() );
3225         \textcolor{keywordtype}{int} max = b && ( b->pageNumber() != tmpmin ) ? b->pageNumber() : tmpmax;
3226 
3227         \hyperlink{classQList}{QList}< \textcolor{keywordtype}{int} > affectedItemsIds;
3228         for ( \textcolor{keywordtype}{int} i = min; i <= max; ++i )
3229             affectedItemsIds.\hyperlink{generator__pdf_8cpp_af89a069d971b564171ae5c9bc238c420}{append}( i );
3230 \textcolor{preprocessor}{#ifdef PAGEVIEW\_DEBUG}
3231         kDebug() << \textcolor{stringliteral}{">>>> pages:"} << affectedItemsIds;
3232 \textcolor{preprocessor}{#endif}
3233         firstpage = affectedItemsIds.first();
3234 
3235         \textcolor{keywordflow}{if} ( affectedItemsIds.count() == 1 )
3236         \{
3237             \hyperlink{classPageViewItem}{PageViewItem} * item = d->\hyperlink{classPageViewPrivate_ad90c795dead9abfaa5818a94e00435bc}{items}[ affectedItemsIds.first() ];
3238             selectionRect.translate( -item->\hyperlink{classPageViewItem_a5d2e73a003f65b4e95c0c21b1698f835}{uncroppedGeometry}().topLeft() );
3239             ret.append( \hyperlink{classPageView_ace30a37c79e7cd9b523a6cd4fd74f5ae}{textSelectionForItem}( item,
3240                 direction\_ne\_sw ? selectionRect.topRight() : selectionRect.topLeft(),
3241                 direction\_ne\_sw ? selectionRect.bottomLeft() : selectionRect.bottomRight() ) );
3242         \}
3243         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( affectedItemsIds.count() > 1 )
3244         \{
3245             \textcolor{comment}{// first item}
3246             \hyperlink{classPageViewItem}{PageViewItem} * first = d->\hyperlink{classPageViewPrivate_ad90c795dead9abfaa5818a94e00435bc}{items}[ affectedItemsIds.first() ];
3247             QRect geom = first->\hyperlink{classPageViewItem_aa2c3e988ccbe9ee162b73d7f89ab0d02}{croppedGeometry}().intersect( selectionRect ).translated( -
      first->\hyperlink{classPageViewItem_a5d2e73a003f65b4e95c0c21b1698f835}{uncroppedGeometry}().topLeft() );
3248             ret.append( \hyperlink{classPageView_ace30a37c79e7cd9b523a6cd4fd74f5ae}{textSelectionForItem}( first,
3249                 selectionRect.bottom() > geom.height() ? ( direction\_ne\_sw ? geom.topRight() : geom.topLeft
      () ) : ( direction\_ne\_sw ? geom.bottomRight() : geom.bottomLeft() ),
3250                 QPoint() ) );
3251             \textcolor{comment}{// last item}
3252             \hyperlink{classPageViewItem}{PageViewItem} * last = d->\hyperlink{classPageViewPrivate_ad90c795dead9abfaa5818a94e00435bc}{items}[ affectedItemsIds.last() ];
3253             geom = last->\hyperlink{classPageViewItem_aa2c3e988ccbe9ee162b73d7f89ab0d02}{croppedGeometry}().intersect( selectionRect ).translated( -last->
      \hyperlink{classPageViewItem_a5d2e73a003f65b4e95c0c21b1698f835}{uncroppedGeometry}().topLeft() );
3254             \textcolor{comment}{// the last item needs to appended at last...}
3255             \hyperlink{classOkular_1_1RegularAreaRect}{Okular::RegularAreaRect} * lastArea = 
      \hyperlink{classPageView_ace30a37c79e7cd9b523a6cd4fd74f5ae}{textSelectionForItem}( last,
3256                 QPoint(),
3257                 selectionRect.bottom() > geom.height() ? ( direction\_ne\_sw ? geom.bottomLeft() : geom.
      bottomRight() ) : ( direction\_ne\_sw ? geom.topLeft() : geom.topRight() ) );
3258             affectedItemsIds.removeFirst();
3259             affectedItemsIds.removeLast();
3260             \textcolor{comment}{// item between the two above}
3261             \textcolor{keywordflow}{foreach}( \textcolor{keywordtype}{int} page, affectedItemsIds )
3262             \{
3263                 ret.append( \hyperlink{classPageView_ace30a37c79e7cd9b523a6cd4fd74f5ae}{textSelectionForItem}( d->\hyperlink{classPageViewPrivate_ad90c795dead9abfaa5818a94e00435bc}{items}[ page ] ) );
3264             \}
3265             ret.append( lastArea );
3266         \}
3267     \}
3268     \textcolor{keywordflow}{return} ret;
3269 \}
\end{DoxyCode}
\hypertarget{classPageView_a081dfad8c188c934c0c72d953fcca6a0}{\index{Page\+View@{Page\+View}!toggle\+Forms\+Action@{toggle\+Forms\+Action}}
\index{toggle\+Forms\+Action@{toggle\+Forms\+Action}!Page\+View@{Page\+View}}
\subsubsection[{toggle\+Forms\+Action}]{\setlength{\rightskip}{0pt plus 5cm}K\+Action $\ast$ Page\+View\+::toggle\+Forms\+Action (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const}}\label{classPageView_a081dfad8c188c934c0c72d953fcca6a0}


Definition at line 813 of file pageview.\+cpp.


\begin{DoxyCode}
814 \{
815     \textcolor{keywordflow}{return} d->\hyperlink{classPageViewPrivate_af0990514eb2a448c1400a4cecc0ca6bb}{aToggleForms};
816 \}
\end{DoxyCode}
\hypertarget{classPageView_a3676a4a9b53502c4b6af945f28cd5179}{\index{Page\+View@{Page\+View}!update\+Action\+State@{update\+Action\+State}}
\index{update\+Action\+State@{update\+Action\+State}!Page\+View@{Page\+View}}
\subsubsection[{update\+Action\+State}]{\setlength{\rightskip}{0pt plus 5cm}void Page\+View\+::update\+Action\+State (
\begin{DoxyParamCaption}
\item[{bool}]{doc\+Has\+Pages, }
\item[{bool}]{doc\+Changed, }
\item[{bool}]{doc\+Has\+Form\+Widgets}
\end{DoxyParamCaption}
)}}\label{classPageView_a3676a4a9b53502c4b6af945f28cd5179}


Definition at line 1014 of file pageview.\+cpp.


\begin{DoxyCode}
1015 \{
1016     \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_a5f864847956ada5d8933fe2d28bbc075}{aPageSizes} )
1017     \{ \textcolor{comment}{// may be null if dummy mode is on}
1018         \textcolor{keywordtype}{bool} pageSizes = d->\hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}->\hyperlink{classOkular_1_1Document_abda5404bb65d7bc671494e589dec3aaf}{supportsPageSizes}();
1019         d->\hyperlink{classPageViewPrivate_a5f864847956ada5d8933fe2d28bbc075}{aPageSizes}->setEnabled( pageSizes );
1020         \textcolor{comment}{// set the new page sizes:}
1021         \textcolor{comment}{// - if the generator supports them}
1022         \textcolor{comment}{// - if the document changed}
1023         \textcolor{keywordflow}{if} ( pageSizes && documentChanged )
1024         \{
1025             QStringList items;
1026             \textcolor{keywordflow}{foreach} ( \textcolor{keyword}{const} \hyperlink{classOkular_1_1PageSize}{Okular::PageSize} &p, d->\hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}->
      \hyperlink{classOkular_1_1Document_ab27493b7a9aafe7e9bf7fe2d8e291703}{pageSizes}() )
1027                 items.append( p.\hyperlink{classOkular_1_1PageSize_a2083857cd82db104198342e4897862e4}{name}() );
1028             d->\hyperlink{classPageViewPrivate_a5f864847956ada5d8933fe2d28bbc075}{aPageSizes}->setItems( items );
1029         \}
1030     \}
1031 
1032     \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_a0ef5e6fe307660bd3fbe6bd999b895a7}{aTrimMargins} )
1033         d->\hyperlink{classPageViewPrivate_a0ef5e6fe307660bd3fbe6bd999b895a7}{aTrimMargins}->setEnabled( haspages );
1034 
1035     \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_a4f801cbeb2d2c5bb5cccd84f373aeec9}{aRightToLeft} )
1036         d->\hyperlink{classPageViewPrivate_a4f801cbeb2d2c5bb5cccd84f373aeec9}{aRightToLeft}->setEnabled( haspages );
1037 
1038     \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_a89d998dea21b24010b2578c6b4f5d9d2}{aViewMode} )
1039         d->\hyperlink{classPageViewPrivate_a89d998dea21b24010b2578c6b4f5d9d2}{aViewMode}->setEnabled( haspages );
1040 
1041     \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_a9b68e639f07533308f37c0e1654a9c9a}{aViewContinuous} )
1042         d->\hyperlink{classPageViewPrivate_a9b68e639f07533308f37c0e1654a9c9a}{aViewContinuous}->setEnabled( haspages );
1043 
1044     \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_a251dae24330598db9ee9b7eb6015be3b}{aZoomFitWidth} )
1045         d->\hyperlink{classPageViewPrivate_a251dae24330598db9ee9b7eb6015be3b}{aZoomFitWidth}->setEnabled( haspages );
1046     \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_a821a7981295e5366b2f3d489b501ae37}{aZoomFitPage} )
1047         d->\hyperlink{classPageViewPrivate_a821a7981295e5366b2f3d489b501ae37}{aZoomFitPage}->setEnabled( haspages );
1048     \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_ad119458f9f75be63ae18c65e86ded044}{aZoomAutoFit} )
1049         d->\hyperlink{classPageViewPrivate_ad119458f9f75be63ae18c65e86ded044}{aZoomAutoFit}->setEnabled( haspages );
1050 
1051     \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_a04f88453f9b09f91cce05b4b6647f2ad}{aZoom} )
1052     \{
1053         d->\hyperlink{classPageViewPrivate_a04f88453f9b09f91cce05b4b6647f2ad}{aZoom}->selectableActionGroup()->setEnabled( haspages );
1054         d->\hyperlink{classPageViewPrivate_a04f88453f9b09f91cce05b4b6647f2ad}{aZoom}->setEnabled( haspages );
1055     \}
1056     \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_a07171f9e585da785aba41e84bf6014fb}{aZoomIn} )
1057         d->\hyperlink{classPageViewPrivate_a07171f9e585da785aba41e84bf6014fb}{aZoomIn}->setEnabled( haspages );
1058     \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_a193ef99e27c1d7c1b1741e33ada152ec}{aZoomOut} )
1059         d->\hyperlink{classPageViewPrivate_a193ef99e27c1d7c1b1741e33ada152ec}{aZoomOut}->setEnabled( haspages );
1060 
1061     \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_ae7b75854286f78f9b871f99bebb1eb73}{mouseModeActionGroup} )
1062         d->\hyperlink{classPageViewPrivate_ae7b75854286f78f9b871f99bebb1eb73}{mouseModeActionGroup}->setEnabled( haspages );
1063 
1064     \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_a389103a18e7590c8ec75c26e23806e51}{aRotateClockwise} )
1065         d->\hyperlink{classPageViewPrivate_a389103a18e7590c8ec75c26e23806e51}{aRotateClockwise}->setEnabled( haspages );
1066     \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_a4a8b7b626080698fa1dbf78d60cbff59}{aRotateCounterClockwise} )
1067         d->\hyperlink{classPageViewPrivate_a4a8b7b626080698fa1dbf78d60cbff59}{aRotateCounterClockwise}->setEnabled( haspages );
1068     \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_ae57bd1f37889d8a28535e877c2fa87ed}{aRotateOriginal} )
1069         d->\hyperlink{classPageViewPrivate_ae57bd1f37889d8a28535e877c2fa87ed}{aRotateOriginal}->setEnabled( haspages );
1070     \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_af0990514eb2a448c1400a4cecc0ca6bb}{aToggleForms} )
1071     \{ \textcolor{comment}{// may be null if dummy mode is on}
1072         d->\hyperlink{classPageViewPrivate_af0990514eb2a448c1400a4cecc0ca6bb}{aToggleForms}->setEnabled( haspages && hasformwidgets );
1073     \}
1074     \textcolor{keywordtype}{bool} allowAnnotations = d->\hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}->\hyperlink{classOkular_1_1Document_a6dd7a475b14222c07d1c410311f35cdb}{isAllowed}( 
      \hyperlink{namespaceOkular_a3601f4e702453ddf1125476dd6e7577ba6c10962833bd58ea0f8d63e448eba8e9}{Okular::AllowNotes} );
1075     \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_a07bad73b61f6b400411aacc7e2e820a0}{annotator} )
1076     \{
1077         \textcolor{keywordtype}{bool} allowTools = haspages && allowAnnotations;
1078         d->\hyperlink{classPageViewPrivate_a07bad73b61f6b400411aacc7e2e820a0}{annotator}->\hyperlink{classPageViewAnnotator_a4cd15f84582b36f2c194530f3a123b69}{setToolsEnabled}( allowTools );
1079         d->\hyperlink{classPageViewPrivate_a07bad73b61f6b400411aacc7e2e820a0}{annotator}->\hyperlink{classPageViewAnnotator_ad4319944b2ac21b5d93895a9cb691553}{setTextToolsEnabled}( allowTools && d->
      \hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}->\hyperlink{classOkular_1_1Document_acadcf633db6332012dbbd1914fddd0c9}{supportsSearching}() );
1080     \}
1081     \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_a29f1ef25d86a534e1605ae5e662233b8}{aToggleAnnotator} )
1082     \{
1083         \textcolor{keywordflow}{if} ( !allowAnnotations && d->\hyperlink{classPageViewPrivate_a29f1ef25d86a534e1605ae5e662233b8}{aToggleAnnotator}->isChecked() )
1084         \{
1085             d->\hyperlink{classPageViewPrivate_a29f1ef25d86a534e1605ae5e662233b8}{aToggleAnnotator}->trigger();
1086         \}
1087         d->\hyperlink{classPageViewPrivate_a29f1ef25d86a534e1605ae5e662233b8}{aToggleAnnotator}->setEnabled( allowAnnotations );
1088     \}
1089     \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_ae017762cbf8b93ab294f647563d6ccf0}{aSpeakDoc} )
1090     \{
1091         \textcolor{keyword}{const} \textcolor{keywordtype}{bool} enablettsactions = haspages ? \hyperlink{classOkular_1_1Settings_a165dd0c56407e353bda8a773fa1ad485}{Okular::Settings::useKTTSD}() : 
      false;
1092         d->\hyperlink{classPageViewPrivate_ae017762cbf8b93ab294f647563d6ccf0}{aSpeakDoc}->setEnabled( enablettsactions );
1093         d->\hyperlink{classPageViewPrivate_abcf8673f8ee893b554984b46cc1b30d8}{aSpeakPage}->setEnabled( enablettsactions );
1094     \}
1095     \textcolor{keywordflow}{if} (d->\hyperlink{classPageViewPrivate_a48a8cc9cf9c4aa483c79c8f81fc62ea7}{aMouseMagnifier})
1096         d->\hyperlink{classPageViewPrivate_a48a8cc9cf9c4aa483c79c8f81fc62ea7}{aMouseMagnifier}->setEnabled(d->\hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}->
      \hyperlink{classOkular_1_1Document_a195dd7b2d52ecaf17541a437d5f9e579}{supportsTiles}());
1097 \}
\end{DoxyCode}
\hypertarget{classPageView_a0054ba6d2967fa31dea42dcc9d9020b6}{\index{Page\+View@{Page\+View}!update\+Cursor@{update\+Cursor}}
\index{update\+Cursor@{update\+Cursor}!Page\+View@{Page\+View}}
\subsubsection[{update\+Cursor}]{\setlength{\rightskip}{0pt plus 5cm}void Page\+View\+::update\+Cursor (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classPageView_a0054ba6d2967fa31dea42dcc9d9020b6}


Definition at line 3774 of file pageview.\+cpp.


\begin{DoxyCode}
3775 \{
3776     \textcolor{keyword}{const} QPoint p = \hyperlink{classPageView_a055aaf87367b9ad0dcfcdc3d2f5ff619}{contentAreaPosition}() + viewport()->mapFromGlobal( QCursor::pos() )
      ;
3777     \hyperlink{classPageView_a0054ba6d2967fa31dea42dcc9d9020b6}{updateCursor}( p );
3778 \}
\end{DoxyCode}
\hypertarget{classPageView_a017a53158a7094db93d11a009bc56891}{\index{Page\+View@{Page\+View}!url\+Dropped@{url\+Dropped}}
\index{url\+Dropped@{url\+Dropped}!Page\+View@{Page\+View}}
\subsubsection[{url\+Dropped}]{\setlength{\rightskip}{0pt plus 5cm}void Page\+View\+::url\+Dropped (
\begin{DoxyParamCaption}
\item[{const K\+Url \&}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [signal]}}}\label{classPageView_a017a53158a7094db93d11a009bc56891}
\hypertarget{classPageView_a7d0b1b783db9b550d2b5bafe88ef5bb6}{\index{Page\+View@{Page\+View}!viewport\+Event@{viewport\+Event}}
\index{viewport\+Event@{viewport\+Event}!Page\+View@{Page\+View}}
\subsubsection[{viewport\+Event}]{\setlength{\rightskip}{0pt plus 5cm}bool Page\+View\+::viewport\+Event (
\begin{DoxyParamCaption}
\item[{Q\+Event $\ast$}]{e}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{classPageView_a7d0b1b783db9b550d2b5bafe88ef5bb6}


Definition at line 3131 of file pageview.\+cpp.


\begin{DoxyCode}
3132 \{
3133     \textcolor{keywordflow}{if} ( e->type() == QEvent::ToolTip && \hyperlink{classOkular_1_1Settings_af8e39e25e841b413d67af2cb4dfc0688}{Okular::Settings::mouseMode}() == 
      \hyperlink{classOkular_1_1Settings_1_1EnumMouseMode_ab2ae04e2d7d069f02195ccf32c52415bae5c77f74b0cf35d7838da1baaad4e822}{Okular::Settings::EnumMouseMode::Browse} )
3134     \{
3135         QHelpEvent * he = \textcolor{keyword}{static\_cast<} QHelpEvent* \textcolor{keyword}{>}( e );
3136         \textcolor{keyword}{const} QPoint eventPos = \hyperlink{classPageView_a7f432d3d6d05c69b568ad66a9c232cd7}{contentAreaPoint}( he->pos() );
3137         \hyperlink{classPageViewItem}{PageViewItem} * pageItem = pickItemOnPoint( eventPos.x(), eventPos.y() );
3138         \textcolor{keyword}{const} \hyperlink{classOkular_1_1ObjectRect}{Okular::ObjectRect} * rect = 0;
3139         \textcolor{keyword}{const} \hyperlink{classOkular_1_1Action}{Okular::Action} * link = 0;
3140         \textcolor{keyword}{const} \hyperlink{classOkular_1_1Annotation}{Okular::Annotation} * ann = 0;
3141         \textcolor{keywordflow}{if} ( pageItem )
3142         \{
3143             \textcolor{keywordtype}{double} nX = pageItem->absToPageX( eventPos.x() );
3144             \textcolor{keywordtype}{double} nY = pageItem->absToPageY( eventPos.y() );
3145             rect = pageItem->page()->objectRect( \hyperlink{classOkular_1_1ObjectRect_a2f77f7653306bae90bfb68277aaafe16a7fa3680e4804e223e58ce2dea398345f}{Okular::ObjectRect::OAnnotation}
      , nX, nY, pageItem->uncroppedWidth(), pageItem->uncroppedHeight() );
3146             \textcolor{keywordflow}{if} ( rect )
3147                 ann = \textcolor{keyword}{static\_cast<} \textcolor{keyword}{const }\hyperlink{classOkular_1_1AnnotationObjectRect}{Okular::AnnotationObjectRect} * \textcolor{keyword}{>}( rect
       )->annotation();
3148             \textcolor{keywordflow}{else}
3149             \{
3150                 rect = pageItem->page()->objectRect( \hyperlink{classOkular_1_1ObjectRect_a2f77f7653306bae90bfb68277aaafe16a2ad02138861dfdc8bc2a0c29bae5bed2}{Okular::ObjectRect::Action}, 
      nX, nY, pageItem->uncroppedWidth(), pageItem->uncroppedHeight() );
3151                 \textcolor{keywordflow}{if} ( rect )
3152                     link = \textcolor{keyword}{static\_cast<} \textcolor{keyword}{const }\hyperlink{classOkular_1_1Action}{Okular::Action} * \textcolor{keyword}{>}( rect->object() );
3153             \}
3154         \}
3155 
3156         \textcolor{keywordflow}{if} ( ann && ann->\hyperlink{classOkular_1_1Annotation_af9833449767eacd740f377e69a1fdd48}{subType}() != \hyperlink{classOkular_1_1Annotation_af71b46e37d5f850b97d5c4de3be9aac0aa0f6a560b971fe69d18156176258d6c8}{Okular::Annotation::AWidget} )
3157         \{
3158             QRect r = rect->boundingRect( pageItem->uncroppedWidth(), pageItem->uncroppedHeight() );
3159             r.translate( pageItem->uncroppedGeometry().topLeft() );
3160             r.translate( -\hyperlink{classPageView_a055aaf87367b9ad0dcfcdc3d2f5ff619}{contentAreaPosition}() );
3161             QString tip = \hyperlink{namespaceGuiUtils_a4277357b6408ce44cf183cd7765bcc72}{GuiUtils::prettyToolTip}( ann );
3162             QToolTip::showText( he->globalPos(), tip, viewport(), r );
3163         \}
3164         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( link )
3165         \{
3166             QRect r = rect->boundingRect( pageItem->uncroppedWidth(), pageItem->uncroppedHeight() );
3167             r.translate( pageItem->uncroppedGeometry().topLeft() );
3168             r.translate( -\hyperlink{classPageView_a055aaf87367b9ad0dcfcdc3d2f5ff619}{contentAreaPosition}() );
3169             QString tip = link->\hyperlink{classOkular_1_1Action_a359c33818281df712da697c84975952f}{actionTip}();
3170             \textcolor{keywordflow}{if} ( !tip.isEmpty() )
3171                 QToolTip::showText( he->globalPos(), tip, viewport(), r );
3172         \}
3173         e->accept();
3174         \textcolor{keywordflow}{return} \textcolor{keyword}{true};
3175     \}
3176     \textcolor{keywordflow}{else}
3177         \textcolor{comment}{// do not stop the event}
3178         \textcolor{keywordflow}{return} QAbstractScrollArea::viewportEvent( e );
3179 \}
\end{DoxyCode}
\hypertarget{classPageView_ae42b8ce77b65e819119d678b8e8a3aac}{\index{Page\+View@{Page\+View}!warning\+Message@{warning\+Message}}
\index{warning\+Message@{warning\+Message}!Page\+View@{Page\+View}}
\subsubsection[{warning\+Message}]{\setlength{\rightskip}{0pt plus 5cm}void Page\+View\+::warning\+Message (
\begin{DoxyParamCaption}
\item[{const Q\+String \&}]{message, }
\item[{int}]{duration = {\ttfamily -\/1}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [slot]}}}\label{classPageView_ae42b8ce77b65e819119d678b8e8a3aac}


Definition at line 128 of file pageview.\+h.


\begin{DoxyCode}
129         \{
130             \hyperlink{classPageView_ab9e13eff3e9a67c96985f9f138d35bb1}{displayMessage}( message, QString(), 
      \hyperlink{classPageViewMessage_aeb83801b92379715663d5a7beaa2ae0ca8d795d55732497f572dde8b9491ce280}{PageViewMessage::Warning}, duration );
131         \}
\end{DoxyCode}
\hypertarget{classPageView_a680c6fbb0ccf6f6d92377792e6dfd879}{\index{Page\+View@{Page\+View}!wheel\+Event@{wheel\+Event}}
\index{wheel\+Event@{wheel\+Event}!Page\+View@{Page\+View}}
\subsubsection[{wheel\+Event}]{\setlength{\rightskip}{0pt plus 5cm}void Page\+View\+::wheel\+Event (
\begin{DoxyParamCaption}
\item[{Q\+Wheel\+Event $\ast$}]{e}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{classPageView_a680c6fbb0ccf6f6d92377792e6dfd879}


Definition at line 3054 of file pageview.\+cpp.


\begin{DoxyCode}
3055 \{
3056     \textcolor{comment}{// don't perform any mouse action when viewport is autoscrolling}
3057     \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_acc47dfc95cad4f126c4dbd3e8f31e43b}{viewportMoveActive} )
3058         \textcolor{keywordflow}{return};
3059 
3060     \textcolor{keywordflow}{if} ( !d->\hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}->\hyperlink{classOkular_1_1Document_a909ad69d556a6525e194a28c7fbf643a}{isOpened}() )
3061     \{
3062         QAbstractScrollArea::wheelEvent( e );
3063         \textcolor{keywordflow}{return};
3064     \}
3065 
3066     \textcolor{keywordtype}{int} delta = e->delta(),
3067         vScroll = verticalScrollBar()->value();
3068     e->accept();
3069     \textcolor{keywordflow}{if} ( (e->modifiers() & Qt::ControlModifier) == Qt::ControlModifier ) \{
3070         \textcolor{keywordflow}{if} ( e->delta() < 0 )
3071             slotZoomOut();
3072         \textcolor{keywordflow}{else}
3073             slotZoomIn();
3074     \}
3075     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( delta <= -120 && !\hyperlink{classOkular_1_1Settings_a6f16a784dc815b9192ce24d054e3f82b}{Okular::Settings::viewContinuous}() && 
      vScroll == verticalScrollBar()->maximum() )
3076     \{
3077         \textcolor{comment}{// go to next page}
3078         \textcolor{keywordflow}{if} ( (\textcolor{keywordtype}{int})d->\hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}->\hyperlink{classOkular_1_1Document_a42ec374d73794bf56d7e7b11f1f56319}{currentPage}() < d->\hyperlink{classPageViewPrivate_ad90c795dead9abfaa5818a94e00435bc}{items}.count() - 1 )
3079         \{
3080             \textcolor{comment}{// more optimized than document->setNextPage and then move view to top}
3081             \hyperlink{classOkular_1_1DocumentViewport}{Okular::DocumentViewport} newViewport = d->
      \hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}->\hyperlink{classOkular_1_1Document_abb8738de0a53aa4a9f552de0e1e749f8}{viewport}();
3082             newViewport.\hyperlink{classOkular_1_1DocumentViewport_a122674d4a493e79b1aa5fd5c00e81c93}{pageNumber} += viewColumns();
3083             \textcolor{keywordflow}{if} ( newViewport.\hyperlink{classOkular_1_1DocumentViewport_a122674d4a493e79b1aa5fd5c00e81c93}{pageNumber} >= (\textcolor{keywordtype}{int})d->\hyperlink{classPageViewPrivate_ad90c795dead9abfaa5818a94e00435bc}{items}.count() )
3084                 newViewport.\hyperlink{classOkular_1_1DocumentViewport_a122674d4a493e79b1aa5fd5c00e81c93}{pageNumber} = d->\hyperlink{classPageViewPrivate_ad90c795dead9abfaa5818a94e00435bc}{items}.count() - 1;
3085             newViewport.\hyperlink{classOkular_1_1DocumentViewport_a054f24bcba44b795a3671ac53693ff45}{rePos}.\hyperlink{classOkular_1_1DocumentViewport_a6dddb31dbc72d7fb3efe094d840d8692}{enabled} = \textcolor{keyword}{true};
3086             newViewport.\hyperlink{classOkular_1_1DocumentViewport_a054f24bcba44b795a3671ac53693ff45}{rePos}.\hyperlink{classOkular_1_1DocumentViewport_aa86271c42d62ef102c6ba570bf40e770}{normalizedY} = 0.0;
3087             d->\hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}->\hyperlink{classOkular_1_1Document_a1afaf8b8b5cb1e715949024fb75bb767}{setViewport}( newViewport );
3088         \}
3089     \}
3090     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( delta >= 120 && !\hyperlink{classOkular_1_1Settings_a6f16a784dc815b9192ce24d054e3f82b}{Okular::Settings::viewContinuous}() && 
      vScroll == verticalScrollBar()->minimum() )
3091     \{
3092         \textcolor{comment}{// go to prev page}
3093         \textcolor{keywordflow}{if} ( d->\hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}->\hyperlink{classOkular_1_1Document_a42ec374d73794bf56d7e7b11f1f56319}{currentPage}() > 0 )
3094         \{
3095             \textcolor{comment}{// more optimized than document->setPrevPage and then move view to bottom}
3096             \hyperlink{classOkular_1_1DocumentViewport}{Okular::DocumentViewport} newViewport = d->
      \hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}->\hyperlink{classOkular_1_1Document_abb8738de0a53aa4a9f552de0e1e749f8}{viewport}();
3097             newViewport.\hyperlink{classOkular_1_1DocumentViewport_a122674d4a493e79b1aa5fd5c00e81c93}{pageNumber} -= viewColumns();
3098             \textcolor{keywordflow}{if} ( newViewport.\hyperlink{classOkular_1_1DocumentViewport_a122674d4a493e79b1aa5fd5c00e81c93}{pageNumber} < 0 )
3099                 newViewport.\hyperlink{classOkular_1_1DocumentViewport_a122674d4a493e79b1aa5fd5c00e81c93}{pageNumber} = 0;
3100             newViewport.\hyperlink{classOkular_1_1DocumentViewport_a054f24bcba44b795a3671ac53693ff45}{rePos}.\hyperlink{classOkular_1_1DocumentViewport_a6dddb31dbc72d7fb3efe094d840d8692}{enabled} = \textcolor{keyword}{true};
3101             newViewport.\hyperlink{classOkular_1_1DocumentViewport_a054f24bcba44b795a3671ac53693ff45}{rePos}.\hyperlink{classOkular_1_1DocumentViewport_aa86271c42d62ef102c6ba570bf40e770}{normalizedY} = 1.0;
3102             d->\hyperlink{classPageViewPrivate_a50645b9853306cffd74e51efb677e5b4}{document}->\hyperlink{classOkular_1_1Document_a1afaf8b8b5cb1e715949024fb75bb767}{setViewport}( newViewport );
3103         \}
3104     \}
3105     \textcolor{keywordflow}{else}
3106         QAbstractScrollArea::wheelEvent( e );
3107 
3108     \hyperlink{classPageView_a0054ba6d2967fa31dea42dcc9d9020b6}{updateCursor}();
3109 \}
\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
ui/\hyperlink{pageview_8h}{pageview.\+h}\item 
ui/\hyperlink{pageview_8cpp}{pageview.\+cpp}\end{DoxyCompactItemize}
