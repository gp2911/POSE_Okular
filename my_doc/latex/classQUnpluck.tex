\hypertarget{classQUnpluck}{\section{Q\+Unpluck Class Reference}
\label{classQUnpluck}\index{Q\+Unpluck@{Q\+Unpluck}}
}


{\ttfamily \#include $<$qunpluck.\+h$>$}

\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classQUnpluck_a43963aee41ae6bd925a68a5e753690d6}{Q\+Unpluck} ()
\item 
\hyperlink{classQUnpluck_aa6ea7bf637427b5e53af0bfc26563828}{$\sim$\+Q\+Unpluck} ()
\item 
bool \hyperlink{classQUnpluck_a0b5ec934d6ce0c877654875fe8a2e72f}{open} (const Q\+String \&file\+Name)
\item 
\hyperlink{classQList}{Q\+List}$<$ Q\+Text\+Document $\ast$ $>$ \hyperlink{classQUnpluck_a41b9cc2f7be551f5f077531259780a0e}{pages} () const 
\item 
\hyperlink{classLink_a53a12cefd3b644472b5e5ec1c3be07c2}{Link\+::\+List} \hyperlink{classQUnpluck_acc1af02ba43c3d84cd85517b4085ac7d}{links} () const 
\item 
\hyperlink{classQMap}{Q\+Map}$<$ Q\+String, Q\+String $>$ \hyperlink{classQUnpluck_a7693166ed831bb1d492395038f3d0186}{infos} () const 
\end{DoxyCompactItemize}


\subsection{Detailed Description}


Definition at line 46 of file qunpluck.\+h.



\subsection{Constructor \& Destructor Documentation}
\hypertarget{classQUnpluck_a43963aee41ae6bd925a68a5e753690d6}{\index{Q\+Unpluck@{Q\+Unpluck}!Q\+Unpluck@{Q\+Unpluck}}
\index{Q\+Unpluck@{Q\+Unpluck}!Q\+Unpluck@{Q\+Unpluck}}
\subsubsection[{Q\+Unpluck}]{\setlength{\rightskip}{0pt plus 5cm}Q\+Unpluck\+::\+Q\+Unpluck (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classQUnpluck_a43963aee41ae6bd925a68a5e753690d6}


Definition at line 109 of file qunpluck.\+cpp.


\begin{DoxyCode}
110     : mDocument( 0 )
111 \{
112 \}
\end{DoxyCode}
\hypertarget{classQUnpluck_aa6ea7bf637427b5e53af0bfc26563828}{\index{Q\+Unpluck@{Q\+Unpluck}!````~Q\+Unpluck@{$\sim$\+Q\+Unpluck}}
\index{````~Q\+Unpluck@{$\sim$\+Q\+Unpluck}!Q\+Unpluck@{Q\+Unpluck}}
\subsubsection[{$\sim$\+Q\+Unpluck}]{\setlength{\rightskip}{0pt plus 5cm}Q\+Unpluck\+::$\sim$\+Q\+Unpluck (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classQUnpluck_aa6ea7bf637427b5e53af0bfc26563828}


Definition at line 114 of file qunpluck.\+cpp.


\begin{DoxyCode}
115 \{
116     mLinks.clear();
117     mNamedTargets.clear();
118     mPages.clear();
119 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\hypertarget{classQUnpluck_a7693166ed831bb1d492395038f3d0186}{\index{Q\+Unpluck@{Q\+Unpluck}!infos@{infos}}
\index{infos@{infos}!Q\+Unpluck@{Q\+Unpluck}}
\subsubsection[{infos}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Q\+Map}$<$Q\+String, Q\+String$>$ Q\+Unpluck\+::infos (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}}\label{classQUnpluck_a7693166ed831bb1d492395038f3d0186}


Definition at line 56 of file qunpluck.\+h.


\begin{DoxyCode}
56 \{ \textcolor{keywordflow}{return} mInfo; \}
\end{DoxyCode}
\hypertarget{classQUnpluck_acc1af02ba43c3d84cd85517b4085ac7d}{\index{Q\+Unpluck@{Q\+Unpluck}!links@{links}}
\index{links@{links}!Q\+Unpluck@{Q\+Unpluck}}
\subsubsection[{links}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Link\+::\+List} Q\+Unpluck\+::links (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}}\label{classQUnpluck_acc1af02ba43c3d84cd85517b4085ac7d}


Definition at line 55 of file qunpluck.\+h.


\begin{DoxyCode}
55 \{ \textcolor{keywordflow}{return} mLinks; \}
\end{DoxyCode}
\hypertarget{classQUnpluck_a0b5ec934d6ce0c877654875fe8a2e72f}{\index{Q\+Unpluck@{Q\+Unpluck}!open@{open}}
\index{open@{open}!Q\+Unpluck@{Q\+Unpluck}}
\subsubsection[{open}]{\setlength{\rightskip}{0pt plus 5cm}bool Q\+Unpluck\+::open (
\begin{DoxyParamCaption}
\item[{const Q\+String \&}]{file\+Name}
\end{DoxyParamCaption}
)}}\label{classQUnpluck_a0b5ec934d6ce0c877654875fe8a2e72f}
Calculate hash map

Convert ids

Definition at line 121 of file qunpluck.\+cpp.


\begin{DoxyCode}
122 \{
123     mLinks.clear();
124     mNamedTargets.clear();
125     mPages.clear();
126 
127     mDocument = \hyperlink{unpluck_8cpp_a38de1e8e97b764ccca414cf11e08dc61}{plkr\_OpenDBFile}( QFile::encodeName( fileName ).
      \hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data}() );
128     \textcolor{keywordflow}{if} ( !mDocument ) \{
129         mErrorString = QObject::tr( \textcolor{stringliteral}{"Unable to open document"} );
130         \textcolor{keywordflow}{return} \textcolor{keyword}{false};
131     \}
132 
133     \textcolor{keywordtype}{bool} status = \textcolor{keyword}{true};
134 
135     mInfo.insert( \textcolor{stringliteral}{"name"}, \hyperlink{unpluck_8cpp_adb65e4c54851ce85120ea90c26b07fe7}{plkr\_GetName}( mDocument ) );
136     mInfo.insert( \textcolor{stringliteral}{"title"}, \hyperlink{unpluck_8cpp_a8d84299a17aad8c4bb6d4767010fbf08}{plkr\_GetTitle}( mDocument ) );
137     mInfo.insert( \textcolor{stringliteral}{"author"}, \hyperlink{unpluck_8cpp_a45d4ff9de35c9fe8a8e36760e71a9992}{plkr\_GetAuthor}( mDocument ) );
138     mInfo.insert( \textcolor{stringliteral}{"time"}, QDateTime::fromTime\_t( \hyperlink{unpluck_8cpp_a4531d6236359aa5e52b27032285d86e1}{plkr\_GetPublicationTime}( mDocument 
      ) ).\hyperlink{namespaceQTest_a861302f3f44f1ae8461d2752a3e3813c}{toString}() );
139 
140     AddRecord( \hyperlink{unpluck_8cpp_a8b6f0c5a537f337b35883623bb57a903}{plkr\_GetHomeRecordID}( mDocument ) );
141 
142     \textcolor{keywordtype}{int} number = GetNextRecordNumber();
143     \textcolor{keywordflow}{while} ( number > 0 ) \{
144         status = TranscribeRecord( number );
145         number = GetNextRecordNumber ();
146     \}
147 
148     \textcolor{comment}{// Iterate over all records again to add those which aren't linked directly}
149     \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{int} i = 1; i < \hyperlink{unpluck_8cpp_a491631322face4b090e9648f6e8f4e88}{plkr\_GetRecordCount}( mDocument ); ++i )
150         AddRecord( \hyperlink{unpluck_8cpp_ad72da860facf37f9ac7b14eedc1d7d77}{plkr\_GetUidForIndex}( mDocument, i ) );
151 
152     number = GetNextRecordNumber();
153     \textcolor{keywordflow}{while} ( number > 0 ) \{
154         status = TranscribeRecord( number );
155         number = GetNextRecordNumber ();
156     \}
157 
158     \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{int} i = 0; i < mRecords.count(); ++i )
159         \textcolor{keyword}{delete} mRecords[ i ];
160 
161     mRecords.clear();
162 
163     \hyperlink{unpluck_8cpp_a22eef807fefa1151ce30759bd0b657fe}{plkr\_CloseDoc}( mDocument );
164 
168     QHash<int, int> pageHash;
169     \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{int} i = 0; i < mContext.count(); ++i )
170         pageHash.insert( mContext[ i ]->recordId, i );
171 
175     \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{int} i = 0; i < mContext.count(); ++i ) \{
176         \hyperlink{classContext}{Context} *context = mContext[ i ];
177         \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{int} j = 0; j < context->\hyperlink{classContext_afe982728eb8a877661685cac947386ba}{images}.count(); ++j ) \{
178             \textcolor{keywordtype}{int} imgNumber = context->\hyperlink{classContext_afe982728eb8a877661685cac947386ba}{images}[ j ];
179             context->\hyperlink{classContext_a54035c81b3259aa6d9fb9d8385afc9d6}{document}->addResource( QTextDocument::ImageResource,
180                                             QUrl( QString( \textcolor{stringliteral}{"%1.jpg"} ).arg( imgNumber ) ),
181                                             mImages[ imgNumber ] );
182         \}
183 
184         mPages.append( context->\hyperlink{classContext_a54035c81b3259aa6d9fb9d8385afc9d6}{document} );
185     \}
186     qDeleteAll( mContext );
187     mContext.clear();
188 
189     \textcolor{comment}{// convert record\_id into page}
190     \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{int} i = 0; i < mLinks.count(); ++i ) \{
191         mLinks[ i ].page = pageHash[ mLinks[ i ].page ];
192         \textcolor{keywordflow}{if} ( mLinks[ i ].url.startsWith( \textcolor{stringliteral}{"page:"} ) ) \{
193             \textcolor{keywordtype}{int} page = mLinks[ i ].url.mid( 5 ).toInt();
194             \hyperlink{classOkular_1_1DocumentViewport}{Okular::DocumentViewport} viewport( pageHash[ page ] );
195             viewport.rePos.normalizedX = 0;
196             viewport.rePos.normalizedY = 0;
197             viewport.rePos.enabled = \textcolor{keyword}{true};
198             viewport.rePos.pos = \hyperlink{classOkular_1_1DocumentViewport_aad7228ed215e5a676cf50dabd4e41552a7a96c06e6321a16c2efccd08095bc59d}{Okular::DocumentViewport::TopLeft};
199             mLinks[ i ].link = \textcolor{keyword}{new} \hyperlink{classOkular_1_1GotoAction}{Okular::GotoAction}( QString(), viewport );
200         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( mLinks[ i ].url.startsWith( \textcolor{stringliteral}{"para:"} ) ) \{
201             \hyperlink{structQPair}{QPair<int, QTextBlock>} \hyperlink{structdrawinf_af73f66288002f0a25c7843a534bf1340}{data} = mNamedTargets[ mLinks[ i ].url ];
202 
203             QTextDocument *document = mPages[ mLinks[ i ].page ];
204 
205             \hyperlink{classOkular_1_1DocumentViewport}{Okular::DocumentViewport} viewport = calculateViewport( document, data.
      second );
206 
207             mLinks[ i ].link = \textcolor{keyword}{new} \hyperlink{classOkular_1_1GotoAction}{Okular::GotoAction}( QString(), viewport );
208         \} \textcolor{keywordflow}{else} \{
209             mLinks[ i ].link = \textcolor{keyword}{new} \hyperlink{classOkular_1_1BrowseAction}{Okular::BrowseAction}( mLinks[ i ].url );
210         \}
211     \}
212 
213     \textcolor{keywordflow}{return} \textcolor{keyword}{true};
214 \}
\end{DoxyCode}
\hypertarget{classQUnpluck_a41b9cc2f7be551f5f077531259780a0e}{\index{Q\+Unpluck@{Q\+Unpluck}!pages@{pages}}
\index{pages@{pages}!Q\+Unpluck@{Q\+Unpluck}}
\subsubsection[{pages}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Q\+List}$<$Q\+Text\+Document$\ast$$>$ Q\+Unpluck\+::pages (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}}\label{classQUnpluck_a41b9cc2f7be551f5f077531259780a0e}


Definition at line 54 of file qunpluck.\+h.


\begin{DoxyCode}
54 \{ \textcolor{keywordflow}{return} mPages; \}
\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
generators/plucker/unpluck/\hyperlink{qunpluck_8h}{qunpluck.\+h}\item 
generators/plucker/unpluck/\hyperlink{qunpluck_8cpp}{qunpluck.\+cpp}\end{DoxyCompactItemize}
