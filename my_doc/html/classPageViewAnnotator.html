<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>GP&#39;s Okular Build: PageViewAnnotator Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">GP&#39;s Okular Build
   </div>
   <div id="projectbrief">POSE 2014</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classPageViewAnnotator.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(13)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="classPageViewAnnotator-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">PageViewAnnotator Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="classPageView.html" title="The main view. Handles zoom and continuous mode.. oh, and page. ">PageView</a> object devoted to annotation creation/handling.  
 <a href="classPageViewAnnotator.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="pageviewannotator_8h_source.html">pageviewannotator.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for PageViewAnnotator:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classPageViewAnnotator.png" usemap="#PageViewAnnotator_map" alt=""/>
  <map id="PageViewAnnotator_map" name="PageViewAnnotator_map">
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac743bc259b4f428105d2c8833c511aab"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPageViewAnnotator.html#ac743bc259b4f428105d2c8833c511aab">PageViewAnnotator</a> (<a class="el" href="classPageView.html">PageView</a> *parent, <a class="el" href="classOkular_1_1Document.html">Okular::Document</a> *storage)</td></tr>
<tr class="separator:ac743bc259b4f428105d2c8833c511aab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41206bc7fe97f80e88e10d10b37e38ef"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPageViewAnnotator.html#a41206bc7fe97f80e88e10d10b37e38ef">~PageViewAnnotator</a> ()</td></tr>
<tr class="separator:a41206bc7fe97f80e88e10d10b37e38ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69ebe26ffe14871bacc3b8bcb7fae14b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPageViewAnnotator.html#a69ebe26ffe14871bacc3b8bcb7fae14b">setEnabled</a> (bool enabled)</td></tr>
<tr class="separator:a69ebe26ffe14871bacc3b8bcb7fae14b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4319944b2ac21b5d93895a9cb691553"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPageViewAnnotator.html#ad4319944b2ac21b5d93895a9cb691553">setTextToolsEnabled</a> (bool enabled)</td></tr>
<tr class="separator:ad4319944b2ac21b5d93895a9cb691553"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cd15f84582b36f2c194530f3a123b69"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPageViewAnnotator.html#a4cd15f84582b36f2c194530f3a123b69">setToolsEnabled</a> (bool enabled)</td></tr>
<tr class="separator:a4cd15f84582b36f2c194530f3a123b69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6fed571534b89dfe7d8bee2e6254b26"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPageViewAnnotator.html#ad6fed571534b89dfe7d8bee2e6254b26">setHidingForced</a> (bool forced)</td></tr>
<tr class="separator:ad6fed571534b89dfe7d8bee2e6254b26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0defd62b058f83eb04dc9d298188ab10"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPageViewAnnotator.html#a0defd62b058f83eb04dc9d298188ab10">hidingWasForced</a> () const </td></tr>
<tr class="separator:a0defd62b058f83eb04dc9d298188ab10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7fcfee911a4eb7811865863d852ffac"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPageViewAnnotator.html#ae7fcfee911a4eb7811865863d852ffac">active</a> () const </td></tr>
<tr class="separator:ae7fcfee911a4eb7811865863d852ffac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b7e1af0db1184b745f6a294d02148c6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPageViewAnnotator.html#a7b7e1af0db1184b745f6a294d02148c6">annotating</a> () const </td></tr>
<tr class="separator:a7b7e1af0db1184b745f6a294d02148c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40f36ee467dc7502940e57bf3cf85f91"><td class="memItemLeft" align="right" valign="top">QCursor&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPageViewAnnotator.html#a40f36ee467dc7502940e57bf3cf85f91">cursor</a> () const </td></tr>
<tr class="separator:a40f36ee467dc7502940e57bf3cf85f91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cd952408052c6d7de1c1111d61266b0"><td class="memItemLeft" align="right" valign="top">QRect&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPageViewAnnotator.html#a6cd952408052c6d7de1c1111d61266b0">routeMouseEvent</a> (QMouseEvent *event, <a class="el" href="classPageViewItem.html">PageViewItem</a> *item)</td></tr>
<tr class="separator:a6cd952408052c6d7de1c1111d61266b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b8f1d3ac283209cd76838b199adee5d"><td class="memItemLeft" align="right" valign="top">QRect&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPageViewAnnotator.html#a5b8f1d3ac283209cd76838b199adee5d">routeTabletEvent</a> (QTabletEvent *event, <a class="el" href="classPageViewItem.html">PageViewItem</a> *item, const QPoint &amp;localOriginInGlobal)</td></tr>
<tr class="separator:a5b8f1d3ac283209cd76838b199adee5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08cf82846db4ea3fee9c3b786ded22cf"><td class="memItemLeft" align="right" valign="top">QRect&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPageViewAnnotator.html#a08cf82846db4ea3fee9c3b786ded22cf">performRouteMouseOrTabletEvent</a> (const <a class="el" href="classAnnotatorEngine.html#a00fb22eb4cb6eafb056f9066031db133">AnnotatorEngine::EventType</a> &amp;eventType, const <a class="el" href="classAnnotatorEngine.html#ac2e3b75e12bacbb6974d15dd53954567">AnnotatorEngine::Button</a> &amp;button, const QPointF &amp;pos, <a class="el" href="classPageViewItem.html">PageViewItem</a> *item)</td></tr>
<tr class="separator:a08cf82846db4ea3fee9c3b786ded22cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2c97f1da1fa61fffb86a6a8118f9dc6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPageViewAnnotator.html#af2c97f1da1fa61fffb86a6a8118f9dc6">routeKeyEvent</a> (QKeyEvent *event)</td></tr>
<tr class="separator:af2c97f1da1fa61fffb86a6a8118f9dc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c9bb2e357dfa97da72ad0e610b4b7f6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPageViewAnnotator.html#a6c9bb2e357dfa97da72ad0e610b4b7f6">routePaints</a> (const QRect &amp;wantedRect) const </td></tr>
<tr class="separator:a6c9bb2e357dfa97da72ad0e610b4b7f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d6faca78c8b002a1b2c30cb8570e47f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPageViewAnnotator.html#a5d6faca78c8b002a1b2c30cb8570e47f">routePaint</a> (QPainter *painter, const QRect &amp;paintRect)</td></tr>
<tr class="separator:a5d6faca78c8b002a1b2c30cb8570e47f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d1a67976c625883662731070416e4df"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPageViewAnnotator.html#a7d1a67976c625883662731070416e4df">reparseConfig</a> ()</td></tr>
<tr class="separator:a7d1a67976c625883662731070416e4df"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a669d7d940ca6b93689724e43fba25c86"><td class="memItemLeft" align="right" valign="top">static QString&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPageViewAnnotator.html#a669d7d940ca6b93689724e43fba25c86">defaultToolName</a> (const QDomElement &amp;toolElement)</td></tr>
<tr class="separator:a669d7d940ca6b93689724e43fba25c86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54eb311605f2eefadaf78fd3b27eef7a"><td class="memItemLeft" align="right" valign="top">static QPixmap&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPageViewAnnotator.html#a54eb311605f2eefadaf78fd3b27eef7a">makeToolPixmap</a> (const QDomElement &amp;toolElement)</td></tr>
<tr class="separator:a54eb311605f2eefadaf78fd3b27eef7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="classPageView.html" title="The main view. Handles zoom and continuous mode.. oh, and page. ">PageView</a> object devoted to annotation creation/handling. </p>
<p><a class="el" href="classPageViewAnnotator.html" title="PageView object devoted to annotation creation/handling. ">PageViewAnnotator</a> is the okular class used for visually creating annotations. It uses internal 'engines' for interacting with user events and attaches the newly created annotation to the document when the creation is complete. In the meanwhile all <a class="el" href="classPageView.html" title="The main view. Handles zoom and continuous mode.. oh, and page. ">PageView</a> events (actually mouse/paint ones) are routed to this class that performs a rough visual representation of what the annotation will become when finished.</p>
<p>m_toolsDefinition is a <a class="el" href="namespaceDOM.html">DOM</a> object that contains Annotations/Engine association for the items placed in the toolbar. The XML is parsed (1) when populating the toolbar and (2)after selecting a toolbar item, in which case an Ann is initialized with the values in the XML and an engine is created to handle that annotation. m_toolsDefinition is created in reparseConfig according to user configuration. </p>

<p>Definition at line <a class="el" href="pageviewannotator_8h_source.html#l00050">50</a> of file <a class="el" href="pageviewannotator_8h_source.html">pageviewannotator.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ac743bc259b4f428105d2c8833c511aab"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PageViewAnnotator::PageViewAnnotator </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPageView.html">PageView</a> *&#160;</td>
          <td class="paramname"><em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classOkular_1_1Document.html">Okular::Document</a> *&#160;</td>
          <td class="paramname"><em>storage</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="classPageViewAnnotator.html" title="PageView object devoted to annotation creation/handling. ">PageViewAnnotator</a> </p>

<p>Definition at line <a class="el" href="pageviewannotator_8cpp_source.html#l00650">650</a> of file <a class="el" href="pageviewannotator_8cpp_source.html">pageviewannotator.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    : QObject( parent ), m_document( storage ), m_pageView( parent ),</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    m_toolBar( 0 ), m_engine( 0 ), m_textToolsEnabled( <span class="keyword">false</span> ), m_toolsEnabled( <span class="keyword">false</span> ),</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    m_continuousMode( <span class="keyword">false</span> ), m_hidingWasForced( <span class="keyword">false</span> ), m_lastToolID( -1 ), m_lockedItem( 0 )</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;{</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    <a class="code" href="classPageViewAnnotator.html#a7d1a67976c625883662731070416e4df">reparseConfig</a>();</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;}</div>
<div class="ttc" id="classPageViewAnnotator_html_a7d1a67976c625883662731070416e4df"><div class="ttname"><a href="classPageViewAnnotator.html#a7d1a67976c625883662731070416e4df">PageViewAnnotator::reparseConfig</a></div><div class="ttdeci">void reparseConfig()</div><div class="ttdef"><b>Definition:</b> <a href="pageviewannotator_8cpp_source.html#l00658">pageviewannotator.cpp:658</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a41206bc7fe97f80e88e10d10b37e38ef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PageViewAnnotator::~PageViewAnnotator </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="pageviewannotator_8cpp_source.html#l00707">707</a> of file <a class="el" href="pageviewannotator_8cpp_source.html">pageviewannotator.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;{</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    <span class="keyword">delete</span> m_engine;</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ae7fcfee911a4eb7811865863d852ffac"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool PageViewAnnotator::active </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="pageviewannotator_8cpp_source.html#l00775">775</a> of file <a class="el" href="pageviewannotator_8cpp_source.html">pageviewannotator.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;{</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    <span class="keywordflow">return</span> m_engine &amp;&amp; m_toolBar;</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7b7e1af0db1184b745f6a294d02148c6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool PageViewAnnotator::annotating </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="pageviewannotator_8cpp_source.html#l00780">780</a> of file <a class="el" href="pageviewannotator_8cpp_source.html">pageviewannotator.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;{</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classPageViewAnnotator.html#ae7fcfee911a4eb7811865863d852ffac">active</a>() &amp;&amp; m_lockedItem;</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;}</div>
<div class="ttc" id="classPageViewAnnotator_html_ae7fcfee911a4eb7811865863d852ffac"><div class="ttname"><a href="classPageViewAnnotator.html#ae7fcfee911a4eb7811865863d852ffac">PageViewAnnotator::active</a></div><div class="ttdeci">bool active() const </div><div class="ttdef"><b>Definition:</b> <a href="pageviewannotator_8cpp_source.html#l00775">pageviewannotator.cpp:775</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a40f36ee467dc7502940e57bf3cf85f91"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QCursor PageViewAnnotator::cursor </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="pageviewannotator_8cpp_source.html#l00785">785</a> of file <a class="el" href="pageviewannotator_8cpp_source.html">pageviewannotator.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;{</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    <span class="keywordflow">return</span> m_engine-&gt;<a class="code" href="classAnnotatorEngine.html#adec4c7612b59357c7b58aa81e3e3b212">cursor</a>();</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;}</div>
<div class="ttc" id="classAnnotatorEngine_html_adec4c7612b59357c7b58aa81e3e3b212"><div class="ttname"><a href="classAnnotatorEngine.html#adec4c7612b59357c7b58aa81e3e3b212">AnnotatorEngine::cursor</a></div><div class="ttdeci">virtual QCursor cursor() const </div><div class="ttdef"><b>Definition:</b> <a href="annotationtools_8cpp_source.html#l00080">annotationtools.cpp:80</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a669d7d940ca6b93689724e43fba25c86"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QString PageViewAnnotator::defaultToolName </td>
          <td>(</td>
          <td class="paramtype">const QDomElement &amp;&#160;</td>
          <td class="paramname"><em>toolElement</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="pageviewannotator_8cpp_source.html#l01075">1075</a> of file <a class="el" href="pageviewannotator_8cpp_source.html">pageviewannotator.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;{</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    <span class="keyword">const</span> QString annotType = toolElement.attribute( <span class="stringliteral">&quot;type&quot;</span> );</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    <span class="keywordflow">if</span> ( annotType == <span class="stringliteral">&quot;ellipse&quot;</span> )</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;        <span class="keywordflow">return</span> i18n( <span class="stringliteral">&quot;Ellipse&quot;</span> );</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( annotType == <span class="stringliteral">&quot;highlight&quot;</span> )</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;        <span class="keywordflow">return</span> i18n( <span class="stringliteral">&quot;Highlighter&quot;</span> );</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( annotType == <span class="stringliteral">&quot;ink&quot;</span> )</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;        <span class="keywordflow">return</span> i18n( <span class="stringliteral">&quot;Freehand Line&quot;</span> );</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( annotType == <span class="stringliteral">&quot;note-inline&quot;</span> )</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;        <span class="keywordflow">return</span> i18n( <span class="stringliteral">&quot;Inline Note&quot;</span> );</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( annotType == <span class="stringliteral">&quot;note-linked&quot;</span> )</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;        <span class="keywordflow">return</span> i18n( <span class="stringliteral">&quot;Pop-up Note&quot;</span> );</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( annotType == <span class="stringliteral">&quot;polygon&quot;</span> )</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;        <span class="keywordflow">return</span> i18n( <span class="stringliteral">&quot;Polygon&quot;</span> );</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( annotType == <span class="stringliteral">&quot;rectangle&quot;</span> )</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;        <span class="keywordflow">return</span> i18n( <span class="stringliteral">&quot;Rectangle&quot;</span> );</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( annotType == <span class="stringliteral">&quot;squiggly&quot;</span> )</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;        <span class="keywordflow">return</span> i18n( <span class="stringliteral">&quot;Squiggle&quot;</span> );</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( annotType == <span class="stringliteral">&quot;stamp&quot;</span> )</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;        <span class="keywordflow">return</span> i18n( <span class="stringliteral">&quot;Stamp&quot;</span> );</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( annotType == <span class="stringliteral">&quot;straight-line&quot;</span> )</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;        <span class="keywordflow">return</span> i18n( <span class="stringliteral">&quot;Straight Line&quot;</span> );</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( annotType == <span class="stringliteral">&quot;strikeout&quot;</span> )</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;        <span class="keywordflow">return</span> i18n( <span class="stringliteral">&quot;Strike out&quot;</span> );</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( annotType == <span class="stringliteral">&quot;underline&quot;</span> )</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;        <span class="keywordflow">return</span> i18n( <span class="stringliteral">&quot;Underline&quot;</span> );</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;        <span class="keywordflow">return</span> QString();</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0defd62b058f83eb04dc9d298188ab10"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool PageViewAnnotator::hidingWasForced </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="pageviewannotator_8cpp_source.html#l00770">770</a> of file <a class="el" href="pageviewannotator_8cpp_source.html">pageviewannotator.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;{</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    <span class="keywordflow">return</span> m_hidingWasForced;</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a54eb311605f2eefadaf78fd3b27eef7a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QPixmap PageViewAnnotator::makeToolPixmap </td>
          <td>(</td>
          <td class="paramtype">const QDomElement &amp;&#160;</td>
          <td class="paramname"><em>toolElement</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="pageviewannotator_8cpp_source.html#l01107">1107</a> of file <a class="el" href="pageviewannotator_8cpp_source.html">pageviewannotator.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;{</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;    QPixmap pixmap( 32, 32 );</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    <span class="keyword">const</span> QString annotType = toolElement.attribute( <span class="stringliteral">&quot;type&quot;</span> );</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;    <span class="comment">// Load base pixmap. We&#39;ll draw on top of it</span></div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    pixmap.load( KStandardDirs::locate( <span class="stringliteral">&quot;data&quot;</span>, <span class="stringliteral">&quot;okular/pics/tool-base-okular.png&quot;</span> ) );</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;    <span class="comment">/* Parse color, innerColor and icon (if present) */</span></div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    QColor engineColor, innerColor;</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    QString icon;</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    QDomNodeList engineNodeList = toolElement.elementsByTagName( <span class="stringliteral">&quot;engine&quot;</span> );</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;    <span class="keywordflow">if</span> ( engineNodeList.size() &gt; 0 )</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;    {</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;        QDomElement engineEl = engineNodeList.item( 0 ).toElement();</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;        <span class="keywordflow">if</span> ( !engineEl.isNull() &amp;&amp; engineEl.hasAttribute( <span class="stringliteral">&quot;color&quot;</span> ) )</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;            engineColor = QColor( engineEl.attribute( <span class="stringliteral">&quot;color&quot;</span> ) );</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    }</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    QDomNodeList annotationNodeList = toolElement.elementsByTagName( <span class="stringliteral">&quot;annotation&quot;</span> );</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    <span class="keywordflow">if</span> ( annotationNodeList.size() &gt; 0 )</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    {</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;        QDomElement annotationEl = annotationNodeList.item( 0 ).toElement();</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;        <span class="keywordflow">if</span> ( !annotationEl.isNull() &amp;&amp; annotationEl.hasAttribute( <span class="stringliteral">&quot;innerColor&quot;</span> ) )</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;            innerColor = QColor( annotationEl.attribute( <span class="stringliteral">&quot;innerColor&quot;</span> ) );</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;        <span class="keywordflow">if</span> ( !annotationEl.isNull() &amp;&amp; annotationEl.hasAttribute( <span class="stringliteral">&quot;icon&quot;</span> ) )</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;            icon = annotationEl.attribute( <span class="stringliteral">&quot;icon&quot;</span> );</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;    }</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;    QPainter p( &amp;pixmap );</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    <span class="keywordflow">if</span> ( annotType == <span class="stringliteral">&quot;ellipse&quot;</span> )</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;    {</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;        p.setRenderHint( QPainter::Antialiasing );</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;        <span class="keywordflow">if</span> ( innerColor.isValid() )</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;            p.setBrush( innerColor );</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;        p.setPen( QPen( engineColor, 2 ) );</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;        p.drawEllipse( 2, 7, 21, 14 );</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;    }</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( annotType == <span class="stringliteral">&quot;highlight&quot;</span> )</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;    {</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;        QImage overlay( KStandardDirs::locate( <span class="stringliteral">&quot;data&quot;</span>, <span class="stringliteral">&quot;okular/pics/tool-highlighter-okular-colorizable.png&quot;</span> ) );</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;        QImage colorizedOverlay = overlay;</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;        <a class="code" href="namespaceGuiUtils.html#a989345da409cc84c3636efad1b174cb5">GuiUtils::colorizeImage</a>( colorizedOverlay, engineColor );</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;        p.drawImage( QPoint(0,0), colorizedOverlay ); <span class="comment">// Trail</span></div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;        p.drawImage( QPoint(0,-32), overlay ); <span class="comment">// Text + Shadow (uncolorized)</span></div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;        p.drawImage( QPoint(0,-64), colorizedOverlay ); <span class="comment">// Pen</span></div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;    }</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( annotType == <span class="stringliteral">&quot;ink&quot;</span> )</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;    {</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;        QImage overlay( KStandardDirs::locate( <span class="stringliteral">&quot;data&quot;</span>, <span class="stringliteral">&quot;okular/pics/tool-ink-okular-colorizable.png&quot;</span> ) );</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;        QImage colorizedOverlay = overlay;</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;        <a class="code" href="namespaceGuiUtils.html#a989345da409cc84c3636efad1b174cb5">GuiUtils::colorizeImage</a>( colorizedOverlay, engineColor );</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;        p.drawImage( QPoint(0,0), colorizedOverlay ); <span class="comment">// Trail</span></div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;        p.drawImage( QPoint(0,-32), overlay ); <span class="comment">// Shadow (uncolorized)</span></div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;        p.drawImage( QPoint(0,-64), colorizedOverlay ); <span class="comment">// Pen</span></div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;    }</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( annotType == <span class="stringliteral">&quot;note-inline&quot;</span> )</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;    {</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;        QImage overlay( KStandardDirs::locate( <span class="stringliteral">&quot;data&quot;</span>, <span class="stringliteral">&quot;okular/pics/tool-note-inline-okular-colorizable.png&quot;</span> ) );</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;        <a class="code" href="namespaceGuiUtils.html#a989345da409cc84c3636efad1b174cb5">GuiUtils::colorizeImage</a>( overlay, engineColor );</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;        p.drawImage( QPoint(0,0), overlay );</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    }</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( annotType == <span class="stringliteral">&quot;note-linked&quot;</span> )</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    {</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;        QImage overlay( KStandardDirs::locate( <span class="stringliteral">&quot;data&quot;</span>, <span class="stringliteral">&quot;okular/pics/tool-note-okular-colorizable.png&quot;</span> ) );</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;        <a class="code" href="namespaceGuiUtils.html#a989345da409cc84c3636efad1b174cb5">GuiUtils::colorizeImage</a>( overlay, engineColor );</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;        p.drawImage( QPoint(0,0), overlay );</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;    }</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( annotType == <span class="stringliteral">&quot;polygon&quot;</span> )</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;    {</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;        QPainterPath path;</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;        path.moveTo( 0, 7 );</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;        path.lineTo( 19, 7 );</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;        path.lineTo( 19, 14 );</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;        path.lineTo( 23, 14 );</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;        path.lineTo( 23, 20 );</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;        path.lineTo( 0, 20 );</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;        <span class="keywordflow">if</span> ( innerColor.isValid() )</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;            p.setBrush( innerColor );</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;        p.setPen( QPen( engineColor, 1 ) );</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;        p.drawPath( path );</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;    }</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( annotType == <span class="stringliteral">&quot;rectangle&quot;</span> )</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;    {</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;        p.setRenderHint( QPainter::Antialiasing );</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;        <span class="keywordflow">if</span> ( innerColor.isValid() )</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;            p.setBrush( innerColor );</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;        p.setPen( QPen( engineColor, 2 ) );</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;        p.drawRect( 2, 7, 21, 14 );</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;    }</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( annotType == <span class="stringliteral">&quot;squiggly&quot;</span> )</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;    {</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;        QPen pen( engineColor, 1 );</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;        pen.setDashPattern( QVector&lt;qreal&gt;() &lt;&lt; 1 &lt;&lt; 1 );</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;        p.setPen( pen );</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;        p.drawLine( 1, 13, 16, 13 );</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;        p.drawLine( 2, 14, 15, 14 );</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;        p.drawLine( 0, 20, 19, 20 );</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;        p.drawLine( 1, 21, 18, 21 );</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    }</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( annotType == <span class="stringliteral">&quot;stamp&quot;</span> )</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    {</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;        QPixmap stamp = <a class="code" href="namespaceGuiUtils.html#a5ba797636890ba5fbc39db6a092f4bd5">GuiUtils::loadStamp</a>( icon, QSize( 16, 16 ) );</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;        p.setRenderHint( QPainter::Antialiasing );</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;        p.drawPixmap( 16, 14, stamp );</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;    }</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( annotType == <span class="stringliteral">&quot;straight-line&quot;</span> )</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;    {</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;        QPainterPath path;</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;        path.moveTo( 1, 8 );</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;        path.lineTo( 20, 8 );</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;        path.lineTo( 1, 27 );</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;        path.lineTo( 20, 27 );</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;        p.setRenderHint( QPainter::Antialiasing );</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;        p.setPen( QPen( engineColor, 1 ) );</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;        p.drawPath( path ); <span class="comment">// TODO To be discussed: This is not a straight line!</span></div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    }</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( annotType == <span class="stringliteral">&quot;strikeout&quot;</span> )</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;    {</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;        p.setPen( QPen( engineColor, 1 ) );</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;        p.drawLine( 1, 10, 16, 10 );</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;        p.drawLine( 0, 17, 19, 17 );</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    }</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( annotType == <span class="stringliteral">&quot;underline&quot;</span> )</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;    {</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;        p.setPen( QPen( engineColor, 1 ) );</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;        p.drawLine( 1, 13, 16, 13 );</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;        p.drawLine( 0, 20, 19, 20 );</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;    }</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;    {</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;        <span class="comment">/* Unrecognized annotation type -- It shouldn&#39;t happen */</span></div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;        p.setPen( QPen( engineColor ) );</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;        p.drawText( QPoint(20, 31), <span class="stringliteral">&quot;?&quot;</span> );</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    }</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;    <span class="keywordflow">return</span> pixmap;</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;}</div>
<div class="ttc" id="namespaceGuiUtils_html_a5ba797636890ba5fbc39db6a092f4bd5"><div class="ttname"><a href="namespaceGuiUtils.html#a5ba797636890ba5fbc39db6a092f4bd5">GuiUtils::loadStamp</a></div><div class="ttdeci">QPixmap loadStamp(const QString &amp;_name, const QSize &amp;size, int iconSize)</div><div class="ttdef"><b>Definition:</b> <a href="guiutils_8cpp_source.html#l00162">guiutils.cpp:162</a></div></div>
<div class="ttc" id="namespaceGuiUtils_html_a989345da409cc84c3636efad1b174cb5"><div class="ttname"><a href="namespaceGuiUtils.html#a989345da409cc84c3636efad1b174cb5">GuiUtils::colorizeImage</a></div><div class="ttdeci">void colorizeImage(QImage &amp;grayImage, const QColor &amp;color, unsigned int destAlpha)</div><div class="ttdef"><b>Definition:</b> <a href="guiutils_8cpp_source.html#l00237">guiutils.cpp:237</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a08cf82846db4ea3fee9c3b786ded22cf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QRect PageViewAnnotator::performRouteMouseOrTabletEvent </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classAnnotatorEngine.html#a00fb22eb4cb6eafb056f9066031db133">AnnotatorEngine::EventType</a> &amp;&#160;</td>
          <td class="paramname"><em>eventType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classAnnotatorEngine.html#ac2e3b75e12bacbb6974d15dd53954567">AnnotatorEngine::Button</a> &amp;&#160;</td>
          <td class="paramname"><em>button</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QPointF &amp;&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classPageViewItem.html">PageViewItem</a> *&#160;</td>
          <td class="paramname"><em>item</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="pageviewannotator_8cpp_source.html#l00790">790</a> of file <a class="el" href="pageviewannotator_8cpp_source.html">pageviewannotator.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;{</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    <span class="comment">// if the right mouse button was pressed, we simply do nothing. In this way, we are still editing the annotation</span></div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    <span class="comment">// and so this function will receive and process the right mouse button release event too. If we detach now the annotation tool,</span></div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    <span class="comment">// the release event will be processed by the PageView class which would create the annotation property widget, and we do not want this.</span></div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    <span class="keywordflow">if</span> ( button == <a class="code" href="classAnnotatorEngine.html#ac2e3b75e12bacbb6974d15dd53954567a8c25b27f7e32e09ea9767d465de328a9">AnnotatorEngine::Right</a> &amp;&amp; eventType == <a class="code" href="classAnnotatorEngine.html#a00fb22eb4cb6eafb056f9066031db133a7f6f77a85d31dc6afd375db9a53d5069">AnnotatorEngine::Press</a> )</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;        <span class="keywordflow">return</span> QRect();</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( button == <a class="code" href="classAnnotatorEngine.html#ac2e3b75e12bacbb6974d15dd53954567a8c25b27f7e32e09ea9767d465de328a9">AnnotatorEngine::Right</a> &amp;&amp; eventType == <a class="code" href="classAnnotatorEngine.html#a00fb22eb4cb6eafb056f9066031db133ac80dbad38d0461d9e546aa694c2abc1c">AnnotatorEngine::Release</a> )</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    {</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;        detachAnnotation();</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;        <span class="keywordflow">return</span> QRect();</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    }</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    <span class="comment">// 1. lock engine to current item</span></div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    <span class="keywordflow">if</span> ( !m_lockedItem &amp;&amp; eventType == <a class="code" href="classAnnotatorEngine.html#a00fb22eb4cb6eafb056f9066031db133a7f6f77a85d31dc6afd375db9a53d5069">AnnotatorEngine::Press</a> )</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    {</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;        m_lockedItem = item;</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;        m_engine-&gt;<a class="code" href="classAnnotatorEngine.html#aae312cd62f6fd4c9997a655d18de7385">setItem</a>( m_lockedItem );</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    }</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    <span class="keywordflow">if</span> ( !m_lockedItem ) {</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        <span class="keywordflow">return</span> QRect();</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    }</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    <span class="comment">// find out normalized mouse coords inside current item</span></div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    <span class="keyword">const</span> QRect &amp; itemRect = m_lockedItem-&gt;<a class="code" href="classPageViewItem.html#a5d2e73a003f65b4e95c0c21b1698f835">uncroppedGeometry</a>();</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    <span class="keyword">const</span> QPointF eventPos = m_pageView-&gt;<a class="code" href="classPageView.html#a7f432d3d6d05c69b568ad66a9c232cd7">contentAreaPoint</a>( pos );</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span> nX = qBound( 0.0, m_lockedItem-&gt;<a class="code" href="classPageViewItem.html#ac8c32541cbae1efd5b4ab54f0a4b4576">absToPageX</a>( eventPos.x() ), 1.0 );</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span> nY = qBound( 0.0, m_lockedItem-&gt;<a class="code" href="classPageViewItem.html#afdbba9ce015155c0e655efbb23e5d13b">absToPageY</a>( eventPos.y() ), 1.0 );</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    QRect modifiedRect;</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    <span class="comment">// 2. use engine to perform operations</span></div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    <span class="keyword">const</span> QRect paintRect = m_engine-&gt;<a class="code" href="classAnnotatorEngine.html#acca989fc60f9a6c20ed2518fafa8774e">event</a>( eventType, button, nX, nY, itemRect.width(), itemRect.height(), m_lockedItem-&gt;<a class="code" href="classPageViewItem.html#a5c512d95e5563e8d19d1fb3d93dafc31">page</a>() );</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    <span class="comment">// 3. update absolute extents rect and send paint event(s)</span></div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    <span class="keywordflow">if</span> ( paintRect.isValid() )</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    {</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;        <span class="comment">// 3.1. unite old and new painting regions</span></div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;        QRegion compoundRegion( m_lastDrawnRect );</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;        m_lastDrawnRect = paintRect;</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;        m_lastDrawnRect.translate( itemRect.left(), itemRect.top() );</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;        <span class="comment">// 3.2. decompose paint region in rects and send paint events</span></div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;        <span class="keyword">const</span> QVector&lt;QRect&gt; rects = compoundRegion.unite( m_lastDrawnRect ).rects();</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;        <span class="keyword">const</span> QPoint areaPos = m_pageView-&gt;<a class="code" href="classPageView.html#a055aaf87367b9ad0dcfcdc3d2f5ff619">contentAreaPosition</a>();</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;        <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; rects.count(); i++ )</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;            m_pageView-&gt;viewport()-&gt;update( rects[i].translated( -areaPos ) );</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;        modifiedRect = compoundRegion.boundingRect() | m_lastDrawnRect;</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    }</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    <span class="comment">// 4. if engine has finished, apply Annotation to the page</span></div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    <span class="keywordflow">if</span> ( m_engine-&gt;<a class="code" href="classAnnotatorEngine.html#a54e1ac7803149f1a94490e5511ad3deb">creationCompleted</a>() )</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    {</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;        <span class="comment">// apply engine data to the Annotation&#39;s and reset engine</span></div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;        <a class="code" href="classQList.html">QList&lt; Okular::Annotation* &gt;</a> annotations = m_engine-&gt;<a class="code" href="classAnnotatorEngine.html#a50455740303878b891195132df27a2ab">end</a>();</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;        <span class="comment">// attach the newly filled annotations to the page</span></div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;        <span class="keywordflow">foreach</span> ( <a class="code" href="classOkular_1_1Annotation.html">Okular::Annotation</a> * annotation, annotations )</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;        {</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;            <span class="keywordflow">if</span> ( !annotation ) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;            annotation-&gt;<a class="code" href="classOkular_1_1Annotation.html#a7b8e97b104dc0b8cd8ff95253d95e167">setCreationDate</a>( QDateTime::currentDateTime() );</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;            annotation-&gt;<a class="code" href="classOkular_1_1Annotation.html#a1ea7e94039a7dc3dce500ae96817b30d">setModificationDate</a>( QDateTime::currentDateTime() );</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;            annotation-&gt;<a class="code" href="classOkular_1_1Annotation.html#ac67827a495bc3ca9fc91c82590c7bf35">setAuthor</a>( <a class="code" href="classOkular_1_1Settings.html#ae643409dda70c22852664fa4677896a1">Okular::Settings::identityAuthor</a>() );</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;            m_document-&gt;<a class="code" href="classOkular_1_1Document.html#a803b34cf352157810214667438f22210">addPageAnnotation</a>( m_lockedItem-&gt;<a class="code" href="classPageViewItem.html#ad75aab4c1ffd842bd5d54c0cfe84d1bf">pageNumber</a>(), annotation );</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;            </div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;            <span class="keywordflow">if</span> ( annotation-&gt;<a class="code" href="classOkular_1_1Annotation.html#a0dc9c020d3887707b383bdf5abb3c1c1">openDialogAfterCreation</a>() )</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;                m_pageView-&gt;<a class="code" href="classPageView.html#aae69bcd4740466f5af216c97f1c12f14">openAnnotationWindow</a>( annotation, m_lockedItem-&gt;<a class="code" href="classPageViewItem.html#ad75aab4c1ffd842bd5d54c0cfe84d1bf">pageNumber</a>() );</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;        }</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;        <span class="keywordflow">if</span> ( m_continuousMode )</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;            slotToolSelected( m_lastToolID );</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;            detachAnnotation();</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    }</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;    <span class="keywordflow">return</span> modifiedRect;</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;}</div>
<div class="ttc" id="classAnnotatorEngine_html_ac2e3b75e12bacbb6974d15dd53954567a8c25b27f7e32e09ea9767d465de328a9"><div class="ttname"><a href="classAnnotatorEngine.html#ac2e3b75e12bacbb6974d15dd53954567a8c25b27f7e32e09ea9767d465de328a9">AnnotatorEngine::Right</a></div><div class="ttdef"><b>Definition:</b> <a href="annotationtools_8h_source.html#l00040">annotationtools.h:40</a></div></div>
<div class="ttc" id="classPageViewItem_html_a5c512d95e5563e8d19d1fb3d93dafc31"><div class="ttname"><a href="classPageViewItem.html#a5c512d95e5563e8d19d1fb3d93dafc31">PageViewItem::page</a></div><div class="ttdeci">const Okular::Page * page() const </div><div class="ttdef"><b>Definition:</b> <a href="pageviewutils_8cpp_source.html#l00059">pageviewutils.cpp:59</a></div></div>
<div class="ttc" id="classOkular_1_1Annotation_html_a1ea7e94039a7dc3dce500ae96817b30d"><div class="ttname"><a href="classOkular_1_1Annotation.html#a1ea7e94039a7dc3dce500ae96817b30d">Okular::Annotation::setModificationDate</a></div><div class="ttdeci">void setModificationDate(const QDateTime &amp;date)</div><div class="ttdef"><b>Definition:</b> <a href="annotations_8cpp_source.html#l00563">annotations.cpp:563</a></div></div>
<div class="ttc" id="classPageViewItem_html_afdbba9ce015155c0e655efbb23e5d13b"><div class="ttname"><a href="classPageViewItem.html#afdbba9ce015155c0e655efbb23e5d13b">PageViewItem::absToPageY</a></div><div class="ttdeci">double absToPageY(double absY) const </div><div class="ttdef"><b>Definition:</b> <a href="pageviewutils_8cpp_source.html#l00114">pageviewutils.cpp:114</a></div></div>
<div class="ttc" id="classPageViewItem_html_a5d2e73a003f65b4e95c0c21b1698f835"><div class="ttname"><a href="classPageViewItem.html#a5d2e73a003f65b4e95c0c21b1698f835">PageViewItem::uncroppedGeometry</a></div><div class="ttdeci">const QRect &amp; uncroppedGeometry() const </div><div class="ttdef"><b>Definition:</b> <a href="pageviewutils_8cpp_source.html#l00084">pageviewutils.cpp:84</a></div></div>
<div class="ttc" id="classAnnotatorEngine_html_acca989fc60f9a6c20ed2518fafa8774e"><div class="ttname"><a href="classAnnotatorEngine.html#acca989fc60f9a6c20ed2518fafa8774e">AnnotatorEngine::event</a></div><div class="ttdeci">virtual QRect event(EventType type, Button button, double nX, double nY, double xScale, double yScale, const Okular::Page *page)=0</div></div>
<div class="ttc" id="classOkular_1_1Settings_html_ae643409dda70c22852664fa4677896a1"><div class="ttname"><a href="classOkular_1_1Settings.html#ae643409dda70c22852664fa4677896a1">Okular::Settings::identityAuthor</a></div><div class="ttdeci">static QString identityAuthor()</div><div class="ttdef"><b>Definition:</b> <a href="active_2components_2settings_8cpp_source.html#l01258">settings.cpp:1258</a></div></div>
<div class="ttc" id="classAnnotatorEngine_html_aae312cd62f6fd4c9997a655d18de7385"><div class="ttname"><a href="classAnnotatorEngine.html#aae312cd62f6fd4c9997a655d18de7385">AnnotatorEngine::setItem</a></div><div class="ttdeci">void setItem(PageViewItem *item)</div><div class="ttdef"><b>Definition:</b> <a href="annotationtools_8h_source.html#l00051">annotationtools.h:51</a></div></div>
<div class="ttc" id="classPageView_html_a7f432d3d6d05c69b568ad66a9c232cd7"><div class="ttname"><a href="classPageView.html#a7f432d3d6d05c69b568ad66a9c232cd7">PageView::contentAreaPoint</a></div><div class="ttdeci">QPoint contentAreaPoint(const QPoint &amp;pos) const </div><div class="ttdef"><b>Definition:</b> <a href="pageview_8cpp_source.html#l00833">pageview.cpp:833</a></div></div>
<div class="ttc" id="classOkular_1_1Annotation_html_ac67827a495bc3ca9fc91c82590c7bf35"><div class="ttname"><a href="classOkular_1_1Annotation.html#ac67827a495bc3ca9fc91c82590c7bf35">Okular::Annotation::setAuthor</a></div><div class="ttdeci">void setAuthor(const QString &amp;author)</div><div class="ttdef"><b>Definition:</b> <a href="annotations_8cpp_source.html#l00527">annotations.cpp:527</a></div></div>
<div class="ttc" id="classAnnotatorEngine_html_a50455740303878b891195132df27a2ab"><div class="ttname"><a href="classAnnotatorEngine.html#a50455740303878b891195132df27a2ab">AnnotatorEngine::end</a></div><div class="ttdeci">virtual QList&lt; Okular::Annotation * &gt; end()=0</div></div>
<div class="ttc" id="classAnnotatorEngine_html_a54e1ac7803149f1a94490e5511ad3deb"><div class="ttname"><a href="classAnnotatorEngine.html#a54e1ac7803149f1a94490e5511ad3deb">AnnotatorEngine::creationCompleted</a></div><div class="ttdeci">bool creationCompleted() const </div><div class="ttdef"><b>Definition:</b> <a href="annotationtools_8h_source.html#l00049">annotationtools.h:49</a></div></div>
<div class="ttc" id="classPageViewItem_html_ad75aab4c1ffd842bd5d54c0cfe84d1bf"><div class="ttname"><a href="classPageViewItem.html#ad75aab4c1ffd842bd5d54c0cfe84d1bf">PageViewItem::pageNumber</a></div><div class="ttdeci">int pageNumber() const </div><div class="ttdef"><b>Definition:</b> <a href="pageviewutils_8cpp_source.html#l00064">pageviewutils.cpp:64</a></div></div>
<div class="ttc" id="classAnnotatorEngine_html_a00fb22eb4cb6eafb056f9066031db133ac80dbad38d0461d9e546aa694c2abc1c"><div class="ttname"><a href="classAnnotatorEngine.html#a00fb22eb4cb6eafb056f9066031db133ac80dbad38d0461d9e546aa694c2abc1c">AnnotatorEngine::Release</a></div><div class="ttdef"><b>Definition:</b> <a href="annotationtools_8h_source.html#l00039">annotationtools.h:39</a></div></div>
<div class="ttc" id="classOkular_1_1Annotation_html_a7b8e97b104dc0b8cd8ff95253d95e167"><div class="ttname"><a href="classOkular_1_1Annotation.html#a7b8e97b104dc0b8cd8ff95253d95e167">Okular::Annotation::setCreationDate</a></div><div class="ttdeci">void setCreationDate(const QDateTime &amp;date)</div><div class="ttdef"><b>Definition:</b> <a href="annotations_8cpp_source.html#l00575">annotations.cpp:575</a></div></div>
<div class="ttc" id="classOkular_1_1Annotation_html"><div class="ttname"><a href="classOkular_1_1Annotation.html">Okular::Annotation</a></div><div class="ttdoc">Annotation struct holds properties shared by all annotations. </div><div class="ttdef"><b>Definition:</b> <a href="annotations_8h_source.html#l00090">annotations.h:90</a></div></div>
<div class="ttc" id="classPageView_html_aae69bcd4740466f5af216c97f1c12f14"><div class="ttname"><a href="classPageView.html#aae69bcd4740466f5af216c97f1c12f14">PageView::openAnnotationWindow</a></div><div class="ttdeci">void openAnnotationWindow(Okular::Annotation *annotation, int pageNumber)</div><div class="ttdef"><b>Definition:</b> <a href="pageview_8cpp_source.html#l00703">pageview.cpp:703</a></div></div>
<div class="ttc" id="classOkular_1_1Document_html_a803b34cf352157810214667438f22210"><div class="ttname"><a href="classOkular_1_1Document.html#a803b34cf352157810214667438f22210">Okular::Document::addPageAnnotation</a></div><div class="ttdeci">void addPageAnnotation(int page, Annotation *annotation)</div><div class="ttdef"><b>Definition:</b> <a href="core_2document_8cpp_source.html#l02970">document.cpp:2970</a></div></div>
<div class="ttc" id="classPageViewItem_html_ac8c32541cbae1efd5b4ab54f0a4b4576"><div class="ttname"><a href="classPageViewItem.html#ac8c32541cbae1efd5b4ab54f0a4b4576">PageViewItem::absToPageX</a></div><div class="ttdeci">double absToPageX(double absX) const </div><div class="ttdef"><b>Definition:</b> <a href="pageviewutils_8cpp_source.html#l00109">pageviewutils.cpp:109</a></div></div>
<div class="ttc" id="classPageView_html_a055aaf87367b9ad0dcfcdc3d2f5ff619"><div class="ttname"><a href="classPageView.html#a055aaf87367b9ad0dcfcdc3d2f5ff619">PageView::contentAreaPosition</a></div><div class="ttdeci">QPoint contentAreaPosition() const </div><div class="ttdef"><b>Definition:</b> <a href="pageview_8cpp_source.html#l00828">pageview.cpp:828</a></div></div>
<div class="ttc" id="classQList_html"><div class="ttname"><a href="classQList.html">QList</a></div><div class="ttdef"><b>Definition:</b> <a href="browserextension_8h_source.html#l00034">browserextension.h:34</a></div></div>
<div class="ttc" id="classOkular_1_1Annotation_html_a0dc9c020d3887707b383bdf5abb3c1c1"><div class="ttname"><a href="classOkular_1_1Annotation.html#a0dc9c020d3887707b383bdf5abb3c1c1">Okular::Annotation::openDialogAfterCreation</a></div><div class="ttdeci">bool openDialogAfterCreation() const </div><div class="ttdef"><b>Definition:</b> <a href="annotations_8cpp_source.html#l00633">annotations.cpp:633</a></div></div>
<div class="ttc" id="classAnnotatorEngine_html_a00fb22eb4cb6eafb056f9066031db133a7f6f77a85d31dc6afd375db9a53d5069"><div class="ttname"><a href="classAnnotatorEngine.html#a00fb22eb4cb6eafb056f9066031db133a7f6f77a85d31dc6afd375db9a53d5069">AnnotatorEngine::Press</a></div><div class="ttdef"><b>Definition:</b> <a href="annotationtools_8h_source.html#l00039">annotationtools.h:39</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7d1a67976c625883662731070416e4df"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PageViewAnnotator::reparseConfig </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="pageviewannotator_8cpp_source.html#l00658">658</a> of file <a class="el" href="pageviewannotator_8cpp_source.html">pageviewannotator.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;{</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    m_items.clear();</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    <span class="comment">// Read tool list from configuration. It&#39;s a list of XML &lt;tool&gt;&lt;/tool&gt; elements</span></div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <span class="keyword">const</span> QStringList userTools = <a class="code" href="classOkular_1_1Settings.html#a514e900aa0ed6dcc26aa1daa2521eaa5">Okular::Settings::annotationTools</a>();</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <span class="comment">// Populate m_toolsDefinition</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    QDomDocument doc;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    m_toolsDefinition = doc.createElement( <span class="stringliteral">&quot;annotatingTools&quot;</span> );</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <span class="keywordflow">foreach</span> ( <span class="keyword">const</span> QString &amp;toolXml, userTools )</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    {</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;        QDomDocument entryParser;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;        <span class="keywordflow">if</span> ( entryParser.setContent( toolXml ) )</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;            m_toolsDefinition.appendChild( doc.importNode( entryParser.documentElement(), true ) );</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;            kWarning() &lt;&lt; <span class="stringliteral">&quot;Skipping malformed tool XML in AnnotationTools setting&quot;</span>;</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    }</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <span class="comment">// Create the AnnotationToolItems from the XML dom tree</span></div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    QDomNode toolDescription = m_toolsDefinition.firstChild();</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <span class="keywordflow">while</span> ( toolDescription.isElement() )</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    {</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        QDomElement toolElement = toolDescription.toElement();</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;        <span class="keywordflow">if</span> ( toolElement.tagName() == <span class="stringliteral">&quot;tool&quot;</span> )</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        {</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;            <a class="code" href="structAnnotationToolItem.html">AnnotationToolItem</a> item;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;            item.<a class="code" href="structAnnotationToolItem.html#a738162ebc807fdfb9d0a7937c34bab01">id</a> = toolElement.attribute(<span class="stringliteral">&quot;id&quot;</span>).toInt();</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;            <span class="keywordflow">if</span> ( toolElement.hasAttribute( <span class="stringliteral">&quot;name&quot;</span> ) )</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;                item.<a class="code" href="structAnnotationToolItem.html#a5a24d93be5ae5fba2c921b205c29b017">text</a> = toolElement.attribute( <span class="stringliteral">&quot;name&quot;</span> );</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;                item.<a class="code" href="structAnnotationToolItem.html#a5a24d93be5ae5fba2c921b205c29b017">text</a> = <a class="code" href="classPageViewAnnotator.html#a669d7d940ca6b93689724e43fba25c86">defaultToolName</a>( toolElement );</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;            item.<a class="code" href="structAnnotationToolItem.html#a329b59ebf0a0064444d34874f41a70cb">pixmap</a> = <a class="code" href="classPageViewAnnotator.html#a54eb311605f2eefadaf78fd3b27eef7a">makeToolPixmap</a>( toolElement );</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;            QDomNode shortcutNode = toolElement.elementsByTagName( <span class="stringliteral">&quot;shortcut&quot;</span> ).item( 0 );</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;            <span class="keywordflow">if</span> ( shortcutNode.isElement() )</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;                item.<a class="code" href="structAnnotationToolItem.html#ad9bf3c20abf0ddfc1d1ff826cd3d3da5">shortcut</a> = shortcutNode.toElement().text();</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;            QDomNodeList engineNodeList = toolElement.elementsByTagName( <span class="stringliteral">&quot;engine&quot;</span> );</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;            <span class="keywordflow">if</span> ( engineNodeList.size() &gt; 0 )</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;            {</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;                QDomElement engineEl = engineNodeList.item( 0 ).toElement();</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;                <span class="keywordflow">if</span> ( !engineEl.isNull() &amp;&amp; engineEl.hasAttribute( <span class="stringliteral">&quot;type&quot;</span> ) )</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;                    item.<a class="code" href="structAnnotationToolItem.html#a7627b1e7036d516cd4bd290a9099a549">isText</a> = engineEl.attribute( <span class="stringliteral">&quot;type&quot;</span> ) == QLatin1String( <span class="stringliteral">&quot;TextSelector&quot;</span> );</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;            }</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;            m_items.push_back( item );</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;        }</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;        toolDescription = toolDescription.nextSibling();</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    }</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;}</div>
<div class="ttc" id="classPageViewAnnotator_html_a54eb311605f2eefadaf78fd3b27eef7a"><div class="ttname"><a href="classPageViewAnnotator.html#a54eb311605f2eefadaf78fd3b27eef7a">PageViewAnnotator::makeToolPixmap</a></div><div class="ttdeci">static QPixmap makeToolPixmap(const QDomElement &amp;toolElement)</div><div class="ttdef"><b>Definition:</b> <a href="pageviewannotator_8cpp_source.html#l01107">pageviewannotator.cpp:1107</a></div></div>
<div class="ttc" id="structAnnotationToolItem_html_a7627b1e7036d516cd4bd290a9099a549"><div class="ttname"><a href="structAnnotationToolItem.html#a7627b1e7036d516cd4bd290a9099a549">AnnotationToolItem::isText</a></div><div class="ttdeci">bool isText</div><div class="ttdef"><b>Definition:</b> <a href="pageviewutils_8h_source.html#l00162">pageviewutils.h:162</a></div></div>
<div class="ttc" id="structAnnotationToolItem_html_ad9bf3c20abf0ddfc1d1ff826cd3d3da5"><div class="ttname"><a href="structAnnotationToolItem.html#ad9bf3c20abf0ddfc1d1ff826cd3d3da5">AnnotationToolItem::shortcut</a></div><div class="ttdeci">QString shortcut</div><div class="ttdef"><b>Definition:</b> <a href="pageviewutils_8h_source.html#l00161">pageviewutils.h:161</a></div></div>
<div class="ttc" id="structAnnotationToolItem_html_a738162ebc807fdfb9d0a7937c34bab01"><div class="ttname"><a href="structAnnotationToolItem.html#a738162ebc807fdfb9d0a7937c34bab01">AnnotationToolItem::id</a></div><div class="ttdeci">int id</div><div class="ttdef"><b>Definition:</b> <a href="pageviewutils_8h_source.html#l00158">pageviewutils.h:158</a></div></div>
<div class="ttc" id="classPageViewAnnotator_html_a669d7d940ca6b93689724e43fba25c86"><div class="ttname"><a href="classPageViewAnnotator.html#a669d7d940ca6b93689724e43fba25c86">PageViewAnnotator::defaultToolName</a></div><div class="ttdeci">static QString defaultToolName(const QDomElement &amp;toolElement)</div><div class="ttdef"><b>Definition:</b> <a href="pageviewannotator_8cpp_source.html#l01075">pageviewannotator.cpp:1075</a></div></div>
<div class="ttc" id="structAnnotationToolItem_html"><div class="ttname"><a href="structAnnotationToolItem.html">AnnotationToolItem</a></div><div class="ttdef"><b>Definition:</b> <a href="pageviewutils_8h_source.html#l00151">pageviewutils.h:151</a></div></div>
<div class="ttc" id="classOkular_1_1Settings_html_a514e900aa0ed6dcc26aa1daa2521eaa5"><div class="ttname"><a href="classOkular_1_1Settings.html#a514e900aa0ed6dcc26aa1daa2521eaa5">Okular::Settings::annotationTools</a></div><div class="ttdeci">static QStringList annotationTools()</div><div class="ttdef"><b>Definition:</b> <a href="active_2components_2settings_8cpp_source.html#l00656">settings.cpp:656</a></div></div>
<div class="ttc" id="structAnnotationToolItem_html_a329b59ebf0a0064444d34874f41a70cb"><div class="ttname"><a href="structAnnotationToolItem.html#a329b59ebf0a0064444d34874f41a70cb">AnnotationToolItem::pixmap</a></div><div class="ttdeci">QPixmap pixmap</div><div class="ttdef"><b>Definition:</b> <a href="pageviewutils_8h_source.html#l00160">pageviewutils.h:160</a></div></div>
<div class="ttc" id="structAnnotationToolItem_html_a5a24d93be5ae5fba2c921b205c29b017"><div class="ttname"><a href="structAnnotationToolItem.html#a5a24d93be5ae5fba2c921b205c29b017">AnnotationToolItem::text</a></div><div class="ttdeci">QString text</div><div class="ttdef"><b>Definition:</b> <a href="pageviewutils_8h_source.html#l00159">pageviewutils.h:159</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af2c97f1da1fa61fffb86a6a8118f9dc6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool PageViewAnnotator::routeKeyEvent </td>
          <td>(</td>
          <td class="paramtype">QKeyEvent *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="pageviewannotator_8cpp_source.html#l00912">912</a> of file <a class="el" href="pageviewannotator_8cpp_source.html">pageviewannotator.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;{</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    <span class="keywordflow">if</span> ( event-&gt;key() == Qt::Key_Escape )</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    {</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;        detachAnnotation();</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    }</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6cd952408052c6d7de1c1111d61266b0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QRect PageViewAnnotator::routeMouseEvent </td>
          <td>(</td>
          <td class="paramtype">QMouseEvent *&#160;</td>
          <td class="paramname"><em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classPageViewItem.html">PageViewItem</a> *&#160;</td>
          <td class="paramname"><em>item</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="pageviewannotator_8cpp_source.html#l00868">868</a> of file <a class="el" href="pageviewannotator_8cpp_source.html">pageviewannotator.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;{</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    <a class="code" href="classAnnotatorEngine.html#a00fb22eb4cb6eafb056f9066031db133">AnnotatorEngine::EventType</a> eventType;</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    <a class="code" href="classAnnotatorEngine.html#ac2e3b75e12bacbb6974d15dd53954567">AnnotatorEngine::Button</a> button;</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    <span class="comment">// figure out the event type and button</span></div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    <a class="code" href="classAnnotatorEngine.html#acabc5b26b0693eb5b29138a7a70f7a39">AnnotatorEngine::decodeEvent</a>( e, &amp;eventType, &amp;button );</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classPageViewAnnotator.html#a08cf82846db4ea3fee9c3b786ded22cf">performRouteMouseOrTabletEvent</a>( eventType, button, e-&gt;posF(), item );</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;}</div>
<div class="ttc" id="classAnnotatorEngine_html_acabc5b26b0693eb5b29138a7a70f7a39"><div class="ttname"><a href="classAnnotatorEngine.html#acabc5b26b0693eb5b29138a7a70f7a39">AnnotatorEngine::decodeEvent</a></div><div class="ttdeci">static void decodeEvent(const QMouseEvent *mouseEvent, EventType *eventType, Button *button)</div><div class="ttdef"><b>Definition:</b> <a href="annotationtools_8cpp_source.html#l00034">annotationtools.cpp:34</a></div></div>
<div class="ttc" id="classPageViewAnnotator_html_a08cf82846db4ea3fee9c3b786ded22cf"><div class="ttname"><a href="classPageViewAnnotator.html#a08cf82846db4ea3fee9c3b786ded22cf">PageViewAnnotator::performRouteMouseOrTabletEvent</a></div><div class="ttdeci">QRect performRouteMouseOrTabletEvent(const AnnotatorEngine::EventType &amp;eventType, const AnnotatorEngine::Button &amp;button, const QPointF &amp;pos, PageViewItem *item)</div><div class="ttdef"><b>Definition:</b> <a href="pageviewannotator_8cpp_source.html#l00790">pageviewannotator.cpp:790</a></div></div>
<div class="ttc" id="classAnnotatorEngine_html_ac2e3b75e12bacbb6974d15dd53954567"><div class="ttname"><a href="classAnnotatorEngine.html#ac2e3b75e12bacbb6974d15dd53954567">AnnotatorEngine::Button</a></div><div class="ttdeci">Button</div><div class="ttdef"><b>Definition:</b> <a href="annotationtools_8h_source.html#l00040">annotationtools.h:40</a></div></div>
<div class="ttc" id="classAnnotatorEngine_html_a00fb22eb4cb6eafb056f9066031db133"><div class="ttname"><a href="classAnnotatorEngine.html#a00fb22eb4cb6eafb056f9066031db133">AnnotatorEngine::EventType</a></div><div class="ttdeci">EventType</div><div class="ttdef"><b>Definition:</b> <a href="annotationtools_8h_source.html#l00039">annotationtools.h:39</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5d6faca78c8b002a1b2c30cb8570e47f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PageViewAnnotator::routePaint </td>
          <td>(</td>
          <td class="paramtype">QPainter *&#160;</td>
          <td class="paramname"><em>painter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QRect &amp;&#160;</td>
          <td class="paramname"><em>paintRect</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="pageviewannotator_8cpp_source.html#l00927">927</a> of file <a class="el" href="pageviewannotator_8cpp_source.html">pageviewannotator.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;{</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;    <span class="comment">// if there&#39;s no locked item, then there&#39;s no decided place to draw on</span></div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    <span class="keywordflow">if</span> ( !m_lockedItem )</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    <span class="comment">// [DEBUG] draw the paint region if enabled</span></div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="classOkular_1_1Settings.html#a2efc0bc534162c18db5c09c91e9b41fb">Okular::Settings::debugDrawAnnotationRect</a>() )</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;        painter-&gt;drawRect( paintRect );</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    <span class="comment">// move painter to current itemGeometry rect</span></div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    <span class="keyword">const</span> QRect &amp; itemRect = m_lockedItem-&gt;<a class="code" href="classPageViewItem.html#a5d2e73a003f65b4e95c0c21b1698f835">uncroppedGeometry</a>();</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    painter-&gt;save();</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    painter-&gt;translate( itemRect.topLeft() );</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    <span class="comment">// TODO: Clip annotation painting to cropped page.</span></div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    <span class="comment">// transform cliprect from absolute to item relative coords</span></div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    QRect annotRect = paintRect.intersect( m_lastDrawnRect );</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    annotRect.translate( -itemRect.topLeft() );</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    <span class="comment">// use current engine for painting (in virtual page coordinates)</span></div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    m_engine-&gt;<a class="code" href="classAnnotatorEngine.html#a71b2e9fcbcca36caadefa79adb99c93f">paint</a>( painter, m_lockedItem-&gt;<a class="code" href="classPageViewItem.html#a240924407ae22bb0489363a6a2d481b9">uncroppedWidth</a>(), m_lockedItem-&gt;<a class="code" href="classPageViewItem.html#af1380fce5dc13a72458ef834c720b128">uncroppedHeight</a>(), annotRect );</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    painter-&gt;restore();</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;}</div>
<div class="ttc" id="classPageViewItem_html_a5d2e73a003f65b4e95c0c21b1698f835"><div class="ttname"><a href="classPageViewItem.html#a5d2e73a003f65b4e95c0c21b1698f835">PageViewItem::uncroppedGeometry</a></div><div class="ttdeci">const QRect &amp; uncroppedGeometry() const </div><div class="ttdef"><b>Definition:</b> <a href="pageviewutils_8cpp_source.html#l00084">pageviewutils.cpp:84</a></div></div>
<div class="ttc" id="classPageViewItem_html_a240924407ae22bb0489363a6a2d481b9"><div class="ttname"><a href="classPageViewItem.html#a240924407ae22bb0489363a6a2d481b9">PageViewItem::uncroppedWidth</a></div><div class="ttdeci">int uncroppedWidth() const </div><div class="ttdef"><b>Definition:</b> <a href="pageviewutils_8cpp_source.html#l00089">pageviewutils.cpp:89</a></div></div>
<div class="ttc" id="classAnnotatorEngine_html_a71b2e9fcbcca36caadefa79adb99c93f"><div class="ttname"><a href="classAnnotatorEngine.html#a71b2e9fcbcca36caadefa79adb99c93f">AnnotatorEngine::paint</a></div><div class="ttdeci">virtual void paint(QPainter *painter, double xScale, double yScale, const QRect &amp;clipRect)=0</div></div>
<div class="ttc" id="classPageViewItem_html_af1380fce5dc13a72458ef834c720b128"><div class="ttname"><a href="classPageViewItem.html#af1380fce5dc13a72458ef834c720b128">PageViewItem::uncroppedHeight</a></div><div class="ttdeci">int uncroppedHeight() const </div><div class="ttdef"><b>Definition:</b> <a href="pageviewutils_8cpp_source.html#l00094">pageviewutils.cpp:94</a></div></div>
<div class="ttc" id="classOkular_1_1Settings_html_a2efc0bc534162c18db5c09c91e9b41fb"><div class="ttname"><a href="classOkular_1_1Settings.html#a2efc0bc534162c18db5c09c91e9b41fb">Okular::Settings::debugDrawAnnotationRect</a></div><div class="ttdeci">static bool debugDrawAnnotationRect()</div><div class="ttdef"><b>Definition:</b> <a href="active_2components_2settings_8cpp_source.html#l00596">settings.cpp:596</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6c9bb2e357dfa97da72ad0e610b4b7f6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool PageViewAnnotator::routePaints </td>
          <td>(</td>
          <td class="paramtype">const QRect &amp;&#160;</td>
          <td class="paramname"><em>wantedRect</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="pageviewannotator_8cpp_source.html#l00922">922</a> of file <a class="el" href="pageviewannotator_8cpp_source.html">pageviewannotator.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;{</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    <span class="keywordflow">return</span> m_engine &amp;&amp; m_toolBar &amp;&amp; wantedRect.intersects( m_lastDrawnRect ) &amp;&amp; m_lockedItem;</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5b8f1d3ac283209cd76838b199adee5d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QRect PageViewAnnotator::routeTabletEvent </td>
          <td>(</td>
          <td class="paramtype">QTabletEvent *&#160;</td>
          <td class="paramname"><em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classPageViewItem.html">PageViewItem</a> *&#160;</td>
          <td class="paramname"><em>item</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QPoint &amp;&#160;</td>
          <td class="paramname"><em>localOriginInGlobal</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="pageviewannotator_8cpp_source.html#l00879">879</a> of file <a class="el" href="pageviewannotator_8cpp_source.html">pageviewannotator.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;{</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    <span class="comment">// Unlike routeMouseEvent, routeTabletEvent must explicitly ignore events it doesn&#39;t care about so that</span></div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    <span class="comment">// the corresponding mouse event will later be delivered.</span></div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    <span class="keywordflow">if</span> ( !item )</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    {</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;        e-&gt;ignore();</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;        <span class="keywordflow">return</span> QRect();</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    }</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    <span class="comment">// We set all tablet events that take place over the annotations toolbar to ignore so that corresponding mouse</span></div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    <span class="comment">// events will be delivered to the toolbar.  However, we still allow the annotations code to handle</span></div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    <span class="comment">// TabletMove and TabletRelease events in case the user is drawing an annotation onto the toolbar.</span></div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    <span class="keyword">const</span> QPoint toolBarPos = m_toolBar-&gt;mapFromGlobal( e-&gt;globalPos() );</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    <span class="keyword">const</span> QRect toolBarRect = m_toolBar-&gt;rect();</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    <span class="keywordflow">if</span> ( toolBarRect.contains( toolBarPos ) )</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    {</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;        e-&gt;ignore();</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;        <span class="keywordflow">if</span> (e-&gt;type() == QEvent::TabletPress)</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;            <span class="keywordflow">return</span> QRect();</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    }</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    <a class="code" href="classAnnotatorEngine.html#a00fb22eb4cb6eafb056f9066031db133">AnnotatorEngine::EventType</a> eventType;</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    <a class="code" href="classAnnotatorEngine.html#ac2e3b75e12bacbb6974d15dd53954567">AnnotatorEngine::Button</a> button;</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    <span class="comment">// figure out the event type and button</span></div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    <a class="code" href="classAnnotatorEngine.html#acabc5b26b0693eb5b29138a7a70f7a39">AnnotatorEngine::decodeEvent</a>( e, &amp;eventType, &amp;button );</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;    <span class="keyword">const</span> QPointF globalPosF = e-&gt;hiResGlobalPos();</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    <span class="keyword">const</span> QPointF localPosF = globalPosF - localOriginInGlobal;</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classPageViewAnnotator.html#a08cf82846db4ea3fee9c3b786ded22cf">performRouteMouseOrTabletEvent</a>( eventType, button, localPosF, item );</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;}</div>
<div class="ttc" id="classAnnotatorEngine_html_acabc5b26b0693eb5b29138a7a70f7a39"><div class="ttname"><a href="classAnnotatorEngine.html#acabc5b26b0693eb5b29138a7a70f7a39">AnnotatorEngine::decodeEvent</a></div><div class="ttdeci">static void decodeEvent(const QMouseEvent *mouseEvent, EventType *eventType, Button *button)</div><div class="ttdef"><b>Definition:</b> <a href="annotationtools_8cpp_source.html#l00034">annotationtools.cpp:34</a></div></div>
<div class="ttc" id="classPageViewAnnotator_html_a08cf82846db4ea3fee9c3b786ded22cf"><div class="ttname"><a href="classPageViewAnnotator.html#a08cf82846db4ea3fee9c3b786ded22cf">PageViewAnnotator::performRouteMouseOrTabletEvent</a></div><div class="ttdeci">QRect performRouteMouseOrTabletEvent(const AnnotatorEngine::EventType &amp;eventType, const AnnotatorEngine::Button &amp;button, const QPointF &amp;pos, PageViewItem *item)</div><div class="ttdef"><b>Definition:</b> <a href="pageviewannotator_8cpp_source.html#l00790">pageviewannotator.cpp:790</a></div></div>
<div class="ttc" id="classAnnotatorEngine_html_ac2e3b75e12bacbb6974d15dd53954567"><div class="ttname"><a href="classAnnotatorEngine.html#ac2e3b75e12bacbb6974d15dd53954567">AnnotatorEngine::Button</a></div><div class="ttdeci">Button</div><div class="ttdef"><b>Definition:</b> <a href="annotationtools_8h_source.html#l00040">annotationtools.h:40</a></div></div>
<div class="ttc" id="classAnnotatorEngine_html_a00fb22eb4cb6eafb056f9066031db133"><div class="ttname"><a href="classAnnotatorEngine.html#a00fb22eb4cb6eafb056f9066031db133">AnnotatorEngine::EventType</a></div><div class="ttdeci">EventType</div><div class="ttdef"><b>Definition:</b> <a href="annotationtools_8h_source.html#l00039">annotationtools.h:39</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a69ebe26ffe14871bacc3b8bcb7fae14b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PageViewAnnotator::setEnabled </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>enabled</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="pageviewannotator_8cpp_source.html#l00712">712</a> of file <a class="el" href="pageviewannotator_8cpp_source.html">pageviewannotator.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;{</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <span class="keywordflow">if</span> ( !on )</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    {</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        <span class="comment">// remove toolBar</span></div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        <span class="keywordflow">if</span> ( m_toolBar )</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;            m_toolBar-&gt;<a class="code" href="classPageViewToolBar.html#a4dcd221e17f4413bf483c8429219a8b1">hideAndDestroy</a>();</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;        m_toolBar = 0;</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;        <span class="comment">// deactivate the active tool, if any</span></div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;        slotToolSelected( -1 );</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    }</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    <span class="comment">// if no tools are defined, don&#39;t show the toolbar</span></div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <span class="keywordflow">if</span> ( !m_toolsDefinition.hasChildNodes() )</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    <span class="comment">// create toolBar</span></div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    <span class="keywordflow">if</span> ( !m_toolBar )</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    {</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;        m_toolBar = <span class="keyword">new</span> <a class="code" href="classPageViewToolBar.html">PageViewToolBar</a>( m_pageView, m_pageView-&gt;viewport() );</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;        m_toolBar-&gt;<a class="code" href="classPageViewToolBar.html#a9f6bb3c8fae4e3b4223c7c6408cfc8d8">setSide</a>( (<a class="code" href="classPageViewToolBar.html#a6410ac0bc9e35fba1314cfd6d7049385">PageViewToolBar::Side</a>)<a class="code" href="classOkular_1_1Settings.html#ac46060432d448d647a00ef303afbf85c">Okular::Settings::editToolBarPlacement</a>() );</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;        m_toolBar-&gt;<a class="code" href="classPageViewToolBar.html#a3ba0856b9d3d0e080d674c80a754d902">setItems</a>( m_items );</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;        m_toolBar-&gt;<a class="code" href="classPageViewToolBar.html#a99a0d8cd773f42adfa5420cbd4fa9535">setToolsEnabled</a>( m_toolsEnabled );</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        m_toolBar-&gt;<a class="code" href="classPageViewToolBar.html#a028996f58918fec0dc4499105a4976c2">setTextToolsEnabled</a>( m_textToolsEnabled );</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;        connect( m_toolBar, SIGNAL(toolSelected(<span class="keywordtype">int</span>)),</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;                <span class="keyword">this</span>, SLOT(slotToolSelected(<span class="keywordtype">int</span>)) );</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        connect( m_toolBar, SIGNAL(orientationChanged(<span class="keywordtype">int</span>)),</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;                <span class="keyword">this</span>, SLOT(slotSaveToolbarOrientation(<span class="keywordtype">int</span>)) );</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;        </div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;        connect( m_toolBar, SIGNAL(buttonDoubleClicked(<span class="keywordtype">int</span>)),</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;                <span class="keyword">this</span>, SLOT(slotToolDoubleClicked(<span class="keywordtype">int</span>)) );</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;        m_toolBar-&gt;setCursor(Qt::ArrowCursor);</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    }</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <span class="comment">// show the toolBar</span></div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    m_toolBar-&gt;<a class="code" href="classPageViewToolBar.html#a4d401e75a2a30b1fd187697128c926cf">showAndAnimate</a>();</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;}</div>
<div class="ttc" id="classPageViewToolBar_html_a4dcd221e17f4413bf483c8429219a8b1"><div class="ttname"><a href="classPageViewToolBar.html#a4dcd221e17f4413bf483c8429219a8b1">PageViewToolBar::hideAndDestroy</a></div><div class="ttdeci">void hideAndDestroy()</div><div class="ttdef"><b>Definition:</b> <a href="pageviewutils_8cpp_source.html#l00630">pageviewutils.cpp:630</a></div></div>
<div class="ttc" id="classPageViewToolBar_html_a99a0d8cd773f42adfa5420cbd4fa9535"><div class="ttname"><a href="classPageViewToolBar.html#a99a0d8cd773f42adfa5420cbd4fa9535">PageViewToolBar::setToolsEnabled</a></div><div class="ttdeci">void setToolsEnabled(bool on)</div><div class="ttdef"><b>Definition:</b> <a href="pageviewutils_8cpp_source.html#l00984">pageviewutils.cpp:984</a></div></div>
<div class="ttc" id="classPageViewToolBar_html"><div class="ttname"><a href="classPageViewToolBar.html">PageViewToolBar</a></div><div class="ttdoc">A widget containing exclusive buttons, that slides in from a side. </div><div class="ttdef"><b>Definition:</b> <a href="pageviewutils_8h_source.html#l00195">pageviewutils.h:195</a></div></div>
<div class="ttc" id="classPageViewToolBar_html_a3ba0856b9d3d0e080d674c80a754d902"><div class="ttname"><a href="classPageViewToolBar.html#a3ba0856b9d3d0e080d674c80a754d902">PageViewToolBar::setItems</a></div><div class="ttdeci">void setItems(const QLinkedList&lt; AnnotationToolItem &gt; &amp;items)</div><div class="ttdef"><b>Definition:</b> <a href="pageviewutils_8cpp_source.html#l00579">pageviewutils.cpp:579</a></div></div>
<div class="ttc" id="classPageViewToolBar_html_a6410ac0bc9e35fba1314cfd6d7049385"><div class="ttname"><a href="classPageViewToolBar.html#a6410ac0bc9e35fba1314cfd6d7049385">PageViewToolBar::Side</a></div><div class="ttdeci">Side</div><div class="ttdef"><b>Definition:</b> <a href="pageviewutils_8h_source.html#l00203">pageviewutils.h:203</a></div></div>
<div class="ttc" id="classPageViewToolBar_html_a9f6bb3c8fae4e3b4223c7c6408cfc8d8"><div class="ttname"><a href="classPageViewToolBar.html#a9f6bb3c8fae4e3b4223c7c6408cfc8d8">PageViewToolBar::setSide</a></div><div class="ttdeci">void setSide(Side side)</div><div class="ttdef"><b>Definition:</b> <a href="pageviewutils_8cpp_source.html#l00604">pageviewutils.cpp:604</a></div></div>
<div class="ttc" id="classPageViewToolBar_html_a028996f58918fec0dc4499105a4976c2"><div class="ttname"><a href="classPageViewToolBar.html#a028996f58918fec0dc4499105a4976c2">PageViewToolBar::setTextToolsEnabled</a></div><div class="ttdeci">void setTextToolsEnabled(bool on)</div><div class="ttdef"><b>Definition:</b> <a href="pageviewutils_8cpp_source.html#l00991">pageviewutils.cpp:991</a></div></div>
<div class="ttc" id="classOkular_1_1Settings_html_ac46060432d448d647a00ef303afbf85c"><div class="ttname"><a href="classOkular_1_1Settings.html#ac46060432d448d647a00ef303afbf85c">Okular::Settings::editToolBarPlacement</a></div><div class="ttdeci">static int editToolBarPlacement()</div><div class="ttdef"><b>Definition:</b> <a href="active_2components_2settings_8cpp_source.html#l00999">settings.cpp:999</a></div></div>
<div class="ttc" id="classPageViewToolBar_html_a4d401e75a2a30b1fd187697128c926cf"><div class="ttname"><a href="classPageViewToolBar.html#a4d401e75a2a30b1fd187697128c926cf">PageViewToolBar::showAndAnimate</a></div><div class="ttdeci">void showAndAnimate()</div><div class="ttdef"><b>Definition:</b> <a href="pageviewutils_8cpp_source.html#l00611">pageviewutils.cpp:611</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad6fed571534b89dfe7d8bee2e6254b26"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PageViewAnnotator::setHidingForced </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>forced</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="pageviewannotator_8cpp_source.html#l00765">765</a> of file <a class="el" href="pageviewannotator_8cpp_source.html">pageviewannotator.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;{</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    m_hidingWasForced = forced;</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad4319944b2ac21b5d93895a9cb691553"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PageViewAnnotator::setTextToolsEnabled </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>enabled</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="pageviewannotator_8cpp_source.html#l00751">751</a> of file <a class="el" href="pageviewannotator_8cpp_source.html">pageviewannotator.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;{</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    m_textToolsEnabled = enabled;</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    <span class="keywordflow">if</span> ( m_toolBar )</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;        m_toolBar-&gt;<a class="code" href="classPageViewToolBar.html#a028996f58918fec0dc4499105a4976c2">setTextToolsEnabled</a>( m_textToolsEnabled );</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;}</div>
<div class="ttc" id="classPageViewToolBar_html_a028996f58918fec0dc4499105a4976c2"><div class="ttname"><a href="classPageViewToolBar.html#a028996f58918fec0dc4499105a4976c2">PageViewToolBar::setTextToolsEnabled</a></div><div class="ttdeci">void setTextToolsEnabled(bool on)</div><div class="ttdef"><b>Definition:</b> <a href="pageviewutils_8cpp_source.html#l00991">pageviewutils.cpp:991</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4cd15f84582b36f2c194530f3a123b69"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PageViewAnnotator::setToolsEnabled </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>enabled</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="pageviewannotator_8cpp_source.html#l00758">758</a> of file <a class="el" href="pageviewannotator_8cpp_source.html">pageviewannotator.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;{</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    m_toolsEnabled = enabled;</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    <span class="keywordflow">if</span> ( m_toolBar )</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;        m_toolBar-&gt;<a class="code" href="classPageViewToolBar.html#a99a0d8cd773f42adfa5420cbd4fa9535">setToolsEnabled</a>( m_toolsEnabled );</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;}</div>
<div class="ttc" id="classPageViewToolBar_html_a99a0d8cd773f42adfa5420cbd4fa9535"><div class="ttname"><a href="classPageViewToolBar.html#a99a0d8cd773f42adfa5420cbd4fa9535">PageViewToolBar::setToolsEnabled</a></div><div class="ttdeci">void setToolsEnabled(bool on)</div><div class="ttdef"><b>Definition:</b> <a href="pageviewutils_8cpp_source.html#l00984">pageviewutils.cpp:984</a></div></div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>ui/<a class="el" href="pageviewannotator_8h_source.html">pageviewannotator.h</a></li>
<li>ui/<a class="el" href="pageviewannotator_8cpp_source.html">pageviewannotator.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classPageViewAnnotator.html">PageViewAnnotator</a></li>
    <li class="footer">Generated on Tue Apr 15 2014 21:16:17 for GP&#39;s Okular Build by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
